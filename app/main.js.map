{"version":3,"file":"main.js","mappings":"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","sources":["./projects/core/src/app/data/data/ad.ts","./projects/core/src/app/data/data/address.ts","./projects/core/src/app/data/data/agreement.ts","./projects/core/src/app/data/data/badge.ts","./projects/core/src/app/data/data/benefit.ts","./projects/core/src/app/data/data/brand.ts","./projects/core/src/app/data/data/category-group.ts","./projects/core/src/app/data/data/category.ts","./projects/core/src/app/data/data/charge.ts","./projects/core/src/app/data/data/condition.ts","./projects/core/src/app/data/data/coupon.ts","./projects/core/src/app/data/data/courier.ts","./projects/core/src/app/data/data/court.ts","./projects/core/src/app/data/data/credit-card.ts","./projects/core/src/app/data/data/crm.ts","./projects/core/src/app/data/data/data.ts","./projects/core/src/app/data/data/directory-state.model.ts","./projects/core/src/app/data/data/discount.ts","./projects/core/src/app/data/data/edit-record.ts","./projects/core/src/app/data/data/edit.ts","./projects/core/src/app/data/data/field.ts","./projects/core/src/app/data/data/file.ts","./projects/core/src/app/data/data/geo.ts","./projects/core/src/app/data/data/group.ts","./projects/core/src/app/data/data/image.ts","./projects/core/src/app/data/data/item-group.ts","./projects/core/src/app/data/data/item.ts","./projects/core/src/app/data/data/kitchen-order-item.ts","./projects/core/src/app/data/data/link.ts","./projects/core/src/app/data/data/location.ts","./projects/core/src/app/data/data/member.ts","./projects/core/src/app/data/data/membership.ts","./projects/core/src/app/data/data/menu.ts","./projects/core/src/app/data/data/offer.ts","./projects/core/src/app/data/data/opening-hours.ts","./projects/core/src/app/data/data/order-item.ts","./projects/core/src/app/data/data/order.ts","./projects/core/src/app/data/data/period.ts","./projects/core/src/app/data/data/pos.ts","./projects/core/src/app/data/data/price-rule.ts","./projects/core/src/app/data/data/print-job.ts","./projects/core/src/app/data/data/printer.ts","./projects/core/src/app/data/data/property.ts","./projects/core/src/app/data/data/publish.ts","./projects/core/src/app/data/data/queue.ts","./projects/core/src/app/data/data/recommendation-group.ts","./projects/core/src/app/data/data/recommendation.ts","./projects/core/src/app/data/data/reward.ts","./projects/core/src/app/data/data/screen.ts","./projects/core/src/app/data/data/seo.ts","./projects/core/src/app/data/data/setting.ts","./projects/core/src/app/data/data/signage.ts","./projects/core/src/app/data/data/slot.ts","./projects/core/src/app/data/data/spot.ts","./projects/core/src/app/data/data/station.ts","./projects/core/src/app/data/data/store.ts","./projects/core/src/app/data/data/tax-rule.ts","./projects/core/src/app/data/data/ticket.ts","./projects/core/src/app/data/data/tile.ts","./projects/core/src/app/data/index.ts","./projects/core/src/app/data/utility/check-format-tool.ts","./projects/core/src/app/data/utility/math-utils.ts","./projects/core/src/app/framework/base/aquery.ts","./projects/core/src/app/framework/base/base-app.ts","./projects/core/src/app/framework/base/base-component.ts","./projects/core/src/app/framework/base/base-context.ts","./projects/core/src/app/framework/base/base-page.ts","./projects/core/src/app/framework/base/base-service.ts","./projects/core/src/app/framework/base/modifier-builder.ts","./projects/core/src/app/framework/base/orderitem-builder.ts","./projects/core/src/app/framework/directives/apply-modal-style.directive.ts","./projects/core/src/app/framework/directives/ng-let.directive.ts","./projects/core/src/app/framework/directives/select-by-keyboard.ts","./projects/core/src/app/framework/directives/throttle-click.ts","./projects/core/src/app/framework/framework.module.ts","./projects/core/src/app/framework/index.ts","./projects/core/src/app/framework/managers/discount-manager.ts","./projects/core/src/app/framework/managers/inventory-manager.ts","./projects/core/src/app/framework/managers/menu-manager.ts","./projects/core/src/app/framework/managers/order-manager.ts","./projects/core/src/app/framework/managers/price-manager.ts","./projects/core/src/app/framework/managers/recommendation-manager.ts","./projects/core/src/app/framework/managers/single-order-manager.ts","./projects/core/src/app/framework/pipes/combine-order-status.pipe.ts","./projects/core/src/app/framework/pipes/custom-filter.pipe.ts","./projects/core/src/app/framework/pipes/date-locale.pipe.ts","./projects/core/src/app/framework/pipes/ewallet.pipe.ts","./projects/core/src/app/framework/pipes/flatten-item.pipe.ts","./projects/core/src/app/framework/pipes/form-error-message.pipe.ts","./projects/core/src/app/framework/pipes/form-translate.pipe.ts","./projects/core/src/app/framework/pipes/getDateStringLabelPipe.ts","./projects/core/src/app/framework/pipes/item-price.pipe.ts","./projects/core/src/app/framework/pipes/number-display.pipe.ts","./projects/core/src/app/framework/pipes/point-display.pipe.ts","./projects/core/src/app/framework/pipes/point-to-cash.pipe.ts","./projects/core/src/app/framework/pipes/price-display.pipe.ts","./projects/core/src/app/framework/pipes/remove-item-variations.pipe.ts","./projects/core/src/app/framework/pipes/resort-or-filter-unlock-item.pipe.ts","./projects/core/src/app/framework/pipes/safe-html.pipe.ts","./projects/core/src/app/framework/pipes/sanitize.pipe.ts","./projects/core/src/app/framework/pipes/sort-by.pipe.ts","./projects/core/src/app/framework/pipes/status-display.pipe.ts","./projects/core/src/app/framework/pipes/sub-store-name-by-id.pipe.ts","./projects/core/src/app/framework/pipes/text-ellipsis.pipe.ts","./projects/core/src/app/framework/pipes/timeStringLabelPipe.ts","./projects/core/src/app/framework/services/analytics.service.ts","./projects/core/src/app/framework/services/api-bridge.service.ts","./projects/core/src/app/framework/services/config.service.ts","./projects/core/src/app/framework/services/context-manager.service.ts","./projects/core/src/app/framework/services/context.service.ts","./projects/core/src/app/framework/services/data.service.ts","./projects/core/src/app/framework/services/dialog.service.ts","./projects/core/src/app/framework/services/directory-context.service.ts","./projects/core/src/app/framework/services/error-handler.service.ts","./projects/core/src/app/framework/services/ewallet.service.ts","./projects/core/src/app/framework/services/location.service.ts","./projects/core/src/app/framework/services/member-context-manager.service.ts","./projects/core/src/app/framework/services/member-context.service.ts","./projects/core/src/app/framework/services/menu.util.ts","./projects/core/src/app/framework/services/order-context.service.ts","./projects/core/src/app/framework/services/pre-order-context.service.ts","./projects/core/src/app/framework/services/storage.service.ts","./projects/core/src/app/framework/services/text-to-speech.service.ts","./projects/core/src/app/framework/services/theme-color.service.ts","./projects/core/src/app/pure/base/page-params.ts","./projects/core/src/app/pure/base/reuse-strategy.ts","./projects/core/src/app/pure/managers/setting-manager.ts","./projects/core/src/app/pure/services/ad.service.ts","./projects/core/src/app/pure/services/base-error-handler.service.ts","./projects/core/src/app/pure/services/common.service.ts","./projects/core/src/app/pure/services/deep-link.service.ts","./projects/core/src/app/pure/services/lazy.service.ts","./projects/core/src/app/pure/services/navigation-menu.service.ts","./projects/core/src/app/pure/services/platform.service.ts","./projects/core/src/app/pure/services/routing.service.ts","./projects/core/src/app/pure/services/sentry.service.ts","./projects/core/src/app/pure/services/subscribe.service.ts","./projects/core/src/app/pure/services/tabbar.service.ts","./projects/core/src/app/pure/services/time.service.ts","./projects/device/src/app/app-routing.module.ts","./projects/device/src/app/app.component.ts","./projects/device/src/app/app.component.html","./projects/device/src/app/app.module.ts","./projects/device/src/app/device/components/ProgressDialogComponent/ProgressDialogComponent.component.ts","./projects/device/src/app/device/components/ProgressDialogComponent/ProgressDialogComponent.component.html","./projects/device/src/app/device/components/alert-dialog/alert-dialog.component.ts","./projects/device/src/app/device/components/alert-dialog/alert-dialog.component.html","./projects/device/src/app/device/components/confirm-dialog/confirm-dialog.component.ts","./projects/device/src/app/device/components/confirm-dialog/confirm-dialog.component.html","./projects/device/src/app/device/device.module.ts","./projects/device/src/app/device/pages/logout-page/logout-page.component.ts","./projects/device/src/app/device/pages/logout-page/logout-page.component.html","./projects/device/src/app/device/pages/setup-page/setup-page.component.ts","./projects/device/src/app/device/pages/setup-page/setup-page.component.html","./projects/device/src/app/device/pages/test-page/test-page.component.ts","./projects/device/src/app/device/pages/test-page/test-page.component.html","./projects/device/src/app/device/root/root.component.ts","./projects/device/src/app/device/root/root.component.html","./projects/device/src/environments/environment.ts","./projects/device/src/main.ts","./projects/merchant/src/app/native/services/native.app.service.ts","./projects/native/src/app/native/services/native-camera.service.ts","./projects/native/src/app/native/services/native-location.service.ts","./projects/native/src/app/native/services/native-notification.service.ts","./projects/native/src/app/native/services/native-platform.service.ts","./projects/native/src/app/native/services/native-storage.service.ts","./projects/ui/src/app/ui/components/empty/empty.component.ts","./projects/ui/src/app/ui/components/grid-list/grid-list.component.ts","./projects/ui/src/app/ui/components/grid-list/grid-list.component.html","./projects/ui/src/app/ui/components/icon/icon.component.ts","./projects/ui/src/app/ui/components/icon/icon.component.html","./projects/ui/src/app/ui/components/img/img.component.ts","./projects/ui/src/app/ui/components/img/img.component.html","./projects/ui/src/app/ui/components/row-list/row-list.component.ts","./projects/ui/src/app/ui/components/row-list/row-list.component.html","./projects/ui/src/app/ui/components/tab-bar/tab-bar.component.ts","./projects/ui/src/app/ui/components/tab-bar/tab-bar.component.html","./projects/ui/src/app/ui/pipes/locale-string.ts","./projects/ui/src/app/ui/ui.module.ts","./projects/ux/src/app/ux/components/favorite-items-button/favorite-items-button.component.ts","./projects/ux/src/app/ux/components/favorite-items-button/favorite-items-button.component.html","./projects/ux/src/app/ux/components/footer/footer.component.ts","./projects/ux/src/app/ux/components/footer/footer.component.html","./projects/ux/src/app/ux/components/language-select/language-select.component.ts","./projects/ux/src/app/ux/components/language-select/language-select.component.html","./projects/ux/src/app/ux/components/nav-bar/nav-bar.component.ts","./projects/ux/src/app/ux/components/nav-bar/nav-bar.component.html","./projects/ux/src/app/ux/components/refresh-button/refresh-button.component.ts","./projects/ux/src/app/ux/components/refresh-button/refresh-button.component.html","./projects/ux/src/app/ux/components/search-button/search-button.component.ts","./projects/ux/src/app/ux/components/search-button/search-button.component.html","./projects/ux/src/app/ux/components/sub-bar/sub-bar.component.ts","./projects/ux/src/app/ux/components/sub-bar/sub-bar.component.html","./projects/ux/src/app/ux/components/swiper/swiper.component.ts","./projects/ux/src/app/ux/components/swiper/swiper.component.html","./projects/ux/src/app/ux/components/user-button/user-button.component.ts","./projects/ux/src/app/ux/components/user-button/user-button.component.html","./projects/ux/src/app/ux/layouts/container-layout/container-layout.component.ts","./projects/ux/src/app/ux/layouts/container-layout/container-layout.component.html","./projects/ux/src/app/ux/ux.module.ts","./node_modules/moment-mini/locale/ sync ^\\.\\/.*$","ignored|/Users/chenpeijue/Desktop/workspace/aigens-mono-universal-app/node_modules/lzutf8/node_modules/readable-stream/lib/internal/streams|util","ignored|/Users/chenpeijue/Desktop/workspace/aigens-mono-universal-app/node_modules/lzutf8/node_modules/readable-stream/lib|util"],"sourcesContent":["import { Data } from './data';\n\n\nexport class Ad extends Data {\n    class: string = \"Ad\";\n    type: string;\n    name: string;\n    images: any;\n    id: string;\n    users: string[];\n    create: any;\n    desc: string;\n    repeat: boolean;\n    stages: string[];\n    trigger: string[];\n    promotionType: any;\n    promotionId: string;\n    start: number;\n    end: number;\n    subtitle: string;\n    modes: string[];\n    links: any;\n    openings: any;\n    brandOnly: boolean;\n    storeIds: any[];\n    priority: number;\n    frequency?: 'always' | 'session' | 'once';\n    devices: string[];\n    periods: string[]; // in console2,it can set ad.periods\n}\n","import { Data } from './data';\n\nexport class Address extends Data {\n    class: string = \"Address\";\n    enabled: boolean;\n    regionCode: string;\n    phone: string;\n    standard: boolean;\n    line: string;\n    type: string;\n    city: string;\n    full: string;\n    name: string;\n    longitude: number;\n    latitude: number;\n    storeId: number;\n    line2: string;\n    id: string;\n    postal: string;\n    note?: string\n    components: Record<string, string>;\n}\n","import { Data } from './data';\n\nexport class Agreement extends Data {\n    class: string = \"Agreement\";\n    id: string;\n    type: string;\n    title: string;\n    body: string;\n    mime: string\n    create: any;\n    frequency: string;\n    modes: string[];\n    usage: string;\n    trigger: string[];\n    passive: boolean = false;\n    url: string;\n}\n","import { Data } from './data';\n\nexport class Badge extends Data {\n    class: string = \"Badge\";\n    tag: string;\n    name: string;\n    id: string;\n    bgColor: string;\n    memberTier?: string[];\n    type: string;\n}\n","import { Data } from './data';\nimport { Condition } from './condition';\nimport { Order } from './order';\nimport { Discount } from './discount';\nimport { OrderItem } from './order-item';\nimport { Item } from './item';\nimport { Category } from './category';\nimport { Store } from './store';\nimport { MathUtils } from '../utility/math-utils';\n\nexport class Benefit extends Data {\n\n    class: string = \"Benefit\";\n    type: string; //amount, percent, offer, gift, unlock\n    amount: number; // discount amount\n    code: string; //gift/unlock code\n    code2: string; //gift/unlock code2\n    max: number = 1; //using times\n    percent: number; //discount percentage\n    fixedamount: number = 0; //discount reduced to a fixed amount\n    applied: boolean = false; //for gift/unlock benefit, when the gift or unlock cat found, applied = true\n    used: number = 0;\n    display: string;\n    display2: string;\n    possibleStoreIds: any[];\n\n    /**clone original benefit as a new benefit object**/\n    static cloneBenefit(ben: Benefit) {\n        let b = new Benefit();\n        if (ben.type) b.type = ben.type;\n        if (ben.amount) b.amount = ben.amount;\n        if (ben.code) b.code = ben.code;\n        if (ben.code2) b.code2 = ben.code2;\n        if (ben.max) b.max = ben.max;\n        if (ben.percent) b.percent = ben.percent;\n        if (ben.applied) b.applied = ben.applied;\n        if (ben.used) b.used = ben.used;\n        if (ben.display) b.display = ben.display;\n        if (ben.display2) b.display2 = ben.display2;\n        if (ben.fixedamount) b.fixedamount = ben.fixedamount;\n\n        return b;\n    }\n\n    /**\n     * @param order, order\n     * @param condition, discount's main condition\n     * @param promo, discount\n     * @param orderitem (optional), used only when discount is of item level\n     * calculate discount amount\n     * */\n    apply(order: Order, condition: Condition, promo: Discount, orderItem: OrderItem = null, tmpCounter = 0, store?: Store, roundPrecision: number = 1): number {\n\n        let discount: number = 0; //discounted amount after applying this benefit\n        switch (this.type) {\n\n            case 'fixedamount': {\n\n                if (condition.type == \"itemgroup\") {\n                    if (promo.available >= this.max) {\n                        break;\n                    }\n                }\n                let count: number = 1;\n\n                if (tmpCounter > count) {\n                    count = tmpCounter;\n                }\n                // if (condition.type === \"total\") {\n                //     //do nothing\n\n                // } else if (condition.level === \"item\" && condition.type !== \"itemgroup_count\") {\n                //     //condition type = item or itemgroup or exitemgroup\n                //     if (orderItem.quantity) count = orderItem.quantity;\n                // }\n\n                let netAmount = 0;\n\n                let mainItem = OrderItem.getMainItem(orderItem);\n\n                if (this.fixedamount < orderItem.total) {\n                    netAmount = (mainItem.price - this.fixedamount);\n                } else {\n                    netAmount = this.fixedamount;\n                }\n                discount = this.round(netAmount * count);\n\n                if (orderItem) {\n                    orderItem.discount = discount;\n                    if (orderItem.discounts && orderItem.discounts.length > 0) {\n                        if (orderItem.discounts.indexOf(promo) === -1) {\n                            orderItem.discounts.push(promo);\n                        }\n                    } else {\n                        orderItem.discounts.push(promo);\n                    }\n                }\n                this.setMainItemDiscounted(orderItem, discount, promo);\n\n                //for itemgroup_count type conditon, discountClaimed will be updated at condition.ts\n                if ((condition.type != \"itemgroup_count\" && condition.type != \"item_count\") && condition.type != \"item\") orderItem[\"discountClaimed\"] += count;\n                promo.available += count;\n\n                break;\n            }\n            case 'amount': {\n                if (this.amount > 0) {\n                    if (condition.type == \"itemgroup\") {\n                        if (promo.available >= this.max) {\n                            break;\n                        }\n                    }\n                    let count: number = 1;\n\n                    if (condition.type === \"total\") {\n                        let total: number = condition.discounted ? order.grandTotal : order.total;\n                        total = condition.applyHandling ? total + order.handling : total;\n                        count = Math.floor(total / condition.amount);\n\n                    } else if (condition.level === \"item\" && condition.type !== \"itemgroup_count\" && condition.type !== \"item_count\") {\n                        //condition type = item or itemgroup or exitemgroup\n                        if (orderItem.quantity) count = orderItem.quantity;\n                    } else if (condition.type === 'itemgroup_count' || condition.type === 'item_count') {\n                        count = tmpCounter;\n                    }\n                    if (count > this.max) count = this.max;\n                    if (this.amount) discount = this.round(this.amount * count);\n                    if (discount > order.grandTotal) {\n                        promo.overpay = this.round(discount - order.grandTotal);\n                    }\n                    if (orderItem) {\n                        orderItem.discount = discount;\n                        if (orderItem.discounts && orderItem.discounts.length > 0) {\n                            if (orderItem.discounts.indexOf(promo) === -1) {\n                                orderItem.discounts.push(promo);\n                            }\n                        } else {\n                            orderItem.discounts.push(promo);\n                        }\n                    }\n\n                    promo.available += count;\n                }\n                break;\n            }\n\n            //split two cases: order level and item level discount\n            //when in item level, promotion group items should be calculate separately\n            case 'percent': {\n                if (this.percent) {\n                    //The precision of discount lookup from currency.\n                    // Check out precision will look on menu settings , otherwise fall back to look currency\n                    // let roundPrecision = orderManager.getPrecision();\n                    //let roundPrecision = orderManager.getStoreGrandTotalPrecision(store.currency);\n                    let count = 1;\n                    if (condition.level == \"order\") {\n\n                        //todo?? not first discount\n                        let discountableTotal = condition.discounted ? order.grandTotal : order.total;\n                        // let discountableTotal = order.total;\n\n                        // TODO: the round is step 0.5 now. Should change round step based on currency?\n                        let temp = promo.conditions.find(condition => condition.traverseItemsDiscountable);\n                        if (temp) {\n                            order.orderitems.forEach(oi => {\n                                let orderItemDiscount = 0;\n                                oi.items.forEach(item => {\n                                    if (!item.discountable) {\n                                        discountableTotal -= item.price * (item.quantity * oi.quantity);\n                                    } else {\n                                        orderItemDiscount += item.price * (item.quantity * oi.quantity);\n                                    }\n                                });\n                                if (oi.discounts && oi.discounts.length > 0) {\n                                    oi.discounts.forEach(dis => {\n                                        if (dis.level && dis.level == \"order\") {\n                                            oi.discount = orderItemDiscount * this.percent / 100.0;\n                                        } else {\n                                            oi.discount += orderItemDiscount * this.percent / 100.0;\n                                        }\n                                    });\n                                } else {\n                                    oi.discount += orderItemDiscount * this.percent / 100.0;\n                                    oi.discounts.push(promo);\n                                }\n                                oi.discount = this.orderItemDiscountRound(oi.discount, roundPrecision, store);\n\n                                if (oi.discounts.indexOf(promo) === -1) {\n                                    oi.discounts.push(promo);\n                                }\n                            });\n                        } else {\n                            // TODO: handle isMainItemOnly case\n                            // traverseItemsDiscountable is false, only apply main item discountable to all items\n                            order.orderitems.forEach(oi => {\n                                let orderItemDiscount = 0\n                                const mainItem = oi.items[0];\n                                const discountable = (mainItem.marker && mainItem.marker == \"alone\" && !mainItem.discountable) || (mainItem.marker !== \"alone\" && !oi.items[0].discountable) || !mainItem.discountable\n                                oi.items.forEach(item => {\n                                    if (discountable) {\n                                        discountableTotal -= item.price * (item.quantity * oi.quantity);\n                                    } else {\n                                        orderItemDiscount += item.price * (item.quantity * oi.quantity);\n                                    }\n                                });\n                                if (oi.discounts && oi.discounts.length > 0) {\n                                    oi.discounts.forEach(dis => {\n                                        if (dis.level && dis.level == \"order\") {\n                                            oi.discount = orderItemDiscount * this.percent / 100.0;\n                                        } else {\n                                            oi.discount += orderItemDiscount * this.percent / 100.0;\n                                        }\n                                    });\n                                } else {\n                                    oi.discount += orderItemDiscount * this.percent / 100.0;\n                                    oi.discounts.push(promo);\n                                }\n                                oi.discount = this.orderItemDiscountRound(oi.discount, roundPrecision, store);\n                                if (oi.discounts.indexOf(promo) === -1) {\n                                    oi.discounts.push(promo);\n                                }\n                            });\n                        }\n                        discount = this.discountRound(discountableTotal, roundPrecision, store)\n\n                    } else if (condition.level == \"item\") {\n                        if (orderItem.quantity) count = Math.min(orderItem.quantity, this.max);\n                        if (tmpCounter > count) {\n                            count = tmpCounter;\n                        }\n                        //Spilt Promotion Group Item\n                        let clone = {...orderItem} as OrderItem;\n\n                        let mainItem = OrderItem.getMainItem(clone);\n\n                        let pgroupItems: Item[] = [];\n\n                        if (mainItem.pgroupId) {\n                            let pgroup = orderItem.groups.find(group => {\n                                return group.id === mainItem.pgroupId;\n                            });\n\n                            pgroupItems = pgroup && pgroup.items;\n                        }\n\n                        // check every item\n                        discount = 0;\n                        if (mainItem.discountable) {\n\n                            let discountableTotal = orderItem.total * count;\n\n                            if (condition.isMainItemOnly()) {\n                                const mainItem = orderItem.items[0];\n\n                                orderItem.items.forEach(item => {\n                                    discountableTotal -= item.price * (item.quantity * orderItem.quantity);\n\n                                });\n                                if (mainItem.discountable) {\n                                    discountableTotal += mainItem.price * (mainItem.quantity * orderItem.quantity);\n                                }\n                            } else {\n                                let target = true;\n                                if(condition.type === 'itemgroup' || condition.type === 'itemgroup_count'){\n                                    target = false;\n                                }\n                                let temp = promo.conditions.find(condition => target === condition.traverseItemsDiscountable);\n                                if (temp) {\n                                    orderItem.items.forEach(item => {\n                                        if ((item.marker && item.marker == \"alone\" && !item.discountable) || (item.marker !== \"alone\" && !orderItem.items[0].discountable) || !item.discountable) {\n                                            discountableTotal -= item.price * (item.quantity * orderItem.quantity);\n                                        }\n                                    });\n                                } else {\n                                    //boolean mainDiscountable = oi.getFlattenItemsWithModifiers().get(0).getDiscountable();\n                                    //\n                                    // \t\t\tfor(Item item: items){\n                                    // \t\t\t\tif(mainDiscountable){\n                                    // \t\t\t\t\ttotal += item.getPrice() * item.getQuantity();\n                                    // \t\t\t\t}\n                                    // \t\t\t}\n                                    const mainItem = orderItem.items[0];\n                                    const mainDiscountable = mainItem.discountable;\n                                    orderItem.items.forEach((item, i) => {\n                                        if (!mainItem.discountable) {\n                                            discountableTotal -= item.price * (item.quantity * orderItem.quantity);\n                                        } else if (mainItem.discountable && i !== 0) {\n                                            discountableTotal -= item.price * (item.quantity * orderItem.quantity);\n                                        }\n                                    });\n                                }\n                            }\n                            discount = this.discountRound(discountableTotal, roundPrecision, store)\n                        }\n\n                        if (pgroupItems != null && pgroupItems.length > 0) {\n                            pgroupItems.forEach(pitem => {\n                                if (!pitem.discountable) {\n                                    discount -= (pitem.price * pitem.quantity * this.percent / 100.00 * count);\n                                }\n                            });\n                        }\n\n                        discount = this.orderItemDiscountRound(discount, roundPrecision, store);\n\n                        orderItem.discount = discount;\n                        if (orderItem.discounts && orderItem.discounts.length > 0) {\n                            if (orderItem.discounts.indexOf(promo) === -1) {\n                                orderItem.discounts.push(promo);\n                            }\n                        } else {\n                            orderItem.discounts.push(promo);\n                        }\n                    }\n                    promo.available += count;\n\n                }\n                break;\n            }\n\n            //TODO NOT YET APPLIED\n            case 'offer': {\n                if (this.code) {\n\n                }\n                break;\n            }\n\n            //for type==gift, only mark applied as true when gift is available\n            case 'gift': {\n                if (this.code) {\n                    let item = this.findGift(promo);\n\n                    this.applied = !!item;\n                }\n                break;\n            }\n\n            //for type==unlock, only mark applied as true when unlock category is available\n            case 'unlock': {\n                if (this.code) {\n                    let cat: Category = this.fetchUnlock(promo);\n\n                    let used = 0;\n                    if (cat !== null) {\n                        order.orderitems.forEach(oi => {\n                            if (oi.categoryId === this.code) {\n                                used += oi.quantity;\n                                console.log(\"used+:\", oi.quantity);\n                            }\n                        });\n                    }\n\n                    console.log(\"used:\", used);\n                    this.used = used;\n                    this.applied = used === 0; //if not yet used then apply this benefit\n\n                }\n                break;\n            }\n\n            default:\n                break;\n        }\n\n        return discount;\n    }\n\n    /**get discount unlocked category**/\n    fetchUnlock(promo: Discount): Category {\n\n        if (promo.unlocks) {\n            for (let unlock of promo.unlocks) {\n                if (unlock.id == this.code) {\n                    return unlock;\n                }\n            }\n        }\n        return null;\n    }\n\n    /**get discount gift**/\n    findGift(promo: Discount): Item {\n\n        if (promo.gifts) {\n            for (let gift of promo.gifts) {\n                if (gift && gift.groups && gift.groups[0] && gift.groups[0].items && gift.groups[0].items.length > 0) {\n                    for (let item of gift.groups[0].items) {\n                        if (item.id == this.code) return item;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    /*getDisplay() {\n        this.display = \"\";\n        if (this.amount) {\n            this.display = \"-\" + this.amount;\n        } else if (this.percent) {\n            this.display = \"-\" + this.percent + \"%\";\n        }\n        return this.display;\n    }*/\n\n    isDiscount(): boolean {\n        return this.type !== \"unlock\";\n        //unlock type always is of lowest priority\n    }\n\n    isItemDiscount(): boolean {\n        switch (this.type) {\n            case \"amount\":\n                return true;\n\n\n            default:\n                break;\n        }\n\n        return false;\n    }\n\n    setMainItemDiscounted(oi: OrderItem, amount, discount: Discount) {\n        if (oi.groups || oi.groups.length == 0) return;\n\n        oi.groups[0].items.forEach(item => {\n            item.discounted = true;\n            item.discount = amount;\n            item.discountCode = discount.backendId;\n            item.discountedId = discount.id;\n        });\n    }\n\n    round(value: number) {\n\n        return MathUtils.round(value, 2);\n    }\n\n    protected toProperty(name: string, value) {\n        return value;\n    }\n\n    /** 有些pos要求每個orderitem有discount，而且要按照他們的計算要求, 所以特别使用了discountRoundMode**/\n    orderItemDiscountRound(value: number, precision: number, store: Store) {\n        if (store && store.menu && store.menu.settings && store.menu.settings.discountRoundMode) {\n            if (store.menu.settings.discountRoundMode === 'rounddown') {\n                return MathUtils.floor(value, precision);\n            } else if (store.menu.settings.discountRoundMode === 'roundup') {\n                return MathUtils.ceil(value, precision);\n            } else if (store.menu.settings.discountRoundMode === 'roundtonear5') {\n                return MathUtils.round(value, precision);\n            } else {\n                return MathUtils.round(value, precision);\n            }\n        } else {\n            return MathUtils.round(value, precision);\n        }\n    }\n\n    discountRound(value: number, precision: number, store: Store): number {\n        let discountRoundMethod\n        let p = precision\n        if (store && store.menu && store.menu.settings) {\n            discountRoundMethod = store.menu.settings.discountRoundMethod\n            if (typeof store.menu.settings.discountRoundingPrecision === 'number') {\n                p = store.menu.settings.discountRoundingPrecision\n            }\n        }\n\n        let roundTo = 10\n        if (p && typeof p === 'number') {\n            if (p === 0) {\n                roundTo = 1\n            } else {\n                roundTo = Math.pow(10, p)\n            }\n        }\n\n        switch (discountRoundMethod) {\n            case 'round2discount':\n                return Math.round(value * this.percent / 100.0 * roundTo) / roundTo;\n            case 'round2net':\n                return value - Math.round(value * (1 - this.percent / 100.0) * roundTo) / roundTo;\n            default:\n                return value * this.percent / 100.0;\n        }\n    }\n\n}\n","import * as moment from 'moment';\nimport { Ad } from './ad';\nimport { Crm } from './crm';\nimport { Data } from './data';\nimport { Link } from './link';\nimport { OpeningHours } from './opening-hours';\nimport { Store } from './store';\n\nexport class Brand extends Data {\n    class: string = \"Brand\";\n    id: number;\n    name: string;\n    images: any;\n    features: string[] = [];\n    colors: {};\n    groupId: number;\n    handle: string;\n    theme: string;\n    themes: any = {};\n    stores: Store[];\n    ads: Ad[];\n    extra: any = {};\n    printName: string;\n    openings: OpeningHours;\n    links: { string: Link };\n    payments: any[] = [];\n    gatag: string;\n    ganame: string;\n    crmId: string;\n    country: string;\n    crm: Crm;\n    timezone: string;\n    orderModeSelection: string;\n    modes: string[];\n    pmsId: number;\n    verificationGroups: any;\n\n\n\n    protected toProperty(name: string, value) {\n\n        if (name == \"stores\") {\n            return Data.toDataArray(Store, value);\n        } else if (name == \"ads\") {\n            return Data.toDataArray(Ad, value);\n        } else if (name == \"crm\") {\n            return Data.toData(Crm, value);\n        }\n        return value;\n    }\n\n    public static hasFeature(brand: Brand, feature: string): boolean {\n        if (brand?.features) {\n            return brand.features.indexOf(feature) >= 0;\n        }\n        return false;\n    }\n\n    public static getBusiness(store: Store, time: Date) {\n\n        var offset = 8;\n\n        if (store.timezone) {\n            offset = Number.parseInt(store.timezone.replace(\"GMT\", \"\"));\n        }\n\n        return moment(time.getTime()).utcOffset(offset).format('YYYY-MM-DD');\n    }\n}\n","import { Data } from './data';\r\nimport { ItemGroup } from './item-group';\r\nimport { OpeningHours } from './opening-hours';\r\nexport class CategoryGroup extends Data {\r\n\r\n    class: string = \"CategoryGroup\";\r\n    id: string;\r\n    name: string;\r\n    published: boolean;\r\n    openings: OpeningHours;\r\n\r\n    protected toProperty(name: string, value) {\r\n\r\n        switch (name) {\r\n\r\n            case \"groups\":\r\n                value = Data.toDataArray(ItemGroup, value);\r\n                break;\r\n            default:\r\n                value = super.toProperty(name, value);\r\n                break;\r\n\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n}","import { Data } from './data';\r\nimport { ItemGroup } from './item-group';\r\nimport { OpeningHours } from './opening-hours';\r\n\r\nexport class Category extends Data {\r\n\r\n    class: string = \"Category\";\r\n    id: string;\r\n    backendId: string;\r\n    name: string;\r\n    images: any;\r\n\r\n    prefix: string;\r\n    groupIds: string[] = [];\r\n    groups: ItemGroup[] = [];\r\n    published: boolean;\r\n    periods: string[];\r\n    start: number;\r\n    end: number;\r\n    dinein: boolean;\r\n    layout: string;\r\n    suspended: boolean;\r\n    openings: OpeningHours;\r\n    users: string[];\r\n    type: string;\r\n    categoryIds: any[];\r\n    modes: string[];\r\n    signage: string;\r\n    cgroupId: string;\r\n    departmentId: string;\r\n    warning: string;\r\n    igMode: string;\r\n    memberTier: string[];\r\n    verificationGroupIds: string[];\r\n\r\n    isWarningViewed = false;\r\n\r\n    protected toProperty(name: string, value) {\r\n\r\n        switch (name) {\r\n\r\n            case \"groups\":\r\n                value = Data.toDataArray(ItemGroup, value);\r\n                break;\r\n            default:\r\n                value = super.toProperty(name, value);\r\n                break;\r\n\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    get displayName(): string {\r\n\r\n        if (this.prefix)\r\n            return this.prefix + this.name;\r\n\r\n        return this.name;\r\n    }\r\n\r\n    static toCategoryData(category: Category): any {\r\n        var json = {};\r\n        if (category) {\r\n            json[\"id\"] = category.id;\r\n            json['name'] = category.name;\r\n            json['type'] = category.type;\r\n        }\r\n        // json[\"cGroupId\"] = category.cGroupId;\r\n        // json[\"departmentId\"] = category.departmentId;\r\n        return json;\r\n    }\r\n}\r\n\r\n","import { Data } from './data';\r\n\r\nexport class Charge extends Data {\r\n    class: string = \"Charge\";\r\n    id: string;\r\n    amount: number;\r\n    type: string;\r\n    create: number;\r\n    currency: string;\r\n    email: string;\r\n    phone: string;\r\n    payeeId: number;\r\n    subtype: string;\r\n    method: string;\r\n    paid: boolean;\r\n    paymentInfo:any;\r\n}","import {Data} from \"./data\";\nimport {Order} from \"./order\";\nimport {Discount} from \"./discount\";\nimport {Benefit} from \"./benefit\";\nimport {OrderItem} from \"./order-item\";\nimport {Store} from \"./store\";\n\n\nexport class Condition extends Data {\n\n    class: string = \"Condition\";\n    type: string;\n    code: string; //item code, itemgroup code, coupon(promotion) code\n    member: boolean; //if member\n    amount: number;\n    applicable: number = 1; //# times of meeting the condition\n    discounted: boolean = false; //used for amount condition\n    display: string;\n    prefix: string; //todo not yet applied\n    level: string; // order/item level\n    tiers: string []; //member levels\n    count: number = 1;// itemgroup count\n    source: string []; //order source, kiosk or mobile\n    secret: string;//for type coupon\n    couponCode: string;//for type coupon\n    couponPoint: number;//for type point\n    applyHandling: boolean;//used for amount condition\n    traverseItemsDiscountable: boolean;//ignore item.discountable?\n    ignoreCase: boolean; // ignore case checking on coupon code\n\n    constructor() {\n        super();\n    }\n\n    /**Clone original condition as a new condition object**/\n    static cloneCondition(cond: Condition) {\n        let c = new Condition();\n\n        if (cond.type) c.type = cond.type;\n        if (cond.code) c.code = cond.code;\n        if (cond.member) c.member = cond.member;\n        if (cond.amount) c.amount = cond.amount;\n        if (cond.applicable) c.applicable = cond.applicable;\n        if (cond.discounted) c.discounted = cond.discounted;\n        if (cond.applyHandling) c.applyHandling = cond.applyHandling;\n        if (cond.display) c.display = cond.display;\n        if (cond.prefix) c.prefix = cond.prefix;\n        if (cond.level) c.level = cond.level;\n        if (cond.tiers) c.tiers = [...cond.tiers];\n        if (cond.source) c.source = cond.source;\n        if (cond.couponPoint) c.couponPoint = cond.couponPoint;\n        if (cond.count) c.count = cond.count;\n        if (cond.traverseItemsDiscountable) c.traverseItemsDiscountable = cond.traverseItemsDiscountable;\n        if (cond.ignoreCase) c.ignoreCase = cond.ignoreCase;\n\n        c.getLevel();\n        c.getDisplay();\n\n\n        return c;\n    }\n\n    /**\n     * applying discount and get discount amount\n     * @param order: current order\n     * @param promo: discount\n     * @param benefit: discount's benefit\n     * **/\n    apply(order: Order, promo: Discount, benefit: Benefit, store?: Store, roundPrecision: number = 1): number {\n        if (this.getLevel() == 'item') {\n            let total = 0;\n\n            if (this.type == \"itemgroup_count\" || this.type == 'item_count') {\n\n                if (benefit.max > 1) {\n                    let benefitMax = benefit.max;\n                    //sort order item with price to set discount to the min value orderitem\n                    order.orderitems.sort((a, b) => a.total - b.total);\n                    let ois: OrderItem[] = [];\n                    ois = JSON.parse(JSON.stringify(order.orderitems));\n                    // find the oi which has the condition code\n                    ois = ois.filter((oi) => {\n                        return this.oiContainsCode(oi)\n                    })\n                    let totalCount = ois.reduce((a, b) => a + b.quantity, 0)\n                    this.applicable = Math.floor(totalCount / this.count);\n                    //set orderitems from min to max\n                    // ois = ois.sort((a, b) =>a.total - b.total);\n                    let count = 0;\n                    order.orderitems.forEach((oi) => {\n                        if (this.oiContainsCode(oi) && count < this.applicable) {\n                            let applyCount;\n                            let discount;\n                            if (((oi.quantity - oi['discountClaimed']) > 0)) {\n                                if ((oi.quantity - oi['discountClaimed']) >= benefitMax) {\n                                    count = benefit.max\n                                    discount = benefit.apply(order, this, promo, oi, benefitMax, store, roundPrecision);\n                                    oi['discountClaimed'] += benefitMax;\n                                    benefitMax = 0;\n                                } else {\n                                    applyCount = (this.applicable - count) < oi.quantity ? (this.applicable - count) : oi.quantity;\n                                    discount = benefit.apply(order, this, promo, oi, applyCount, store, roundPrecision);\n                                    oi['discountClaimed'] += applyCount;\n                                    benefitMax = benefitMax - oi.quantity;\n                                }\n                            }\n                            count += applyCount;\n\n                            //let discount = benefit.apply(order, this, promo, oi, 0, store, orderManager);\n                            total += discount;\n                            if (discount && promo.backendId) {\n                                oi.discountCode = promo.backendId;\n                            }\n                            if (discount || benefit.applied) oi.discountDesc = promo.desc ? promo.desc : promo.name;\n                        }\n                    });\n\n                } else if (benefit.max == 1) {\n\n                    let minOi: OrderItem;\n                    let minTotal;\n\n                    for (let oi of order.orderitems) {\n                        if (this.oiContainsCode(oi) && !this.hasExistingItemLevelDiscount(oi, promo)) {\n                            if ((!minTotal || minTotal > oi.total) && (oi['discountClaimed'] < oi.quantity)) {\n                                minTotal = oi.total;\n                                minOi = oi;\n                            }\n                        }\n                    }\n\n                    if (minOi) {\n                        minOi['discountClaimed']++;\n                    }\n\n                    if (minOi) {\n                        let discount = benefit.apply(order, this, promo, minOi, 1, store, roundPrecision);\n                        total += discount;\n                        if (discount && promo.backendId) {\n                            minOi.discountCode = promo.backendId;\n                        }\n                        if (discount || benefit.applied) minOi.discountDesc = promo.desc ? promo.desc : promo.name;\n                    }\n                }\n\n            } else {\n\n                var benefitMax = benefit.max;\n                order.orderitems.forEach(oi => {\n\n                    if (this.oiContainsCode(oi) && !this.hasExistingItemLevelDiscount(oi, promo)) {\n                        var discount = 0;\n                        if (((oi.quantity - oi['discountClaimed']) > 0) && benefitMax > 0) {\n                            if ((oi.quantity - oi['discountClaimed']) >= benefitMax) {\n                                discount = benefit.apply(order, this, promo, oi, benefitMax, store, roundPrecision);\n                                oi['discountClaimed'] += benefitMax;\n                                benefitMax = 0;\n                            } else {\n                                discount = benefit.apply(order, this, promo, oi, oi.quantity, store, roundPrecision);\n                                oi['discountClaimed'] += oi.quantity;\n                                benefitMax = benefitMax - oi.quantity;\n                            }\n                        }\n\n                        total += discount;\n\n                        if (discount && promo.backendId) {\n                            oi.discountCode = promo.backendId;\n                        }\n                        // oi.discounts.push(promo); //no use\n                        if (discount || benefit.applied) oi.discountDesc = promo.desc ? promo.desc : promo.name;\n                    }\n                });\n            }\n\n            return total;\n\n        } else {\n\n            return benefit.apply(order, this, promo, null, 0, store, roundPrecision);\n        }\n    }\n\n    /**check conditions to use the discount**/\n    isSatisfied(order: Order, promo: Discount): boolean {\n        let ok: boolean = false;\n        if (!promo) {\n            console.log(\"isSatisfied: \", ok);\n            return ok;\n        } \n\n        switch (this.type.toLowerCase()) {\n            //unconditional\n            case 'all': {\n                ok = true;\n                break;\n            }\n\n            case 'coupon': {\n                ok = true;\n                break;\n            }\n\n            case 'guest': {\n                this.applicable = 0;\n                if (!this.member && !order.member) {\n                    ok = true;\n                    this.applicable = 1;\n                }\n                break;\n            }\n\n            //check member type, check member tier\n            case 'member': {\n                this.applicable = 0;\n                if (this.member && order.member && order.member.method != 'device') {\n                    if (this.tiers) {\n                        if (!order.member.tier || this.tiers.indexOf(order.member.tier) < 0) {\n                            ok = false;\n                            break;\n                        }\n                    }\n                    this.applicable = 1;\n                    ok = true;\n                }\n                break;\n            }\n\n            //TODO: maintotal???\n            case 'total':\n            case 'maintotal': {\n                if (this.amount) {\n                    let total = this.discounted ? order.grandTotal : order.total;\n\n                    total = this.applyHandling ? total + order.handling : total;\n                    //unlock benefit special deal\n                    if (!this.discounted && promo.benefits && promo.benefits[0] && promo.benefits[0].type == \"unlock\") {\n                        if (promo.benefits[0].code) {\n                            let code = promo.benefits[0].code;\n                            order.orderitems.forEach(oi => {\n                                if (oi.categoryId == code && oi.quantity > 0) {\n                                    total -= oi.total * oi.quantity;\n                                }\n                            });\n                        }\n                    }\n\n                    if (total >= this.amount) {\n                        this.applicable = Math.floor(total / this.amount);\n                        ok = true;\n                    } else {\n                        this.applicable = 0;\n                    }\n                }\n                break;\n            }\n\n            //ordered mainitem(s)\n            case 'item': {\n                if (this.code) {\n                    this.applicable = 0;\n\n                    if (this.code.toLowerCase() == \"all\") {\n                        ok = true;\n                        order.orderitems.forEach(oi => {\n                            this.applicable += oi.quantity;\n                        });\n                        break;\n                    }\n\n                    let codes: string[] = this.code.split(\",\");\n                    let total = 0;\n                    let minTotal = 0;\n\n                    if (codes && codes.length > 0) {\n\n                        for (let oi of order.orderitems) {\n                            let item = oi.items[0]; //Main Item\n                            if (codes.indexOf(item.id) >= 0) {\n                                if (!this.hasExistingItemLevelDiscount(oi, promo)) {\n                                    total += oi.quantity;\n                                    oi['tmpApplied'] = 0;\n                                    if (oi['tmpApplied'] < oi.quantity && !(minTotal >= this.count)) {\n                                        let q = oi.quantity;\n                                        if ((q - oi['tmpApplied']) > 0) {\n                                            if (q < this.count) {\n                                                oi['tmpApplied'] += q;\n                                                minTotal += q;\n                                            } else {\n                                                oi['tmpApplied'] += this.count;\n                                                minTotal += this.count;\n                                            }\n                                        }\n                                    }\n                                }\n\n                            }\n\n\n                        }\n                        ok = (total >= this.count && minTotal >= this.count);\n\n                        this.applicable = Math.floor(total / this.count);\n                    }\n                }\n                break;\n            }\n\n            //ordered items as Mainitem within specific itemgroup(s)\n            case 'itemgroup': {\n                if (this.code) {\n                    this.applicable = 0;\n\n                    if (this.code.toLowerCase() == \"all\") {\n                        ok = true;\n                        order.orderitems.forEach(oi => {\n                            this.applicable += oi.quantity;\n                        });\n                        break;\n                    }\n\n                    let codes: string[] = this.code.split(\",\");\n\n                    if (codes && codes.length > 0) {\n\n                        for (let oi of order.orderitems) {\n                            if (oi.groups && oi.groups.length > 0) {\n                                let group = oi.groups[0]; //Main itemgroup\n                                if (codes.indexOf(group.id) >= 0) {\n                                    if (!this.hasExistingItemLevelDiscount(oi, promo)) {\n                                        this.applicable += oi.quantity\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    ok = this.applicable > 0;\n                }\n                break;\n            }\n\n            //Purchase X in specific one item group (X > 0)\n            case \"itemgroup_count\": {\n\n                //reset\n                this.applicable = 0;\n\n\n                if (this.code && this.count) {\n                    if (this.code.toLowerCase() == \"all\") {\n                        ok = true;\n                        order.orderitems.forEach(oi => {\n                            this.applicable += oi.quantity;\n                        });\n                        break;\n                    }\n\n                    let codes: string[] = this.code.split(\",\");\n\n                    let total = 0;\n                    let minTotal = 0;\n                    let minOi: OrderItem;\n                    if (codes && codes.length > 0) {\n                        for (let oi of order.orderitems) {\n                        if (oi.groups && oi.groups.length > 0) {\n                            let group = oi.groups[0]; //Main itemgroup\n                            if (codes.indexOf(group.id) >= 0) {\n                                if (!this.hasExistingItemLevelDiscount(oi, promo)) {\n                                    total += oi.quantity;\n                                    oi['tmpApplied'] = 0;\n                                    if (!(minTotal >= this.count)) {\n                                        let q = oi.quantity;\n                                        if ((q - oi['tmpApplied']) > 0) {\n                                            if (q < this.count) {\n                                                oi['tmpApplied'] += q;\n                                                minTotal += q;\n                                            } else {\n                                                oi['tmpApplied'] += this.count;\n                                                minTotal += this.count;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                } else {\n                                    //check for sub item group\n                                    for (let ig of oi.groups) {\n                                        if (codes.indexOf(ig.id) >= 0) {\n                                            if (!this.hasExistingItemLevelDiscount(oi, promo)) {\n                                                //check all item quantity\n                                                for (let item of ig.items) {\n                                                    total += item.quantity;\n                                                }\n                                                if (total >= this.count) {\n                                                    ok = true;\n                                                    this.applicable = Math.floor(total / this.count);\n                                                    break;\n                                                }\n                                            }\n\n                                        }\n                                    }\n\n                                    ok = (total >= this.count && minTotal >= this.count);\n\n                                    this.applicable = Math.floor(total / this.count);\n\n                                    if (ok) {\n                                        return ok;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    ok = (total >= this.count && minTotal >= this.count);\n\n                    this.applicable = Math.floor(total / this.count);\n                }\n                break;\n\n            }\n\n            case 'item_count': {\n                this.applicable = 0;\n\n\n                if (this.code && this.count) {\n                    if (this.code.toLowerCase() == \"all\") {\n                        ok = true;\n                        order.orderitems.forEach(oi => {\n                            this.applicable += oi.quantity;\n                        });\n                        break;\n                    }\n                    let codes: string[] = this.code.split(\",\");\n                    let total = 0;\n                    let minTotal = 0;\n                    if (codes && codes.length > 0) {\n                        for (let oi of order.orderitems) {\n                            let mainitem = OrderItem.getMainItem(oi); //mainitem\n                            if (codes.indexOf(mainitem.id) >= 0) {\n                                if (!this.hasExistingItemLevelDiscount(oi, promo)) {\n                                    total += oi.quantity;\n                                    oi['tmpApplied'] = 0;\n                                    if (!(minTotal >= this.count)) {\n                                        let q = oi.quantity;\n                                        if ((q - oi['tmpApplied']) > 0) {\n                                            if (q < this.count) {\n                                                oi['tmpApplied'] += q;\n                                                minTotal += q;\n                                            } else {\n                                                oi['tmpApplied'] += this.count;\n                                                minTotal += this.count;\n                                            }\n                                        }\n                                    }\n                                }\n\n                            }\n                            //TODO: Check subitems\n                        }\n                    }\n                    ok = (total >= this.count && minTotal >= this.count);\n\n                    this.applicable = Math.floor(total / this.count);\n                }\n                break;\n            }\n\n            //ordered mainitems not under specific group\n            case 'exitemgroup': {\n                let total = 0;\n                this.applicable = 0;\n                ok = true;\n                if (this.code && order.orderitems) {\n\n                    // for (let oi of order.orderitems) {\n                    //     if (oi.groups && oi.groups.length > 0){\n                    //         let group = oi.groups[0]; //Main itemgroup\n                    //         if (this.code !== group.id) total += oi.quantity;\n                    //     }\n                    // }\n\n                    for (let oi of order.orderitems) {\n                        if (oi.groups && oi.groups.length > 0) {\n                            let group = oi.groups[0]; //Main itemgroup\n                            if (!this.oiContainsCode(oi)) { //revert\n                                ok = false;\n                                break;\n                            } else {\n                                total += oi.quantity;\n                            }\n                        }\n                    }\n                }\n\n                if (ok && total > 0) {\n                    this.applicable = total;\n                }\n\n                break;\n            }\n\n            //not order mainitems\n            case\n            'exitem'\n            : {\n                let total = 0;\n\n                if (this.code && order.orderitems) {\n\n                    for (let oi of order.orderitems) {\n                        if (oi.items && oi.items.length > 0) {\n                            let mainitem = oi.items[0]; //Main item\n                            if (this.code !== mainitem.id) total += oi.quantity;\n                        }\n                    }\n                }\n\n                ok = total > 0;\n                this.applicable = total;\n\n                break;\n            }\n\n            //promotion code\n            case\n            'code'\n            : {\n                this.applicable = 0;\n                if (this.code && order.promoCode && this.promoCodeCheck(order.promoCode, this.code)) {\n                    ok = true;\n                    this.applicable = 1;\n                } else if (this.code && order.promoCodes && order.promoCodes.length > 0) {\n                    for (let pC of order.promoCodes) {\n                        if (this.promoCodeCheck(pC, this.code)) {\n                            ok = true;\n                            this.applicable = 1;\n                            break;\n                        }\n                    }\n                }\n                break;\n            }\n\n            //TODO check when payment -test if card no can be got??????? when check\n            case\n            'cardprefix'\n            : {\n                if (order.payment && order.payment == \"creditcard\" && this.prefix) {\n                    //TODO\n                    let payment = order.payments[0];\n                    if (payment.cardNo.indexOf(this.prefix) === 0) {\n                        ok = true;\n                    }\n                }\n                break;\n            }\n\n            //TODO\n            case\n            \"offer\"\n            : {\n                let offer = order.offers.find(offer => {\n                    return (offer.backendId === this.code) || (offer.campaignId === parseInt(this.code));\n                });\n\n                if (offer) ok = true;\n                break;\n            }\n\n            //TODO\n            case\n            \"reward\"\n            : {\n                this.applicable = 0;\n                let offer = order.offers.find(offer => {\n                    return (offer.rewardId === parseInt(this.code));\n                });\n\n                if (offer) {\n                    this.applicable = 1;\n                    ok = true;\n                }\n                break;\n            }\n\n            //TODO\n            case\n            \"welcome\"\n            : {\n                if (order.member) {\n                    //TODO get welcomed???\n                    // if (order.member.membership)\n                }\n                break;\n            }\n\n            //TODO?? byod?? code = dinein / takeaway / delivery / byod\n            case\n            \"ordertype\"\n            : {\n                if (this.code) {\n\n                    let codes: string[] = this.code.split(\",\");\n\n                    if (codes && codes.length > 0) {\n                        if (codes.indexOf(\"dinein\") >= 0 && !order.takeout) {\n                            ok = true;\n                        } else if (codes.indexOf(\"takeaway\") >= 0 && order.takeout) {\n                            ok = true;\n                        } else if (codes.indexOf(\"delivery\") >= 0 && order.type === \"delivery\") {\n                            ok = true;\n                        } else if (codes.indexOf(\"byod\") >= 0 && order.type === \"byod\") {\n                            ok = true;\n                        }\n\n                    } else {\n                        ok = true;\n                    }\n                }\n                break;\n            }\n\n            case\n            \"seats\"\n            : {\n                if (order.seats && order.seats > this.amount) {\n                    ok = this.applicable > 0;\n                }\n                break;\n            }\n\n            case\n            \"source\"\n            : {\n                if (this.source.indexOf(order.source) > -1) ok = true;\n                break;\n            }\n\n            case\n            \"points\"\n            : {\n                if (order.usedPoints == this.couponPoint) ok = true;\n                break;\n            }\n\n            default:\n                break;\n        }\n        console.log(\"isSatisfied: \", ok);\n\n        return ok;\n    }\n\n    private hasExistingItemLevelDiscount(oi: OrderItem, promo: Discount) {\n        let occupied = false;\n        // if already applied an item level discount, do not apply another item level discount\n        if (this.getLevel() === 'item') {\n            if (oi.discounts && oi.discounts.length > 0) {\n                occupied = oi.discounts.some(discount => {\n                    return discount.id === promo.id || discount.level === 'item'\n                })\n                console.log('occupied: ' + promo.name, occupied)\n\n            }\n        }\n        return occupied;\n    }\n\n    /**Decide discount's level, item or order level**/\n    getLevel() {\n        if (this.level) return this.level;\n\n        switch (this.type) {\n            case 'item':\n            case 'itemgroup':\n            case 'exitemgroup':\n            case 'exitem':\n            case \"itemgroup_count\":\n            case \"item_count\": {\n                this.level = \"item\";\n                break;\n            }\n            case 'all':\n            case 'ordertype':\n            case 'coupon':\n            case 'guest':\n            case 'member':\n            case 'total':\n            case 'code':\n            case 'seats':\n            case 'points':\n            case 'source':\n            case 'reward':\n            case 'cardprefix': {\n                this.level = \"order\";\n                break;\n            }\n\n            default: {\n                this.level = \"\";\n                break;\n            }\n        }\n\n        return this.level;\n    }\n\n    getDisplay() {\n        if (this.display) return this.display;\n\n        switch (this.type) {\n\n            case 'guest': {\n                this.display = \"Guest\";\n                break;\n            }\n            case 'member': {\n                this.display = \"Member\";\n                break;\n            }\n            case 'all':\n            case 'coupon':\n            case 'total':\n            case 'itemgroup':\n            case 'item':\n            case 'code':\n            case 'cardprefix':\n            case 'exitemgroup':\n            case 'source':\n            case 'ordertype':\n            default: {\n                this.display = \"\";\n                break;\n            }\n        }\n\n        return this.display;\n    }\n\n    /**For item level discount,\n     * check if order items have specific items/itemgroups with id == code\n     * **/\n    oiContainsCode(oi: OrderItem) {\n        if (!this.code) return false;\n        if (this.code.toLowerCase() == \"all\") return true;\n\n        let contain: boolean = false;\n\n        switch (this.type) {\n            case \"item\": {\n                let codes: string[] = this.code.split(\",\");\n\n                if (codes && codes.length > 0) {\n                    let item = oi.items[0]; //Main Item\n                    if (codes.indexOf(item.id) >= 0) {\n                        contain = true;\n                    }\n                }\n                break;\n            }\n            case \"itemgroup\": {\n                let codes: string[] = this.code.split(\",\");\n                if (codes && codes.length > 0) {\n                    //let item = oi.items[0]; //Main Item\n                    if (codes.indexOf(oi.groups[0].id) >= 0) {\n                        contain = true;\n                    }\n                }\n                break;\n            }\n            case \"itemgroup_count\": {\n                let codes: string[] = this.code.split(\",\");\n                if (oi.groups && oi.groups.length > 0) {\n                    let group = oi.groups[0]; //Main itemgroup\n                    if (codes && codes.length > 0) {\n                        if (codes.indexOf(group.id) >= 0) {\n                            contain = true;\n                        } else {\n                            //check for sub item group\n                            for (let ig of oi.groups) {\n                                if (codes.indexOf(group.id) >= 0) {\n                                    contain = true;\n                                    break;\n                                }\n                            }\n                        }\n                    }\n\n                }\n                break;\n            }\n            case \"item_count\": {\n                let codes: string[] = this.code.split(\",\");\n\n                let mainitem = OrderItem.getMainItem(oi);//mainitem\n                if (codes && codes.length > 0) {\n                    if (codes.indexOf(mainitem.id) >= 0) {\n                        contain = true;\n                    } else {\n                        //TODO: check subitem\n                    }\n                }\n\n\n                break;\n            }\n            case \"exitemgroup\": {\n\n                let codes: string[] = this.code.split(\",\");\n                if (codes && codes.length > 0) {\n                    //let item = oi.items[0]; //Main Item\n                    if (codes.indexOf(oi.groups[0].id) < 0) {\n                        contain = true;\n                    }\n                }\n                break;\n            }\n            case \"exitem\": {\n                if (oi.items && oi.items.length > 0 && (oi.items[0].id !== this.code)) {\n                    contain = true;\n                }\n                break;\n            }\n\n            default:\n                break;\n        }\n\n        return contain;\n    }\n\n    setCode(code: string) {\n        this.code = code;\n    }\n\n    setDisplay(display: string) {\n        this.display = display;\n    }\n\n    //TODO??\n    isMainItemOnly(): boolean {\n        if (this.type === 'total')\n            return true;\n        if (this.type == 'itemgroup' || this.type == 'itemgroup_count' || this.type == 'item_count')\n            return !this.traverseItemsDiscountable;\n        return false;\n    }\n\n    protected toProperty(name: string, value) {\n        return value;\n    }\n\n    public promoCodeCheck(promoteCode: string, code: string): boolean {\n        if(this.ignoreCase) {\n            return promoteCode.toLowerCase() === code.toLowerCase();\n        }\n        return promoteCode === code;\n    }\n\n\n}\n","import {Data} from './data';\n\nexport class Coupon extends Data {\n\n  class: string = \"Coupon\";\n  sequence: number;\n  code: string;\n  couponSetId: string;\n  shareLink: string;\n\n  protected toProperty(name: string, value) {\n\n    switch (name) {\n\n      default:\n        value = super.toProperty(name, value);\n        break;\n\n    }\n\n    return value;\n  }\n\n}\n","import { Data } from './data';\nimport { Store } from './store';\n\nexport class Courier extends Data {\n    class: string = \"Courier\";\n\n    id:string;\n    type: string;\n    name: string;\n    note: string;\n    partner: string;\n    \n    enabled:boolean;\n    autoCancelRefund: boolean;\n    secondaryFallback: boolean;\n\n    rules: any;\n\n    store: Store;\n\n}\n","import { Data } from './data';\nimport { Store } from './store';\nimport { OpeningHours } from 'aigens-data';\n\nexport class Court extends Data {\n\n    class: string = \"Court\";\n    id: number;\n    backendId: string;\n    name: string;\n    images: any;\n    features: string[] = [];\n    handle: string;\n    colors: {};\n    timezone: string;\n    country: string;\n    groupId: number;\n    languages: string[];\n    language: string;\n    closed: boolean;\n    closedMessage: string;\n    stores: Store[];\n    allowZeroTotalType: string[];\n    discounts: any[];\n    openings: OpeningHours;\n\n    public static hasFeature(court: Court, feature: string): boolean {\n        if (court.features) {\n            return court.features.indexOf(feature) >= 0;\n        }\n        return false;\n    }\n\n    hasFeature(feature: string): boolean {\n        if (this.features) {\n            return this.features.indexOf(feature) >= 0;\n        }\n        return false;\n    }\n\n    protected toProperty(name: string, value) {\n\n        switch (name) {\n\n            case \"stores\":\n                value = Data.toDataArray(Store, value);\n                break;\n            default:\n                value = super.toProperty(name, value);\n                break;\n\n        }\n\n        return value;\n    }\n\n}\n","/**\n * Created by aigens on 20/12/2016.\n */\nimport { Data } from \"./data\";\n\n\nexport class CreditCard extends Data {\n  id: string;\n  holder: string;\n  last4: string;\n  expireMonth: number;\n  expireYear: number;\n  brand: string;\n  isSelected = false;\n  gateway: string;\n  value: string;\n}\n","import { Data } from './data';\n\nexport class Crm extends Data {\n    class: string = \"Crm\";\n    brandId: number;\n    groupId: number;\n    id: number;\n    name: string;\n    username: string;\n    password: string;\n    accessToken: string;\n    addPoints: boolean;\n    type: string;\n    links: any;\n    pointRatio: number;\n    addstamps: boolean;\n    extra: any;\n    pointToMoneyRatio: number;\n    profile: boolean;\n    redeemPointFactor: number;\n    redeemPointMin: number;\n    stampRatio: number;\n    activateFee: number;\n    features: string[];\n    showPointExpiry: boolean;\n    modes: string[];\n    smallestPointsUnit: number;\n    showMemberQr: boolean;\n    verificationType: 'email' | 'phone';\n    accountDeleteType: string;\n    pointIcon;\n    googleClientId: string;\n    facebookClientId: string;\n\n    public static hasFeature(crm: Crm, feature: string): boolean {\n        if (crm?.features) {\n            return crm.features.indexOf(feature) >= 0;\n        }\n        return false;\n    }\n    public static getPointIcon(crm: Crm): any {\n        if (crm?.pointIcon?.url) {\n            return crm.pointIcon.url;\n        }\n    }\n}\n","import { Image } from './image';\r\nexport class Data {\r\n\r\n    static imageHost: string;\r\n    static debug: boolean = false;\r\n\r\n    images: { string: Image };\r\n\r\n    constructor() {\r\n\r\n    }\r\n\r\n    public static toData<T extends Data>(cls: { new(): T }, json): T {\r\n\r\n        var result = new cls();\r\n\r\n\r\n        for (var propName in json) {\r\n            var value = json[propName];\r\n\r\n            if (value != null) {\r\n                result[propName] = result.toProperty(propName, value);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    protected toProperty(name: string, value) {\r\n\r\n        if (value == null) return value;\r\n\r\n        return value;\r\n    }\r\n\r\n\r\n\r\n    private static log(tag, msg){\r\n        if(!Data.debug) return;\r\n        console.log(tag, msg);\r\n    }\r\n\r\n    public static toDataArray<T extends Data>(cls: { new(): T }, jarray): T[] {\r\n\r\n        var result = [];\r\n\r\n        Data.log(\"toDataArray\", jarray);\r\n\r\n        for (let jo of jarray) {\r\n            var data = Data.toData(cls, jo);\r\n            if (data) {\r\n                result.push(data);\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public getImage(name: string, width: number, crop: boolean): string {\r\n        return Data.getImage(this, name, width, crop);\r\n    }\r\n\r\n\r\n\r\n    public static getImage(data: Data, name: string, width: number, crop: boolean): string {\r\n\r\n        if (!data.images) return null;\r\n        var im = data.images[name] as Image;\r\n        if (!im) return null;\r\n\r\n        var url = im.url;\r\n        if (!url) return null;\r\n\r\n        return this.getImageUrl(url, width, crop);\r\n\r\n\r\n    }\r\n\r\n    public static getImageUrl(url: string, width: number, crop: boolean): string {\r\n\r\n        if (!url) return null;\r\n\r\n        width = Math.floor(width);\r\n\r\n        if (url.indexOf(\"googleuser\") > 0 && width) {\r\n            var suffix = \"=s\" + width;\r\n            if (crop) {\r\n                suffix += \"-c\";\r\n            }\r\n            url += suffix;\r\n        } else if ((url.indexOf(\"content.aigens.com.cn\") > 0 || url.indexOf(\"cdn.aigens.com.cn\") > 0 || url.indexOf(\"cdn.aigens.cn\") > 0) && width) {\r\n            var suffix = \"?x-oss-process=image/resize\";\r\n            if (crop) {\r\n                suffix += \",m_fill\";\r\n            }\r\n            url += suffix + \",w_\" + width;\r\n        }\r\n\r\n\r\n        if (url.indexOf(\"http://\") == 0 && url.indexOf(\"localhost\") == -1) {\r\n            url = url.replace(\"http:\", \"https:\");\r\n        }\r\n\r\n        if (Data.imageHost) {\r\n            var replace = \"lh3.googleusercontent.com\";\r\n            var i = url.indexOf(replace);\r\n            if (i > 0) {\r\n                var path = url.substring(i + replace.length, url.length);\r\n                url = Data.imageHost + path;\r\n            }\r\n        }\r\n\r\n        return url;\r\n    }\r\n\r\n    public clone<T>(type: { new(): T; }): T {\r\n        var obj2: any = Object.assign(new type(), this);\r\n        return obj2;\r\n    }\r\n\r\n    public static cloneArray<T>(type: { new(): T; }, array) {\r\n\r\n        var result = [];\r\n\r\n        for (let data of array) {\r\n            result.push(data.clone(type));\r\n        }\r\n\r\n        return result;\r\n\r\n    }\r\n\r\n    public static remove(array: any[], obj: any) {\r\n        var index = array.indexOf(obj, 0);\r\n        if (index > -1) {\r\n            array.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    public static replace(array: any[], obj: any) {\r\n        for (var i = 0; i < array.length; i++) {\r\n            var id = obj.id;\r\n            if (id && id == array[i].id) {\r\n                array[i] = obj;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    public static clearCache(obj){\r\n\r\n        for(let key of Object.keys(obj)){\r\n            if(key && key.indexOf('_') == 0){\r\n                delete obj[key];\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public static JsonReplacer(key, value) {\r\n        if (key && key.indexOf('_') == 0){\r\n            return undefined;\r\n        }\r\n        return value;\r\n    }\r\n\r\n    evaluate(condition){\r\n        return eval(condition);\r\n\r\n    }\r\n\r\n\r\n    public get name18n(){\r\n        return this.lookup('name');\r\n    }\r\n\r\n    private lookup(name: string) {\r\n\r\n        var result = null;\r\n\r\n        var lang = window['aigens']?.context?.userLang;\r\n\r\n        console.log(\"get String\",lang);\r\n\r\n        if (lang) {\r\n            result = this[name + \"_\" + lang];\r\n        }\r\n\r\n        if (!result) {\r\n            result = this[name];\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n}\r\n","import { Address, Slot, Store } from 'aigens-data';\n\nexport class DirectoryState {\n    mode: string;\n    storeId: number;\n    deliveryAddress: Address;\n    expectedDeliveryTime: string;\n    scheduleDate: any; // moment object\n    scheduleTime: Slot;\n    asap: boolean;\n    humanScheduleTime: string;\n    store: any;\n}\n","import { Data } from './data';\r\nimport { Category } from './category';\r\nimport { Benefit } from './benefit';\r\nimport { Condition } from './condition';\r\n\r\nexport class Discount extends Data {\r\n    class: string = \"Discount\";\r\n    id: string;\r\n    name: string; //discount name\r\n    groupId: number;\r\n    brandId: number;\r\n    brandIds: string[];\r\n    storeId: number;\r\n    type: string; //discount type\r\n    enabled: boolean;\r\n    start: Date; //available time\r\n    end: Date; //available time\r\n    conditions: Condition[]; //discount conditions, support multiple(>1) conditions\r\n    benefits: Benefit[]; //discount detail, support merely one benefit\r\n    amount: number; //discount total amount\r\n    backendId: string; //discount backend ID\r\n    quantity: number; //\r\n    desc: string; //display name\r\n    available: number = 0; //used times\r\n    level: string; //discount level\r\n    unlocks: Category[]; //Categories can be unlocked\r\n    gifts: Category[]; //Free gifts\r\n    alone: boolean = false; //if must be 1st discount\r\n    backendType: string;\r\n    periods: string[];\r\n    group: string;\r\n    priority: number;\r\n    overpay: number;\r\n    allowZeroTotal: boolean;\r\n\r\n\r\n    protected toProperty(name: string, value) {\r\n\r\n        if (name == 'conditions') {\r\n            return Data.toDataArray(Condition, value);\r\n        } else if (name == 'benefits') {\r\n            return Data.toDataArray(Benefit, value);\r\n        } else if (name == 'unlocks') {\r\n            return Data.toDataArray(Category, value);\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    static toDiscountData(discount:Discount):any{\r\n        var json ={};\r\n        json[\"id\"] = discount.id;\r\n        return json;\r\n\r\n    }\r\n}\r\n","import { Data } from './data';\n\nexport class EditRecord extends Data {\n    from: string;\n    to: string;\n    field: string;\n    locale: string;\n}","import { Data } from './data';\nimport { EditRecord } from './edit-record';\n\nexport class Edit extends Data {\n    class: string = \"Edit\";\n    type: string;\n    name: string;\n    id: string;\n    contentId: string;\n    action: string;\n    username: string;\n    ip: string;\n    backendId: string;\n    records: EditRecord[];\n}","import { Data } from './data';\n\nexport class Field extends Data {\n    id: number;\n    name: string;\n    value: any;\n    type: string;\n    ptype: string;\n    ptypes: string[];\n    input: string;\n    sort: string;\n    title: string;\n    example: string;\n    readonly: boolean = false;\n    desc: string;\n    locale: string;\n    subname: string;\n    content: any;\n    required: boolean = false;\n    condition: string;\n    validation: string;\n    action: string;\n    options: any[];\n    admin:boolean = false;\n    i18n: string;\n    time: any;\n    moment: any;\n    section: string;\n    stage: boolean = false;\n    show: boolean = false;\n    resolved: boolean = false;\n    feature: boolean = false;\n    old: any;\n    invalid: boolean = false;\n    stype: string;\n    published: boolean = false;\n    enabled: boolean = false\n    isSelected?: boolean;\n\n    clear(){\n        this.value = null;\n        this.time = null;\n        this.moment = null;\n    }\n}\n","import { Data } from './data';\r\n\r\nexport class File extends Data {\r\n    class: string = \"File\";\r\n    id: number;\r\n    name: string;\r\n    data: string;\r\n\r\n\r\n\r\n}","import { Data } from './data';\r\n\r\nexport class Geo extends Data {\r\n    id: number;\r\n    admin1: string;\r\n    admin2: string;\r\n    admin3: string;\r\n    admin4: string;\r\n    name: string;\r\n    fclass: string;\r\n    latitude: number;\r\n    longitude: number;\r\n    fcode: string;\r\n    country: string;\r\n    subs: Geo[];\r\n\r\n    protected toProperty(name: string, value) {\r\n\r\n        if (name == \"subs\") {\r\n            return Data.toDataArray(Geo, value);\r\n        }\r\n\r\n        return super.toProperty(name, value);\r\n    }\r\n}","import { Brand } from './brand';\r\nimport { Data } from './data';\r\n\r\nexport class Group extends Data {\r\n    class: string = \"Group\";\r\n    id: number;\r\n    name: string;\r\n    images: any;\r\n    brands: Brand[];\r\n\r\n    protected toProperty(name: string, value) {\r\n\r\n        if (name == \"brands\") {\r\n            return Data.toDataArray(Brand, value);\r\n        }\r\n\r\n        return super.toProperty(name, value);\r\n    }\r\n}","import { Data } from './data';\r\nexport class Image extends Data {\r\n    url: string;\r\n    width: number = 0;\r\n    height: number = 0;\r\n    source: string;\r\n    default: string;\r\n}","import { Data } from './data';\nimport { Item } from './item';\n\nexport class ItemGroup extends Data {\n\n    class: string = \"ItemGroup\";\n    id: string;\n    name: string;\n    items: Item[] = [];\n    modifier: boolean = false;\n    optional: boolean = false;\n    tags: string[] = [];\n    choices: number = 1;\n    repeat: boolean = false;\n    skippable: boolean = false;\n    min: number = 1;\n    max: number = 1;\n    backendId: string;\n    selected: Item[];\n    cmap: any = {};\n    pagerMode: string;\n\n    origin: ItemGroup;\n    printers: string[] = [];\n    parentItems: Item[];\n    defaultId: string;\n    instruction: string;\n\n    filter: string;\n    filter2: string;\n    filters: string[];\n    filters2: string[];\n\n    users: string[];\n\n    getSelectedNames() {\n\n        var names = [];\n        for (let item of this.selected) {\n\n            names.push(item.name);\n        }\n\n        return names.join();\n    }\n\n    getSelectedItemIds() {\n\n        var names = [];\n        for (let item of this.selected) {\n\n            names.push(item.id);\n        }\n\n        return names.join();\n    }\n\n    protected toProperty(name: string, value) {\n\n        switch (name) {\n\n            case \"items\":\n                value = Data.toDataArray(Item, value);\n                break;\n            case \"parentItems\":\n                value = Data.toDataArray(Item, value);\n                break;\n            default:\n                value = super.toProperty(name, value);\n                break;\n        }\n\n        return value;\n    }\n\n    public static getPublishedItems(ig: ItemGroup, now: number) {\n\n        return Item.filterPublished(ig.items, now);\n\n    }\n\n    public static getPublishedItemsWithMap(catId: string, ig: ItemGroup, index: number, filter?: any) {\n        var catId = catId;\n        // catId = catId + \".\" + index.toString();\n        return Item.filterPublishedItems(ig.items, ig.cmap, catId, index, filter);\n    }\n\n    static toItemGroupsData(itemGroups: ItemGroup[], toServer: boolean = false): any[] {\n        var results: any[] = [];\n        for (let itemGroup of itemGroups) {\n            var tmp = ItemGroup.toItemGroupData(itemGroup, toServer);\n            results.push(tmp);\n        }\n        return results;\n\n    }\n\n    static toItemGroupData(itemGroup: ItemGroup, toServer: boolean = false): any {\n        var json = {};\n        json[\"id\"] = itemGroup.id;\n        json[\"items\"] = Item.toItemsData(itemGroup.items, toServer);\n        json[\"name\"] = itemGroup.name;\n        json[\"pagerMode\"] = itemGroup.pagerMode;\n        return json;\n\n    }\n\n\n}\n","import { Category } from './category';\nimport { ItemGroup } from './item-group';\nimport { Data } from './data';\nimport { Discount } from './discount';\nimport { Coupon } from './coupon';\n\nexport class Item extends Data {\n\n    class: string = 'Item';\n    category: any;\n    id: string;\n    name: string;\n    images: any;\n\n    price: number;\n    price0: number;\n    price1: number;\n    price2: number;\n    originalPrice?: number;\n    published: boolean = true;\n    suspended: boolean = false;\n    inventory: number = -1;\n    quantity: number = 0;\n    backendId: string;\n    sku: string;\n    printName: string;\n    start: number;\n    end: number;\n    points: number = 0;\n\n    groupIds: string[] = [];\n    mgroupIds: string[] = [];\n\n    groups: ItemGroup[] = [];\n    mgroup: string;\n    group: string;\n    mgroups: ItemGroup[] = [];\n    tags: string[];\n    memberTier: string[];\n\n    origin: Item;\n    modifier: boolean = false;\n\n    combo: boolean = false;\n    modifiable: boolean = false;\n    printers: string[] = [];\n\n    parentId: string;\n    absentId: string;\n\n    min: number;\n    max: number;\n    baseQty: number = 0;\n    soldQty: number = 0;\n    title: string;\n\n    extra: any;\n    dinein: boolean = false;\n    pgroupId: string;\n    pgroup: ItemGroup;\n\n    handling: number = 0;\n    discount: number = 0;\n    discountCode: string = '';\n\n    variations: Item[];\n    marker: string;\n    periods: string[];\n\n    isPrint: boolean = true;\n    modes: string[];\n\n    prefix: string = '';\n    discounted: boolean = false;\n    discounts: Discount[] = [];\n    discountable: boolean = true;\n    segments: string[];\n    rating: number;\n    featuredRating: number = 0;\n    featuredUsers: string[];\n    addTime: number = Number(new Date()) + Math.random();\n    popularity: number;\n\n    discountedId: string;\n    filters: string[];\n    desc: string;\n    backendName: string;\n    comboId: string;\n    comboName: string;\n    taxGroup: string;\n    featured: boolean = false;\n    packing: number;\n    nutrients: any; //no nutrients interface yet\n    allergy: any; //no allergy interface yet\n\n    minPrice: number;\n    maxPrice: number;\n\n    callNo: string;\n    message: string;\n    receipt: boolean;\n    ohId: string; //for e365\n\n    barcode: string;//self checkout\n    serviceChargeable: boolean;\n    coupons: Coupon[] = [];\n    type: string;\n\n    //\n    messageLimit: number;\n    messageMaxLength: number;\n    messageOptional: boolean;\n    custom: any;\n\n    //analytics purpose, not part of real object\n    igPos: number = 0;\n\n    setLayout: string = null;\n\n    users: string[];\n\n    verificationGroupIds: string[];\n    protected toProperty(name: string, value) {\n\n        switch (name) {\n\n            case 'groups':\n                value = Data.toDataArray(ItemGroup, value);\n                break;\n            case 'mgroups':\n                value = Data.toDataArray(ItemGroup, value);\n                break;\n            case 'coupons':\n                value = Data.toDataArray(Coupon, value);\n                break;\n            case 'variations':\n                value = Data.toDataArray(Item, value);\n                break;\n            default:\n                value = super.toProperty(name, value);\n                break;\n\n        }\n\n        return value;\n    }\n\n    static isSet(category: Category, item: Item) {\n\n        if (category && category.igMode == 'single') {\n            return false;\n        }\n\n        if (item.groups && item.groups.length > 0) {\n            return true;\n        }\n\n        if (category && category.groups && category.groups.length > 1) {\n\n            return true;\n        }\n\n        return false;\n    }\n\n    static isVariations(item: Item, singleChildShowVariation: boolean) {\n        if(singleChildShowVariation && item.parentId === item.id && item.variations.length == 0){\n            return true;\n        }\n        return item && item.variations && item.variations.length > 0;\n    }\n\n    static isModifiable(item: Item): boolean {\n        let mgroups = item.mgroups;\n        if (!mgroups || mgroups.length == 0) {\n            return false;\n        }\n        return mgroups.some(g => g.items && g.items.length > 0);\n    }\n\n    static isSetMessageLimit(item: Item): boolean {\n        return item && item.messageLimit && item.messageLimit > 0;\n        ;\n    }\n\n    public static isPublished(item: Item, now: number): boolean {\n\n        if (!item.start && !item.end) {\n            return true;\n        }\n\n        let greaterThanStart = true;\n        let lessThanEnd = true;\n\n        if (item.start) {\n            greaterThanStart = now >= item.start;\n        }\n\n        if (item.end) {\n            lessThanEnd = now <= item.end;\n        }\n\n        return greaterThanStart && lessThanEnd;\n\n    }\n\n    public static filterPublished(items: Item[], now: number) {\n\n        var result = [];\n\n        if (!items || items.length == 0) {\n            return result;\n        }\n\n        for (let item of items) {\n            if (item.published && Item.isPublished(item, now)) {\n                result.push(item);\n            }\n        }\n\n        return result;\n\n    }\n\n    public static filterPublishedItems(items: Item[], cmap: any, catId: string, index: number, filter?: any) {\n\n        var result = [];\n        var catIdWithIndex = catId + '.' + index.toString();\n\n\n        if (!items || items.length == 0) {\n            return result;\n        }\n\n\n        for (let item of items) {\n            if (item.groups.length == 0) {\n                item.combo = false;\n            }\n\n            if (cmap && (cmap[catIdWithIndex] || cmap[catId])) {\n                var published = cmap[catIdWithIndex] ? cmap[catIdWithIndex] : cmap[catId];\n\n                if (published && published[item.id]) {\n                    result.push(item);\n\n                }\n\n            } else {\n\n                if (filter) {\n                    if (filter(item)) {\n                        result.push(item);\n                    }\n\n                } else if (item.published) {\n\n                    result.push(item);\n                }\n\n            }\n        }\n\n        return result;\n\n    }\n\n    static toItemsData(items: Item[], toServer: boolean = false): any[] {\n        var results: any[] = [];\n        for (let item of items) {\n            var tmp = Item.toItemData(item, toServer);\n            if (toServer) {\n                // console.log('tem', tmp); BurgerKing紧急fix : baseQty 会把 q=0的 item push入 order,然后替换成absentItem , 但frontend不应该把 mitem(with qua =0) post to server\n                if (tmp?.quantity > 0) {\n                    results.push(tmp);\n                }\n            } else {\n                results.push(tmp);\n            }\n        }\n        return results;\n\n    }\n\n    static toItemData(item: Item, toServer: boolean = false): any {\n        var json = {};\n        json['id'] = item.id;\n        json['quantity'] = item.quantity;\n        json['inventory'] = item.inventory;\n        json['name'] = item.name;\n        json['price'] = item.price;\n        json['price0'] = item.price0;\n        json['price1'] = item.price1;\n        json['price2'] = item.price2;\n        json['modifiable'] = item.modifiable;\n        json['modifier'] = item.modifier;\n        if (item.points >= 0) {\n            json['points'] = item.points;\n            json['usedPoints'] = item.points;\n        }\n        json['title'] = item.title;\n\n        json['discounted'] = item.discounted;\n        json['mgroups'] = item.mgroups ? ItemGroup.toItemGroupsData(item.mgroups, toServer) : null;\n        json['combo'] = item.combo;\n        json['comboId'] = item.comboId;\n        json['comboName'] = item.comboName;\n        json['taxGroup'] = item.taxGroup;\n        json['discountedId'] = item.discountedId;\n        json['barcode'] = item.barcode;\n        json['custom'] = item.custom;\n        json['addtime'] = item.addTime;\n        json['type'] = item.type;\n        json['baseQty'] = item.baseQty;\n        json['absentId'] = item.absentId;\n\n\n        // it should minus the quantity if baseQty exists when post order to server(server calculate not handle item.baseQty)\n        if (toServer && item?.baseQty && item?.quantity > 0) {\n            json['quantity'] = item.quantity - item.baseQty;\n        }\n\n        // copy i18n item name also for supporting translation when refresh\n        const keys = Object.keys(item);\n        keys.filter(f => f.includes('name_'))\n            .map(o => o)\n            .forEach(o => {\n                json[o] = item[o];\n            });\n        return json;\n\n    }\n\n    static getPrice(item: Item, level: number) {\n\n        var result = item.price;\n\n        switch (level) {\n            case 1:\n                result = item['price1'];\n                break;\n            case 2:\n                result = item['price2'];\n                break;\n            case 3:\n                result = item['price3'];\n                break;\n            case 4:\n                result = item['price4'];\n                break;\n            case 5:\n                result = item['price5'];\n                break;\n            case 6:\n                result = item['price6'];\n                break;\n            case 7:\n                result = item['price7'];\n                break;\n            case 8:\n                result = item['price8'];\n                break;\n            case 9:\n                result = item['price9'];\n                break;\n            default:\n                result = item['price1'];\n                break;\n        }\n\n        if (!result && result != 0) {\n            result = item.price;\n        }\n\n        return result;\n\n    }\n\n    public static isItemHasCustomMessage(item: Item): boolean {\n        return item && item.custom && item.custom.message && item.custom.message.length > 0;\n    }\n\n}\n","export class KitchenOrderItem {\r\n\r\n    printQueue: any = {};\r\n\r\n    dualReceipt: boolean = false;\r\n    showNo: boolean = false;\r\n    callNo: string = null;\r\n\r\n    constructor() {\r\n\r\n\r\n    }\r\n\r\n\r\n}","import { Data } from './data';\r\nexport class Link extends Data {\r\n    name: string;\r\n    url: string;\r\n    title: string;\r\n    action: string;\r\n}","import { Data } from './data';\n\nexport class Location extends Data {\n\n    class: string = \"Location\";\n    id: number;\n    name: string;\n    line: string;\n    hint: string;\n    longitude: number;\n    latitude: number;\n    province: string;\n    full: string;\n    phone: string;\n    provinceCode: string;\n    hours: any;\n    pickupMethod: string[];\n    pickupPoints: string[];\n}\n","import { Data } from './data';\r\n\r\nexport class Member extends Data {\r\n\r\n    class: string = \"Member\";\r\n    id: number;\r\n    sessionId: string;\r\n    username: string;\r\n    email: string;\r\n    regions: string[];\r\n    avatarUrl: string;\r\n    language: string;\r\n    name: string;\r\n    gender: string;\r\n    education:string;\r\n    occupation:string;\r\n    firstName: string;\r\n    lastName: string;\r\n    groupId: number;\r\n    brandId: number;\r\n    storeId: number;\r\n    courtId: number;\r\n    admin: boolean = false;\r\n    readOnly: boolean = false;\r\n    countryCode: string;\r\n    phone: string;\r\n    backendId: string;\r\n    type:string;\r\n    sessionTimeout: number = 0;\r\n    birthdate: number;\r\n    referral: any;\r\n    marketing: boolean = false;\r\n    guest: boolean = false;\r\n    cardNo: string;\r\n    extra: any;\r\n    behavior: any;\r\n    membership: any;\r\n    tier: string;\r\n    allowereceipt: boolean;\r\n    method: string;\r\n    livingDistrict: string;\r\n    workingDistrict: string;\r\n    featureLevel: string;\r\n    standardRoles: string[];\r\n    facebookId: string;\r\n    bday: number;\r\n    bmonth: number;\r\n    gm: {\r\n        programs?: string[];\r\n        id?: string | number;\r\n    };\r\n\r\n    ecredit: any;\r\n\r\n    static toMemberData(member:Member):any{\r\n        var json ={};\r\n        json[\"id\"] = member.id;\r\n        json[\"sessionId\"] = member.sessionId;\r\n        json[\"username\"] = member.username;\r\n        json[\"storeId\"] = member.storeId;\r\n        json[\"type\"] = member.type;\r\n        json[\"regions\"] = member.regions;\r\n        json[\"language\"] = member.language;\r\n        json[\"name\"] = member.name;\r\n        json[\"gender\"] = member.gender;\r\n        json[\"education\"] = member.education;\r\n        json[\"occupation\"] = member.occupation;\r\n        json[\"firstName\"] = member.firstName;\r\n        json[\"lastName\"] = member.lastName;\r\n        json[\"groupId\"] = member.groupId;\r\n        json[\"brandId\"] = member.brandId;\r\n        json[\"storeId\"] = member.storeId;\r\n        json[\"phone\"] = member.phone;\r\n        json[\"backendId\"] = member.backendId;\r\n        json[\"birthdate\"] = member.birthdate;\r\n        json[\"marketing\"] = member.marketing;\r\n        json[\"cardNo\"] = member.cardNo;\r\n        json[\"membership\"] = member.membership;\r\n        json[\"tier\"] = member.tier;\r\n        json[\"allowereceipt\"] = member.allowereceipt;\r\n        json['ecredit'] = member.ecredit;\r\n\r\n        json[\"gm\"] = member.gm;\r\n\r\n        return json;\r\n\r\n    }\r\n\r\n    static toOrderMemberData(member: Member): any {\r\n        var json = {};\r\n        json['firstName'] = member.firstName;\r\n        json['lastName'] = member.lastName;\r\n    }\r\n}\r\n","import { Data } from './data';\nimport { Member } from './member';\n\nexport class Membership extends Data {\n\n    class: string = \"Membership\";\n    id: number;\n    memberId: number;\n    qrcode: string;\n    marketing: boolean = false;\n    groupMarketing: boolean = false;\n    recency: number;\n    points: number;\n    frequency: number;\n    monetary: number;\n    usablePoints: number;\n    reservePoints: number;\n    redemptions: number;\n    member: Member;\n    create: Date;\n    update: Date;\n    expire: Date;\n    status: string;\n    pointsExpire: Date;\n    nextExpire: Date;\n    tier: string;\n    brandId: number;\n    backendId: string;\n    activateFee: number;\n    referralCode: string;\n    tierPoints: number;\n    memberTierPolicy: any;\n    rfmTier: string;\n\n    protected toProperty(name: string, value) {\n\n        switch (name) {\n\n            case \"member\":\n                value = Data.toData(Member, value);\n                break;\n            default:\n                value = super.toProperty(name, value);\n                break;\n\n        }\n        \n\n        return value;\n    }\n}\n","import { Publish } from './publish';\nimport { Pos } from './pos';\nimport { ItemGroup } from './item-group';\nimport { Period } from './period';\nimport { Store } from './store';\nimport { Category } from './category';\nimport { Data } from './data';\nimport { Item } from './item';\nimport { Setting } from './setting';\nimport { Badge } from './badge';\nimport { PriceRule } from './price-rule';\nimport { Discount } from './discount';\nimport { TaxRule } from './tax-rule';\n\nexport class Menu extends Data {\n\n    class: string = \"Menu\";\n    badges: Badge[];\n    id: string;\n    name: string;\n    categories: Category[];\n    recommendation: Category;\n    pass: Category;\n    unlocks: Category[];\n    gifts: Category[];\n    stores: Store[];\n    create: Date;\n    update: Date;\n    currency: string;\n    periods: Period[];\n    groups: ItemGroup[];\n    subs: Menu[] = [];\n    parentId: string;\n    hidePrice: boolean;\n    posId: number;\n    pos: Pos;\n    items: Item[];\n    modes: string[];\n    publish: Publish;\n    quickCheckout: boolean;\n    maxItems: number;\n    serviceCharge: number;\n    pickupCharge: number;\n    pickupItemCharge: number;\n    tax: number;\n    stagePush: boolean;\n    master: boolean;\n    posSync: boolean;\n    deliveryCharge: number;\n    taxIncluded: boolean;\n    minDeliveryTotal: number;\n    maxDeliveryTotal: number;\n    quickSingleItem: boolean;\n    quickModifier: boolean;\n    preselectItem: boolean;\n    setLayout: string;\n    pickupTime: boolean;\n    catLayout: string;\n    tcPrompt: string;\n    settings: Setting;\n    priceRules: PriceRule[];\n    discounts: Discount[];\n    cgroups: any[];\n    taxRules: TaxRule[];\n    legacy: boolean = false;\n    itemOpenings = {};\n    //current price level of this menu item.price\n    priceLevel: number = 1;\n    config: {};\n    itemRelation: {};\n    comboRelation: {};\n    catGroup: boolean = false;\n    limitedAccess: string[];\n    allowZeroTotalType: string[];\n    tippingPolicy: {};\n\n    backendId: string;\n    syncDate: Date;\n\n    protected toProperty(name: string, value) {\n\n        switch (name) {\n            case \"badges\":\n                value = Data.toDataArray(Badge, value);\n                break;\n            case \"categories\":\n                value = Data.toDataArray(Category, value);\n                break;\n            case \"subs\":\n                value = Data.toDataArray(Menu, value);\n                break;\n            case \"groups\":\n                value = Data.toDataArray(ItemGroup, value);\n                break;\n            case \"stores\":\n                value = Data.toDataArray(Store, value);\n                break;\n            case \"periods\":\n                value = Data.toDataArray(Period, value);\n                break;\n            case \"pos\":\n                value = Data.toData(Pos, value);\n                break;\n            case \"recommendation\":\n                value = Data.toData(Category, value);\n                break;\n            case \"unlocks\":\n                value = Data.toDataArray(Category, value);\n                break;\n            case \"gifts\":\n                value = Data.toDataArray(Category, value);\n                break;\n            case \"settings\":\n                value = Data.toData(Setting, value);\n                break;\n            case \"items\":\n                value = Data.toDataArray(Item, value);\n                break;\n            case \"priceRules\":\n                value = Data.toDataArray(PriceRule, value);\n                break;\n            case \"create\":\n            case \"update\":\n                value = new Date();\n                break;\n            case \"taxRules\":\n                value = Data.toDataArray(TaxRule, value);\n                break;\n            case \"discounts\":\n                value = Data.toDataArray(Discount, value);\n                break;\n            default:\n                value = super.toProperty(name, value);\n                break;\n        }\n\n        return value;\n    }\n\n}\n\n","\nimport { Data } from './data';\nimport { Reward } from './reward';\nimport { OrderItem } from './order-item';\n\nexport class Offer extends Data {\n    class: string = \"Offer\";\n    id: number;\n    name: string;\n    hint: string;\n    publihed: boolean;\n    backendId: string;\n    create:number;\n    start:number;\n    expire:number;\n    reward :Reward;\n    orderitems:OrderItem[] = [];\n    campaignId: number;\n    rewardId: number;\n    qrcode: string;\n    usedDate?:number\n    protected toProperty(name: string, value) {\n\n        if (name == \"reward\") {\n            return Data.toData(Reward, value);\n        }\n\n        return value;\n    }\n\n    static toOffersData(offers:Offer[]):any[]{\n        var result:any[] = [];\n        for(let offer of offers){\n            var tmp = Offer.toOfferData(offer);\n            result.push(tmp);\n        }\n\n        return result;\n\n    }\n\n    static toOfferData(offer:Offer):any{\n        var json ={};\n        json[\"id\"] = offer.id;\n        json[\"name\"] = offer.name;\n        json[\"hint\"] = offer.hint;\n        json[\"publihed\"] = offer.publihed;\n        json[\"backendId\"] = offer.backendId;\n        json[\"orderitems\"] = OrderItem.toOrderItemsData(offer.orderitems);\n        json[\"reward\"] = Reward.toRewardData(offer.reward);\n        json[\"campaignId\"] = offer.campaignId;\n        json[\"rewardId\"] = offer.rewardId;\n\n        return json;\n\n    }\n\n\n\n}\n","import * as moment from 'moment';\r\nimport {Data} from './data';\r\nimport {Slot} from './slot';\r\n\r\nexport class OpeningHours extends Data {\r\n\r\n    class: string = \"OpeningHours\";\r\n    weekdays: any[];\r\n    overwrites: any[];\r\n    holidays: any[];\r\n    always: boolean;\r\n\r\n    ph1: Slot[];\r\n    ph2: Slot[];\r\n\r\n    public static isDateOpen(oh: OpeningHours, time: number): boolean {\r\n\r\n\r\n        if (!oh) return true;\r\n        if (oh.always) return true;\r\n\r\n        //check ovewrites, holidays, and then normal hours\r\n\r\n        var day = new Date(time);\r\n        //console.log(\"day\", day.getDate());\r\n\r\n        if (oh.overwrites) {\r\n            for (let slot of oh.overwrites) {\r\n                if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within overwrites\", slot);\r\n                    if (Slot.isOpenType(slot)) {\r\n                        //console.log(\"overwrite true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"overwrite false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        var ph1Slot;\r\n        var ph2Slot;\r\n\r\n        if (oh.holidays) {\r\n            for (let slot of oh.holidays) {\r\n\r\n                if (slot.weekday == 101) {\r\n\r\n                    ph1Slot = slot;\r\n                    //console.log(\"ph1\", slot);\r\n                } else if (slot.weekday == 102) {\r\n\r\n                    ph2Slot = slot;\r\n                    //console.log(\"ph2\", slot);\r\n                } else if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within real holiday\", slot);\r\n                    if (Slot.isOpenType(slot)) {\r\n                        //console.log(\"holiday true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"holiday false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        if (oh.ph1 && ph1Slot) {\r\n            for (let slot of oh.ph1) {\r\n                if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within holiday1\", slot);\r\n                    if (Slot.isOpenType(ph1Slot)) {\r\n                        //console.log(\"holiday true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"holiday false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        if (oh.ph2 && ph2Slot) {\r\n            for (let slot of oh.ph2) {\r\n                if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within holiday2\", slot);\r\n                    if (Slot.isOpenType(ph2Slot)) {\r\n                        //console.log(\"holiday true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"holiday false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        if (oh.weekdays) {\r\n            for (let slot of oh.weekdays) {\r\n                if (Slot.isWeekdayOpen(slot, time)) {\r\n                    //console.log(\"weekday open\");\r\n                    return true;\r\n                }\r\n            }\r\n        } else {\r\n            //console.log(\"weekdays not set, open\");\r\n            return true;\r\n        }\r\n\r\n        //console.log(\"none match closed\", oh);\r\n        return false;\r\n\r\n    }\r\n\r\n\r\n    public static isTimeOpen(brandOh: OpeningHours, oh: OpeningHours, time: number): boolean {\r\n\r\n        if (!oh) return true;\r\n        if (oh.always) return true;\r\n\r\n        //console.log(\"brand OpeningHours\", brandOh);\r\n\r\n        var day = new Date(time);\r\n        //console.log(\"day\", day.getDate());\r\n\r\n        if (oh.overwrites) {\r\n            for (let slot of oh.overwrites) {\r\n                if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within overwrites\", slot);\r\n                    if (Slot.isTimeOpen(slot, time, false)) {\r\n                        //console.log(\"overwrite true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"overwrite false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        var ph1Slot;\r\n        var ph2Slot;\r\n\r\n        if (oh.holidays) {\r\n            for (let slot of oh.holidays) {\r\n\r\n                if (slot.weekday == 101) {\r\n\r\n                    ph1Slot = slot;\r\n                    //console.log(\"ph1\", slot);\r\n                } else if (slot.weekday == 102) {\r\n\r\n                    ph2Slot = slot;\r\n                    //console.log(\"ph2\", slot);\r\n                } else if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within holiday\", slot);\r\n                    if (Slot.isTimeOpen(slot, time, false)) {\r\n                        //console.log(\"holiday true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"holiday false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        if (brandOh && brandOh.ph1 && ph1Slot) {\r\n            for (let slot of brandOh.ph1) {\r\n                slot.startTime = ph1Slot.startTime;\r\n                slot.endTime = ph1Slot.endTime;\r\n                if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within holiday1\", slot);\r\n                    if (Slot.isTimeOpen(ph1Slot, time, false)) {\r\n                        //console.log(\"holiday true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"holiday false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n        if (brandOh && brandOh.ph2 && ph2Slot) {\r\n            for (let slot of brandOh.ph2) {\r\n                slot.startTime = ph2Slot.startTime;\r\n                slot.endTime = ph2Slot.endTime;\r\n\r\n                if (Slot.isWithinDayRange(slot, time)) {\r\n                    //console.log(\"within holiday2\", slot);\r\n                    if (Slot.isTimeOpen(ph2Slot, time, false)) {\r\n                        //console.log(\"holiday true\");\r\n                        return true;\r\n                    } else {\r\n                        //console.log(\"holiday false\");\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n\r\n\r\n        if (oh.weekdays) {\r\n            if (Slot.isTimeOpenOnWeekdays(oh.weekdays, time)) {\r\n                return true;\r\n            }\r\n\r\n            // for (let slot of oh.weekdays) {\r\n            //     if (Slot.isTimeOpen(slot, time, true)) {\r\n            //         //console.log(\"weekday open\");\r\n            //         return true;\r\n            //     }\r\n            // }\r\n        } else {\r\n            //console.log(\"weekdays not set, open\");\r\n            return true;\r\n        }\r\n\r\n        // console.log(\"should close\");\r\n        return false;\r\n\r\n\r\n    }\r\n\r\n\r\n    public static getDescription(openings: OpeningHours): string[] {\r\n\r\n        //var openings = this.store.openings;\r\n\r\n        var result = openings['_desc'];\r\n\r\n        if (result) {\r\n            return result;\r\n        }\r\n        if (!openings || openings.always) return [\"24 hrs\"];\r\n\r\n        var fragments = {};\r\n\r\n        //make Monday first\r\n        var weekdays = openings.weekdays.slice(1, 7);\r\n        weekdays.push(openings.weekdays[0]);\r\n\r\n\r\n        for (let day of weekdays) {\r\n\r\n            var startDesc = moment(day.startTime, 'HH:mm').format('h:mm A');\r\n            var endDesc = moment(day.endTime, 'HH:mm').format('h:mm A');\r\n\r\n            var str = startDesc + \" - \" + endDesc;\r\n            var list = fragments[str];\r\n\r\n            if (!list) {\r\n                list = [];\r\n                fragments[str] = list;\r\n            }\r\n\r\n            list.push(day.weekday == 0 ? 7 : day.weekday);\r\n        }\r\n\r\n        result = [];\r\n\r\n        for (let desc of Object.keys(fragments)) {\r\n            var days = fragments[desc];\r\n            var daysStr = this.weekdays2Str(days);\r\n            var line = daysStr + \" : \" + desc;\r\n            result.push(line);\r\n        }\r\n\r\n        openings['_desc'] = result;\r\n\r\n        return result;\r\n    }\r\n\r\n    private static weekdays2Str(list: number[]) {\r\n\r\n        if (list.length == 1) {\r\n            return this.weekday2Str(list[0]);\r\n        }\r\n\r\n        var shorten = [];\r\n\r\n        var startRange = list[0];\r\n\r\n        for (var i = 1; i <= list.length; i++) {\r\n            var current = list[i];\r\n            var previous = list[i - 1];\r\n\r\n            //range stop\r\n            if (current != previous + 1) {\r\n                shorten.push({\r\n                    start: startRange,\r\n                    end: previous\r\n                });\r\n                startRange = current;\r\n            }\r\n        }\r\n\r\n        var frags = [];\r\n\r\n        for (let range of shorten) {\r\n            var str = this.weekday2Str(range.start) + \"-\" + this.weekday2Str(range.end);\r\n            frags.push(str);\r\n        }\r\n\r\n        return frags.join(',');\r\n    }\r\n\r\n    private static weekday2Str(n) {\r\n\r\n        return moment().day(n % 7).format(\"ddd\");\r\n    }\r\n\r\n}\r\n","import { Data } from './data';\nimport { Category } from './category';\nimport { ItemGroup } from './item-group';\nimport { Item } from './item';\nimport { Discount } from './discount';\n\nexport class OrderItem extends Data {\n    scrollTop: number;\n    yPosition(yPosition: any) {\n      throw new Error('Method not implemented.');\n    }\n\n    class: string = \"OrderItem\";\n    id: string;\n    total: number = 0;\n    //items: Item[] = [];\n    create: number;\n    cgroupId: string;\n    departmentId: string;\n    groups: ItemGroup[] = [];\n    groupIds: string[] = [];\n    itemIds: string[] = [];\n\n    categoryType: string;\n    categoryId: string;\n    category: Category;\n    quantity: number = 1;\n    combo: boolean = false;\n    modifiable: boolean = false;\n\n    callNo: string;\n    receipt: boolean;\n    storeId: number;\n\n    handling: number = 0;\n    discount: number = 0;\n    points: number = 0;\n    usedPoints: number = 0;\n\n    discountCode: string;\n    discountDesc: string;\n    discounts: Discount[] = [];\n    grandTotal: number;\n\n    redeem: boolean;\n\n    barcode: string;\n    message: string;\n    takeout: boolean;\n    pagerNo: string;\n    packing: number;\n\n    recommended: boolean = false;\n\n    discountId: string;\n    unlockDiscountConditionType: 'promoCode' | 'reward' | 'others' = null; // if current OI is unlock-discount-item, so remark it\n\n    serviceCharge: number;\n\n    voided: boolean;\n\n    note: string;\n\n\n    protected toProperty(name: string, value) {\n        if (name == 'items') {\n            return Data.toDataArray(Item, value);\n        } else if (name == 'groups') {\n            return Data.toDataArray(ItemGroup, value);\n        } else {\n            return super.toProperty(name, value);\n        }\n    }\n\n    static isSet(oi: OrderItem): boolean {\n\n        if (oi.groups && oi.groups.length > 1) {\n            return true;\n        }\n\n        if (oi.combo) return true;\n\n        let mainItem: Item = OrderItem.getMainItem(oi);\n\n        if (mainItem) {\n            return Item.isSet(oi.category, mainItem);\n        }\n\n        return false;\n\n    }\n\n    static getMainItem(oi: OrderItem): Item {\n\n        let item: Item;\n\n        if (oi.items && oi.items.length > 0) {\n            item = oi.items[0];\n        } else {\n            item = oi.groups[0].items[0];\n        }\n\n        /*\n        if(item && item.origin){\n            item = item.origin;\n        }*/\n\n        return item;\n    }\n\n    setDicountcode(discountcode) {\n        this.discountId = discountcode\n    }\n\n    setRecommended(isRec: boolean) {\n        this.recommended = isRec;\n    }\n\n    items: Item[] = [];\n    static flattenItems(oi: OrderItem) {\n\n        /*\n        var items = [];\n        for(let group of oi.groups){\n            for(let item of group.items){\n                items.push(item);\n            }\n        }\n        oi.items = items;\n        */\n        oi.items = OrderItem.getFlattenItems(oi, true);\n    }\n\n    static getFlattenItems(oi: OrderItem, includeMods: boolean): Item[] {\n\n        var items = [];\n        for (let group of oi.groups) {\n\n            if (!group.items) continue;\n\n            for (let item of group.items) {\n                items.push(item);\n\n                if (includeMods && item.mgroups) {\n                    for (let mig of item.mgroups) {\n                        for (let item of mig.items) {\n                            item.modifier = true;\n                            items.push(item);\n                        }\n                    }\n                }\n\n            }\n        }\n\n        return items;\n    }\n\n    static toOrderItemsData(orderItems: OrderItem[], toServer: boolean = false): any[] {\n        var result: any[] = [];\n        for (let orderItem of orderItems) {\n            var tmp = OrderItem.toOrderItemData(orderItem, toServer);\n            result.push(tmp);\n        }\n\n        return result;\n\n    }\n\n    static toOrderItemData(orderItem: OrderItem, toServer: boolean = false): any {\n        var json = {};\n        json['total'] = orderItem.total;\n        json['groups'] = ItemGroup.toItemGroupsData(orderItem.groups, toServer);\n        json['quantity'] = orderItem.quantity;\n        json['category'] = Category.toCategoryData(orderItem.category);\n        json['categoryId'] = orderItem.categoryId;\n        json['categoryType'] = orderItem.categoryType;\n        json['discountId'] = orderItem.discountId;\n        json['combo'] = orderItem.combo;\n        if (orderItem.category) {\n            json['cgroupId'] = orderItem.category.cgroupId;\n            json['departmentId'] = orderItem.category.departmentId;\n        }\n        json['handling'] = orderItem.handling;\n        json['recommended'] = orderItem.recommended;\n        json['serviceCharge'] = orderItem.serviceCharge;\n        json['points'] = orderItem.points;\n        json['note'] = orderItem.note;\n        return json;\n\n    }\n\n    static isUnlockOrderItem(oi: OrderItem): boolean {\n        return oi?.category?.type === 'unlock' || oi?.categoryType == 'unlockItem';\n    }\n\n    static isOrderItemHasCategoryType(oi: OrderItem, type: 'unlock' | 'unlockItem'): boolean {\n        return oi?.category?.type === type || oi?.categoryType == type;\n    }\n\n}\n","import { ReceiptOption } from './receipt-option';\nimport { Address } from './address';\nimport { Brand } from './brand';\nimport { Courier } from './courier';\nimport { Data } from './data';\nimport { Discount } from './discount';\nimport { Location } from './location';\nimport { Member } from './member';\nimport { Offer } from './offer';\nimport { OrderItem } from './order-item';\nimport { Printer } from './printer';\nimport { Store } from './store';\n\nexport class Order extends Data {\n\n    class: string = \"Order\";\n    itemsCount: number = 0;\n    data: any;\n    brandId: number = 0;\n    brand: Brand;\n\n    identifications = [];\n    id: string;\n    backendId: string;\n    grandTotal: number = 0;\n    chargeAmount: number = 0;\n    total: number = 0;\n    discount: number = 0;\n    fullDiscount: number;\n    service: number = 0;\n    status: string;\n    deliveryStatus: string;\n    pickupStatus: string;\n    orderitems: OrderItem[] = [];\n    storeId: number;\n\n    originalStoreId: number;\n\n    courtId: number;\n    store: Store;\n    orderNo: string;\n    member: Member;\n    create: number;\n    update: number;\n    business: string;\n    type: string;\n    memberNumber: number;\n    address: Address;\n    pickup: number;\n    pickupId: number;\n    countryCode: string;\n    username: string;\n    phone: string;\n    session: string;\n    spot: string;\n    takeout: boolean;\n    paid: boolean;\n    schedule: number;\n    staff: string;\n    station: string;\n    stationId: string;\n    payment: string;\n    payments: any[];\n    remark: string;\n    discounts: Discount[] = []; // applied discount\n    promotions: Discount[]; // original discounts information\n    expire: number;\n    test: boolean;\n    reprint: number;\n    extra: any;\n    firstName: string;\n    lastName: string;\n    qrcode: string;\n    posSync: boolean;\n    error: string;\n    location: Location;\n    voidCode: string;\n    voidReason: string;\n    locale: string;\n    prepare: number;\n    sub: string;\n    subpay: string;\n    uuid: string;\n    tax: number;\n    tips: number;\n    offers: Offer[] = [];\n    charge: any;\n    newOffers: Offer[] = [];\n    handling: number = 0;\n    callNo: string;\n    multi: boolean;\n    printStatus: boolean;\n    printers: Printer[] = [];\n    discountCode: string;\n    promoCode: string;\n    promoCodes: string[];\n    discountRate: number;\n    gifts: OrderItem[];\n    usablePoints: number = 0;\n    usedPoints: number = 0; //order to use points\n    usedPointsAmt: number = 0; //order to use points amount\n    reservedPoints: number = 0; //points reserved in server\n    usedPointsToMoney: number = 0; // the points value to using pointToMoney\n    usedPointsToItem: number = 0; // the points value to using pointToItem\n    usedPointsForItem: number = 0;\n\n    canUseEcredit: number = 0; // user pay with ewallet balance by FE\n    eqvEcreditAmt: number = 0; // the spend only pay with ewallet balance\n\n    payFee: number = 0;\n    rounding: number = 0;\n    pagerNo: string;\n    pagerMessageId: string;\n    errorMessage: string;\n    sequence: number;\n    taxes: any[];\n    posReceipt: string;\n    serviceCharge: number;\n    seats: number;\n    source: string; //for condition.source check, value: \"kiosk\" or \"mobile\"\n    container: string;\n    sourceId: string;\n    sourceUrl: string; //for server to debug in case there is an error\n    email: string;\n    loveCode: string;\n    companyCode: string;\n    batchId: string;\n    statusUrl: string;\n    containerUser: string;\n\n    ereceipt: boolean;\n    memberId: any;\n    deliveryId: string;\n    shipping: number = 0;\n    deliveryCost: number;\n    overpay: number = 0;\n    courier: Courier;\n\n    note: string;\n\n    memberCode: string;\n    multiOrderDiscount: number;\n    multiOrderGrandTotal: number;\n    points: number;\n    expectedDelivery: number;\n    expectedDelivery2: number;\n    codIntendedPayAmount: number;\n    passcode: number;\n\n    deviceId: string;\n    completed: boolean = false;\n    cutlery: boolean = false;\n    contactless: boolean = false;\n    ended: boolean = false;\n    usedCashCouponAmt: number;\n\n    subs: Order[];\n\n    pickupInfo: any;\n    pickupMethod: any;\n\n    locker: String;\n    pickupPointId: any;\n    pickupPoint: any;\n\n    canCheckFail: boolean;\n    receiptOption: ReceiptOption;\n\n    static flattenItems(order: Order) {\n\n        for (let oi of order.orderitems) {\n            OrderItem.flattenItems(oi);\n        }\n\n    }\n\n    static getCount(order: Order): number {\n        let quantities = {};\n        let count = 0;\n        for (let oi of order.orderitems) {\n\n            if (!OrderItem.isSet(oi)) {\n\n                count += oi.quantity;\n                let t = oi.quantity * oi.total;\n                //total += MathUtils.round(t, 2);\n\n                let mainItemId = oi.items[0].id;\n                let quantity = quantities[mainItemId];\n                if (!quantity) quantity = 0;\n                quantity += oi.quantity;\n                quantities[mainItemId] = quantity;\n            } else {\n\n                count += oi.quantity;\n                //let t = oi.quantity * oi.total;\n                //total += MathUtils.round(t, 2);\n\n            }\n        }\n        return count;\n    }\n\n    /*\n    static toOrdersData(orders: Order[]): any[] {\n        var result: any[] = [];\n        for (let order of orders) {\n            var tmp = Order.toOrderData(order);\n            result.push(tmp);\n        }\n\n        return result;\n\n    }\n    */\n\n    static toOrderData(order: Order, toServer: boolean = false): any {\n        var json = {};\n        json[\"total\"] = order.total;\n        json[\"grandTotal\"] = order.grandTotal;\n        json[\"itemsCount\"] = order.itemsCount;\n        json[\"discount\"] = order.discount;\n        json[\"discountCode\"] = order.discountCode;\n        json[\"promoCode\"] = order.promoCode;\n        json[\"promoCodes\"] = order.promoCodes;\n        json[\"storeId\"] = order.storeId;\n        json[\"courtId\"] = order.courtId;\n        json[\"type\"] = order.type;\n        json[\"charge\"] = order.charge;\n        json[\"uuid\"] = order.uuid;\n        json[\"payFee\"] = order.payFee;\n        json[\"serviceCharge\"] = order.serviceCharge;\n        json[\"handling\"] = order.handling;\n        if (order.sub) {\n            json[\"sub\"] = order.sub\n        }\n        if (order.source) {\n            json[\"source\"] = order.source;\n        }\n        if (order.container) {\n            json[\"container\"] = order.container;\n        }\n        json[\"sourceUrl\"] = order.sourceUrl;\n        json[\"email\"] = order.email;\n        json[\"note\"] = order.note;\n        json[\"loveCode\"] = order.loveCode;\n        json[\"companyCode\"] = order.companyCode;\n        json[\"ereceipt\"] = order.ereceipt;\n        json[\"batchId\"] = order.batchId;\n        json[\"memberId\"] = order.memberId;\n        json[\"charge\"] = order['charge'];\n        json[\"deviceId\"] = order.deviceId;\n\n        if(order.receiptOption) {\n            json[\"receiptOption\"] = order.receiptOption;\n        }\n\n        if (order.spot) {\n            json[\"spot\"] = order.spot;\n        }\n\n        if (order.pagerNo) {\n            json[\"pagerNo\"] = order.pagerNo;\n        }\n\n        if (order.extra) {\n            json[\"extra\"] = order.extra;\n        }\n        if (order?.session) {\n            json[\"session\"] = order.session;\n        }\n        if (!isNaN(order.usedPoints) && order.usedPoints > 0) {\n            json[\"usedPoints\"] = order.usedPoints;\n\n        }\n        if (!isNaN(order.usedPointsForItem) || !isNaN(order.usedPointsToMoney)) {\n            // json[\"usedPoints\"] = (!isNaN(order.usedPointsForItem) ? order.usedPointsForItem : 0) + (!isNaN(order.usedPointsToMoney) ? order.usedPointsToMoney : 0);\n            // console.log('order use point for item', order.usedPointsForItem);\n            // console.log('order use point for money', order.usedPointsToMoney);\n            json[\"usedPointsForItem\"] = order?.usedPointsForItem\n            json[\"usedPointsToMoney\"] = order?.usedPointsToMoney\n        }\n\n        json['canUseEcredit'] = order?.canUseEcredit;\n        json['eqvEcreditAmt'] = order?.eqvEcreditAmt;\n        json[\"orderitems\"] = OrderItem.toOrderItemsData(order.orderitems, toServer);\n        if(order?.offers){\n            json[\"offers\"] = Offer.toOffersData(order.offers);\n        }\n\n\n        if (order.expire) {\n            json[\"expire\"] = order.expire;\n\n        }\n        if (order.memberCode) {\n            json[\"memberCode\"] = order.memberCode;\n        }\n        json[\"sequence\"] = order.sequence;\n\n        if (order.multiOrderGrandTotal) {\n            json['multiOrderDiscount'] = order.multiOrderDiscount;\n            json['multiOrderGrandTotal'] = order.multiOrderGrandTotal;\n        }\n\n        var subs = order.subs;\n\n        if (subs && subs.length > 0) {\n            var ja = [];\n            for (let so of subs) {\n\n                var jo = Order.toOrderData(so);\n                ja.push(jo);\n\n            }\n            json['subs'] = ja;\n        }\n\n        return json;\n\n    }\n\n    calculate() {\n        var grandTotal = 0;\n\n        for (let oi of this.orderitems) {\n\n            var oiTotal = 0;\n\n            for (let group of oi.groups) {\n\n                var items = group.selected;\n\n                oiTotal += items[0].price;\n\n            }\n\n            oi.total = oiTotal;\n            grandTotal += oiTotal;\n        }\n\n        this.grandTotal = grandTotal;\n    }\n\n    protected toProperty(name: string, value) {\n        if (name == \"orderitems\") {\n            return Data.toDataArray(OrderItem, value);\n        } else if (name == \"promotions\") {\n            return Data.toDataArray(Discount, value);\n        } else if (name == \"location\") {\n            return Data.toData(Location, value);\n        } else if (name == \"brand\") {\n            return Data.toData(Brand, value);\n        } else if (name == \"store\") {\n            return Data.toData(Store, value);\n        } else if (name == \"offers\" || name == \"newOffers\") {\n            return Data.toDataArray(Offer, value);\n        } else {\n            return super.toProperty(name, value);\n        }\n    }\n\n}\n","import { OpeningHours } from './opening-hours';\r\nimport { Data } from './data';\r\nimport * as moment from 'moment';\r\n\r\nexport class Period extends Data {\r\n    class: string = 'Period';\r\n    id: string;\r\n    name: string;\r\n    code: string;\r\n    start: number;\r\n    end: number;\r\n    startTime: string;\r\n    endTime: string;\r\n    backendId: string;\r\n    cron: string;\r\n    display: string;\r\n    prefix: string;\r\n    openings: OpeningHours;\r\n    prestop: number;\r\n    modes: string[];\r\n    periodOverride;\r\n\r\n    public static isTimeOpen(period: Period, time: number): boolean {\r\n\r\n        var startTime = period.startTime;\r\n        var endTime = period.endTime;\r\n\r\n\r\n        var start = moment(startTime, 'HH:mm');\r\n        var end = moment(endTime, 'HH:mm');\r\n\r\n        if (!start || !end) {\r\n            console.log(\"invalid start / end, period invalid\");\r\n            return false;\r\n        }\r\n\r\n        var now = moment(time);\r\n\r\n        start.year(now.year());\r\n        start.month(now.month());\r\n        start.dayOfYear(now.dayOfYear());\r\n\r\n        end.year(now.year());\r\n        end.month(now.month());\r\n        end.dayOfYear(now.dayOfYear());\r\n\r\n        if (end < start) {\r\n            console.log(\"stepped over time to next day!!!\");\r\n            if (now > end) {\r\n                end = end.add(24, 'hours');\r\n            } else {\r\n                start = start.add(-24, 'hours');\r\n            }\r\n        }\r\n\r\n        var within = Period.between(start, end, now);\r\n\r\n        return within;\r\n    }\r\n\r\n    private static between(start: any, end: any, time: any) {\r\n\r\n        var ms = time.valueOf();\r\n\r\n        return ms >= start.valueOf() && ms <= end.valueOf();\r\n\r\n    }\r\n}\r\n","import { Data } from './data';\n\nexport class Pos extends Data {\n\n    class: string = \"Pos\";\n    id: number;\n    name: string;\n    type:string;\n    payments: string[] = [];\n    host: string;\n    lockTable: boolean = false;\n    lockDuration: number;\n    manualSync: boolean = false;\n    extra: any = {};\n    discounted:boolean;\n    tax:boolean;\n    serviceCharge:boolean;\n    basePrep:number;\n    groupId: number;\n    deliveryDelay: number;\n    tableLock: string;\n    maxRemarkLength: number;\n    requireSpot: boolean;\n    inputSpot: boolean;\n    inputPax: boolean;\n\n    protected toProperty(name: string, value) {\n\n        return value;\n    }\n\n    hasPayment(method: string) : boolean{\n\n        if(!this.payments) return false;\n\n        return this.payments.indexOf(method) >= 0;\n\n    }\n\n}\n","import { Data } from './data';\r\nimport { OpeningHours } from './opening-hours';\r\nimport { Member } from './member';\r\nimport { Store } from './store';\r\n\r\nexport class PriceRule extends Data {\r\n    class: string = \"PriceRule\";\r\n    level: number = 1;\r\n    name: string;\r\n    id: string;\r\n    priority: number;\r\n    enabled:boolean;\r\n    openings: OpeningHours;\r\n    modes:string[];\r\n    users:string[];\r\n    maxTotal:number;\r\n    minTotal:number;\r\n    tier: string;\r\n\r\n    protected toProperty(name: string, value) {\r\n\r\n        switch (name) {\r\n            case \"openings\":\r\n                value = Data.toData(OpeningHours, value);\r\n                break;\r\n            default:\r\n                value = super.toProperty(name, value);\r\n                break;\r\n        }\r\n\r\n        return value;\r\n    }\r\n\r\n    private static isActive(rule: PriceRule, time: number, store: Store): boolean {\r\n\r\n        if(!rule.openings){\r\n            return true;\r\n        }\r\n\r\n        let brandOpeningHours = null;\r\n        if (store && store.brand && store.brand.openings) {\r\n            brandOpeningHours = store.brand.openings;\r\n        }\r\n\r\n        return OpeningHours.isTimeOpen(brandOpeningHours, rule.openings, time);\r\n    }\r\n\r\n    private static getUserScore(rule: PriceRule, member: Member): number{\r\n\r\n        console.log('getUserScore2', rule);\r\n\r\n        var users = rule.users;\r\n        if(!users || users.length == 0) return 0;\r\n\r\n        //NOTE: Only support guest or member now\r\n\r\n        var type = \"guest\";\r\n        if (member?.membership) {\r\n            type = 'member';\r\n        }\r\n\r\n        if(users.indexOf(type) >= 0){\r\n            return 100;\r\n        }else{\r\n            return -10000;\r\n        }\r\n\r\n    }\r\n    private static getMemberTierScore(rule: PriceRule, member: Member): number{\r\n\r\n        var users = rule.tier;\r\n        if(!users || users.length == 0) return 0;\r\n\r\n        //NOTE: Support member tier now\r\n\r\n        var type = member?.membership?.memberTierPolicy?.tier || member?.membership?.tier;\r\n        if(type === users){\r\n            return 100;\r\n        }else{\r\n            return -10000;\r\n        }\r\n    }\r\n\r\n    private static getModeScore(rule: PriceRule, mode: string): number{\r\n\r\n        var modes = rule.modes;\r\n\r\n        console.log(\"getModeScore2\", mode);\r\n\r\n        if(!modes || modes.length == 0) return 0;\r\n\r\n        if(rule.modes.indexOf(mode) >= 0){\r\n            return 100;\r\n        }else{\r\n            return -10000;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    public static getMatch(rule: PriceRule, time: number, mode: string, member: Member, store: Store, checkTierPrice: boolean): number{\r\n\r\n        var timeOk = PriceRule.isActive(rule, time, store);\r\n        if (!timeOk) {\r\n            console.log('not active');\r\n            return -10000;\r\n        }\r\n        var userScore = PriceRule.getUserScore(rule, member);\r\n        var modeScore = PriceRule.getModeScore(rule, mode);\r\n        var memberTierScore = PriceRule.getMemberTierScore(rule, member);\r\n        //var periodScore = PriceRule.getPeriodScore(rule);\r\n        console.log('userScore', userScore, 'modeScore', modeScore);\r\n\r\n        if(checkTierPrice){\r\n            if (userScore > -10000 && modeScore > -10000 && memberTierScore > -10000) {\r\n                return userScore + modeScore + memberTierScore;\r\n            }\r\n        } else {\r\n            if (userScore > -10000 && modeScore > -10000) {\r\n                return userScore + modeScore;\r\n            }\r\n        }\r\n\r\n        return -10000;\r\n    }\r\n}\r\n","\r\n\r\nimport { Data } from \"./data\";\r\n\r\nexport class PrintJob extends Data {\r\n\r\n    class: string = \"PrintJob\";\r\n    id: string;\r\n    name: string;\r\n    body: string;\r\n    printer: string;\r\n    status: string;\r\n    groupId: number;\r\n    brandId: number;\r\n    storeId: number;\r\n\r\n    orderNo: string;\r\n    orderId: string;\r\n    printerId: string;\r\n    printerCode: string;\r\n    vendor: string;\r\n    mode: string;\r\n    test: boolean = false;\r\n    create: number;\r\n    update: number;\r\n\r\n    callbackUrl: string;\r\n\r\n}","\r\n\r\nimport { Data } from \"./data\";\r\n\r\nexport class Printer extends Data {\r\n\r\n    class: string = \"Printer\";\r\n    id: string;\r\n    code: string;\r\n    ip: string;\r\n    model: string;\r\n    name: string;\r\n    enabled: boolean = false;\r\n    dualReceipt: boolean;\r\n    apply: string;\r\n    showNo: boolean;\r\n    vendor: string;\r\n    locale: string;\r\n    usage: string;\r\n    status: string;\r\n    cloud: boolean = false;\r\n    base: boolean;\r\n    lastOnline: number;\r\n    lastPrint: number;\r\n    media: string;\r\n    url: string;\r\n    errorCode: string;\r\n\r\n}","import { Data } from './data';\n\nexport class Property extends Data {\n    class: string = \"Property\";\n    id: number;\n    name: string;\n    images: any;\n    groupId: number;\n\n    protected toProperty(name: string, value) {\n\n\n\n        return super.toProperty(name, value);\n    }\n}\n","import { Data } from './data';\r\n\r\nexport class Publish extends Data {\r\n    class: string = \"Publish\";\r\n    current: number;\r\n    version: number;\r\n    start: number;\r\n    end: number;\r\n}","import { Data } from './data';\r\n\r\nexport class Queue extends Data {\r\n    class: string = \"Queue\";\r\n    id: string;\r\n    min: number;\r\n    max: number;\r\n    prefix: string;\r\n    currentDisplay: string;\r\n    next: string;\r\n    current: number;\r\n    active: boolean = false;\r\n}","import { Data } from './data';\r\nimport { Recommendation } from './recommendation';\r\n\r\nexport class RecommendationGroup extends Data {\r\n    class: string = \"RecommendationGroup\";\r\n   \r\n    name: string;\r\n    preferenceId: string;\r\n    recommendations: Recommendation[];\r\n    scores: any;\r\n\r\n}","import { Data } from './data';\r\nimport { Category } from './category';\r\nimport { ItemGroup } from './item-group';\r\nimport { Item } from './item';\r\n\r\nexport class Recommendation extends Data {\r\n    class: string = \"Recommendation\";\r\n   \r\n    category: Category;\r\n    itemgroup: ItemGroup;\r\n    item: Item;\r\n    reasons: any[];\r\n    score: number;\r\n    featuredScore: number;\r\n    relationScore: number;\r\n\r\n}","import { Data } from './data';\nimport { Discount } from './discount';\nimport { Order } from './order';\n\nexport class Reward extends Data {\n    class: string = \"Reward\";\n    id: number;\n    name: string;\n    hint: string;\n    published: boolean;\n    backendId: string;\n    price: number;\n    start: number;\n    end: number;\n    cost: number;\n    desc: string;\n    quota: number;\n    spending: number;\n    redemptions: number;\n    chance: number;\n    discount: Discount;\n    safeDesc: any;\n    extra: any;\n\n    static toRewardData(reward: Reward): any {\n        var json = {};\n        json[\"id\"] = reward.id;\n        json[\"name\"] = reward.name;\n        json[\"hint\"] = reward.hint;\n        json[\"published\"] = reward.published;\n        json[\"backendId\"] = reward.backendId;\n        json[\"price\"] = reward.price;\n        if (reward.discount) {\n            json[\"discount\"] = Discount.toDiscountData(reward.discount);\n\n        }\n\n\n        return json;\n\n    }\n\n    protected toProperty(name: string, value) {\n\n        if (name == \"discount\") {\n            return Data.toData(Discount, value);\n        }\n\n        return value;\n    }\n\n    // 判断在当前的order下是否满足使用reward的条件(reward flow：用佐offer, 相当于apply 一次 discount)\n    // Whether to meet the conditions of using reward with Order\n    public isReawardSatisfied(order: Order): boolean {\n        let ok: boolean = true;\n        let promo = this.findPromo_discount(order);\n        promo && this.discount && this.discount.conditions.forEach(c => {\n            if (!c.isSatisfied(order, promo)) ok = false;\n        })\n        return ok;\n    }\n\n    // 从所有的 discounts 里找到当前 reward 对应的 discount\n    public findPromo_discount(order: Order): Discount {\n        // order.promotions: original discounts_all information\n        if (!order || !order.promotions || order.promotions.length === 0) return null;\n\n        let promos = order.promotions.filter((pro) => {\n            return this.discount && pro && this.discount.id === pro.id;\n        });\n\n        let promo = promos && promos[0];\n        if (!promo) {\n            console.log('找不到reward 对应的discount in store.menu.discounts(brand.discounts)');\n        }\n        return promo;\n    }\n\n}\n","import { Data } from './data';\n\nexport class Screen extends Data {\n    class: string = \"Screen\";\n    name: string;\n    id: string;\n    layout: string;\n    signageId: string;\n    sequence: number = 0;\n    tiles: any[];\n    dynamic: boolean = false;\n    published: boolean = false;\n    settings: any;\n    maxTiles: number = 10;\n    width: number;\n    height: number;\n}","import { Data } from './data';\nexport class Seo extends Data {\n    desc: string;\n    keywords: string;\n    title: string;\n}\n","import { Data } from './data';\n\nexport class Setting extends Data {\n    autoPickup: boolean;\n    catLayout: string;\n    itemLayout: string;\n    deliveryCharge: number;\n    hidePrice: boolean;\n    hideOrderHistPrice: boolean;\n    hideZeroItemPrice: boolean;\n    hideBackLbl: boolean;\n    hideEmailField: boolean;\n    hidePhoneField: boolean;\n    hideNameField: boolean;\n    maxDeliveryTotal: number;\n    maxItems: number;\n    minDeliveryTotal: number;\n    orderExpire: number;\n    pickupCharge: number;\n    pickupItemCharge: number;\n    pickupTime: boolean;\n    preselectItem: boolean;\n    qrPickup: boolean;\n    quickCheckout: boolean;\n    quickModifier: boolean;\n    quickSingleItem: boolean;\n    serviceCharge: number;\n    serviceChargeTaxable: boolean;\n    handlingChargeTaxable: boolean;\n    taxIgnoreDiscount: boolean;\n    serviceChargeIncluded: boolean;\n    serviceChargeApplyAfterDiscounted: boolean;\n    serviceChargeApplyOrderType: string;\n    setLayout: string;\n    tax: number;\n    taxIncluded: boolean;\n    tcPrompt: string;\n    hideHistory: boolean;\n    inventory: string;\n    lockCode: string;\n    hideIgName: boolean;\n    hideModIgName: boolean;\n    hideTotal: boolean;\n    emailRequired: boolean;\n    phoneRequired: boolean;\n    nameRequired: boolean;\n    enableSearch: boolean;\n    pickUpTimeLimit: number;\n    chargeDesc: string;\n    qrcodeScan: boolean;\n    userTable: boolean;\n    showDefaultPrice: boolean;\n    aiRecommendCount: number;\n    discountInput: boolean;\n    itemLayoutHasImage: boolean;\n    smallLogo: boolean;\n    checkoutTrimDecimals: boolean;\n    checkoutTrimDecimalsPlace: number;\n    checkoutTrimDecimalsMode: string;\n    discountRoundMethod: string;\n    pickupTimeInterval: number;\n    earliestPickupTimeDelay: number;\n    discountRoundMode: string;\n    forceRefreshInterval: number;\n    pointsAsPaymentAfterTax: boolean;\n    packageCode: string;\n    showPosBrand: boolean;\n    discountRoundingPrecision: number;\n    maxTakeawayTotal: number;\n    minTakeawayTotal: number;\n    maxDineinTotal: number;\n    minDineinTotal: number;\n    retailWithWeb: boolean;\n    requireLogin: boolean;\n    deliveryTotalUseSubtotal: boolean;\n    takeawayTotalUseSubtotal: boolean;\n    dineinTotalUseSubtotal: boolean;\n}\n","import { Data } from './data';\n\nexport class Signage extends Data {\n    class: string = \"Signage\";\n    name: string;\n    id: string;\n    layout: string;\n    screenCount: number = 0;\n    dynamic: boolean = false;\n    published: boolean = false;\n    settings: any;\n}","import * as moment from 'moment';\r\nimport {Data} from './data';\r\n\r\nexport class Slot extends Data {\r\n\r\n    class: string = \"Slot\";\r\n    type: string;\r\n    name: string;\r\n    id: string;\r\n    start: number;\r\n    end: number;\r\n    weekday: number;\r\n    startDate: string;\r\n    endDate: string;\r\n    startTime: string;\r\n    endTime: string;\r\n\r\n    available: boolean; // flag whether time slot is available or not. ex: for pickup slot quota\r\n    used: number;\r\n    quota: number;\r\n\r\n\r\n    public static isWithinDayRange(slot: Slot, time: number): boolean {\r\n\r\n\r\n        var start = moment(slot.startDate);\r\n        var end = moment(slot.endDate);\r\n        if (slot.startTime && slot.endTime) {\r\n            var startTime = moment(slot.startTime, 'HH:mm');\r\n            var endTime = moment(slot.endTime, 'HH:mm');\r\n            end = endTime < startTime ? moment((slot.endDate + \" \" + slot.endTime), \"YYYY-MM-DD HH:mm\") : moment(slot.endDate);\r\n        }\r\n\r\n        end.add(\"day\", 1);\r\n\r\n\r\n        var now = moment(time);\r\n\r\n        //console.log(\"is within?\", now.toISOString(), start.toISOString(), end.toISOString());\r\n\r\n        return Slot.between(start, end, now);\r\n\r\n\r\n    }\r\n\r\n    //inclusive start, exclusive end\r\n    private static between(start: any, end: any, time: any, exclusiveEnd = true) {\r\n\r\n        var ms = time.valueOf();\r\n\r\n        if (exclusiveEnd) {\r\n            return ms >= start.valueOf() && ms < end.valueOf();\r\n        } else {\r\n            return ms >= start.valueOf() && ms <= end.valueOf();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    public static isTimeOpen(slot: Slot, time: number, checkWeekdays: boolean): boolean {\r\n\r\n        var startTime = slot.startTime;\r\n        var endTime = slot.endTime;\r\n\r\n\r\n        var start = moment(startTime, \"HH:mm\");\r\n        var end = moment(endTime, \"HH:mm\");\r\n\r\n        if (!start || !end) {\r\n            //console.log(\"invalid start / end, period invalid\");\r\n            return false;\r\n        }\r\n\r\n        var now = moment(time);\r\n\r\n        var weekday = now.day();\r\n        var overNextDay = end < start;\r\n        var isOverDay = overNextDay && (slot.weekday - weekday == -1 || slot.weekday - weekday == 6)\r\n\r\n        if (checkWeekdays && weekday != slot.weekday && slot.weekday < 10) {\r\n\r\n            //console.log(\"wrong weekday\");\r\n            if (!isOverDay) {\r\n                return false;\r\n\r\n            }\r\n        }\r\n\r\n        if (!Slot.isOpenType(slot)) {\r\n            //if slot time is closed and it's matching day, always closed\r\n            return false;\r\n        }\r\n\r\n        //console.log(\"right weekday\", slot.weekday);\r\n\r\n        start.year(now.year());\r\n        start.month(now.month());\r\n        start.dayOfYear(now.dayOfYear());\r\n\r\n        end.year(now.year());\r\n        end.month(now.month());\r\n        end.dayOfYear(now.dayOfYear());\r\n\r\n        if (overNextDay) {\r\n            //console.log(\"stepped over time to next day!!!\");\r\n            if (weekday == 0) {\r\n                if (now > end && isOverDay) {\r\n                    end = end.add(24, 'hours');\r\n                } else if (isOverDay) {\r\n                    start = start.add(-24, 'hours');\r\n                }\r\n            } else if (now > end) {\r\n                end = end.add(24, 'hours');\r\n            } else if (isOverDay || slot.weekday > 10) {\r\n                start = start.add(-24, 'hours');\r\n            }\r\n        }\r\n\r\n        //console.log(\"start moment\", start.toDate());\r\n        //console.log(\"now moment\", now.toDate());\r\n        //console.log(\"end moment\", end.toDate());\r\n\r\n        var within = Slot.between(start, end, now, false);\r\n\r\n        return within;\r\n    }\r\n\r\n    public static isWeekdayOpen(slot: Slot, time: number): boolean {\r\n\r\n        var now = moment(time);\r\n\r\n        var weekday = now.day();\r\n        if (weekday != slot.weekday) {\r\n\r\n            return false;\r\n        }\r\n\r\n        var startTime = slot.startTime;\r\n        var endTime = slot.endTime;\r\n\r\n        if (startTime && endTime) return Slot.isOpenType(slot);\r\n\r\n        return false;\r\n    }\r\n\r\n    public static isDateOpen(slot: Slot, time: number): boolean {\r\n\r\n        var now = moment(time);\r\n\r\n        var startTime = slot.startTime;\r\n        var endTime = slot.endTime;\r\n\r\n        if (startTime && endTime) return Slot.isOpenType(slot);\r\n\r\n        return false;\r\n    }\r\n\r\n    public static isOpenType(slot: Slot) {\r\n\r\n        if (slot.type) {\r\n            return 'open' == slot.type;\r\n        }\r\n\r\n        return true;\r\n\r\n    }\r\n\r\n    /**\r\n     * Get start & end time from specific slot with reference of time & n day before/after\r\n     *\r\n     * @param time\r\n     * @param slot\r\n     * @param n\r\n     * @private\r\n     */\r\n    private static getTimeFromSlot(time: number, slot: Slot, n): { start: any; end: any } {\r\n        const now = moment(time);\r\n        let start = moment(slot.startTime, 'HH:mm');\r\n        let end = moment(slot.endTime, 'HH:mm');\r\n\r\n        start.year(now.year());\r\n        start.month(now.month());\r\n        start.date(now.date());\r\n\r\n        end.year(now.year());\r\n        end.month(now.month());\r\n        end.date(now.date());\r\n\r\n        start = start.add(n * 24, 'hours');\r\n        end = end.add(n * 24, 'hours');\r\n\r\n        if (end < start) {\r\n            end = end.add(24, 'hours');\r\n        }\r\n\r\n        return {\r\n            start,\r\n            end\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Method for checking it time open or not in weekdays (0 - 6).\r\n     * 0 = SUN, 6 = SAT\r\n     *\r\n     * It compares the date with current time & before time & next time.\r\n     * So, case of over day should be covered.\r\n     *\r\n     * Ex:\r\n     * Schedule : SAT = 18 - 4, SUN = 22 - 1\r\n     * If time ref is SUN 3, then it should use time slot SAT\r\n     *\r\n     * @param slots\r\n     * @param time\r\n     */\r\n    public static isTimeOpenOnWeekdays(slots: Slot[], time: number): boolean {\r\n        // console.log('start checking======= ', slots);\r\n\r\n        // DEBUG PURPOSE ONLY\r\n        // const t = new Date(2023, 2, 30, 1, 0, 0).getTime();\r\n        const t = time;\r\n        const now = moment(t);\r\n        const nowWeekday = now.day();\r\n\r\n        const todaySlot = slots.find(f => f.weekday == nowWeekday);\r\n        if (!todaySlot) {\r\n            return false;\r\n        }\r\n\r\n        const beforeSlotWeekday = todaySlot.weekday - 1 == -1 ? 6 : todaySlot.weekday - 1;\r\n        const beforeSlot = slots.find(f => f.weekday == beforeSlotWeekday);\r\n\r\n        const afterSlotWeekday = todaySlot.weekday + 1 == 7 ? 0 : todaySlot.weekday + 1;\r\n        const afterSlot = slots.find(f => f.weekday == afterSlotWeekday);\r\n\r\n        const beforeTime = this.getTimeFromSlot(t, beforeSlot, -1);\r\n        const todayTime = this.getTimeFromSlot(t, todaySlot, 0);\r\n        const afterTime = this.getTimeFromSlot(t, afterSlot, 1);\r\n\r\n        if (Slot.between(todayTime.start, todayTime.end, now, false) && Slot.isOpenType(todaySlot)) {\r\n            return true;\r\n        } else if (Slot.between(beforeTime.start, beforeTime.end, now, false) && Slot.isOpenType(beforeSlot)) {\r\n            return true;\r\n        } else if (Slot.between(afterTime.start, afterTime.end, now, false) && Slot.isOpenType(afterSlot)) {\r\n            return true;\r\n        }\r\n\r\n        // console.log('mmmm before ', beforeSlot, beforeTime.start.toDate(), beforeTime.end.toDate());\r\n        // console.log('mmmm today ', todaySlot, todayTime.start.toDate(), todayTime.end.toDate());\r\n        // console.log('mmmm after ', afterSlot, afterTime.start.toDate(), afterTime.end.toDate());\r\n\r\n        return false;\r\n    }\r\n}\r\n","import { Data } from './data';\r\n\r\nexport class Spot extends Data {\r\n    class: string = \"Spot\";\r\n    id: string;\r\n    status: string;\r\n    full: string;\r\n    name: string;\r\n    open: number;\r\n    session: string;\r\n    deviceId: string;\r\n    backendId: string;\r\n    expire: number;\r\n    seats: number;\r\n}","import { Data } from './data';\r\n\r\nexport class Station extends Data {\r\n    class: string = \"Station\";\r\n    id: number;\r\n    //brandId: number;\r\n    create: number;\r\n    lastSeen: number;\r\n    number: string;\r\n    test: boolean;\r\n    name: string;\r\n    storeId: number;\r\n    type:string;\r\n    setting: any;\r\n    tunnel: string;\r\n    lastTunnel: number;\r\n    alert: boolean;\r\n    pendingUpdate: boolean;\r\n    currentPackage: any;\r\n    packageDate: number;\r\n    firstInstall: number;\r\n    lastInstall: number;\r\n    alertEmails: string;\r\n    coreVersion: string;\r\n    customPackage: any;\r\n}","import * as moment from 'moment';\nimport { getClosedTime, getTodayMillisecondsFromTimeString, isAvailablePeriod, isPeriodClosed } from '../utility/check-format-tool';\nimport { Brand } from './brand';\nimport { Category } from './category';\nimport { Crm } from './crm';\nimport { Data } from './data';\nimport { Location } from './location';\nimport { Menu } from './menu';\nimport { OpeningHours } from './opening-hours';\nimport { Period } from './period';\nimport { Pos } from './pos';\nimport { Printer } from './printer';\nimport { Seo } from './seo';\nimport { MenuUtil } from '@aigens/core/src/app/framework/services/menu.util';\n\nexport class Store extends Data {\n\n\n    class: string = \"Store\";\n    id: number;\n    backendId: string;\n    name: string;\n    discoveryName: string;\n    images: any;\n    categories: Category[];\n    location: Location;\n    brand: Brand;\n    brandId: number;\n    channels: string[] = [];\n    features: string[] = [];\n    cateringPickupModes: string[] = [];\n    handle: string;\n    colors: {};\n    currency: string;\n    currencySign: string;\n    timezone: string;\n    country: string;\n    menuId: string;\n    posId: number;\n    groupId: number;\n    languages: string[];\n    language: string;\n    pos: Pos;\n    menu: Menu;\n    closed: boolean;\n    closedMessage: string;\n    version: number;\n    openings: OpeningHours;\n    openings2: OpeningHours;\n    printers: Printer[];\n    periods: Period[];\n    periods2: Period[];\n    periodUsage: string[];\n    periodUsage2: string[];\n    printName: string;\n    passcode: string;\n    passcode2: string;\n    master: boolean;\n    gatag: string;\n    ganame: string;\n    modes: string[];\n    pagers: Period[];\n    pagerUsage: string[];\n    distance: any;\n    crm: Crm;\n    seo: Seo;\n    queues: any;\n    phone: string;\n    hint: string;\n    suspended: string[];\n    virtual: boolean;\n    isPickupStore: boolean;\n    meta: any;\n    couponTemplates: [{}];\n    dynamicWaitingTime ?: String;\n\n    get sign(): string {\n\n        if (this.currency == null && this.currencySign == null) return \"$\";\n\n        if (this.currencySign != null) return this.currencySign;\n\n\n        let cur = this.currency.toLowerCase();\n        let sign = \"$\";\n\n        if (\"cny\" == cur) {\n            sign = \"¥\";\n        } else if (\"inr\" == cur) {\n            sign = \"₹\";\n        } else if (\"myr\" == cur) {\n            sign = \"RM\";\n        } else if (\"sgd\" == cur) {\n            sign = \"S$\";\n        } else {\n            sign = \"$\";\n        }\n\n        return sign;\n    }\n\n    public static getBusiness(store: Store, time: Date) {\n\n        var offset = 8;\n\n        if (store.timezone) {\n            offset = Number.parseInt(store.timezone.replace(\"GMT\", \"\"));\n        }\n\n        return moment(time.getTime()).utcOffset(offset).format('YYYY-MM-DD');\n    }\n\n    public static isOpeningHours(store: Store, time: number): boolean {\n\n        var oh = store?.openings;\n        if (!oh) return true;\n\n        var brand = store.brand;\n        if (brand && brand.openings) {\n            var holidays = brand.openings;\n            oh.ph1 = holidays.holidays;\n        }\n\n        let openings: OpeningHours = null;\n        if (brand && brand.openings) {\n            openings = brand.openings;\n        }\n\n        return OpeningHours.isTimeOpen(openings, oh, time);\n\n    }\n\n    public static checkTimeWithinPeriods(store: Store, time?: number): Period[] {\n        let periods: Period[] = store.menu ? store.menu.periods : [];\n        let withinPeriods: Period[] = []; // current time within that periods\n        const now: Date = time ? new Date(time) : new Date();\n\n        periods.forEach((period, index) => {\n\n            if (isAvailablePeriod(store, period, now)) {\n                withinPeriods.push(period);\n            }\n        });\n        // console.log(\"current time withinperiod ? \" , withinPeriods)\n        return withinPeriods;\n    }\n\n    public static getAllPeriodOfMode(store: Store, mode: string): Period[] {\n        const processPeriods = MenuUtil.getValidPeriod(null, store);\n        const availByMode = processPeriods.filter(period => {\n            return (period?.modes?.includes(mode) ||\n                period?.modes?.includes('all') ||  // all = include\n                !period?.modes || period?.modes?.length === 0);  // null = all = include\n        });\n\n        // console.log('xxxxx ', JSON.parse(JSON.stringify(availByMode)));\n\n        // eliminate period that start - end in range of other period\n        const temp = [];\n        availByMode.forEach(o => {\n            let canSkip = false;\n            temp.forEach(t => {\n                if (o.startNum < t.endNum && o.endNum > t.startNum) {\n                    canSkip = true;\n                }\n            });\n\n            if (!canSkip) {\n                temp.push(o);\n            }\n        });\n\n        // console.log('==== ', availByMode, temp);\n\n        return this.mergePeriod(temp);\n    }\n\n\n    public static mergePeriod(period: any[]): Period[] {\n        if (period.length < 2) {\n            return period;\n        }\n\n        period.sort((a, b) => a['startNum'] - b['startNum']);\n\n        // console.log('sort ==== ', JSON.parse(JSON.stringify(period)));\n\n        const x: any[] = [];\n        // x.push({startNum: period[0].startNum, endNum: period[0].endNum});\n        x.push(period[0]);\n\n        for (let i = 1; i < period.length; i++) {\n            const p = period[i];\n\n            const lastIdx = x.length - 1;\n            const lastX = x[lastIdx];\n\n            if (lastX.endNum >= p.startNum) {\n                lastX.endNum = p.endNum;\n                lastX.end = p.end;\n                lastX.endTime = p.endTime;\n            } else {\n                // x.push({startNum: p.startNum, endNum: p.endNum});\n                x.push(p);\n            }\n        }\n\n        // console.log('xxxxxxxx ', x);\n\n        return x;\n    }\n\n\n    public static stoppedPreOrder(store: Store, time?: number, varPeriod?: any): [boolean, Period] {\n        let periods: Period[] = varPeriod ? varPeriod : (store.menu ? store.menu.periods : []);\n        let currentPeriod: Period;\n        const now: Date = time ? new Date(time) : new Date();\n        const currentTime = now.getTime();\n        let stopped: boolean = null;\n        if (!periods) {\n            periods = [];\n        }\n\n        if (Store.isWholeDayOpen(store)) {\n            const period = new Period();\n            period.endTime = store.menu.periods[store.menu.periods.length - 1].endTime;\n            period.end = store.menu.periods[store.menu.periods.length - 1].end;\n            period.startTime = store.menu.periods[0].startTime;\n            period.start = store.menu.periods[0].start;\n            period['prestop'] = store.menu.periods[store.menu.periods.length - 1]['prestop'] ? store.menu.periods[store.menu.periods.length - 1]['prestop'] : 0;\n\n            stopped = isPeriodClosed(store, period, currentTime);\n            return [stopped, period];\n        }\n\n        periods.forEach((period, index) => {\n\n            if (isAvailablePeriod(store, period, now)) {\n                if (stopped === null) {\n                    stopped = isPeriodClosed(store, period, currentTime);\n                    currentPeriod = period;\n                }\n            }\n\n\n        });\n\n        if (periods.length <= 0) {\n            const closeTime = getTodayMillisecondsFromTimeString(getClosedTime(store, time), time);\n            const current = now.getMilliseconds();\n            stopped = (current >= closeTime);\n            return [stopped, null];\n        }\n\n        if (stopped === null) {\n            return [true, null];\n        }\n        return [stopped, currentPeriod];\n\n    }\n\n    public static hasFeature(store: Store, feature: string): boolean {\n        if (store.features) {\n            return store.features.indexOf(feature) >= 0;\n        }\n        return false;\n    }\n\n    public static getPickUpInfo(store: Store): any {\n\n        let addInfo = {};\n        if (store && store.location && store.menu.settings && store.menu.settings.pickUpTimeLimit) {\n\n            addInfo = {\n                time: store.menu.settings.pickUpTimeLimit,\n                store: store.name,\n                branch: store.location.name\n            };\n        }\n\n        return addInfo;\n    }\n\n    public static isWholeDayOpen(store: Store): boolean {\n        let previousEndTime: number;\n        let isWholeDay = true;\n        const periods: Period[] = store.menu ? (store.menu.periods ? store.menu.periods : []) : [];\n        if (periods.length <= 0) {\n            return false;\n        }\n\n        periods.forEach((period, index) => {\n            if (previousEndTime && isWholeDay) {\n                isWholeDay = period.start - previousEndTime === 60000;\n            }\n\n            previousEndTime = period.end;\n        });\n\n        return isWholeDay;\n    }\n\n    hasFeature(feature: string): boolean {\n        if (this.features) {\n            return this.features.indexOf(feature) >= 0;\n        }\n        return false;\n    }\n\n    protected toProperty(name: string, value) {\n\n        switch (name) {\n            case \"brand\":\n                value = Data.toData(Brand, value);\n                break;\n            case \"menu\":\n                value = Data.toData(Menu, value);\n                break;\n            case \"categories\":\n                value = Data.toDataArray(Category, value);\n                break;\n            case \"location\":\n                value = Data.toData(Location, value);\n                break;\n            case \"pos\":\n                value = Data.toData(Pos, value);\n                break;\n            case \"printers\":\n                value = Data.toDataArray(Printer, value);\n                break;\n            case \"periods\":\n                value = Data.toDataArray(Period, value);\n                break;\n            case \"openings\":\n            case \"openings2\":\n                value = Data.toData(OpeningHours, value);\n                break;\n            case \"crm\":\n                value = Data.toData(Crm, value);\n                break;\n            case \"seo\":\n                value = Data.toData(Seo, value);\n                break;\n            default:\n                value = super.toProperty(name, value);\n                break;\n        }\n\n        return value;\n    }\n\n}\n","import { Data } from './data';\n\nexport class TaxRule extends Data {\n    class: string = \"TaxRule\";\n    id: string;\n    enabled: boolean;\n    piority: number;\n    name: string;\n    itemType: string;\n    storeId: string;\n    groupId: string;\n    brandId: string;\n    memberId: string;\n    create: number;\n    locale:string;\n\n    alias1: string;\n    alias2: string;\n    alias3: string;\n    rate1: number;\n    rate2: number;\n    rate3: number;\n    min1: number;\n    min2: number;\n    min3: number;\n    inclusive: boolean;\n    priority: number;\n\n    protected toProperty(name: string, value) {\n\n        switch (name) {\n            default:\n                value = super.toProperty(name, value);\n                break;\n        }\n\n        return value;\n    }\n\n}","import { Data } from './data';\r\n\r\nexport class Ticket extends Data {\r\n    class: string = \"Ticket\";\r\n    id: string;\r\n    source: string;\r\n    number: string;\r\n    queueId: string;\r\n    username: string;\r\n    //createdAt: string;\r\n    seats: number;\r\n    seq: number;\r\n    create: number;\r\n    update: number;\r\n    status: string;\r\n    statusUrl: string;\r\n    vip: boolean;\r\n    active: boolean;\r\n    storeId: string;\r\n    store: any;\r\n    phone: string;\r\n    countryCode: string;\r\n    phoneNotify: boolean = false;\r\n}","import { Data } from './data';\n\nexport class Tile extends Data {\n    class: string = \"Tile\";\n    name: string;\n    id: string;\n    layout: string;\n    sequence: number = 0;\n    type: string;\n    x: number;\n    y: number;\n    cols: number;\n    rows: number;\n    screenPos: number = 0;\n    visibleItems: number = 0;\n    category: any;\n    item: any;\n    virtual: boolean = false;\n    bgColor: string;\n    color: string;\n    font: string;\n    bgImg: any;\n}","import { Ad } from \"./data/ad\";\nimport { Address } from \"./data/address\";\nimport { Agreement } from \"./data/agreement\";\nimport { Badge } from \"./data/badge\";\nimport { Benefit } from \"./data/benefit\";\nimport { Brand } from \"./data/brand\";\nimport { Category } from \"./data/category\";\nimport { CategoryGroup } from \"./data/category-group\";\nimport { Charge } from \"./data/charge\";\nimport { Condition } from \"./data/condition\";\nimport { Courier } from \"./data/courier\";\nimport { Court } from \"./data/court\";\nimport { CreditCard } from \"./data/credit-card\";\nimport { Crm } from \"./data/crm\";\nimport { Data } from \"./data/data\";\nimport { Discount } from \"./data/discount\";\nimport { Edit } from \"./data/edit\";\nimport { EditRecord } from \"./data/edit-record\";\nimport { Field } from \"./data/field\";\nimport { File } from \"./data/file\";\nimport { Geo } from \"./data/geo\";\nimport { Group } from \"./data/group\";\nimport { Image } from \"./data/image\";\nimport { Item } from \"./data/item\";\nimport { ItemGroup } from \"./data/item-group\";\nimport { KitchenOrderItem } from \"./data/kitchen-order-item\";\nimport { Link } from \"./data/link\";\nimport { Location } from \"./data/location\";\nimport { Member } from \"./data/member\";\nimport { Membership } from \"./data/membership\";\nimport { Menu } from \"./data/menu\";\nimport { Offer } from \"./data/offer\";\nimport { OpeningHours } from \"./data/opening-hours\";\nimport { Order } from \"./data/order\";\nimport { OrderItem } from \"./data/order-item\";\nimport { Period } from \"./data/period\";\nimport { Pos } from \"./data/pos\";\nimport { PriceRule } from \"./data/price-rule\";\nimport { PrintJob } from \"./data/print-job\";\nimport { Printer } from \"./data/printer\";\nimport { Property } from \"./data/property\";\nimport { Publish } from \"./data/publish\";\nimport { Queue } from \"./data/queue\";\nimport { Recommendation } from \"./data/recommendation\";\nimport { RecommendationGroup } from \"./data/recommendation-group\";\nimport { Reward } from \"./data/reward\";\nimport { Screen } from \"./data/screen\";\nimport { Setting } from \"./data/setting\";\nimport { Signage } from \"./data/signage\";\nimport { Slot } from \"./data/slot\";\nimport { Spot } from \"./data/spot\";\nimport { Station } from \"./data/station\";\nimport { Store } from \"./data/store\";\nimport { TaxRule } from \"./data/tax-rule\";\nimport { Ticket } from \"./data/ticket\";\nimport { Tile } from \"./data/tile\";\nimport * as CheckFormatTool from \"./utility/check-format-tool\";\nimport { MathUtils } from \"./utility/math-utils\";\n\n\n\n\nexport {\n    Data,\n    Ad,\n    Address,\n    Badge,\n    Brand,\n    CategoryGroup,\n    Category,\n    Charge,\n    CreditCard,\n    Crm,\n    Discount,\n    EditRecord,\n    Edit,\n    Field,\n    File,\n    Geo,\n    Group,\n    Image,\n    ItemGroup,\n    Item,\n    KitchenOrderItem,\n    Link,\n    Location,\n    Member,\n    Membership,\n    Menu,\n    Offer,\n    OpeningHours,\n    OrderItem,\n    Order,\n    Period,\n    Pos,\n    PriceRule,\n    Printer,\n    PrintJob,\n    Property,\n    Publish,\n    Reward,\n    Setting,\n    Slot,\n    Spot,\n    Station,\n    Store,\n    Court,\n    Benefit,\n    Condition,\n    Recommendation,\n    RecommendationGroup,\n    Courier,\n    TaxRule,\n    Queue,\n    Signage,\n    Screen,\n    Tile,\n    Ticket,\n    Agreement,\n    MathUtils,\n    CheckFormatTool,\n};\n","import { AbstractControl, ValidationErrors, ValidatorFn, FormGroup } from '@angular/forms';\nimport { Brand, Link, Offer, OpeningHours, Period, Reward, Slot, Store } from '..';\n\n/** to form logic  start */\n\n/* Extracted from google's libphonenumber */\n/* Use JSON.parse because parsing json is faster than defining objects */\nexport const countryCallingCodes = JSON.parse('{\"AC\":\"247\",\"AD\":\"376\",\"AE\":\"971\",\"AF\":\"93\",\"AG\":\"1\",\"AI\":\"1\",\"AL\":\"355\",\"AM\":\"374\",\"AO\":\"244\",\"AR\":\"54\",\"AS\":\"1\",\"AT\":\"43\",\"AU\":\"61\",\"AW\":\"297\",\"AX\":\"358\",\"AZ\":\"994\",\"BA\":\"387\",\"BB\":\"1\",\"BD\":\"880\",\"BE\":\"32\",\"BF\":\"226\",\"BG\":\"359\",\"BH\":\"973\",\"BI\":\"257\",\"BJ\":\"229\",\"BL\":\"590\",\"BM\":\"1\",\"BN\":\"673\",\"BO\":\"591\",\"BQ\":\"599\",\"BR\":\"55\",\"BS\":\"1\",\"BT\":\"975\",\"BW\":\"267\",\"BY\":\"375\",\"BZ\":\"501\",\"CA\":\"1\",\"CC\":\"61\",\"CD\":\"243\",\"CF\":\"236\",\"CG\":\"242\",\"CH\":\"41\",\"CI\":\"225\",\"CK\":\"682\",\"CL\":\"56\",\"CM\":\"237\",\"CN\":\"86\",\"CO\":\"57\",\"CR\":\"506\",\"CU\":\"53\",\"CV\":\"238\",\"CW\":\"599\",\"CX\":\"61\",\"CY\":\"357\",\"CZ\":\"420\",\"DE\":\"49\",\"DJ\":\"253\",\"DK\":\"45\",\"DM\":\"1\",\"DO\":\"1\",\"DZ\":\"213\",\"EC\":\"593\",\"EE\":\"372\",\"EG\":\"20\",\"EH\":\"212\",\"ER\":\"291\",\"ES\":\"34\",\"ET\":\"251\",\"FI\":\"358\",\"FJ\":\"679\",\"FK\":\"500\",\"FM\":\"691\",\"FO\":\"298\",\"FR\":\"33\",\"GA\":\"241\",\"GB\":\"44\",\"GD\":\"1\",\"GE\":\"995\",\"GF\":\"594\",\"GG\":\"44\",\"GH\":\"233\",\"GI\":\"350\",\"GL\":\"299\",\"GM\":\"220\",\"GN\":\"224\",\"GP\":\"590\",\"GQ\":\"240\",\"GR\":\"30\",\"GT\":\"502\",\"GU\":\"1\",\"GW\":\"245\",\"GY\":\"592\",\"HK\":\"852\",\"HN\":\"504\",\"HR\":\"385\",\"HT\":\"509\",\"HU\":\"36\",\"ID\":\"62\",\"IE\":\"353\",\"IL\":\"972\",\"IM\":\"44\",\"IN\":\"91\",\"IO\":\"246\",\"IQ\":\"964\",\"IR\":\"98\",\"IS\":\"354\",\"IT\":\"39\",\"JE\":\"44\",\"JM\":\"1\",\"JO\":\"962\",\"JP\":\"81\",\"KE\":\"254\",\"KG\":\"996\",\"KH\":\"855\",\"KI\":\"686\",\"KM\":\"269\",\"KN\":\"1\",\"KP\":\"850\",\"KR\":\"82\",\"KW\":\"965\",\"KY\":\"1\",\"KZ\":\"7\",\"LA\":\"856\",\"LB\":\"961\",\"LC\":\"1\",\"LI\":\"423\",\"LK\":\"94\",\"LR\":\"231\",\"LS\":\"266\",\"LT\":\"370\",\"LU\":\"352\",\"LV\":\"371\",\"LY\":\"218\",\"MA\":\"212\",\"MC\":\"377\",\"MD\":\"373\",\"ME\":\"382\",\"MF\":\"590\",\"MG\":\"261\",\"MH\":\"692\",\"MK\":\"389\",\"ML\":\"223\",\"MM\":\"95\",\"MN\":\"976\",\"MO\":\"853\",\"MP\":\"1\",\"MQ\":\"596\",\"MR\":\"222\",\"MS\":\"1\",\"MT\":\"356\",\"MU\":\"230\",\"MV\":\"960\",\"MW\":\"265\",\"MX\":\"52\",\"MY\":\"60\",\"MZ\":\"258\",\"NA\":\"264\",\"NC\":\"687\",\"NE\":\"227\",\"NF\":\"672\",\"NG\":\"234\",\"NI\":\"505\",\"NL\":\"31\",\"NO\":\"47\",\"NP\":\"977\",\"NR\":\"674\",\"NU\":\"683\",\"NZ\":\"64\",\"OM\":\"968\",\"PA\":\"507\",\"PE\":\"51\",\"PF\":\"689\",\"PG\":\"675\",\"PH\":\"63\",\"PK\":\"92\",\"PL\":\"48\",\"PM\":\"508\",\"PR\":\"1\",\"PS\":\"970\",\"PT\":\"351\",\"PW\":\"680\",\"PY\":\"595\",\"QA\":\"974\",\"RE\":\"262\",\"RO\":\"40\",\"RS\":\"381\",\"RU\":\"7\",\"RW\":\"250\",\"SA\":\"966\",\"SB\":\"677\",\"SC\":\"248\",\"SD\":\"249\",\"SE\":\"46\",\"SG\":\"65\",\"SH\":\"290\",\"SI\":\"386\",\"SJ\":\"47\",\"SK\":\"421\",\"SL\":\"232\",\"SM\":\"378\",\"SN\":\"221\",\"SO\":\"252\",\"SR\":\"597\",\"SS\":\"211\",\"ST\":\"239\",\"SV\":\"503\",\"SX\":\"1\",\"SY\":\"963\",\"SZ\":\"268\",\"TA\":\"290\",\"TC\":\"1\",\"TD\":\"235\",\"TG\":\"228\",\"TH\":\"66\",\"TJ\":\"992\",\"TK\":\"690\",\"TL\":\"670\",\"TM\":\"993\",\"TN\":\"216\",\"TO\":\"676\",\"TR\":\"90\",\"TT\":\"1\",\"TV\":\"688\",\"TW\":\"886\",\"TZ\":\"255\",\"UA\":\"380\",\"UG\":\"256\",\"US\":\"1\",\"UY\":\"598\",\"UZ\":\"998\",\"VA\":\"39\",\"VC\":\"1\",\"VE\":\"58\",\"VG\":\"1\",\"VI\":\"1\",\"VN\":\"84\",\"VU\":\"678\",\"WF\":\"681\",\"WS\":\"685\",\"XK\":\"383\",\"YE\":\"967\",\"YT\":\"262\",\"ZA\":\"27\",\"ZM\":\"260\",\"ZW\":\"263\",\"001\":\"979\"}');\nexport const countryPhoneReg = JSON.parse('{\"AC\":\"^((?:[01589]\\\\\\\\d|[46])\\\\\\\\d{4})$\",\"AD\":\"^((?:1|6\\\\\\\\d)\\\\\\\\d{7}|[135-9]\\\\\\\\d{5})$\",\"AE\":\"^(?:0)?((?:[4-7]\\\\\\\\d|9[0-689])\\\\\\\\d{7}|800\\\\\\\\d{2,9}|[2-4679]\\\\\\\\d{7})$\",\"AF\":\"^(?:0)?([2-7]\\\\\\\\d{8})$\",\"AG\":\"^(?:1)?((?:268|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"AI\":\"^(?:1)?((?:264|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"AL\":\"^(?:0)?((?:700\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{3}|8\\\\\\\\d{5,7}|(?:[2-5]|6\\\\\\\\d)\\\\\\\\d{7})$\",\"AM\":\"^(?:0)?((?:[1-489]\\\\\\\\d|55|60|77)\\\\\\\\d{6})$\",\"AO\":\"^([29]\\\\\\\\d{8})$\",\"AR\":\"^(?:0)?((?:11|[89]\\\\\\\\d\\\\\\\\d)\\\\\\\\d{8}|[2368]\\\\\\\\d{9})$\",\"AS\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|684|900)\\\\\\\\d{7})$\",\"AT\":\"^(?:0)?(1\\\\\\\\d{3,12}|2\\\\\\\\d{6,12}|43(?:(?:0\\\\\\\\d|5[02-9])\\\\\\\\d{3,9}|2\\\\\\\\d{4,5}|[3467]\\\\\\\\d{4}|8\\\\\\\\d{4,6}|9\\\\\\\\d{4,7})|5\\\\\\\\d{4,12}|8\\\\\\\\d{7,12}|9\\\\\\\\d{8,12}|(?:[367]\\\\\\\\d|4[0-24-9])\\\\\\\\d{4,11})$\",\"AU\":\"^(?:0)?(1(?:[0-79]\\\\\\\\d{7}(?:\\\\\\\\d(?:\\\\\\\\d{2})?)?|8[0-24-9]\\\\\\\\d{7})|[2-478]\\\\\\\\d{8}|1\\\\\\\\d{4,7})$\",\"AW\":\"^((?:[25-79]\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{4})$\",\"AX\":\"^(?:0)?(2\\\\\\\\d{4,9}|35\\\\\\\\d{4,5}|(?:60\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{4,6}|7\\\\\\\\d{5,11}|(?:[14]\\\\\\\\d|3[0-46-9]|50)\\\\\\\\d{4,8})$\",\"AZ\":\"^(?:0)?(365\\\\\\\\d{6}|(?:[124579]\\\\\\\\d|60|88)\\\\\\\\d{7})$\",\"BA\":\"^(?:0)?(6\\\\\\\\d{8}|(?:[35689]\\\\\\\\d|49|70)\\\\\\\\d{6})$\",\"BB\":\"^(?:1)?((?:246|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"BD\":\"^(?:0)?([1-469]\\\\\\\\d{9}|8[0-79]\\\\\\\\d{7,8}|[2-79]\\\\\\\\d{8}|[2-9]\\\\\\\\d{7}|[3-9]\\\\\\\\d{6}|[57-9]\\\\\\\\d{5})$\",\"BE\":\"^(?:0)?(4\\\\\\\\d{8}|[1-9]\\\\\\\\d{7})$\",\"BF\":\"^([025-7]\\\\\\\\d{7})$\",\"BG\":\"^(?:0)?([2-7]\\\\\\\\d{6,7}|[89]\\\\\\\\d{6,8}|2\\\\\\\\d{5})$\",\"BH\":\"^([136-9]\\\\\\\\d{7})$\",\"BI\":\"^((?:[267]\\\\\\\\d|31)\\\\\\\\d{6})$\",\"BJ\":\"^((?:[25689]\\\\\\\\d|40)\\\\\\\\d{6})$\",\"BL\":\"^(?:0)?((?:590|(?:69|80)\\\\\\\\d|976)\\\\\\\\d{6})$\",\"BM\":\"^(?:1)?((?:441|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"BN\":\"^([2-578]\\\\\\\\d{6})$\",\"BO\":\"^(?:0)?((?:[2-467]\\\\\\\\d\\\\\\\\d|8001)\\\\\\\\d{5})$\",\"BQ\":\"^((?:[34]1|7\\\\\\\\d)\\\\\\\\d{5})$\",\"BR\":\"^(?:0)?((?:[1-46-9]\\\\\\\\d\\\\\\\\d|5(?:[0-46-9]\\\\\\\\d|5[0-46-9]))\\\\\\\\d{8}|[1-9]\\\\\\\\d{9}|[3589]\\\\\\\\d{8}|[34]\\\\\\\\d{7})$\",\"BS\":\"^(?:1)?((?:242|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"BT\":\"^([17]\\\\\\\\d{7}|[2-8]\\\\\\\\d{6})$\",\"BW\":\"^((?:0800|(?:[37]|800)\\\\\\\\d)\\\\\\\\d{6}|(?:[2-6]\\\\\\\\d|90)\\\\\\\\d{5})$\",\"BY\":\"^(?:8)?((?:[12]\\\\\\\\d|33|44|902)\\\\\\\\d{7}|8(?:0[0-79]\\\\\\\\d{5,7}|[1-7]\\\\\\\\d{9})|8(?:1[0-489]|[5-79]\\\\\\\\d)\\\\\\\\d{7}|8[1-79]\\\\\\\\d{6,7}|8[0-79]\\\\\\\\d{5}|8\\\\\\\\d{5})$\",\"BZ\":\"^((?:0800\\\\\\\\d|[2-8])\\\\\\\\d{6})$\",\"CA\":\"^(?:1)?((?:[2-8]\\\\\\\\d|90)\\\\\\\\d{8}|3\\\\\\\\d{6})$\",\"CC\":\"^(?:0)?(1(?:[0-79]\\\\\\\\d{8}(?:\\\\\\\\d{2})?|8[0-24-9]\\\\\\\\d{7})|[148]\\\\\\\\d{8}|1\\\\\\\\d{5,7})$\",\"CD\":\"^(?:0)?([189]\\\\\\\\d{8}|[1-68]\\\\\\\\d{6})$\",\"CF\":\"^((?:[27]\\\\\\\\d{3}|8776)\\\\\\\\d{4})$\",\"CG\":\"^(222\\\\\\\\d{6}|(?:0\\\\\\\\d|80)\\\\\\\\d{7})$\",\"CH\":\"^(?:0)?(8\\\\\\\\d{11}|[2-9]\\\\\\\\d{8})$\",\"CI\":\"^([02]\\\\\\\\d{9})$\",\"CK\":\"^([2-578]\\\\\\\\d{4})$\",\"CL\":\"^(12300\\\\\\\\d{6}|6\\\\\\\\d{9,10}|[2-9]\\\\\\\\d{8})$\",\"CM\":\"^([26]\\\\\\\\d{8}|88\\\\\\\\d{6,7})$\",\"CN\":\"^(?:0)?(1[127]\\\\\\\\d{8,9}|2\\\\\\\\d{9}(?:\\\\\\\\d{2})?|[12]\\\\\\\\d{6,7}|86\\\\\\\\d{6}|(?:1[03-689]\\\\\\\\d|6)\\\\\\\\d{7,9}|(?:[3-579]\\\\\\\\d|8[0-57-9])\\\\\\\\d{6,9})$\",\"CO\":\"^(?:0)?((?:60\\\\\\\\d\\\\\\\\d|9101)\\\\\\\\d{6}|(?:1\\\\\\\\d|3)\\\\\\\\d{9})$\",\"CR\":\"^((?:8\\\\\\\\d|90)\\\\\\\\d{8}|(?:[24-8]\\\\\\\\d{3}|3005)\\\\\\\\d{4})$\",\"CU\":\"^(?:0)?([27]\\\\\\\\d{6,7}|[34]\\\\\\\\d{5,7}|(?:5|8\\\\\\\\d\\\\\\\\d)\\\\\\\\d{7})$\",\"CV\":\"^((?:[2-59]\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{4})$\",\"CW\":\"^((?:[34]1|60|(?:7|9\\\\\\\\d)\\\\\\\\d)\\\\\\\\d{5})$\",\"CX\":\"^(?:0)?(1(?:[0-79]\\\\\\\\d{8}(?:\\\\\\\\d{2})?|8[0-24-9]\\\\\\\\d{7})|[148]\\\\\\\\d{8}|1\\\\\\\\d{5,7})$\",\"CY\":\"^((?:[279]\\\\\\\\d|[58]0)\\\\\\\\d{6})$\",\"CZ\":\"^((?:[2-578]\\\\\\\\d|60)\\\\\\\\d{7}|9\\\\\\\\d{8,11})$\",\"DE\":\"^(?:0)?([2579]\\\\\\\\d{5,14}|49(?:[34]0|69|8\\\\\\\\d)\\\\\\\\d\\\\\\\\d?|49(?:37|49|60|7[089]|9\\\\\\\\d)\\\\\\\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\\\\\\\d{1,8}|(?:1|[368]\\\\\\\\d|4[0-8])\\\\\\\\d{3,13}|49(?:[015]\\\\\\\\d|2[13]|31|[46][1-8])\\\\\\\\d{1,9})$\",\"DJ\":\"^((?:2\\\\\\\\d|77)\\\\\\\\d{6})$\",\"DK\":\"^([2-9]\\\\\\\\d{7})$\",\"DM\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|767|900)\\\\\\\\d{7})$\",\"DO\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"DZ\":\"^(?:0)?((?:[1-4]|[5-79]\\\\\\\\d|80)\\\\\\\\d{7})$\",\"EC\":\"^(?:0)?(1\\\\\\\\d{9,10}|(?:[2-7]|9\\\\\\\\d)\\\\\\\\d{7})$\",\"EE\":\"^(8\\\\\\\\d{9}|[4578]\\\\\\\\d{7}|(?:[3-8]\\\\\\\\d|90)\\\\\\\\d{5})$\",\"EG\":\"^(?:0)?([189]\\\\\\\\d{8,9}|[24-6]\\\\\\\\d{8}|[135]\\\\\\\\d{7})$\",\"EH\":\"^(?:0)?([5-8]\\\\\\\\d{8})$\",\"ER\":\"^(?:0)?([178]\\\\\\\\d{6})$\",\"ES\":\"^([5-9]\\\\\\\\d{8})$\",\"ET\":\"^(?:0)?((?:11|[2-579]\\\\\\\\d)\\\\\\\\d{7})$\",\"FI\":\"^(?:0)?([1-35689]\\\\\\\\d{4}|7\\\\\\\\d{10,11}|(?:[124-7]\\\\\\\\d|3[0-46-9])\\\\\\\\d{8}|[1-9]\\\\\\\\d{5,8})$\",\"FJ\":\"^(45\\\\\\\\d{5}|(?:0800\\\\\\\\d|[235-9])\\\\\\\\d{6})$\",\"FK\":\"^([2-7]\\\\\\\\d{4})$\",\"FM\":\"^((?:[39]\\\\\\\\d\\\\\\\\d|820)\\\\\\\\d{4})$\",\"FO\":\"^([2-9]\\\\\\\\d{5})$\",\"FR\":\"^(?:0)?([1-9]\\\\\\\\d{8})$\",\"GA\":\"^((?:[067]\\\\\\\\d|11)\\\\\\\\d{6}|[2-7]\\\\\\\\d{6})$\",\"GB\":\"^(?:0)?([1-357-9]\\\\\\\\d{9}|[18]\\\\\\\\d{8}|8\\\\\\\\d{6})$\",\"GD\":\"^(?:1)?((?:473|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"GE\":\"^(?:0)?((?:[3-57]\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{6})$\",\"GF\":\"^(?:0)?((?:[56]94|80\\\\\\\\d|976)\\\\\\\\d{6})$\",\"GG\":\"^(?:0)?((?:1481|[357-9]\\\\\\\\d{3})\\\\\\\\d{6}|8\\\\\\\\d{6}(?:\\\\\\\\d{2})?)$\",\"GH\":\"^(?:0)?((?:[235]\\\\\\\\d{3}|800)\\\\\\\\d{5})$\",\"GI\":\"^((?:[25]\\\\\\\\d\\\\\\\\d|606)\\\\\\\\d{5})$\",\"GL\":\"^((?:19|[2-689]\\\\\\\\d|70)\\\\\\\\d{4})$\",\"GM\":\"^([2-9]\\\\\\\\d{6})$\",\"GN\":\"^(722\\\\\\\\d{6}|(?:3|6\\\\\\\\d)\\\\\\\\d{7})$\",\"GP\":\"^(?:0)?((?:590|(?:69|80)\\\\\\\\d|976)\\\\\\\\d{6})$\",\"GQ\":\"^(222\\\\\\\\d{6}|(?:3\\\\\\\\d|55|[89]0)\\\\\\\\d{7})$\",\"GR\":\"^(5005000\\\\\\\\d{3}|8\\\\\\\\d{9,11}|(?:[269]\\\\\\\\d|70)\\\\\\\\d{8})$\",\"GT\":\"^((?:1\\\\\\\\d{3}|[2-7])\\\\\\\\d{7})$\",\"GU\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|671|900)\\\\\\\\d{7})$\",\"GW\":\"^([49]\\\\\\\\d{8}|4\\\\\\\\d{6})$\",\"GY\":\"^(9008\\\\\\\\d{3}|(?:[2-467]\\\\\\\\d\\\\\\\\d|862)\\\\\\\\d{4})$\",\"HK\":\"^(8[0-46-9]\\\\\\\\d{6,7}|9\\\\\\\\d{4,7}|(?:[2-7]|9\\\\\\\\d{3})\\\\\\\\d{7})$\",\"HN\":\"^(8\\\\\\\\d{10}|[237-9]\\\\\\\\d{7})$\",\"HR\":\"^(?:0)?((?:[24-69]\\\\\\\\d|3[0-79])\\\\\\\\d{7}|80\\\\\\\\d{5,7}|[1-79]\\\\\\\\d{7}|6\\\\\\\\d{5,6})$\",\"HT\":\"^([2-489]\\\\\\\\d{7})$\",\"HU\":\"^(?:06)?([235-7]\\\\\\\\d{8}|[1-9]\\\\\\\\d{7})$\",\"ID\":\"^(?:0)?((?:(?:00[1-9]|8\\\\\\\\d)\\\\\\\\d{4}|[1-36])\\\\\\\\d{6}|00\\\\\\\\d{10}|[1-9]\\\\\\\\d{8,10}|[2-9]\\\\\\\\d{7})$\",\"IE\":\"^(?:0)?((?:1\\\\\\\\d|[2569])\\\\\\\\d{6,8}|4\\\\\\\\d{6,9}|7\\\\\\\\d{8}|8\\\\\\\\d{8,9})$\",\"IL\":\"^(?:0)?(1\\\\\\\\d{6}(?:\\\\\\\\d{3,5})?|[57]\\\\\\\\d{8}|[1-489]\\\\\\\\d{7})$\",\"IM\":\"^(?:0)?(1624\\\\\\\\d{6}|(?:[3578]\\\\\\\\d|90)\\\\\\\\d{8})$\",\"IN\":\"^(?:0)?((?:000800|[2-9]\\\\\\\\d\\\\\\\\d)\\\\\\\\d{7}|1\\\\\\\\d{7,12})$\",\"IO\":\"^(3\\\\\\\\d{6})$\",\"IQ\":\"^(?:0)?((?:1|7\\\\\\\\d\\\\\\\\d)\\\\\\\\d{7}|[2-6]\\\\\\\\d{7,8})$\",\"IR\":\"^(?:0)?([1-9]\\\\\\\\d{9}|(?:[1-8]\\\\\\\\d\\\\\\\\d|9)\\\\\\\\d{3,4})$\",\"IS\":\"^((?:38\\\\\\\\d|[4-9])\\\\\\\\d{6})$\",\"IT\":\"^(0\\\\\\\\d{5,10}|1\\\\\\\\d{8,10}|3(?:[0-8]\\\\\\\\d{7,10}|9\\\\\\\\d{7,8})|(?:55|70)\\\\\\\\d{8}|8\\\\\\\\d{5}(?:\\\\\\\\d{2,4})?)$\",\"JE\":\"^(?:0)?(1534\\\\\\\\d{6}|(?:[3578]\\\\\\\\d|90)\\\\\\\\d{8})$\",\"JM\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|658|900)\\\\\\\\d{7})$\",\"JO\":\"^(?:0)?((?:(?:[2689]|7\\\\\\\\d)\\\\\\\\d|32|53)\\\\\\\\d{6})$\",\"JP\":\"^(?:0)?(00[1-9]\\\\\\\\d{6,14}|[257-9]\\\\\\\\d{9}|(?:00|[1-9]\\\\\\\\d\\\\\\\\d)\\\\\\\\d{6})$\",\"KE\":\"^(?:0)?((?:[17]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{6}|(?:2|80)0\\\\\\\\d{6,7}|[4-6]\\\\\\\\d{6,8})$\",\"KG\":\"^(?:0)?(8\\\\\\\\d{9}|(?:[235-8]\\\\\\\\d|99)\\\\\\\\d{7})$\",\"KH\":\"^(?:0)?(1\\\\\\\\d{9}|[1-9]\\\\\\\\d{7,8})$\",\"KI\":\"^(?:0)?((?:[37]\\\\\\\\d|6[0-79])\\\\\\\\d{6}|(?:[2-48]\\\\\\\\d|50)\\\\\\\\d{3})$\",\"KM\":\"^([3478]\\\\\\\\d{6})$\",\"KN\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"KP\":\"^(?:0)?(85\\\\\\\\d{6}|(?:19\\\\\\\\d|[2-7])\\\\\\\\d{7})$\",\"KR\":\"^(?:0)?(00[1-9]\\\\\\\\d{8,11}|(?:[12]|5\\\\\\\\d{3})\\\\\\\\d{7}|[13-6]\\\\\\\\d{9}|(?:[1-6]\\\\\\\\d|80)\\\\\\\\d{7}|[3-6]\\\\\\\\d{4,5}|(?:00|7)0\\\\\\\\d{8})$\",\"KW\":\"^(18\\\\\\\\d{5}|(?:[2569]\\\\\\\\d|41)\\\\\\\\d{6})$\",\"KY\":\"^(?:1)?((?:345|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"KZ\":\"^(?:8)?((?:33622|8\\\\\\\\d{8})\\\\\\\\d{5}|[78]\\\\\\\\d{9})$\",\"LA\":\"^(?:0)?([23]\\\\\\\\d{9}|3\\\\\\\\d{8}|(?:[235-8]\\\\\\\\d|41)\\\\\\\\d{6})$\",\"LB\":\"^(?:0)?([27-9]\\\\\\\\d{7}|[13-9]\\\\\\\\d{6})$\",\"LC\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|758|900)\\\\\\\\d{7})$\",\"LI\":\"^(?:0)?([68]\\\\\\\\d{8}|(?:[2378]\\\\\\\\d|90)\\\\\\\\d{5})$\",\"LK\":\"^(?:0)?([1-9]\\\\\\\\d{8})$\",\"LR\":\"^(?:0)?((?:2|33|5\\\\\\\\d|77|88)\\\\\\\\d{7}|[4-6]\\\\\\\\d{6})$\",\"LS\":\"^((?:[256]\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{5})$\",\"LT\":\"^(?:8)?((?:[3469]\\\\\\\\d|52|[78]0)\\\\\\\\d{6})$\",\"LU\":\"^(35[013-9]\\\\\\\\d{4,8}|6\\\\\\\\d{8}|35\\\\\\\\d{2,4}|(?:[2457-9]\\\\\\\\d|3[0-46-9])\\\\\\\\d{2,9})$\",\"LV\":\"^((?:[268]\\\\\\\\d|90)\\\\\\\\d{6})$\",\"LY\":\"^(?:0)?([2-9]\\\\\\\\d{8})$\",\"MA\":\"^(?:0)?([5-8]\\\\\\\\d{8})$\",\"MC\":\"^(?:0)?((?:[3489]|6\\\\\\\\d)\\\\\\\\d{7})$\",\"MD\":\"^(?:0)?((?:[235-7]\\\\\\\\d|[89]0)\\\\\\\\d{6})$\",\"ME\":\"^(?:0)?((?:20|[3-79]\\\\\\\\d)\\\\\\\\d{6}|80\\\\\\\\d{6,7})$\",\"MF\":\"^(?:0)?((?:590|(?:69|80)\\\\\\\\d|976)\\\\\\\\d{6})$\",\"MG\":\"^(?:0)?([23]\\\\\\\\d{8})$\",\"MH\":\"^(?:1)?(329\\\\\\\\d{4}|(?:[256]\\\\\\\\d|45)\\\\\\\\d{5})$\",\"MK\":\"^(?:0)?([2-578]\\\\\\\\d{7})$\",\"ML\":\"^([24-9]\\\\\\\\d{7})$\",\"MM\":\"^(?:0)?(1\\\\\\\\d{5,7}|95\\\\\\\\d{6}|(?:[4-7]|9[0-46-9])\\\\\\\\d{6,8}|(?:2|8\\\\\\\\d)\\\\\\\\d{5,8})$\",\"MN\":\"^(?:0)?([12]\\\\\\\\d{7,9}|[5-9]\\\\\\\\d{7})$\",\"MO\":\"^(0800\\\\\\\\d{3}|(?:28|[68]\\\\\\\\d)\\\\\\\\d{6})$\",\"MP\":\"^(?:1)?([58]\\\\\\\\d{9}|(?:67|90)0\\\\\\\\d{7})$\",\"MQ\":\"^(?:0)?((?:69|80)\\\\\\\\d{7}|(?:59|97)6\\\\\\\\d{6})$\",\"MR\":\"^((?:[2-4]\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{5})$\",\"MS\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|664|900)\\\\\\\\d{7})$\",\"MT\":\"^(3550\\\\\\\\d{4}|(?:[2579]\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{5})$\",\"MU\":\"^((?:[57]|8\\\\\\\\d\\\\\\\\d)\\\\\\\\d{7}|[2-468]\\\\\\\\d{6})$\",\"MV\":\"^((?:800|9[0-57-9]\\\\\\\\d)\\\\\\\\d{7}|[34679]\\\\\\\\d{6})$\",\"MW\":\"^(?:0)?((?:[1289]\\\\\\\\d|31|77)\\\\\\\\d{7}|1\\\\\\\\d{6})$\",\"MX\":\"^(?:01)?(1(?:(?:[27]2|44|99)[1-9]|65[0-689])\\\\\\\\d{7}|(?:1(?:[01]\\\\\\\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-9]|8[1-79]|9[1-8])|[2-9]\\\\\\\\d)\\\\\\\\d{8})$\",\"MY\":\"^(?:0)?(1\\\\\\\\d{8,9}|(?:3\\\\\\\\d|[4-9])\\\\\\\\d{7})$\",\"MZ\":\"^((?:2|8\\\\\\\\d)\\\\\\\\d{7})$\",\"NA\":\"^(?:0)?([68]\\\\\\\\d{7,8})$\",\"NC\":\"^((?:050|[2-57-9]\\\\\\\\d\\\\\\\\d)\\\\\\\\d{3})$\",\"NE\":\"^([027-9]\\\\\\\\d{7})$\",\"NF\":\"^([13]\\\\\\\\d{5})$\",\"NG\":\"^(?:0)?((?:[124-7]|9\\\\\\\\d{3})\\\\\\\\d{6}|[1-9]\\\\\\\\d{7}|[78]\\\\\\\\d{9,13})$\",\"NI\":\"^((?:1800|[25-8]\\\\\\\\d{3})\\\\\\\\d{4})$\",\"NL\":\"^(?:0)?((?:[124-7]\\\\\\\\d\\\\\\\\d|3(?:[02-9]\\\\\\\\d|1[0-8]))\\\\\\\\d{6}|8\\\\\\\\d{6,9}|9\\\\\\\\d{6,10}|1\\\\\\\\d{4,5})$\",\"NO\":\"^((?:0|[2-9]\\\\\\\\d{3})\\\\\\\\d{4})$\",\"NP\":\"^(?:0)?((?:1\\\\\\\\d|9)\\\\\\\\d{9}|[1-9]\\\\\\\\d{7})$\",\"NR\":\"^((?:444|(?:55|8\\\\\\\\d)\\\\\\\\d|666)\\\\\\\\d{4})$\",\"NU\":\"^((?:[47]|888\\\\\\\\d)\\\\\\\\d{3})$\",\"NZ\":\"^(?:0)?([29]\\\\\\\\d{7,9}|50\\\\\\\\d{5}(?:\\\\\\\\d{2,3})?|6[0-35-9]\\\\\\\\d{6}|7\\\\\\\\d{7,8}|8\\\\\\\\d{4,9}|(?:11\\\\\\\\d|[34])\\\\\\\\d{7})$\",\"OM\":\"^((?:1505|[279]\\\\\\\\d{3}|500)\\\\\\\\d{4}|800\\\\\\\\d{5,6})$\",\"PA\":\"^((?:00800|8\\\\\\\\d{3})\\\\\\\\d{6}|[68]\\\\\\\\d{7}|[1-57-9]\\\\\\\\d{6})$\",\"PE\":\"^(?:0)?((?:[14-8]|9\\\\\\\\d)\\\\\\\\d{7})$\",\"PF\":\"^(4\\\\\\\\d{5}(?:\\\\\\\\d{2})?|8\\\\\\\\d{7,8})$\",\"PG\":\"^((?:180|[78]\\\\\\\\d{3})\\\\\\\\d{4}|(?:[2-589]\\\\\\\\d|64)\\\\\\\\d{5})$\",\"PH\":\"^(?:0)?((?:[2-7]|9\\\\\\\\d)\\\\\\\\d{8}|2\\\\\\\\d{5}|(?:1800|8)\\\\\\\\d{7,9})$\",\"PK\":\"^(?:0)?(122\\\\\\\\d{6}|[24-8]\\\\\\\\d{10,11}|9(?:[013-9]\\\\\\\\d{8,10}|2(?:[01]\\\\\\\\d\\\\\\\\d|2(?:[06-8]\\\\\\\\d|1[01]))\\\\\\\\d{7})|(?:[2-8]\\\\\\\\d{3}|92(?:[0-7]\\\\\\\\d|8[1-9]))\\\\\\\\d{6}|[24-9]\\\\\\\\d{8}|[89]\\\\\\\\d{7})$\",\"PL\":\"^((?:6|8\\\\\\\\d\\\\\\\\d)\\\\\\\\d{7}|[1-9]\\\\\\\\d{6}(?:\\\\\\\\d{2})?|[26]\\\\\\\\d{5})$\",\"PM\":\"^(?:0)?((?:[45]|80\\\\\\\\d\\\\\\\\d)\\\\\\\\d{5})$\",\"PR\":\"^(?:1)?((?:[589]\\\\\\\\d\\\\\\\\d|787)\\\\\\\\d{7})$\",\"PS\":\"^(?:0)?([2489]2\\\\\\\\d{6}|(?:1\\\\\\\\d|5)\\\\\\\\d{8})$\",\"PT\":\"^(1693\\\\\\\\d{5}|(?:[26-9]\\\\\\\\d|30)\\\\\\\\d{7})$\",\"PW\":\"^((?:[24-8]\\\\\\\\d\\\\\\\\d|345|900)\\\\\\\\d{4})$\",\"PY\":\"^(?:0)?(59\\\\\\\\d{4,6}|9\\\\\\\\d{5,10}|(?:[2-46-8]\\\\\\\\d|5[0-8])\\\\\\\\d{4,7})$\",\"QA\":\"^((?:0080|[2-7])\\\\\\\\d{7}|800\\\\\\\\d{4}(?:\\\\\\\\d{2})?|2\\\\\\\\d{6})$\",\"RE\":\"^(?:0)?(976\\\\\\\\d{6}|(?:26|[68]\\\\\\\\d)\\\\\\\\d{7})$\",\"RO\":\"^(?:0)?((?:[2378]\\\\\\\\d|90)\\\\\\\\d{7}|[23]\\\\\\\\d{5})$\",\"RS\":\"^(?:0)?(38[02-9]\\\\\\\\d{6,9}|6\\\\\\\\d{7,9}|90\\\\\\\\d{4,8}|38\\\\\\\\d{5,6}|(?:7\\\\\\\\d\\\\\\\\d|800)\\\\\\\\d{3,9}|(?:[12]\\\\\\\\d|3[0-79])\\\\\\\\d{5,10})$\",\"RU\":\"^(?:8)?(8\\\\\\\\d{13}|[347-9]\\\\\\\\d{9})$\",\"RW\":\"^(?:0)?((?:06|[27]\\\\\\\\d\\\\\\\\d|[89]00)\\\\\\\\d{6})$\",\"SA\":\"^(?:0)?(92\\\\\\\\d{7}|(?:[15]|8\\\\\\\\d)\\\\\\\\d{8})$\",\"SB\":\"^((?:[1-6]|[7-9]\\\\\\\\d\\\\\\\\d)\\\\\\\\d{4})$\",\"SC\":\"^(800\\\\\\\\d{4}|(?:[249]\\\\\\\\d|64)\\\\\\\\d{5})$\",\"SD\":\"^(?:0)?([19]\\\\\\\\d{8})$\",\"SE\":\"^(?:0)?((?:[26]\\\\\\\\d\\\\\\\\d|9)\\\\\\\\d{9}|[1-9]\\\\\\\\d{8}|[1-689]\\\\\\\\d{7}|[1-4689]\\\\\\\\d{6}|2\\\\\\\\d{5})$\",\"SG\":\"^((?:(?:1\\\\\\\\d|8)\\\\\\\\d\\\\\\\\d|7000)\\\\\\\\d{7}|[3689]\\\\\\\\d{7})$\",\"SH\":\"^((?:[256]\\\\\\\\d|8)\\\\\\\\d{3})$\",\"SI\":\"^(?:0)?([1-7]\\\\\\\\d{7}|8\\\\\\\\d{4,7}|90\\\\\\\\d{4,6})$\",\"SJ\":\"^(0\\\\\\\\d{4}|(?:[489]\\\\\\\\d|[57]9)\\\\\\\\d{6})$\",\"SK\":\"^(?:0)?([2-689]\\\\\\\\d{8}|[2-59]\\\\\\\\d{6}|[2-5]\\\\\\\\d{5})$\",\"SL\":\"^(?:0)?((?:[237-9]\\\\\\\\d|66)\\\\\\\\d{6})$\",\"SM\":\"^((?:0549|[5-7]\\\\\\\\d)\\\\\\\\d{6})$\",\"SN\":\"^((?:[378]\\\\\\\\d|93)\\\\\\\\d{7})$\",\"SO\":\"^(?:0)?([346-9]\\\\\\\\d{8}|[12679]\\\\\\\\d{7}|[1-5]\\\\\\\\d{6}|[1348]\\\\\\\\d{5})$\",\"SR\":\"^((?:[2-5]|68|[78]\\\\\\\\d)\\\\\\\\d{5})$\",\"SS\":\"^(?:0)?([19]\\\\\\\\d{8})$\",\"ST\":\"^((?:22|9\\\\\\\\d)\\\\\\\\d{5})$\",\"SV\":\"^([267]\\\\\\\\d{7}|[89]00\\\\\\\\d{4}(?:\\\\\\\\d{4})?)$\",\"SX\":\"^(?:1)?(7215\\\\\\\\d{6}|(?:[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"SY\":\"^(?:0)?([1-39]\\\\\\\\d{8}|[1-5]\\\\\\\\d{7})$\",\"SZ\":\"^(0800\\\\\\\\d{4}|(?:[237]\\\\\\\\d|900)\\\\\\\\d{6})$\",\"TA\":\"^(8\\\\\\\\d{3})$\",\"TC\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|649|900)\\\\\\\\d{7})$\",\"TD\":\"^((?:22|[69]\\\\\\\\d|77)\\\\\\\\d{6})$\",\"TG\":\"^([279]\\\\\\\\d{7})$\",\"TH\":\"^(?:0)?((?:001800|[2-57]|[689]\\\\\\\\d)\\\\\\\\d{7}|1\\\\\\\\d{7,9})$\",\"TJ\":\"^((?:00|[1-57-9]\\\\\\\\d)\\\\\\\\d{7})$\",\"TK\":\"^([2-47]\\\\\\\\d{3,6})$\",\"TL\":\"^(7\\\\\\\\d{7}|(?:[2-47]\\\\\\\\d|[89]0)\\\\\\\\d{5})$\",\"TM\":\"^(?:8)?([1-6]\\\\\\\\d{7})$\",\"TN\":\"^([2-57-9]\\\\\\\\d{7})$\",\"TO\":\"^((?:0800|(?:[5-8]\\\\\\\\d\\\\\\\\d|999)\\\\\\\\d)\\\\\\\\d{3}|[2-8]\\\\\\\\d{4})$\",\"TR\":\"^(?:0)?(4\\\\\\\\d{6}|8\\\\\\\\d{11,12}|(?:[2-58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"TT\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"TV\":\"^((?:2|7\\\\\\\\d\\\\\\\\d|90)\\\\\\\\d{4})$\",\"TW\":\"^(?:0)?([2-689]\\\\\\\\d{8}|7\\\\\\\\d{9,10}|[2-8]\\\\\\\\d{7}|2\\\\\\\\d{6})$\",\"TZ\":\"^(?:0)?((?:[25-8]\\\\\\\\d|41|90)\\\\\\\\d{7})$\",\"UA\":\"^(?:0)?([89]\\\\\\\\d{9}|[3-9]\\\\\\\\d{8})$\",\"UG\":\"^(?:0)?(800\\\\\\\\d{6}|(?:[29]0|[347]\\\\\\\\d)\\\\\\\\d{7})$\",\"US\":\"^(?:1)?([2-9]\\\\\\\\d{9}|3\\\\\\\\d{6})$\",\"UY\":\"^(?:0)?((?:0004|4)\\\\\\\\d{9}|[1249]\\\\\\\\d{7}|(?:[49]\\\\\\\\d|80)\\\\\\\\d{5})$\",\"UZ\":\"^(?:8)?((?:33|55|[679]\\\\\\\\d|88)\\\\\\\\d{7})$\",\"VA\":\"^(0\\\\\\\\d{5,10}|3[0-8]\\\\\\\\d{7,10}|55\\\\\\\\d{8}|8\\\\\\\\d{5}(?:\\\\\\\\d{2,4})?|(?:1\\\\\\\\d|39)\\\\\\\\d{7,8})$\",\"VC\":\"^(?:1)?((?:[58]\\\\\\\\d\\\\\\\\d|784|900)\\\\\\\\d{7})$\",\"VE\":\"^(?:0)?([68]00\\\\\\\\d{7}|(?:[24]\\\\\\\\d|[59]0)\\\\\\\\d{8})$\",\"VG\":\"^(?:1)?((?:284|[58]\\\\\\\\d\\\\\\\\d|900)\\\\\\\\d{7})$\",\"VI\":\"^(?:1)?([58]\\\\\\\\d{9}|(?:34|90)0\\\\\\\\d{7})$\",\"VN\":\"^(?:0)?([12]\\\\\\\\d{9}|[135-9]\\\\\\\\d{8}|[16]\\\\\\\\d{7}|[16-8]\\\\\\\\d{6})$\",\"VU\":\"^([57-9]\\\\\\\\d{6}|(?:[238]\\\\\\\\d|48)\\\\\\\\d{3})$\",\"WF\":\"^((?:40|72)\\\\\\\\d{4}|8\\\\\\\\d{5}(?:\\\\\\\\d{3})?)$\",\"WS\":\"^((?:[2-6]|8\\\\\\\\d{5})\\\\\\\\d{4}|[78]\\\\\\\\d{6}|[68]\\\\\\\\d{5})$\",\"XK\":\"^(?:0)?([23]\\\\\\\\d{7,8}|(?:4\\\\\\\\d\\\\\\\\d|[89]00)\\\\\\\\d{5})$\",\"YE\":\"^(?:0)?((?:1|7\\\\\\\\d)\\\\\\\\d{7}|[1-7]\\\\\\\\d{6})$\",\"YT\":\"^(?:0)?(80\\\\\\\\d{7}|(?:26|63)9\\\\\\\\d{6})$\",\"ZA\":\"^(?:0)?([1-79]\\\\\\\\d{8}|8\\\\\\\\d{4,9})$\",\"ZM\":\"^(?:0)?(800\\\\\\\\d{6}|(?:21|63|[79]\\\\\\\\d)\\\\\\\\d{7})$\",\"ZW\":\"^(?:0)?(2(?:[0-57-9]\\\\\\\\d{6,8}|6[0-24-9]\\\\\\\\d{6,7})|[38]\\\\\\\\d{9}|[35-8]\\\\\\\\d{8}|[3-6]\\\\\\\\d{7}|[1-689]\\\\\\\\d{6}|[1-3569]\\\\\\\\d{5}|[1356]\\\\\\\\d{4})$\",\"001\":\"^([1359]\\\\\\\\d{8})$\"}')\nconst phoneLength = {\n    '852': 8,\n    '853': 8,\n    '65': 8,\n    '60': 10,\n    '886': 10,\n    '86': 11,\n    '62': '8-12',\n    '33': '7-14',\n    '61': '8-9',\n    '673': '6-7',\n};\nexport const nameDefaultRegex = (maxChar: number) => {\n    return {\n        'no-punctuation': /^[^,;]+$/,\n        ...maxChar && { 'limit-character': new RegExp(`^[a-zA-Z\\\\u4e00-\\\\u9eff\\\\s]{1,${maxChar}}$`, '') },\n    }\n};\n\n// 8-12 letters and numbers\nexport function passwordFormatValidator(\n    control: AbstractControl\n): ValidationErrors | null {\n    return isPasswordVaild(control.value) ? null : { invalidPassword: true };\n}\n\nexport function confirmPasswordFormatValidator(\n    control: AbstractControl\n): ValidationErrors | null {\n    const input = control.value;\n    const isValid = control.root.value['password'] === input;\n    if (!isValid) {\n        return { passwordNotEqual: true };\n    } else {\n        return null;\n    }\n}\n\nexport function confirmEmailFormatValidator(\n    control: AbstractControl\n): ValidationErrors | null {\n    const input = control.value;\n    const isValid = control.root.value['email'] === input;\n    if (!isValid) {\n        return { emailNotMatch: true };\n    } else {\n        return null;\n    }\n}\n\nexport function isPasswordVaild(value: string): Boolean {\n    let isVaild = false;\n    if (value) {\n        isVaild =\n            (/[a-z]/.test(value) && /[0-9]/.test(value)) ||\n            (/[0-9]/.test(value) && /[A-Z]/.test(value));\n    }\n    return isVaild;\n}\n\n// by '852' number-string return 'hk'\nexport function findCountryByCodes(value: string) {\n    let key;\n    for (let k in countryCallingCodes) {\n        if (countryCallingCodes[k] === value) {\n            key = k;\n            break;\n        }\n    }\n    return key || 'HK';\n}\n\nexport function phoneValidator(control): ValidationErrors | null {\n    if (isEmptyInputValue(control.value)) {\n        return null; // don't validate empty values to allow optional controls\n    }\n    return isPhoneNumberVaild(control.value.toString())\n        ? null\n        : { 'mobile phone invaild': 'phone number invaild' };\n}\n\nexport function isEmptyInputValue(value: string): boolean {\n    return (\n        value == null ||\n        (typeof value === 'string' && value.length === 0) ||\n        value === undefined\n    );\n}\n\nexport function isPhoneNumberVaild(value): Boolean {\n    let isVaild = false;\n    if (value !== undefined) {\n        // 不能以 0/1 開頭\n        // isVaild = value.length == 8 && /^([2-9])\\d{7}/.test(value);\n\n        const newValue = value.trim();\n\n        if (newValue) {\n            isVaild = newValue.length > 7 && /^\\d+$/.test(newValue);\n        } else {\n            isVaild = value.length > 7 && /^\\d+$/.test(value);\n        }\n    }\n    return isVaild;\n}\n\nexport function isPhoneValid(phone: string, country = 'HK', customPhoneRegex = null): boolean {\n    let isValid = false;\n    if (customPhoneRegex) {\n        return new RegExp(customPhoneRegex).test(phone);\n\n    }\n    if (countryPhoneReg[country]) {\n\n        return new RegExp(countryPhoneReg[country]).test(phone);\n    }\n\n    if (!onlyHasNumber(phone)) {\n        return false;\n    }\n\n    if (phone !== undefined && phone !== '') {\n        let length = String(getPhoneLength(country));\n        let min = length.split('-')[0];\n        let max = length.split('-')[1];\n        if (max) {\n            if (phone.length >= Number(min) && phone.length <= Number(max)) {\n                isValid = true;\n            }\n        } else {\n            if (phone.length === getPhoneLength(country)) {\n                isValid = true;\n            } else {\n                // 当号码有前缀也通过 比如说 85244090771 而不只是 44090771\n                let countryCode = phone.slice(\n                    0,\n                    phone.length - getPhoneLength(country)\n                );\n\n                isValid =\n                    phone.length ===\n                    getCountryCallingCode(country).length +\n                    getPhoneLength(country) &&\n                    countryCode === getCountryCallingCode(country);\n            }\n        }\n    }\n\n\n    return isValid;\n}\n\n// 前提是通过电话验证 isPhoneValid()\nexport function isPhoneIncludingCode(phone, country = 'HK') {\n    let isSeparate = false; // 是否分隔\n    let isIncludingCode = false; // 是否has country code\n    let separateSymbol = null; // 分隔符号\n    let noCodePhone = '';\n    if (isPhoneValid(phone, country)) {\n        if (phone.length === getPhoneLength(country)) {\n            return {\n                isSeparate,\n                isIncludingCode,\n                separateSymbol,\n                noCodePhone: phone,\n            };\n        } else {\n            // including code\n            if (\n                phone.length ===\n                getCountryCallingCode(country).length + getPhoneLength(country)\n            ) {\n                // not has separateSymbol\n                isIncludingCode = true;\n                noCodePhone = phone.slice(\n                    getCountryCallingCode(country).length\n                );\n                return {\n                    isSeparate,\n                    isIncludingCode,\n                    separateSymbol,\n                    noCodePhone,\n                };\n            } else {\n                // has separateSymbol\n                isIncludingCode = true;\n                isSeparate = true;\n                separateSymbol = phone.slice(\n                    getCountryCallingCode(country).length,\n                    getCountryCallingCode(country).length + 1\n                );\n                noCodePhone = phone.slice(\n                    getCountryCallingCode(country).length + 1\n                );\n                return {\n                    isSeparate,\n                    isIncludingCode,\n                    separateSymbol,\n                    noCodePhone,\n                };\n            }\n        }\n    } else {\n        return {};\n    }\n}\n\nexport function isEmailValid(value: string): boolean {\n    try {\n        value = value.toLowerCase();\n        let isValid = false;\n        if (value !== undefined) {\n            const regExp =\n                /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\n            //    isVaild = value.includes(\"@\") && (value.includes(\".com\") || value.includes(\".net\"));\n            isValid =\n                regExp.test(value) &&\n                !value.includes('.web') &&\n                !value.includes('..') &&\n                value.indexOf('.') !== 0;\n            isValid =\n                isValid &&\n                !(\n                    value.includes('<') &&\n                    value.indexOf('>') === value.length - 1\n                ) &&\n                value.indexOf('@') === value.lastIndexOf('@') &&\n                value.indexOf(')') !== value.length - 1;\n            isValid =\n                isValid &&\n                !(\n                    /^\\d+$/.test(value[value.length - 1]) &&\n                    value.length - 1 - value.lastIndexOf('.') >= 4\n                );\n        }\n        return isValid;\n    } catch (err) {\n        return false;\n    }\n}\n\nexport function emailFormatValidator(control): ValidationErrors | null {\n    return isEmailValid(control.value)\n        ? null\n        : { 'email format': 'email invaild' };\n}\n\nexport function firstNameFormatValidator(\n    control: AbstractControl\n): ValidationErrors | null {\n    return isNameVaild(control.value)\n        ? null\n        : { 'first name format': 'first name is english and space' };\n}\n\nexport function isNameVaild(username: string): boolean {\n    let isVaild = false;\n    if (username) {\n        isVaild = /^[A-Za-z\\s]+$/.test(username);\n    } else {\n        isVaild = true;\n    }\n    return isVaild;\n}\n\nexport function lastNameFormatValidator(\n    control: AbstractControl\n): ValidationErrors | null {\n    return isNameVaild(control.value)\n        ? null\n        : { 'last name format': 'first name is english and space' };\n}\n\nexport function onlyHasNumber(string: string): Boolean {\n    const regExp = /^\\d+$/;\n    return regExp.test(string);\n}\n\n// by country return '852': number-string\nexport function getCountryCallingCode(country = 'HK'): string {\n    let tmp = countryCallingCodes[country];\n    if (!tmp) {\n        tmp = '852';\n    }\n    return tmp;\n}\n\nexport function getPhoneLength(country): number {\n    return phoneLength[getCountryCallingCode(country)];\n}\n\nexport function isUnitNumberFormat(string: string): boolean {\n    const regExp = /[^A-Za-z0-9 /-]/;\n    let onlyNumberAndLetterAndSpace: boolean;\n    onlyNumberAndLetterAndSpace = !regExp.test(string);\n    return onlyNumberAndLetterAndSpace;\n}\n\nexport function asLetter(string: string): Boolean {\n    const regExp = /[A-Za-z]/;\n    return regExp.test(string);\n}\n\nexport function hasNumber(string: string): Boolean {\n    const regExp = /[0-9]/;\n\n    return regExp.test(string);\n}\n\nexport function getDateStringLabel(milliseconds: number): string {\n    const date = new Date(milliseconds);\n    let timeString = date.getFullYear().toString() + '-';\n    if (date.getMonth() + 1 <= 9) {\n        timeString = timeString + '0' + (date.getMonth() + 1).toString() + '-';\n    } else {\n        timeString = timeString + (date.getMonth() + 1).toString() + '-';\n    }\n\n    if (date.getDate() <= 9) {\n        timeString = timeString + '0' + date.getDate().toString();\n    } else {\n        timeString = timeString + date.getDate().toString();\n    }\n\n    return timeString;\n}\n\nexport function currentTimeString(): string {\n    return timeStringLabel(null, true);\n}\n\nexport function timeStringLabel(\n    pickUpTime?: number,\n    withSecond: boolean = false\n): string {\n    let date: Date;\n    if (pickUpTime) {\n        date = new Date(pickUpTime);\n    } else {\n        date = new Date();\n    }\n    let timeString = date.getHours() + ':';\n    if (date.getMinutes() === 0) {\n        timeString = timeString + '00';\n    } else if (date.getMinutes() <= 9) {\n        timeString = timeString + '0' + date.getMinutes();\n    } else {\n        timeString = timeString + date.getMinutes();\n    }\n\n    if (withSecond) {\n        timeString = timeString + ':';\n        if (date.getSeconds() === 0) {\n            timeString = timeString + '00';\n        } else if (date.getSeconds() <= 9) {\n            timeString = timeString + '0' + date.getSeconds();\n        } else {\n            timeString = timeString + date.getSeconds();\n        }\n    }\n    return timeString;\n}\n\nexport function getClosedTime(store: Store, time?: number): string {\n    let storeCloseTime: string;\n    const today: Date = time ? new Date(time) : new Date();\n    if (store.openings && store.openings['weekdays']) {\n        const weekday = today.getDay();\n        storeCloseTime = store.openings['weekdays'][weekday]['endTime'];\n    }\n\n    if (!storeCloseTime) {\n        return '24:00';\n    }\n\n    return storeCloseTime;\n}\n\nexport function getPickupDelayTime(store: Store): number {\n    if (!store) {\n        return 0;\n    }\n    if (!store.pos) {\n        return 0;\n    }\n    return Number(store.pos['pickupDelay']);\n}\n\nexport function getDeliveryDelayTime(store: Store): number {\n    if (!store) {\n        return 0;\n    }\n    if (!store.pos) {\n        return 0;\n    }\n    return Number(store.pos['deliveryDelay']);\n}\n\nexport function getTodayMillisecondsFromTimeString(\n    timeLabel: string,\n    time?: number\n): number {\n    const date = time ? new Date(time) : new Date();\n    if (!isNaN(Number(timeLabel.split(':')[0]))) {\n        if (timeLabel.split(':').length === 2) {\n            date.setHours(\n                Number(timeLabel.split(':')[0]),\n                Number(timeLabel.split(':')[1]),\n                0,\n                0\n            );\n        } else if (timeLabel.split(':').length === 3) {\n            date.setHours(\n                Number(timeLabel.split(':')[0]),\n                Number(timeLabel.split(':')[1]),\n                Number(timeLabel.split(':')[2]),\n                0\n            );\n        } else if (timeLabel.split(':').length === 4) {\n            date.setHours(\n                Number(timeLabel.split(':')[0]),\n                Number(timeLabel.split(':')[1]),\n                Number(timeLabel.split(':')[2]),\n                Number(timeLabel.split(':')[3])\n            );\n        }\n    } else {\n        return 0;\n    }\n\n    return Number(timeLabel.split(':')[0]) === 0\n        ? date.getTime() + 24 * 60 * 60000\n        : date.getTime();\n}\n\nexport function isAvailableOffer(offer: Offer): boolean {\n    const current = new Date().getTime();\n    const start = offer.start ? offer.start : current;\n    const end = offer.expire ? offer.expire : current;\n\n    return start <= current && end >= current;\n}\n\nexport function isAvailableReward(reward: Reward): boolean {\n    const current = new Date().getTime();\n    const start = reward.start ? reward.start : current;\n    const end = reward.end ? reward.end : current;\n\n    return start <= current && end >= current;\n}\n\nexport function isAvailablePeriod(store, period: Period, now: Date) {\n    // var today: Date = new Date();\n    // today.setHours(0, 0, 0, 0);\n    // var diff = now.getTime() - today.getTime();\n    // var start:number;\n    // var end:number;\n\n    // //console.log(\"diff\", diff);\n    // if(period.openings && period.openings.weekdays){\n    //     var [dateStart,startString,dateEnd,endString] = this.getWeekdayStartAndEnd(period);\n    //     start = dateStart.getTime() - today.getTime();\n    //     end = dateEnd.getTime() - today.getTime();\n    // }else{\n    //     if (!period.start || !period.end) return false;\n\n    //     start = period.start;\n    //     end = period.end;\n\n    // }\n\n    // return diff >= start && diff < end;\n    if (period.openings) {\n        // console.log('isAvailable : check by opening rules');\n        if (!checkPrestopFromStart(now, period)) {\n            console.log('the period not available');\n            return false;\n        }\n\n        const open = OpeningHours.isTimeOpen(\n            store.brand.openings,\n            period.openings,\n            now.getTime()\n        );\n\n        return open;\n    } else {\n        // console.log(\"diff\", diff);\n\n        //TODO: 也許應該 del 這段 code? 因為現在這樣的話, set 00:00 就不行, 需要 set: 00.01\n        if (!period.start && !period.end) {\n            return false;\n        }\n\n        // console.log('isAvailable : check by start & end');\n\n        return Period.isTimeOpen(period, now.getTime());\n    }\n}\n\nfunction checkPrestopFromStart(useTime, period): boolean {\n    const { prestopFromStart, startTime } =\n        (period?.openings?.weekdays &&\n            period.openings.weekdays[useTime.getDay()]) ||\n        {};\n    if (!startTime || !prestopFromStart) {\n        return true;\n    }\n\n    const time = new Date(useTime);\n    const periodStartTime = time.setHours(\n        Number(startTime.split(':')[0]),\n        Number(startTime.split(':')[1]),\n        0,\n        0\n    );\n    if (periodStartTime <= useTime.getTime()) {\n        return true;\n    } else {\n        return (\n            periodStartTime - (prestopFromStart || 0) * 60000 >\n            useTime.getTime()\n        ); // true is available\n    }\n}\n\nexport function getWeekdayStartAndEnd(\n    period: Period\n): [Date, string, Date, string, boolean] {\n    const today: Date = new Date();\n    today.setHours(0, 0, 0, 0);\n    const weekday = period['savedWeekday'] || today.getDay();\n    const weekdays = period.openings.weekdays;\n    let start: Date = new Date();\n    let end: Date = new Date();\n    let startTime: string;\n    let endTime: string;\n    let isOpen = true;\n    if (weekdays[weekday]['startTime'] && weekdays[weekday]['endTime']) {\n        startTime = weekdays[weekday]['startTime'];\n        endTime = weekdays[weekday]['endTime'];\n        isOpen = weekdays[weekday].type === 'open';\n    } else {\n        startTime = period.startTime;\n        endTime = period.endTime;\n    }\n    start.setHours(\n        Number(startTime.split(':')[0]),\n        Number(startTime.split(':')[1]),\n        0,\n        0\n    );\n    end.setHours(\n        Number(endTime.split(':')[0]),\n        Number(endTime.split(':')[1]),\n        0,\n        0\n    );\n    if (today.getDay() !== weekday) {\n        if (end < start) {\n            start = new Date(start.getTime() - 24 * 60 * 60000);\n        } else {\n            start = new Date(start.getTime() - 24 * 60 * 60000);\n            end = new Date(end.getTime() - 24 * 60 * 60000);\n        }\n    } else {\n        if (end < start) {\n            console.log('stepped over time to next day!!!');\n            end = new Date(end.getTime() + 24 * 60 * 60000);\n        }\n    }\n\n    return [start, startTime, end, endTime, isOpen];\n}\n\nexport function hasHoliday(\n    brand: Brand,\n    oh: OpeningHours,\n    time = new Date().getTime()\n) {\n    if (!oh) {\n        return null;\n    }\n\n    if (oh.overwrites) {\n        for (const slot of oh.overwrites) {\n            if (Slot.isWithinDayRange(slot, time)) {\n                console.log('within overwrites', slot);\n                return slot;\n            }\n        }\n    }\n\n    if (brand.openings) {\n        if (brand.openings.ph1) {\n            for (const slot of brand.openings.ph1) {\n                if (Slot.isWithinDayRange(slot, time)) {\n                    console.log('within holiday1', slot);\n                    return oh.holidays[0];\n                }\n            }\n        }\n\n        if (brand.openings.ph2) {\n            for (const slot of brand.openings.ph2) {\n                if (Slot.isWithinDayRange(slot, time)) {\n                    console.log('within holiday2', slot);\n                    return oh.holidays[1];\n                }\n            }\n        }\n    }\n\n    return null;\n}\n\nexport function isPeriodClosed(\n    store: Store,\n    period: Period,\n    currentTime: number\n): boolean {\n    if (!period) {\n        return false;\n    } else {\n        const preStop = period['prestop'] ? period['prestop'] : 0;\n\n        if (preStop === 1440) {\n            return true;\n        }\n        let endTime = new Date(currentTime); // let the date same with currentTime param. Just need to alter hours later.\n        const holidaySlot = hasHoliday(store.brand, period.openings);\n\n        if (holidaySlot) {\n            const startTime = new Date(currentTime);\n            // endTime.setHours(Number(holidaySlot.endTime.split(\":\")[0]), Number(holidaySlot.endTime.split(\":\")[1]));\n            startTime.setHours(\n                Number(holidaySlot.startTime.split(':')[0]),\n                Number(holidaySlot.startTime.split(':')[1]),\n                0,\n                0\n            );\n            endTime.setHours(\n                Number(holidaySlot.endTime.split(':')[0]),\n                Number(holidaySlot.endTime.split(':')[1]),\n                0,\n                0\n            );\n            if (endTime <= startTime) {\n                // console.log('stepped over time to next day!!!');\n                // if (new Date() > endTime) {\n                endTime = new Date(endTime.getTime() + 24 * 60 * 60000);\n                // }\n            }\n        } else if (period.openings && period.openings.weekdays) {\n            const [dateStart, startString, dateEnd, endString] =\n                getWeekdayStartAndEnd(period);\n            // keep the date. Make sure the date same with currentTime param\n            endTime.setHours(\n                dateEnd.getHours(),\n                dateEnd.getMinutes(),\n                dateEnd.getSeconds(),\n                dateEnd.getMilliseconds()\n            );\n            // endTime = dateEnd;\n        } else {\n            const startTime = new Date(currentTime);\n\n            startTime.setHours(\n                Number(period.startTime.split(':')[0]),\n                Number(period.startTime.split(':')[1]),\n                0,\n                0\n            );\n            endTime.setHours(\n                Number(period.endTime.split(':')[0]),\n                Number(period.endTime.split(':')[1]),\n                0,\n                0\n            );\n            if (endTime <= startTime) {\n                // console.log('stepped over time to next day!!!');\n                // if (new Date() > endTime) {\n                endTime = new Date(endTime.getTime() + 24 * 60 * 60000);\n                // }\n            }\n        }\n        // console.log('endTime:' + (endTime.getTime() - preStop * 60000));\n        // console.log('currentTime:' + currentTime);\n        return endTime.getTime() - preStop * 60000 < currentTime;\n    }\n}\n\nexport function getTandCUrl(brand: Brand, name: string): string {\n    if (!brand.links) {\n        return null;\n    }\n    const link = brand.links[name] as Link;\n    if (!link) {\n        return null;\n    }\n\n    let url = link.url;\n\n    if (!url) {\n        return null;\n    }\n\n    if (url.indexOf('http://') === 0 && url.indexOf('localhost') === -1) {\n        url = url.replace('http:', 'https:');\n    }\n\n    return url;\n}\n\nexport function convertNowDateToStoreTimeZone(timeZone, time?: number): Date {\n    timeZone = timeZone ? timeZone : 'GMT+8';\n    let timeZoneValue = timeZone.split('GMT')[1];\n    // let isPositive = timeZoneValue.startsWith('+');\n    let integerTimeZoneValue = parseFloat(timeZoneValue);\n    let now = time ? new Date(time) : new Date();\n    now.setHours(now.getUTCHours() + integerTimeZoneValue);\n    return now;\n}\n\n\nexport const maxDate: ValidatorFn = (group: FormGroup): ValidationErrors | null => {\n    let days = group.get('dayDate');\n    let month = group.get('monthDate');\n    const dt = new Date();\n    let year = dt.getFullYear();\n\n    let d = days.value;\n    let m = month.value;\n\n    let maximumDate;\n\n\n    const daysInMonth = (m, y) => {\n        switch (m) {\n            case 1:\n                return (y % 4 == 0 && y % 100) || y % 400 == 0 ? 29 : 28;\n            case 8:\n            case 3:\n                return 30;\n            case 5:\n            case 10:\n                return 30;\n            default:\n                return 31;\n        }\n    }\n\n    if (m >= 0 && m < 12) {\n        maximumDate = daysInMonth(Number(m), year);\n    }\n\n    if (days.value < '0' || days.value > maximumDate) {\n        return {\n            dateMaximum: true\n        }\n    }\n\n    return null;\n};\n\nexport function emailValidator(\n    control: AbstractControl\n): ValidationErrors | null {\n    if (!control.value) {\n        return null;\n    }\n\n    let REGEXP: RegExp;\n    REGEXP =\n        /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    return REGEXP.test(control.value) ? null : { email: true };\n}\n\n\nexport function isEmptyOrWhiteSpaceValidator(control: AbstractControl): ValidationErrors | null {\n\n    if (isEmptyInputValue(control.value)) {\n        return null; // don't validate empty values to allow optional controls\n    }\n\n    return isEmptyOrWhiteSpace(control.value.toString()) ? { 'emptyOrWhiteSpaceOnly': true } : null;\n}\n\nexport function isEmptyOrWhiteSpace(str: string): boolean {\n    // return true if the string is empty or only white space\n    return (str.match(/^\\s*$/) || []).length > 0;\n}\n\nexport function getSanitizePhone(phone, countryCode): string {\n    const regex = new RegExp(countryPhoneReg[countryCode])\n    const result = regex.exec(phone);\n    return result?.length > 0 ? result[1] : phone;\n}\n\nexport const parseRegex = (option: Record<string, string>) => {\n    let finalRegex: Record<string, RegExp> = {};\n    Object.keys(option).forEach((x) => {\n        finalRegex = {\n            ...finalRegex,\n            [x]: new RegExp(option[x]),\n        };\n        return finalRegex;\n    });\n    return finalRegex;\n}\n\nexport const isValidJson = (regex): boolean => {\n    try {\n        var json = JSON.parse(regex);\n        return (typeof json === 'object');\n    }\n    catch (error) {\n        return false;\n    }\n};\n\n\n/** to form logic  end */\n","export class MathUtils {\r\n\r\n\r\n    public static round(value: number, precision: number) {\r\n        var multiplier = Math.pow(10, precision || 0);\r\n        return Math.round(value * multiplier) / multiplier;\r\n    }\r\n\r\n    public static floor(value: number, precision: number) {\r\n        var multiplier = Math.pow(10, precision || 0);\r\n        return Math.floor(value * multiplier) / multiplier;\r\n    }\r\n\r\n    public static ceil(value: number, precision: number) {\r\n        var multiplier = Math.pow(10, precision || 0);\r\n        return Math.ceil(value * multiplier) / multiplier;\r\n    }\r\n\r\n    public static roundToNearest5(value: number, precision: number) {\r\n        var precisionUnit = 5 / Math.pow(10, precision || 0);\r\n\r\n        if (precisionUnit === 0) { return value }\r\n        var unitRawCount = 0;\r\n        unitRawCount = value / precisionUnit;\r\n        var roundedCount = Math.round(unitRawCount)\r\n\r\n        return this.round(roundedCount * precisionUnit, precision);\r\n    }\r\n}\r\n","import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Component, Injector } from '@angular/core';\nimport { Data } from 'aigens-ng-core';\nimport { Observable } from 'rxjs';\nimport { map, timeout, tap } from 'rxjs/operators';\nimport { ApiBridgeService } from '../services/api-bridge.service';\nimport { ConfigService } from '../services/config.service';\nimport { BasicAuth } from './basic-auth';\n\n@Component({ template: '' })\nexport class AQuery {\n\n    host: string;\n    http: HttpClient;\n    method: string;\n    params: {};\n    url: string;\n    headers: {};\n    configs: ConfigService;\n    body: {};\n    shouldAuth: boolean = false;\n    authorization: BasicAuth;\n    data: ArrayBuffer;\n    file: Blob;\n    apiBridge: ApiBridgeService;\n    timeoutTime: number;\n\n    constructor(injector: Injector) {\n\n        this.http = injector.get(HttpClient);\n        this.configs = injector.get(ConfigService);\n        this.apiBridge = injector.get(ApiBridgeService);\n\n        this.clear();\n    }\n\n\n    private clear() {\n        this.method = \"get\";\n        this.params = {};\n        this.url = null;\n        this.body = null;\n        this.headers = {};\n        this.shouldAuth = false;\n        this.authorization = null;\n        this.data = null;\n        this.file = null;\n        this.timeoutTime = 55000;\n    }\n\n    private getDefaultHeaders(inputs: {}): HttpHeaders {\n\n        let headers = new HttpHeaders();\n\n        for (var key in inputs) {\n            var value = inputs[key];\n\n            headers = headers.set(key, value + \"\");\n        }\n\n        if (this.authorization) {\n            headers = headers.set('AUTHORIZATION', 'Basic ' + this.authorization.getAuth());\n        } else {\n            if (this.shouldAuth) {\n                //allow header have sid already\n                var sid = inputs['sid'] || this.configs.getSessionId();\n\n                if (sid) {\n                    headers = headers.set('sid', sid);\n                }\n            }\n        }\n\n        return headers;\n    }\n\n    auth(auth: boolean): AQuery {\n        this.shouldAuth = auth;\n        return this;\n    }\n\n    basicAuth(auth: BasicAuth): AQuery {\n        this.authorization = auth;\n        return this;\n    }\n\n\n    setTimeoutTime(time: number): AQuery {\n        this.timeoutTime = time;\n        return this;\n    }\n\n    protected getParams(inputs: {}): HttpParams {\n\n        Object.keys(inputs).forEach((key) => (inputs[key] == null) && delete inputs[key]);\n\n\n        let params: HttpParams = new HttpParams({\n            fromObject: inputs\n        });\n\n        var lang = this.configs.getLocale();\n\n        if (lang && !inputs[\"locale\"] && this.url.indexOf(\"locale\") == -1) {\n            params = params.set('locale', lang);\n        }\n\n        return params;\n    }\n\n    public getJson(): Observable<Object> {\n\n        var result = this.doHttp();\n        this.clear();\n        return result;\n    }\n\n    private getHost() {\n        if (this.host) return this.host;\n        return this.configs.getApi();\n    }\n\n\n\n    private doHttp(): Observable<Object> {\n\n\n\n        var url = this.url;\n\n        if (url.indexOf(\"/\") == 0) {\n            url = this.getHost() + url;\n        }\n\n        if (this.apiBridge) {\n            url = this.apiBridge.translateUrl(url, this);\n        }\n\n        var params = this.params;\n        var headers = this.headers;\n        var method = this.method;\n\n        var searchParams = this.getParams(params);\n        var httpHeaders = this.getDefaultHeaders(headers);\n\n        if (\"get\" == method) {\n            return this.http.get(url, { params: searchParams, headers: httpHeaders, observe: 'response' }).pipe(this.timeoutError()).pipe(map(r => this.processJson(r)));\n        } else if (\"post\" == method || \"put\" == method || \"delete\" == method) {\n\n            var body = this.body;\n            // File upload\n            if (this.file) {\n                // httpHeaders = httpHeaders.set('Content-Type', 'multipart/form-data');\n\n                const formData = new FormData();\n\n                formData.set('data', this.file);\n\n                //body = JSON.stringify(this.body);\n\n                if (\"post\" == method) {\n                    return this.http.post(url, formData, {\n                        params: searchParams, headers: httpHeaders, reportProgress: true, observe: 'events'\n                    });\n                } else if (\"put\" == method) {\n                    return this.http.put(url, formData, { params: searchParams, headers: httpHeaders, reportProgress: true, observe: 'events' });\n                }\n            }\n            else if (this.body) {\n\n                httpHeaders = httpHeaders.set(\"Content-Type\", \"application/json\");\n\n                body = JSON.stringify(this.body, Data.JsonReplacer);\n\n                //body = JSON.stringify(this.body);\n\n                if (\"post\" == method) {\n                    return this.http.post(url, body, { params: searchParams, headers: httpHeaders, observe: 'response' }).pipe(this.timeoutError()).pipe(map(r => this.processJson(r)));\n                } else if (\"put\" == method) {\n                    return this.http.put(url, body, { params: searchParams, headers: httpHeaders, observe: 'response' }).pipe(this.timeoutError()).pipe(map(r => this.processJson(r)));\n                } else if (\"delete\" == method) {\n                    return this.http.delete(url, { params: searchParams, headers: httpHeaders, observe: 'response' }).pipe(this.timeoutError()).pipe(map(r => this.processJson(r)));\n                }\n            } else if (this.data) {\n                console.log(\"raw bytes not supported, fix me\");\n                /*\n                if ('post' == method) {\n                    return this.http.post(url, this.data).pipe(map(r => this.processJson(r)));\n                }*/\n            } else {\n\n                httpHeaders = httpHeaders.set('Content-Type', 'application/x-www-form-urlencoded');\n\n\n                var str = searchParams.toString();\n                str = str.replace(/\\+/g, \"%2b\");\n\n                //console.log(\"urlencoded body\", str);\n\n\n                if (\"post\" == method) {\n                    return this.http.post(url, str, { headers: httpHeaders, observe: 'response' }).pipe(this.timeoutError()).pipe(map(r => this.processJson(r)));\n                } else if (\"put\" == method) {\n                    return this.http.put(url, str, { headers: httpHeaders, observe: 'response' }).pipe(this.timeoutError()).pipe(map(r => this.processJson(r)));\n                } else if (\"delete\" == method) {\n                    return this.http.delete(url, { params: searchParams, headers: httpHeaders, observe: 'response' }).pipe(this.timeoutError()).pipe(map(r => this.processJson(r)));\n                }\n\n\n            }\n\n\n        }/* else if (\"put\" == method) {\n\n            var body = this.body;\n            if (this.body) {\n                httpHeaders.set(\"Content-Type\", \"application/json\"),\n                    body = JSON.stringify(this.body);\n\n                return this.http.put(url, body, { search: searchParams, headers: httpHeaders }).map(r => r.json());\n            } else {\n                httpHeaders.set('Content-Type', 'application/x-www-form-urlencoded');\n                body = searchParams.toString();\n                return this.http.put(url, body, { headers: httpHeaders }).map(r => r.json());\n            }\n\n        }*/\n\n        return null;\n\n    }\n\n    processJson(response) {\n\n\n\n        var dateStr = response.headers.get('Date');\n\n        var json = response.body;\n\n\n        if (dateStr && json) {\n            var date = new Date(dateStr);\n\n            json['time'] = date.getTime();\n        }\n\n\n        return json;\n    }\n\n    timeoutError() {\n        if(this.timeoutTime === 0){\n            return tap({complete: () => console.log('no timeout')})\n        }\n        return timeout({\n            each: this.timeoutTime,\n            with: () => { throw new Error('timeout error') }\n        })\n    }\n\n\n}\n","import { Component } from '@angular/core';\nimport { Injector } from '@angular/core';\n\nimport { BasePage } from './base-page';\n//import { ProgressDialogComponent } from '../dialogs/progress-dialog/progress-dialog.component';\n\n@Component({ template: '' })\nexport class BaseApp extends BasePage {\n\n    busy: boolean = false;\n    superLoader;\n\n    constructor(injector: Injector) {\n\n\n        super(injector);\n    }\n\n\n\n    superloading(show) {\n\n        /*\n        if (show) {\n            this.superLoader = this.dialogCtr.open(ProgressDialogComponent, { data: {}, disableClose: true });\n        } else {\n\n            if (this.superLoader) {\n                this.superLoader.close();\n                this.superLoader = null;\n            }\n\n        }\n        */\n    }\n\n\n\n    loading(show): void {\n\n        this.busy = show;\n\n    }\n\n\n    setBusy(busy): void {\n\n        this.busy = busy;\n\n    }\n\n\n\n\n}\n\n","import { TimeService } from './../../pure/services/time.service';\nimport { Location } from '@angular/common';\nimport { Component, Injector } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { PageParams } from '../../pure/base/page-params';\nimport { SettingManager } from '../../pure/managers/setting-manager';\nimport { PlatformService } from '../../pure/services/platform.service';\nimport { RoutingService } from '../../pure/services/routing.service';\nimport { AnalyticsService } from '../services/analytics.service';\nimport { ConfigService } from '../services/config.service';\nimport { Context } from '../services/context.service';\nimport { DataService } from '../services/data.service';\nimport { DialogService } from '../services/dialog.service';\n\n\n\n// DO NOT ADD PROJECT DEPENDENCY TO THIS CLASS\n@Component({ template: '' })\nexport class BaseComponent {\n\n    t: TranslateService;\n    router: Router;\n    route: ActivatedRoute;\n\n    configService: ConfigService;\n    context: Context;\n\n    routingService: RoutingService;\n    dataService: DataService;\n    routerLoc: Location;\n    //browserService: BrowserService;\n    my: any;\n    dialogService: DialogService;\n    analyticsService: AnalyticsService;\n    platformService: PlatformService;\n\n    settingManager: SettingManager;\n    navParams: PageParams;\n\n    timeService: TimeService;\n\n    isAnimationOff: boolean = false;\n\n    constructor(injector: Injector) {\n\n        this.configService = injector.get(ConfigService);\n        this.t = injector.get(TranslateService);\n        this.context = injector.get(Context);\n        this.router = injector.get(Router);\n        this.route = injector.get(ActivatedRoute);\n        this.routerLoc = injector.get(Location);\n\n        this.routingService = injector.get(RoutingService);\n        this.dataService = injector.get(DataService);\n        this.dialogService = injector.get(DialogService);\n        this.analyticsService = injector.get(AnalyticsService);\n        this.platformService = injector.get(PlatformService);\n        //this.browserService = injector.get(BrowserService);\n\n        this.timeService = injector.get(TimeService);\n\n        this.settingManager = injector.get(SettingManager);\n        this.my = window['my'];\n\n        this.navParams = new PageParams();\n        this.navParams.route = this.route;\n\n        this.isAnimationOff = this.configService.getAnimationOff();\n    }\n\n\n\n    back(): void {\n        this.routerLoc.back();\n    }\n\n    setBusy(busy) {\n\n        this.context.app.setBusy(busy);\n    }\n\n    getImage(data: any, name: string, width = 300): string{\n\n        let url = null;\n\n        if (data.images && data.images[name]){\n            url = data.images[name].url;\n        }\n\n        return url;\n\n    }\n\n    hasImage(content: any, imgName: string = 'default'): boolean {\n        const imgs =  content.images  || content[0]?.images;\n\n        if(imgs){\n            var img = imgs[imgName] || imgs['logo'];\n            if(img){\n                return true;\n            }\n        }\n        return false;\n    }\n    /*\n\n    showError(err) {\n        this.context.app.showError(err);\n    }\n    \n    showAlert(title: string, message: string, buttons: any = ['OK']) {\n\n        this.context.app.showAlert(title, message, buttons);\n\n    }\n\n   \n\n    showToast(message: string) {\n        this.context.app.showToast(message);\n    }\n\n    showSnack(message: string, action: string, fn) {\n        this.context.app.showSnack(message, action, fn);\n    }\n\n    loading(show, message: string = null){\n        this.context.app.loading(show, message);\n    }\n\n    superloading(show){\n        this.context.app.superloading(show);\n    }\n    */\n\n    isDev(){\n        return this.configService.isDev() || (this.configService.isLocalhost() && !this.platformService.isApp());\n    }\n\n    isPrd(){\n        return this.configService.isPrd();\n    }\n\n\n    getLangValue(item: any, name: string, lang: string = null){\n\n        if (!lang){\n            lang = this.context.contentLang;\n        }\n\n        let value = null;\n\n        if (lang && lang.indexOf('en') === -1){\n\n            value = item[name + '_' + lang];\n\n        }\n\n        if (!value){\n            value = item[name];\n        }\n\n        return value;\n    }\n\n    getISOLangCode(): string {\n        const langMap = {\n            'zh': 'zh-Hant',\n            'zh-cn': 'zh-Hans'\n          };\n\n        const lang = this?.context?.userLang ?? 'en';\n\n        return (lang in langMap) ? langMap[lang] : lang;\n    }\n\n    isAdmin() {\n        return this.context.admin;\n    }\n\n    async openLazyDialog(componentName: string, data: any, options: any = {}): Promise<any> {\n\n    }\n\n    matchElement(data, element, isElementMatchOnly = false){\n        const isElementMatch = data === element;\n        return isElementMatchOnly ? isElementMatch : (isElementMatch || data === 'old' || data === 'default')\n    }\n\n}\n\n","import { Injectable, Injector } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map, take } from 'rxjs/operators';\nimport { CommonService } from '../../pure/services/common.service';\nimport { PlatformService } from '../../pure/services/platform.service';\nimport { SentryService } from '../../pure/services/sentry.service';\nimport { SubscribeService } from '../../pure/services/subscribe.service';\nimport { DataService } from '../services/data.service';\nimport { StorageService } from '../services/storage.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BaseContext {\n\n    public fields: string[];\n    public dataService: DataService;\n    public contextId: string;\n    public storageService: StorageService;\n    public subscribeService: SubscribeService;\n    public platformService: PlatformService;\n    public sentryService: SentryService;\n\n    constructor(injector: Injector) {\n\n       this.storageService = injector.get(StorageService);\n       this.subscribeService = injector.get(SubscribeService);\n       this.platformService = injector.get(PlatformService);\n       this.sentryService = injector.get(SentryService);\n       this.dataService = injector.get(DataService);\n    }\n\n    get(fieldName: string, url: string, params:{} = {}){\n\n        this.dataService.get(url, params).pipe(map(jo => this.setData(fieldName, jo)));\n\n    }\n\n    private setData(fieldName: string, data: any){\n\n        this[fieldName] = data;\n        return data;\n    }\n\n    /*\n    bind(obj: any, fieldName: string){\n\n        var bs : BehaviorSubject<any> = this[fieldName];\n\n        if(bs){\n\n        }\n\n    }*/\n\n    //Child should overwrite this, or nothing will be saved\n    protected makeSaveData(): {}{\n        return null;\n    }\n\n    protected restoreSavedData(data: any){\n\n    }\n\n    protected makeGenericKey(context: any = {}, type: string, locale: string = \"multi\"){\n\n        if(!context.groupId) return null;\n\n        var segs = [];\n\n        segs.push(\"type=\" + type);\n        segs.push(\"groupId=\" + context.groupId);\n\n        if(context.courtId){\n            segs.push(\"courtId=\" + context.courtId);\n        }else if(context.brandId){\n\n            segs.push(\"brandId=\" + context.brandId);\n\n            /*\n            if(context.storeId){\n                segs.push(\"storeId=\" + context.storeId);\n            }\n            */\n        }\n\n        segs.push(\"locale=\" + locale);\n\n        var key = segs.join('&');\n\n        return key;\n    }\n\n    public save(){\n\n\n        var key = this.contextId;\n\n        console.log(\"saving context\", key);\n\n        if(!key){\n            console.log(\"MISSING contextId\");\n            return;\n        }\n\n        var data = this.makeSaveData();\n\n        if(!data){\n            this.storageService.setStorage(key, null);\n            return;\n        }\n\n        if (!this.platformService.isSDK() || (this.platformService.isSDK() && window['cachedOrderContext'])) {\n            var now = new Date().getTime();\n            data['saved'] = now;\n            data['expire'] = now + 1000 * 60 * 60 * 24 * 7;\n\n            var serialized = this.serialize(data);\n\n            this.storageService.setStorage(key, serialized);\n\n            console.log(\"saved context\");\n        }\n\n    }\n\n    private serialize(data: any, compress: boolean = false){\n\n        if(!compress) return data;\n\n        var jsonStr = JSON.stringify(data);\n        return jsonStr;\n    }\n\n    private deserialize(raw: any, compress: boolean = false){\n\n        if(!compress) return raw;\n\n        var result = JSON.parse(raw);\n\n        console.log(\"deserialized\", result.groupId, result);\n\n        return result;\n    }\n\n    public restore(callback: Function = null){\n\n        console.log(\"restoring context\", this.contextId, window.location.href);\n\n        this.storageService.getStorage(this.contextId)\n        .then((value)=>{\n\n            var de = this.deserialize(value);\n\n            if(de){\n                this.restoreSavedData(de);\n                if(callback) callback(this);\n            }else{\n                if(callback) callback(null);\n            }\n\n        }).catch((reason)=>{\n            console.log(\"ERROR\", reason);\n            if(callback) callback(null);\n        });\n\n    }\n\n\n    setLocal(key: string, object: any) {\n\n        CommonService.setLocal(key, object);\n    }\n\n    getLocal(key: string): any {\n\n        return CommonService.getLocal(key);\n    }\n\n\n    bind(fields: string[]){\n        this.subscribeService.bind(this, fields);\n    }\n\n    next(name, value){\n        this[name] = value;\n        this.subscribeService.next(name, value);\n    }\n\n    listen(name: string, once:boolean = false): Observable<any>{\n\n        var obs : any = this.subscribeService.getObservable(name);\n\n        if(once){\n            obs = obs.pipe(take(1));\n        }\n\n        return obs;\n    }\n\n\n\n\n\n}\n","import { TimeService } from './../../pure/services/time.service';\nimport { AfterViewInit, Component, Injector } from '@angular/core';\nimport { Brand, Court, Data, Group, Member, Membership, Store } from 'aigens-ng-core';\nimport { skip } from 'rxjs/operators';\nimport { MemberContext, ThemeColorService } from '..';\nimport { PageParams } from '../../pure/base/page-params';\nimport { AdService } from '../../pure/services/ad.service';\nimport { SentryService } from '../../pure/services/sentry.service';\nimport { ConfigService } from '../services/config.service';\nimport { ContextManager } from '../services/context-manager.service';\nimport { Context } from '../services/context.service';\nimport { BaseComponent } from './base-component';\n\n\n@Component({ template: '' })\nexport class BasePage extends BaseComponent implements AfterViewInit{\n\n    member: Member;\n    membership: Membership;\n    group: Group;\n    brand: Brand;\n    store: Store;\n    court: Court;\n\n    navParams: PageParams;\n\n    protected timer: any;\n    protected active = false;\n\n    private cb: any;\n\n    winWidth: number = window.innerWidth;\n    autoDismissPreLoader: boolean = true;\n\n    private themeColorService: ThemeColorService;\n    contextManager: ContextManager;\n    memberContext: MemberContext;\n    sentryService: SentryService;\n\n    adService: AdService;\n\n    timeService: TimeService;\n\n    constructor(injector: Injector) {\n\n        super(injector);\n\n        this.navParams = new PageParams();\n\n        this.navParams.route = this.route;\n\n        this.configService = injector.get(ConfigService);\n        this.context = injector.get(Context);\n\n        this.navParams.querys = this.route.snapshot.queryParams;\n        this.navParams.params = this.route.snapshot.params;\n\n        this.navParams.input = this.routingService.getAuxInput();\n\n        this.member = this.context.member;\n        this.membership = this.context.membership;\n        this.group = this.context.group;\n        this.brand = Data.toData(Brand, this?.context?.brand);\n        this.store = this.context.store;\n        this.court = this.context.court;\n\n        this.themeColorService = injector.get(ThemeColorService);\n\n        this.contextManager = injector.get(ContextManager);\n        this.memberContext = injector.get(MemberContext);\n\n        this.adService = injector.get(AdService);\n        this.sentryService = injector.get(SentryService);\n        this.timeService = injector.get(TimeService);\n\n    }\n\n    getNav(app: any): void {\n        const navs = app.getRootNav();\n        if (navs && navs.length > 0) {\n            return navs[0];\n        }\n        return app.getActiveNav('nav');\n    }\n\n    ngAfterViewInit(){\n\n        console.log(\"ngAfterViewInit\", this.route.snapshot.data);\n\n        var routeData = this.route.snapshot.data;\n\n        if(routeData && routeData.preloader === true){\n\n        }else{\n            this.dialogService.dismissPreLoader();\n        }\n\n        this.sentryService.setContext('Aigens', {\n            version: window['aigens']?.version ?? ''\n        });\n        if (window['aigens']?.context?.brandId) {\n            this.sentryService.setTag(\"brandId\", window['aigens']?.context?.brandId);\n        }\n        if (window['aigens']?.context?.courtId) {\n            this.sentryService.setTag(\"courtId\", window['aigens']?.context?.courtId);\n        }\n\n    }\n\n    canBack(): boolean {\n        //return this.routingService.canBack();\n        return this.routingService.canBack();\n    }\n\n    protected getUIRefreshInterval(): number {\n        return 0;\n    }\n\n    protected onRefreshUI(): void {\n        console.log('you need to implment onRefreshUI');\n    }\n\n    private startTimer(interval): void {\n        if (!this.timer) {\n            console.log('start timer');\n            this.timer = setInterval(() => {\n                this.onRefreshUI();\n            }, interval);\n        }\n    }\n\n    private stopTimer(): void {\n\n        if (this.timer) {\n            console.log('stop timer');\n            clearInterval(this.timer);\n            this.timer = null;\n        }\n    }\n\n    ngOnInit(): void {\n\n        const interval = this.getUIRefreshInterval();\n\n        console.log(\"INT\", interval);\n\n        if (interval > 500) {\n            this.startTimer(interval);\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.stopTimer();\n    }\n\n    hasMenu(): boolean {\n        return this.routingService.hasMenu() && !this.settingManager.get('appHideTabbarMenu', false);\n\n    }\n\n    isRoot(): boolean {\n        return this.routingService.isRoot();\n    }\n\n    isTab() {\n\n        return this.route.snapshot.data.tab == true;\n    }\n    isMenu() {\n        return this.route.snapshot.data && this.route.snapshot.data.menu == true;\n    }\n\n\n    showMenu() {\n\n        console.log('menuClicked');\n\n        this.context.app.openDrawer();\n    }\n\n    clearReuse(): void {\n\n        const strat: any = this.router.routeReuseStrategy;\n        strat.clear();\n\n    }\n\n    autoContext(fields: string[] = null, params: any = null, callback: Function = null){\n\n        if(!fields) fields = this.context.fields;\n\n        if(!params){\n            var groupId = this.navParams.get(\"groupId\");\n            var courtId = this.navParams.get(\"courtId\");\n            var brandId = this.navParams.get(\"brandId\");\n            var storeId = this.navParams.get(\"storeId\");\n\n            params = {\n                groupId: groupId,\n                courtId: courtId,\n                brandId: brandId,\n                storeId: storeId\n            };\n        }\n\n        this.contextManager.autoContext(fields, params, ()=>{\n\n            this.themeColorService.setThemeByContext();\n            this.init();\n        });\n\n    }\n\n\n\n    //overwrite this method to be called after autoContext\n    init(){\n\n    }\n\n\n    isDev() {\n        return this.configService.get('dev') == true;\n    }\n\n\n    isPrd() {\n        return this.configService.get('production') == true;\n    }\n\n\n    listenParams(callback: Function){\n\n        //must skip first one, or will fire immediately!\n        //we don't need to unsubscribe because NG router does that automatically\n        this.route.queryParams.pipe(skip(1)).subscribe(p => callback(p));\n        this.route.params.pipe(skip(1)).subscribe(p => callback(p));\n\n    }\n\n    setLang(storeLang: string) {\n        this.t.use(storeLang);\n        this.configService.setLocale(storeLang);\n        this.t.setDefaultLang(storeLang);\n        this.t.currentLang = storeLang;\n        this.context.userLang = storeLang;\n        window['aigens']?.context && (window['aigens'].context.userLang = storeLang);\n    }\n\n    isLoggedIn(){\n\n        var member = this.context.member;\n\n        if(member && !member.guest){\n            return true;\n        }\n\n        return false;\n\n    }\n\n\n    getSetting(name: string, defValue = null){\n        return this.settingManager.get(name, defValue);\n    }\n\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport { ConfigService } from '../services/config.service';\nimport { Context } from '../services/context.service';\nimport { AQuery } from './aquery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BaseService{\n\n    public aq: AQuery;\n    public context: Context;\n    public configs: ConfigService;\n    public http: HttpClient;\n\n    constructor(injector: Injector){\n      this.context = injector.get(Context);\n      this.configs = injector.get(ConfigService);\n      this.http = injector.get(HttpClient);\n\n      this.aq = new AQuery(injector);\n    }\n\n}\n","import { Item, ItemGroup, MathUtils, OrderItem, Store } from '../../data';\nimport { OrderItemBuilder } from './orderitem-builder';\n\n/**\n * A temporary modifier group manager\n * **/\n\nexport class ModifierBuilder {\n\n    store: Store;\n    orderitem: OrderItem;\n    items: Item[] = null;\n    /*\n\n{\n    \"itemId\":[\n\n        {\n            id: \"mgroupId\"\n\n            items: []\n\n        },\n\n        {\n            id: \"mgroupId\"\n            items:[]\n        }\n    ]\n\n}\n\n    */\n\n\n    private mods: any = {};\n    private qmap: any = {};\n    private pmap: any = {};\n\n    private mmap: any = {}; // modifier item map\n\n    constructor(store: Store, orderitem: OrderItem, items: Item[] = null) {\n        this.store = store;\n        this.orderitem = orderitem;\n\n        this.addExisting();\n\n        var allItems = this.findItems(orderitem);\n\n        if (items) {\n            this.items = allItems.filter(i => items.find(ii => ii.id === i.id) != null);\n        } else {\n            this.items = allItems;\n\n        }\n    }\n\n\n    clear() {\n        this.mods = {};\n        this.qmap = {};\n        this.pmap = {};\n    }\n\n    /**\n     * Clear all modifiers selected for specific item and group\n     * @param item\n     */\n    clearForItem(item: Item, group: ItemGroup) {\n        /* this.mods[item.id] = null;\n        Object.keys(this.qmap).filter(key => this.isKeyForItem(key, item)).forEach(key => {\n            this.qmap[key] = null;\n        }) */\n        //\n        let mgroups: ItemGroup[] = this.mods[this.createModifierMapKey(item)];\n\n        let mgroup: ItemGroup = this.findById(mgroups, group.id);\n        // let index: number = mgroups.indexOf(mgroup);\n        if (!mgroup)\n            return;\n\n        if (mgroups) {\n            let index: number = mgroups.indexOf(mgroup);\n            mgroups.splice(index, 1);\n        }\n\n        mgroup.items.forEach(mod => {\n            let qkey: string = this.createQuantityMapKey(item, mod, group);\n            this.qmap[qkey] = 0;\n            this.pmap[qkey] = 0;\n        });\n    }\n\n\n    transfer(oi: OrderItem) {\n        if (!oi || !oi.groups) {\n            return;\n        }\n\n        oi.groups.forEach(group => {\n\n            let items: Item[] = group.items;\n\n            items\n                .filter(item => item.mgroups && item.mgroups.length > 0)\n                .forEach(item => {\n\n                    let mgroups: ItemGroup[] = item.mgroups;\n\n                    mgroups.forEach(mgroup => {\n\n                        let mitems: Item[] = mgroup.items;\n                        mitems.forEach(mitem => {\n\n                            this.setMod(item, mgroup, mitem, mitem.quantity);\n\n                        });\n\n                    });\n\n                });\n\n        });\n    }\n\n\n    addExisting() {\n\n        var items = OrderItem.getFlattenItems(this.orderitem, false);\n\n        for (let item of items) {\n            var mgroups = item.mgroups;\n            if (mgroups && mgroups.length > 0) {\n\n                for (let mgroup of mgroups) {\n\n                    var mods = mgroup.items;\n\n                    if (mods && mods.length > 0) {\n\n                        for (let mod of mods) {\n                            mod?.mgroup && (this.mmap[mod.mgroup] = mod);\n                            this.setMod(item, mgroup, mod, mod.quantity, true);\n                        }\n                    }\n\n\n                }\n\n            } else {\n                // 购物车里不存在 item mod(即 mitem.currentQty == 0 ) , so 执行 auto add absentItem logic(mitem level)\n                const origin: Item = this?.store?.menu?.['imap'][item?.id];\n                if (origin?.mgroups) {\n                    origin?.mgroups?.map(mg => mg?.items?.map(mItem => {\n                        if (mItem?.baseQty === 0 && mItem?.absentId /*&& q === 0*/) { // 初始化时 baseQty === 0 并且对应的absent存在，把absent 加入mdBuidler\n                            let absentItem: Item = this.findAbsentItemByAbsentid(mItem, mg?.items);\n                            console.log('when new ModifierBuilder() auto add absentItem', absentItem?.name);\n                            absentItem && this.plus(item, mg, absentItem);\n                        }\n                    }));\n                }\n            }\n\n        }\n    }\n\n    private getQty(quantity: number, mod: Item, ignoreBaseQty: boolean = false): number {\n\n        let fullmod = this.findItem(mod);\n\n        if (!fullmod) return quantity;\n\n        if (quantity == 0 && fullmod.absentId) return -1;\n\n        if (!ignoreBaseQty) {\n            if (fullmod.baseQty)\n                quantity -= fullmod.baseQty;\n        }\n\n        if (quantity < 0) quantity = 0;\n\n        return quantity;\n    }\n\n    minus(item: Item, group: ItemGroup, mItem: Item) {\n\n\n        var q = this.getQuantity(item, group, mItem);\n\n        if (q > mItem.min) {\n            q--;\n        }\n\n        if (mItem?.absentId && q === 0) { // 当 当前mitem 数量0并且对应的absent存在，把absent 加入mdBuidler\n            // add the absentItem mod\n            let absentItem: Item = this.findAbsentItemByAbsentid(mItem, group?.items);\n            console.log('ModifierBuilder add absentItem', absentItem?.name);\n            absentItem && this.plus(item, group, absentItem);\n        }\n\n        this.setMod(item, group, mItem, q);\n    }\n\n    plus(item: Item, group: ItemGroup, mItem: Item) {\n\n        var q = this.getQuantity(item, group, mItem);\n        const max = mItem.max || group.max;\n\n        if (max > q) {\n            q++;\n        }\n\n        console.log('ModifierBuilder plus mItem', mItem?.name, q);\n\n        if (mItem?.absentId) {\n            // clear the absentItem mod\n            let absentItem: Item = this.findAbsentItemByAbsentid(mItem, group?.items);\n            console.log('ModifierBuilder clear absentItem', absentItem?.name);\n            absentItem && this.setMod(item, group, absentItem, 0);\n        }\n\n        this.setMod(item, group, mItem, q);\n\n    }\n\n    // find absent item\n    findAbsentItemByAbsentid(mitem: Item, items: Item[] = []): Item {\n        let a =items?.find(i => i?.id === mitem?.absentId);\n        return a || items?.find(i => mitem?.id === i?.absentId);\n    }\n\n\n    setMod(item: Item, mgroup: ItemGroup, mod: Item, quantity: number, addExisting: boolean = false) {\n\n        //var mgroups = this.mods[item.id];\n        var mgroups = this.mods[this.createModifierMapKey(item)];\n        if (!mgroups) {\n            mgroups = [];\n            //this.mods[item.id] = mgroups;\n            this.mods[this.createModifierMapKey(item)] = mgroups;\n        }\n\n        var mg = this.findById(mgroups, mgroup.id); //TODO\n        if (!mg) {\n            //mg = this.cloneIG(mgroup);\n            mg = OrderItemBuilder.cloneIG(mgroup);\n            mgroups.push(mg);\n        }\n\n        var mods = mg.items;\n        var existing = this.findById(mods, mod.id);\n\n        if (!existing) {\n            //existing = this.cloneMod(mod);\n            existing = OrderItemBuilder.cloneItem(mod)\n\n            mods.push(existing);\n        }\n\n        let qty = this.getQty(quantity, mod, true); // 废弃 getQuantity() baseQty logic, so now hardcode true\n\n        console.log(\"qty\", qty);\n\n        /*\n        if (quantity <= 0 && mod.baseQty <= 0) {\n            this.removeObject(existing, mods);\n        }*/\n\n        let remove: boolean = false;\n\n        if (qty == 0) {\n            this.removeObject(existing, mods);\n            remove = true;\n            console.log(\"remove 0 qty mod\");\n        }\n\n        if (qty == -1) {\n            qty = 0;//need to route to absent item\n        }\n\n        existing.quantity = qty;\n\n        if (mods.length == 0) {\n            this.removeObject(mg, mgroups);\n        }\n\n\n        var qkey = this.createQuantityMapKey(item, mod, mgroup);\n\n        if (!remove) {\n            this.qmap[qkey] = qty;\n            if (!!mod.baseQty) {\n                if ((qty - mod?.baseQty) > 0) { qty = (qty - mod?.baseQty); }\n                else { qty = 0; }\n            }\n            this.pmap[qkey] = MathUtils.round(mod.price * qty, 2);\n        }\n        else {\n            delete this.qmap[qkey];\n            delete this.pmap[qkey];\n        }\n\n        //console.log(\"qmap\", this.qmap);\n        //console.log(\"pmap\", this.pmap);\n\n    }\n\n    getPrice(item: Item, group: ItemGroup, mItem: Item): number {\n\n        let qty = this.getQuantity(item, group, mItem);\n\n        if (mItem.baseQty && qty > mItem.baseQty)\n            return mItem.price;\n        else\n            return 0;\n    }\n\n    getTotal(): number {\n\n        let total: number = 0;\n\n        Object.keys(this.pmap).forEach(p => {\n\n            total += this.pmap[p];\n\n\n        });\n\n        total = MathUtils.round(total, 2);\n        return total;\n    }\n\n    private createQuantityMapKey(item: Item, mod: Item, mgroup: ItemGroup): string {\n        return item.addTime + '.' + item.id + '.' + mod.id + '.' + mgroup.id;\n    }\n\n    private createModifierMapKey(item: Item): string {\n        return item.addTime + '.' + item.id;\n    }\n\n    getQuantity(item: Item, mgroup: ItemGroup, mod: Item) {\n        var qkey = this.createQuantityMapKey(item, mod, mgroup);\n        var q = this.qmap[qkey];\n        if (q == null || isNaN(q)) {\n            if (mod.baseQty)\n                q = mod.baseQty;\n            else\n            q = 0;\n        } else {\n            // if (q > 0 && mod.baseQty)\n            //     q += mod.baseQty;\n        }\n\n        return q;\n    }\n\n    getSelectedModifierCount(item: Item): number {\n        if (!this.qmap) {\n            return 0;\n        }\n\n        let count: number = 0;\n        Object.keys(this.qmap)\n            .filter(key => this.isKeyForItem(key, item))\n            .forEach(key => {\n                let quantity: number = this.qmap[key];\n                if (quantity != null && !isNaN(quantity) && quantity > 0) {\n                    count += quantity;\n                }\n            });\n\n        return count;\n    }\n\n    private isKeyForItem(key: string, item: Item): boolean {\n        let parts: string[] = key.split(\".\");\n        let itemId: string = null;\n        /*if (parts.length == 2) {\n            itemId = parts[0];\n        }*/\n        let index: string;\n        if (parts.length == 3) {\n            itemId = parts[1];\n            index = parts[0];\n        }\n\n        //return (itemId != null && itemId == item.id);\n        return (itemId != null && itemId == item.id && Number(index) == item.addTime);\n    }\n\n    build(): OrderItem {\n\n        var items = OrderItem.getFlattenItems(this.orderitem, false);\n\n        for (let item of items) {\n\n            //var mgroups = this.mods[item.id];\n            var mgroups = this.mods[this.createModifierMapKey(item)];\n            if (mgroups && mgroups.length > 0) {\n                item.mgroups = mgroups;\n\n            } else {\n                item.mgroups = null;\n            }\n        }\n\n        // replace item by using absentItem\n        // ModifierBuilder.build(this.orderitem, this.store?.menu?.['imap']);\n\n        return this.orderitem;\n\n    }\n\n    private static build(orderitem: OrderItem, imap: any): OrderItem {\n\n        if (!imap) imap = {};\n\n        orderitem.items.forEach(i => {\n\n            let mgroups = i.mgroups;\n\n            if (mgroups && mgroups.length > 0) {\n\n                mgroups.forEach(mgroup => {\n\n                    let newItems: Item[] = [];\n                    let original = mgroup.items;\n\n                    original.forEach(mitem => {\n\n                        let fullItem: Item = imap[mitem.id];\n\n                        if (mitem?.quantity == 0 && fullItem?.absentId && mitem?.baseQty) {\n\n                            let absent: Item = orderitem?.items?.find(i => i?.id === fullItem?.absentId); // orderitem item 有无 对应的 absent item\n\n                            if (absent) { // 改数量\n                                absent.quantity = 1; // now absentItem quality only will be one ;todo: handle absentItem quanlity?\n\n                            } else {\n                                absent = imap[fullItem.absentId];\n                                if (absent) {\n\n                                    console.log(\"replace with absent item\", mitem.backendId + \"=>\" + absent.backendId);\n\n                                    let absentItem = OrderItemBuilder.cloneItem(absent);\n                                    absentItem.quantity = 1;\n                                    newItems.push(absentItem);\n\n                                } else {\n\n                                    console.log(\"absent item not found\", fullItem.absentId);\n                                }\n                            }\n\n\n                        }\n                        else {\n                            newItems.push(mitem);\n                        }\n                    });\n\n                    mgroup.items = newItems;\n\n                });\n\n\n            }\n\n        });\n\n        OrderItem.flattenItems(orderitem);\n\n        return orderitem;\n    }\n\n\n    findById(list: any, id: any) {\n        if (!list)\n            return null;\n        for (let o of list) {\n            if (id == o.id) {\n                return o;\n            }\n        }\n\n        return null;\n    }\n\n    /*private cloneMod(from: Item): Item {\n\n        var item = new Item();\n\n        item.id = from.id;\n        item.name = from.name;\n        item.price = from.price;\n        item.quantity = 0;\n        item.backendId = from.backendId;\n        item.extra = from.extra;\n\n        return item;\n\n    }\n\n    private cloneIG(from: ItemGroup): ItemGroup {\n\n        var ig = new ItemGroup();\n\n        ig.id = from.id;\n        ig.items = [];\n        ig.name = from.name;\n        ig.backendId = from.backendId;\n        ig.printers = from.printers;\n\n        return ig;\n\n    }*/\n\n    private removeObject(object: any, array: any[]) {\n\n        var idx = array.indexOf(object);\n\n        if (idx != -1) {\n\n            array.splice(idx, 1);\n\n        }\n\n\n    }\n\n\n    /**\n     * Find all modifiable items from current order item\n     * @param oi order item\n     */\n\n    public static findItems(store: Store, oi: OrderItem): Item[] {\n\n        let gmap = store.menu['gmap'];\n\n        //console.log(\"modifier builder find items\", gmap, oi);\n\n        var itemsMap = {};\n\n        for (let ig of oi.groups) {\n            var realIg = gmap[ig.id];\n            for (let item of realIg.items) {\n                itemsMap[item.id] = item;\n            }\n        }\n\n        var items = OrderItem.getFlattenItems(oi, false);\n\n        let result: Item[] = [];\n\n        for (let item of items) {\n            //var realItem = itemsMap[item.id]; //!!!reference\n            var realItem: Item = { ...itemsMap[item.id] };\n            realItem.addTime = item.addTime;\n            result.push(realItem);\n        }\n\n        //console.log(\"modable items\", result);\n\n        result = result.filter(item => {\n            let mgroups = item.mgroups;\n            if (!mgroups || mgroups.length == 0) {\n                return false;\n            }\n\n            return mgroups.some(mgroup => {\n                let mitems: Item[] = mgroup.items;\n                return mitems && mitems.length > 0;\n            });\n        });\n\n        return result;\n\n    }\n\n    findItem(i: Item): Item {\n\n        let imap = this.store.menu['imap'];\n\n        if (imap)\n            return imap[i.id];\n        else\n            return null;\n\n    }\n\n    findItems(oi: OrderItem): Item[] {\n\n        //let gmap = this.store.menu['gmap'];\n\n        return ModifierBuilder.findItems(this.store, oi);\n\n    }\n\n    getMGroupQTY(mainItem: Item, group: ItemGroup): number {\n        let quantities = 0; // this.mdBuilder.getSelectedModifierCount(item);\n        for (const tmpItem of group?.items) {\n            quantities += this.getQuantity(mainItem, group, tmpItem);\n        }\n        return quantities;\n    }\n\n    // 判断 mitem 是否可以加入 mdBuilder\n    canAdd(item: Item, group: ItemGroup, mItem?: Item): boolean {\n        const max: number = group?.max;\n        let quantities = 0; // this.mdBuilder.getSelectedModifierCount(item);\n        for (const tmpItem of group?.items) {\n            quantities += this.getQuantity(item, group, tmpItem);\n        }\n        this.mmap = {};\n        if (max <= quantities) {\n            return false;\n        }\n        group?.items?.forEach((mitem) => {\n            if (mitem.mgroup && this.has(item, group, mitem)) {\n                this.mmap[mitem.mgroup] = mitem;\n            }\n        });\n        if (max > quantities && mItem && this.mmap[mItem.mgroup] && mItem.id !== this.mmap[mItem.mgroup].id) {\n            return true;\n        }\n\n        return max > quantities;\n    }\n\n    clearMmapBykey(key: string) {\n        this.mmap[key] = null;\n    }\n\n    clearSameMGroup(item: Item, group: ItemGroup, mItem: Item) {\n        const i = this.mmap[mItem.mgroup];\n        if (i) {\n            this.setMod(item, group, i, 0);\n        }\n\n        this.mmap[mItem.mgroup] = mItem;\n    }\n\n    // 判断 mdBuilber里是否选过了 mitem\n    has(item: Item, group: ItemGroup, mItem: Item): boolean {\n        return this?.getQuantity(item, group, mItem) > 0;\n    }\n\n\n}\n","import { ModifierBuilder } from './modifier-builder';\nimport { Category, Data, Item, ItemGroup, MathUtils, OrderItem, Store } from '../../data';\n\n/**\n * a temporary order item manager\n * **/\nexport class OrderItemBuilder {\n\n    private originGroups: ItemGroup[] = [];\n    groups: ItemGroup[] = [];\n    category: Category;\n    store: Store;\n    //combo: boolean = false;\n    items: Item[] = [];\n    qmap: any = [];\n    //mods: boolean = false;\n    orderItem: OrderItem;\n    noNeedConfirm = {};\n    noNeedConfirmButtonFlag: boolean = false;\n    constructor(store: Store) {\n        this.store = store;\n    }\n\n    /**\n     * save the origin itemGroups to use\n     * @param mainItemGroup mainItem 所属的 itemGroup\n     * @param mainItem\n     */\n    setOriginGroups(mainItemGroup: ItemGroup, mainItem: Item) {\n        this.originGroups = [];\n        if (mainItemGroup) {\n            this.originGroups.push(mainItemGroup);\n        }\n        if (mainItem && mainItem.groups) {\n            this.originGroups.push(...mainItem.groups);\n        }\n    }\n\n    getOriginGroups(): ItemGroup[] {\n        return this.originGroups;\n    }\n\n    /**\n     * 在 this.builder 配置的 groups 中找到指定 group的下标\n     * @param group\n     * @returns\n     */\n    getItemGroupIndex_hasSelected(group: ItemGroup): number {\n        return this.findIndexByGroups(this.groups, group);\n    }\n\n    getItemGroupIndex_allGroups(group: ItemGroup): number {\n        return this.findIndexByGroups(this.originGroups, group);\n    }\n\n    getGroupById(groupId: string) {\n        let arr = this.groups?.filter(g => g?.id === groupId)\n        return arr && arr[0] || null;\n    }\n\n    findIndexByGroups(groups: ItemGroup[], group: ItemGroup): number {\n        return groups.findIndex(g => {\n            // TODO: is compared by id safe?\n            return (g !== null && g !== undefined && g.id === group.id);\n        });\n    }\n    getItemGroupItemsQuantity(group: ItemGroup): number {\n        let igIndex = this.getItemGroupIndex_hasSelected(group);\n        let groupMap = this.qmap[igIndex];\n        let itemsQuantity: number = 0;\n        for (const key in groupMap) {\n            groupMap[key] && groupMap[key] > 0 && (itemsQuantity += groupMap[key]);\n        }\n        return itemsQuantity || 0;\n    }\n\n    // 判断当前的 group 是否完成配置最低要求的items\n    isGroupCompleted(group: ItemGroup): boolean {\n        // console.log(group);\n        if (!group) {\n            return true;\n        }\n        const quantity = this.getItemGroupItemsQuantity(group);\n        if (group.min <= quantity || quantity === group.max) {\n            return true;\n        }\n        if (group.optional) {\n            if (group.skippable) {\n                // return true;\n                // 4. optional == true, skipable == true:\n                // 若min ==0，那麼可以直接當這個IG completed\n                // 若min >0，那麼用戶要選擇「可不選」或是所選的item 數目大於等於min 才算completed\n                return group.min > 0 ? (quantity >= group.min || this.noNeedConfirm[group.id]) : true;\n            } else {\n                // optional == true, skipable == false:\n                // 忽略min == 0，用戶必須要選「可不選」或所選的sub-item 數目大於等于min 才可以當是completed\n                return (quantity >= group.min || this.noNeedConfirm[group.id]);\n            }\n        }\n        return false;\n    }\n\n    clone(): OrderItemBuilder {\n        let builder: OrderItemBuilder = new OrderItemBuilder(this.store);\n        builder.category = this.category;\n        //builder.combo = this.combo;\n        //builder.mods = this.mods;\n        this.copyTo(builder);\n\n        return builder;\n    }\n\n    copyTo(another: OrderItemBuilder) {\n        let groups: ItemGroup[] = [];\n        this.groups.forEach((group, i) => {\n            if (group) {\n                groups[i] = Data.toData(ItemGroup, JSON.parse(JSON.stringify(group)));\n            }\n        })\n        another.groups = groups;\n\n        another.items = Data.toDataArray(Item, JSON.parse(JSON.stringify(this.items)));\n        another.qmap = JSON.parse(JSON.stringify(this.qmap));\n    }\n\n    static test(store: Store) {\n\n        console.log(\"testing builder\", store);\n\n        var b = new OrderItemBuilder(store);\n\n        var cat = store.categories[0];\n        var ig = cat.groups[0];\n        var item = ig.items[0];\n        var mig = item.mgroups[0];\n        var mod = mig.items[0];\n\n        var ig2 = item.groups[0];\n        var item2 = ig2.items[0];\n\n        b.setCategory(cat);\n        b.setItem(ig, item, 0);\n\n        //b.setModItem(0, mig, mod, 0);\n\n        b.setItem(ig2, item2, 2);\n\n\n        var oi = b.build();\n        console.log(\"oi\", oi);\n\n        var mb = new ModifierBuilder(store, oi);\n        mb.setMod(item, mig, mod, 2);\n\n        var quan = mb.getQuantity(item, mig, mod);\n        console.log(\"quantity\", quan);\n\n\n        var oi2 = mb.build();\n\n        console.log(\"oi2\", oi2);\n\n        var flattens = OrderItem.getFlattenItems(oi2, true);\n\n        console.log(flattens);\n\n    }\n\n    public static createEmptyCategory(category: Category): Category {\n        let cat: Category = new Category();\n        cat.id = category.id;\n        cat.name = category.name;\n        cat.type = category.type;\n        cat.openings = category.openings;\n        cat.cgroupId = category.cgroupId;\n        cat.departmentId = category.departmentId;\n        cat.periods = category.periods;\n        cat.igMode = category.igMode;\n        if (category.groups) {\n            cat.groups = category.groups;\n        }\n        return cat;\n    }\n\n    findItems(index: number): Item[] {\n\n        if (index < 0 || index >= this.groups.length) return [];\n\n        let g = this.groups[index];\n\n        if (!g) return [];\n\n        return g.items;\n    }\n\n    build(number?): OrderItem {\n\n        var oi = new OrderItem();\n\n        if (!this.category) {\n            console.log(\"ERROR! Category must be set!\");\n            return null;\n        }\n\n        oi.category = OrderItemBuilder.createEmptyCategory(this.category);\n\n        oi.categoryId = this.category.id;\n        oi.categoryType = this.category.type;\n        oi.cgroupId = this.category.cgroupId;\n        oi.departmentId = this.category.departmentId;\n\n        number && (oi.quantity = number);\n\n        if (!this.store || !this.store.id) {\n            console.warn(\"store is empty! \", this);\n        }\n        oi.storeId = this.store.id;\n\n        // console.log(\"builder.groups:\", this.groups);\n\n        oi.groups = [];\n\n        for (let ig of this.groups) {\n            if (ig) {\n                oi.groups.push(ig);\n            }\n        }\n\n        OrderItem.flattenItems(oi);\n\n        //console.log(\"flatten\", oi.items);\n\n        let markerItem: Item = null;\n        let points: number = 0;\n        for (let item of oi.items) {\n            if (item.modifiable) oi.modifiable = true;\n            if (item.marker) markerItem = item;\n            if (item.points && item.points > 0) points += item.points;\n        }\n\n        oi.points = points;\n\n        if (oi.items.length > 0 && oi.items[0].combo && this.category?.igMode === 'combo') {\n            oi.combo = true;\n        } else {\n            oi.combo = false;\n        }\n\n        oi.takeout = false;\n        if (markerItem) oi.takeout = markerItem.marker == \"takeaway\";\n\n        this.items = oi.items;\n\n        this.orderItem = oi;\n        this.calculateoi(oi);\n        return oi;\n\n    }\n\n\n    // some item has absentItem 并且要自动 auto mdBuilder 里\n    autoAddAbsentItem(): void {\n        console.log('autoAddAbsentItem');\n        let mdBuilder = new ModifierBuilder(this.store, this.orderItem);\n        this.orderItem = mdBuilder?.build();\n    }\n\n    // 计算 orderbuilder build出来的orderItem 更新 oi.total\n\n\n    private calculateoi(orderitem: OrderItem) {\n\n        var total = 0;\n\n        for (let item of orderitem.items) {\n\n            let realq = item.quantity;\n            let q = item.quantity;\n            let t; // extra price?\n            if (item.baseQty) {\n                if (realq >= item.baseQty) {\n                    realq = realq - item.baseQty;\n                    t = item.price * realq;\n                }\n                else if (realq < item.baseQty) {\n                    t = 0;\n                }\n            }\n            else {\n                t = item.price * q;\n            }\n\n            //if (!q || q < 0) q = 1;\n\n\n            total += MathUtils.round(t, 2);\n        }\n\n        orderitem.total = MathUtils.round(total, 2);\n\n    }\n\n\n    setCategory(cat: Category) {\n        this.category = cat;\n    }\n\n    setItem(group: ItemGroup, item: Item, index: number, quantity: number = 1, ignoreAddTime: boolean = true, includeMod: boolean = false) {\n\n        this.plusItem(group, item, index, quantity, ignoreAddTime, includeMod);\n    }\n\n    clearItems(index: number) {\n        this.groups[index] = null;\n        this.qmap[index] = {};\n        //console.log(\"cleared index \" + index, this.groups);\n    }\n\n    plusItem(group: ItemGroup, item: Item, index: number, fixed: number = 0, ignoreAddTime: boolean = true, includeMod: boolean = false) {\n\n        if (this.noNeedConfirm && this.noNeedConfirm?.[group?.id]) delete this.noNeedConfirm[group?.id];\n\n        var isModifiable = this.checkIsModifiable(group, item);\n        item.modifiable = isModifiable;\n\n        console.log(\"adding \" + item.name + \" to index \" + index, item);\n\n        var ig = this.groups[index];\n\n        if (!ig) {\n            ig = OrderItemBuilder.cloneIG(group);\n            this.groups[index] = ig;\n        }\n\n        var items = ig.items;\n        if (!items) {\n            items = [];\n            ig.items = items;\n        }\n\n        var isModifiable = this.checkIsModifiable(group, item);\n        var savedItem = null;\n        if (!isModifiable) {\n            for (let exist of items) {\n                if (exist.id == item.id) {\n                    savedItem = exist;\n                }\n            }\n        }\n        //NOT SEPARATE SUB-ITEMS\n        //find the existing item\n        /*var savedItem = null;\n        for (let exist of items) {\n            if (exist.id == item.id) {\n                savedItem = exist;\n            }\n        }\n\n        //if none found, add it\n        if (!savedItem) {\n\n            savedItem = OrderItemBuilder.cloneItem(item, includeMod);\n            savedItem.quantity = 0;\n            items.push(savedItem);\n        }*/\n\n        let isSetMessage: boolean = Item.isSetMessageLimit(item);\n\n        //SEPARATE SUB_ITEMS\n        if (!savedItem || isModifiable || isSetMessage) {\n            savedItem = OrderItemBuilder.cloneItem(item, includeMod);\n            savedItem.quantity = 0;\n            if (!ignoreAddTime) savedItem.addTime = item.addTime;\n            items.push(savedItem);\n        }\n        //SEPARATE SUB_ITEMS -- END\n        // fixed = item.quantity; // dont know why add this code , now i remove it for task (IHAF-652)\n        if (fixed == 0) {\n\n            savedItem.quantity = savedItem.quantity + 1;\n        } else {\n\n            savedItem.quantity = fixed;\n        }\n\n\n        this.saveQuantity(index, item.id, savedItem.quantity, isModifiable || isSetMessage);\n\n    }\n\n    checkIsModifiable(group: ItemGroup, item: Item) {\n\n        // var originsItemGroup = this.store.menu['gmap'][group.id];\n\n        // for(let originsItem of originsItemGroup.items)\n        // {\n        //     if(originsItem.id == item.id)\n        //     {\n\n        //         var orimgroups = originsItem.mgroups;\n\n        //         if(orimgroups && orimgroups.length > 0){\n\n        //             isModifiable =  true;\n        //             break;\n        //         }\n        //     }\n        // }\n        let realItem = item;\n        if (this.store.menu) {\n            let imap = this.store.menu['imap'];\n\n            if (imap && item.id in imap) {\n                realItem = imap[item.id];\n            }\n        }\n\n\n        return Item.isModifiable(realItem);\n\n\n    }\n\n    minusItem(group: ItemGroup, item: Item, index: number, ignoreAddTime: boolean = true) {\n\n        var ig = this.groups[index];\n        if (!ig) return;\n\n        var items = ig.items;\n        if (!items) {\n            return;\n        }\n\n        //find the existing item\n        //let isModifiable = item.mgroups && item.mgroups.length > 0;\n\n        var isModifiable = this.checkIsModifiable(group, item);\n\n        var savedItem = null;\n        var itemIndex = 0;\n        for (let i = items.length - 1; i >= 0; i--) {\n            let exist = items[i];\n            if (exist.id == item.id) {\n                if (!ignoreAddTime && exist.addTime != item.addTime) continue;\n                savedItem = exist;\n                itemIndex = i;\n                break;\n            }\n            //itemIndex++;\n        }\n\n        if (!savedItem) return;\n\n        var n = savedItem.quantity - 1;\n\n        savedItem.quantity = n;\n\n        //this.saveQuantity(index, item.id, n);\n        this.saveQuantity(index, item.id, -1, isModifiable);\n\n        if (n <= 0) {\n            items.splice(itemIndex, 1);\n        }\n\n\n    }\n\n    isCleared(igIndex: number): boolean {\n        return this.groups[igIndex] == null && this.qmap[igIndex] != null;\n    }\n\n    noNeedSelected(igIndex: number, editMode: boolean) {\n        // console.log(\"noNeedSelected\", this.groups);\n\n        let g: ItemGroup = this.groups[igIndex];\n\n        if (editMode && !g) return true;\n\n        if (!editMode && typeof g !== 'undefined' && g == null) return true;\n\n        return false;\n    }\n\n    deleteItem(igIndex: number) {\n\n        this.groups[igIndex] = null;\n\n        this.qmap[igIndex] = null;\n\n\n    }\n\n    isModifiable(groups: ItemGroup[], igIndex: number = null): boolean {\n        if (igIndex == null) {\n            return this.groups.some((group, i) => this.isModifiable(groups, i));\n        }\n\n        let ig = groups[igIndex];\n        if (!ig) {\n            console.log(\"item group not found!\");\n            return false;\n        }\n\n        let items: Item[] = ig.items;\n        return items.some(item => Item.isModifiable(item));\n    }\n\n    setModItem(igIndex: number, mgroup: ItemGroup, mitem: Item, index: number) {\n\n        var ig = this.groups[igIndex];\n        if (!ig) {\n            console.log(\"ERROR! Cannot add modifier to non existing IG position\", igIndex);\n            return;\n        }\n\n        var item = ig.items[0];\n\n        var mig = OrderItemBuilder.cloneIG(mgroup);\n        var mod = OrderItemBuilder.cloneItem(mitem);\n        mod.quantity = 1;\n\n        mig.items = [mod];\n\n        if (!item.mgroups) {\n            item.mgroups = [];\n        }\n\n        item.mgroups[index] = mig;\n\n\n    }\n\n    static cloneIG(from: ItemGroup): ItemGroup {\n\n        var ig = new ItemGroup();\n\n        ig.id = from.id;\n        ig.items = [];\n        ig.name = from.name;\n\n        for (let namekey in from) {\n            if (namekey && namekey.startsWith(\"name\")) {\n                ig[namekey] = from[namekey];\n            }\n        }\n\n        ig.backendId = from.backendId;\n        ig.max = from.max;\n        ig.min = from.min;\n        ig.modifier = from.modifier;\n        //ig.optional = from.optional;\n        ig.repeat = from.repeat;\n        ig.skippable = from.skippable;\n        ig.tags = from.tags;\n        ig.printers = from.printers;\n        ig.defaultId = from.defaultId;\n        ig.pagerMode = from.pagerMode;\n\n        return ig;\n\n    }\n\n    static cloneItem(from: Item, cloneModifiers: boolean = false): Item {\n\n        var item = new Item();\n        // item.addTime = from.addTime; addTime 是modifier 为唯一标识，clone时不应一致\n        item.id = from.id;\n        item.name = from.name;\n        item.baseQty = from.baseQty;\n        item.absentId = from.absentId;\n\n        // api回来的数据是各种语言name_ 但执行cloneItem filter佐\n        for (let namekey in from) {\n            if (namekey && namekey.startsWith(\"name\")) {\n                item[namekey] = from[namekey];\n            }\n        }\n\n\n        item.backendName = from.backendName;\n        item.price = from.price;\n        item.price0 = from.price0;\n        item.price1 = from.price1;\n        item.price2 = from.price2;\n        item.inventory = from.inventory;\n        item.handling = from.handling;\n        item.setLayout = from.setLayout;\n        if (!cloneModifiers || from.mgroups == null) {\n            item.mgroups = null;\n        } else {\n            let mgroups: ItemGroup[] = [];\n\n            from.mgroups.forEach(mgroup => {\n                let mg: ItemGroup = this.cloneIG(mgroup);\n\n                mgroup.items.forEach(mitem => {\n                    let i: Item = this.cloneItem(mitem, false);\n\n                    mg.items.push(i);\n                });\n\n                mgroups.push(mg);\n\n            });\n\n            item.mgroups = mgroups;\n        }\n        item.quantity = from.quantity;\n        item.backendId = from.backendId;\n        item.printName = from.printName;\n        item.images = from.images;\n        item.tags = from.tags;\n        item.modifiable = from.modifiable;\n        item.combo = from.combo;\n        item.printers = from.printers;\n        item.extra = from.extra;\n        item.pgroupId = from.pgroupId;\n        item.marker = from.marker;\n        item.points = from.points;\n        item.discountable = from.discountable;\n        item.comboId = from.comboId;\n        item.comboName = from.comboName;\n        item.taxGroup = from.taxGroup;\n        item.packing = from.packing;\n        item.discountedId = from.discountedId;\n        item.mgroupIds = from.mgroupIds;\n        item.mgroup = from.mgroup; // string\n        item.serviceChargeable = from.serviceChargeable;\n        item.periods = from.periods;\n        item.type = from.type;\n        item.messageLimit = from.messageLimit;\n        item.messageMaxLength = from.messageMaxLength;\n        item.messageOptional = from.messageOptional;\n        item.custom = from.custom;\n        item.igPos = from.igPos;\n        item.min = from.min;\n        item.max = from.max;\n        item.custom = from.custom;\n\n        return item;\n\n    }\n\n    static cloneOrderItem(from: OrderItem, cloneModifiers: boolean = false): OrderItem {\n        var oi = new OrderItem();\n\n        oi.total = from.total;\n\n        var groups = [];\n        for (let ig of from.groups) {\n            var items = [];\n            for (let i of ig.items) {\n                items.push(this.cloneItem(i, cloneModifiers));\n            }\n            var newIg = this.cloneIG(ig);\n            newIg.items = items;\n            groups.push(newIg);\n        }\n\n        oi.groups = groups;\n        oi.categoryId = from.categoryId;\n        oi.category = from.category;\n        oi.categoryType = from.categoryType;\n        oi.quantity = from.quantity;\n        oi.combo = from.combo;\n        oi.modifiable = from.modifiable;\n        oi.storeId = from.storeId;\n        oi.handling = from.handling;\n        oi.discount = from.discount;\n        oi.discountId = from.discountId;\n        oi.discounts = from.discounts;\n        oi.takeout = from.takeout;\n        oi.barcode = from.barcode;\n        oi.message = from.message;\n        oi.grandTotal = from.grandTotal;\n        oi.points = from.points;\n        oi.packing = from.packing;\n        oi.serviceCharge = from.serviceCharge;\n        oi.unlockDiscountConditionType = from.unlockDiscountConditionType;\n        oi.note = from.note;\n\n        return oi;\n    }\n\n    //subgroups (does not include main group) is used to find the proper position of the item\n    transferSubitems(oi: OrderItem, subgroups: ItemGroup[]) {\n\n        var gids = subgroups.map(function (g) { return g.id; });\n\n        for (let ig of oi.groups.slice(1)) {\n            let index = gids.indexOf(ig.id);\n            for (let item of ig.items) {\n                this.setItem(ig, item, index + 1, item.quantity, false, true);\n            }\n\n        }\n\n\n    }\n\n    transferAllItems(oi: OrderItem, subgroups: ItemGroup[]) {\n\n        var gids = subgroups.map(function (g) { return g.id; });\n\n        for (let ig of oi.groups) {\n            let index = gids.indexOf(ig.id);\n            for (let item of ig.items) {\n                this.setItem(ig, item, index + 1, item.quantity, false, true);\n            }\n\n        }\n\n\n    }\n\n    findOriwithStore(oi: OrderItem, store: Store): any {\n        console.log(store);\n\n        let ocat = store.menu['cmap'][oi.categoryId];\n        let gmap = store.menu['gmap'];\n\n        let oigs = ocat ? ocat.groups : [gmap[oi.categoryId]];\n        ocat = ocat ? ocat : oi.category;\n\n        var mainItem = oi.groups[0].items[0];\n        let oig = gmap[oi.groups[0].id];\n\n        var oitem = oig.items.filter(item => item.id == mainItem.id)[0];\n\n        this.category = ocat;\n\n        console.log(\"origins\", ocat, oigs, oitem);\n        return { category: ocat, groups: oigs, item: oitem }\n    }\n    findOrigins(oi: OrderItem): any {\n\n        console.log(this.store);\n\n        let ocat = this.store.menu['cmap'][oi.categoryId];\n        let gmap = this.store.menu['gmap'];\n\n        let oigs = ocat ? ocat.groups : [gmap[oi.categoryId]];\n        ocat = ocat ? ocat : oi.category;\n\n        var mainItem = oi.groups[0].items[0];\n        let oig = gmap[oi.groups[0].id];\n\n        var oitem = oig.items.filter(item => item.id == mainItem.id)[0];\n\n        this.category = ocat;\n\n        let rimap = this.store.menu['rimap'][oitem?.id];\n        const itemIg = rimap?.ig;\n\n        console.log('origins', ocat, oigs, oitem, itemIg);\n        return {category: ocat, groups: oigs, item: oitem, itemIg};\n\n    }\n\n\n\n    private saveQuantity(igIndex: number, itemId: string, n: number, isModifiable: boolean = false) {\n        var map = this.qmap[igIndex];\n\n        if (!map) {\n            map = {};\n            this.qmap[igIndex] = map;\n            map[itemId] = n > 0 ? n : 0;\n        } else {\n            if (isNaN(map[itemId])) map[itemId] = 0;\n            if (n > 0) {\n                map[itemId] = isModifiable ? map[itemId] + n : n;\n            } else {\n                map[itemId] = map[itemId] + n;\n            }\n            if (map[itemId] < 0) map[itemId] = 0;\n        }\n\n        //map[itemId] = n;\n\n    }\n\n    getQuantity(itemId: string) {\n\n        var total = 0;\n\n        for (let i = 0; i < this.groups.length; i++) {\n            total += this.getQuantityInGroup(i, itemId);\n\n        }\n\n        return total;\n    }\n\n    getQuantityInGroup(igIndex: number, itemId: string) {\n        var map = this.qmap[igIndex];\n        if (!map) return 0;\n        var n = map[itemId];\n        if (!n) return 0;\n        return n;\n\n    }\n\n    getSelectedItems(igIndex, filterZeroItem: boolean = false): string[] {\n\n        var map = this.qmap[igIndex];\n        if (!map) return [];\n\n        if (filterZeroItem) {\n            var tmpMap = {};\n            for (let key in map) {\n                if (map[key] > 0) {\n                    tmpMap[key] = map[key];\n                }\n            }\n            return Object.keys(tmpMap);\n        }\n\n\n        return Object.keys(map);\n\n    }\n\n    //get the number of selected choices in that group\n    getChoices(igIndex: number) { // 选了几种item\n        var ig = this.groups[igIndex];\n        if (!ig) return 0;\n        var items = ig.items;\n        if (!items) return 0;\n\n        let choices: number = 0;\n\n        items.forEach(i => {\n            i.quantity && (choices++);\n        });\n\n        return choices;\n\n    }\n\n\n    updateByOi(oi: OrderItem) {\n        let groups = oi?.groups;\n        let groups_ = groups?.map(g => {\n            var g_ = OrderItemBuilder.cloneIG(g);\n            return g_;\n        });\n        groups_ && (this.groups = groups_);\n    }\n\n}\n","import { Directive, ElementRef, OnInit } from '@angular/core';\nimport { PlatformService } from '../../pure/services/platform.service';\n\n@Directive({\n    selector: '[applyModalStyle]'\n})\nexport class ApplyModalStyleDirective implements OnInit {\n\n    constructor(public el: ElementRef, public platformService: PlatformService) {\n\n    }\n    ngOnInit(): void {\n        this.setModalStyle();\n    }\n\n    private setModalStyle() {\n        const style = {\n            background: \"white\",\n            height: \"700px\",\n            maxHeight: \"initial\",\n            maxWidth: \"initial\",\n            minHeight: \"initial\",\n            minWidth: \"initial\",\n            width: \"700px\"\n        }\n        const makeModalStyle = (options) => {\n\n            var result = {} as any;\n            if (this.platformService.isMobile()) {\n                result.minHeight = \"100vh\";\n                result.maxHeight = \"100%\";\n                result.width = \"100%\";\n                result.height = \"100vh\";\n            } else {\n                result.minWidth = options.minWidth || 'initial';\n                result.maxWidth = options.maxWidth || 'initial';\n                result.minHeight = options.minHeight || 'initial';\n                result.maxHeight = options.maxHeight || 'initial';\n                result.width = options.width || 'initial';\n                result.height = options.height || 'initial';\n            }\n            result.background = options.background || 'white';\n            return result;\n        }\n        var modalStyle = makeModalStyle(style);\n\n        try {\n            for (const s in modalStyle) {\n                this.el.nativeElement.style[s] = modalStyle[s]\n            }\n        } catch (error) {\n            console.log(\"error:\", error);\n        }\n    }\n\n}\n","import {\n    Directive,\n    Input,\n    TemplateRef,\n    ViewContainerRef,\n    EmbeddedViewRef\n} from \"@angular/core\";\n\n//COPY from https://stackblitz.com/edit/directive-collection-with-examples?file=src%2Fapp%2Fng-let.directive.ts\n\n@Directive({\n    selector: \"[ngLet]\"\n})\nexport class LetDirective {\n    _ref: EmbeddedViewRef<any>;\n    context: any = {};\n\n    @Input()\n    set ngLet(value: any) {\n        // if embeadded view doesn't exist yet create it (only once)\n        if (!this._ref)\n            this.createView();\n\n        // if value is empty destroy the component\n        // here it's acctualy works like ngIf (will rerender on non-empty value)\n        if (!value) {\n            this._ref.destroy();\n            this._ref = undefined;\n\n            return;\n        }\n\n        // add the value to the context\n        this._ref.context.$implicit = this.context.ngLet = value;\n    }\n\n    constructor(\n        private readonly vcRef: ViewContainerRef,\n        private readonly templateRef: TemplateRef<any>\n    ) { }\n\n    createView(): void {\n        this.vcRef.clear();\n        this._ref = this.vcRef.createEmbeddedView(this.templateRef, this.context);\n    }\n}\n","import { Directive, ElementRef, AfterViewInit, Injector, Inject, Injectable } from '@angular/core';\n// import { RoutingService } from '../../../../../core/src/app/pure/services/routing.service';\n\n@Directive({\n    selector: '[appSelectByKeyboard]'\n})\nexport class SelectByKeyboardDirective implements AfterViewInit {\n\n    private observer: MutationObserver;\n    currentDivElement;\n    constructor(@Inject(Injector) private readonly injector: Injector, private el: ElementRef, private selectByKeyboardService: SelectByKeyboardService) {\n    }\n\n    // get routingService() {\n    //     return this.injector.get(RoutingService);\n    // }\n\n    ngAfterViewInit() {\n\n        this.currentDivElement = this.el.nativeElement;\n        this.handle(this.currentDivElement);\n\n        this.observer = new MutationObserver((mutationsList, observer) => {\n            for (let mutation of mutationsList) {\n                if (mutation.type === 'childList') {\n                    this.handle(this.el.nativeElement);\n                }\n            }\n        });\n        this.observer.observe(this.currentDivElement, { childList: true });\n\n\n    }\n\n    isNone(ele) {\n        if (!ele) return true;\n        const isValid = ele.offsetWidth > 0 && ele.offsetHeight > 0\n        return window.getComputedStyle(ele).display === 'none' || !isValid;\n    }\n\n    handle(divElement) {\n\n        if (!divElement['_id_']) {\n            if (!this.isNone(divElement)) {\n                divElement['_id_'] = new Date().getTime();\n                this.selectByKeyboardService.addData(divElement);\n            }\n        } else {\n            if (this.isNone(divElement)) {\n                this.selectByKeyboardService.removeData(divElement);\n            }\n        }\n\n\n    }\n\n    ngOnDestroy() {\n        this.selectByKeyboardService.removeData(this.currentDivElement);\n        this.observer?.disconnect && this.observer?.disconnect();\n    }\n}\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SelectByKeyboardService {\n\n    private datas = [];\n    private static _currentAlert;\n    className = \"active_aigens\";\n    constructor(@Inject(Injector) private readonly injector: Injector) {\n\n        this.listenKeyboard();\n\n    }\n\n    insertStyle(element) {\n        var styleContent = `.${this.className} { background: ${this.getActiveBgColor(element)} !important; }`;\n        const id = \"device-style-active-key-id\";\n        var style = document.getElementById(id);\n        if (style) {\n            style.innerText = styleContent;\n            return;\n        }\n        style = document.createElement(\"style\");\n        style.innerText = styleContent;\n        style.setAttribute('id', id);\n        // style.appendChild(document.createTextNode(styleContent));\n        document.head.appendChild(style);\n    }\n\n    static setCurrentAlert(alert) {\n        SelectByKeyboardService._currentAlert = alert;\n        alert?.afterClosed()?.subscribe((respone: any) => {\n            this.clearCurrentAlert();\n\n        });\n    }\n    static clearCurrentAlert() {\n        SelectByKeyboardService._currentAlert = null;\n    }\n\n    // get routingService() {\n    //     return this.injector.get(RoutingService);\n    // }\n    listenKeyboard() {\n        window.addEventListener('keydown', event => {\n            const key: any = event?.key;\n            const enabledKeyboardAction = window?.['aigensDeviceNormal']?.keyboardAction?.enabledKeyboardAction;\n            if (enabledKeyboardAction) this.handleKeycode(key);\n        })\n    }\n\n    isNone(ele) {\n        if (!ele) return true;\n        const isValid = ele.offsetWidth > 0 && ele.offsetHeight > 0\n        return window.getComputedStyle(ele).display === 'none' || !isValid;\n    }\n\n    processStatus(targetIndex, status: 'down' | 'up') {\n        // this.clearInvaild();\n        if (!this.datas || !this.datas.length) return;\n        let target = this.datas?.[targetIndex];\n        if (target?.classList?.contains(this.className)) return;\n        target?.classList?.add(this.className);\n        this.insertStyle(target);\n    }\n\n    handleKeycode(key: 'ArrowUp' | 'ArrowDown' | 'ArrowLeft' | 'ArrowRight' | 'Enter') {\n        this.clearInvaild();\n        const datas = this.datas || [];\n        if (!datas.length) return;\n        let targetIndex = 0;\n        switch (key) {\n            case 'ArrowUp':\n            case 'ArrowLeft':\n                for (let i = 0; i < datas.length; i++) {\n                    const data = datas[i];\n                    if (data?.classList?.contains(this.className)) {\n                        targetIndex = (i - 1 < 0) ? 0 : i - 1;\n                    }\n                    data?.classList?.remove(this.className);\n                }\n                this.processStatus(targetIndex, 'up');\n                break;\n            case 'ArrowDown':\n            case 'ArrowRight':\n                for (let i = 0; i < datas.length; i++) {\n                    const data = datas[i];\n                    if (data?.classList?.contains(this.className)) {\n                        targetIndex = (i + 1 === datas.length) ? 0 : i + 1;\n                    }\n                    data?.classList?.remove(this.className);\n                }\n                this.processStatus(targetIndex, 'down');\n                break;\n            case 'Enter':\n                // if (this.routingService.isAux()) {\n                //     this.routingService.navigateCloseAllModal();\n                //     return;\n                // }\n\n                this.datas.forEach(d => {\n                    if (this.isInputFocused(d)) {\n                        d.blur();\n                    }\n                })\n\n\n                if (SelectByKeyboardService._currentAlert) {\n                    SelectByKeyboardService._currentAlert?.close?.();\n                    return;\n                }\n\n                SelectByKeyboardService.clearCurrentAlert();\n\n                const active = this.datas?.find(d => d?.classList?.contains(this.className));\n\n                active?.click?.();\n                break;\n        }\n        this.clearInvaild();\n    }\n\n\n\n    isInputFocused(ele) {\n        return !ele?.classList?.contains(this.className) && ele?.tagName?.toLowerCase().includes('input') && ele === document.activeElement;\n    }\n\n    addData(data) {\n        if (!this.datas) this.datas = [];\n        this.datas.push(data);\n    }\n    getAllDatas() {\n        return this.datas;\n    }\n\n    removeData(data) {\n        this.datas = this.datas.filter(item => item['_id_'] !== data['_id_']);\n    }\n\n    clearInvaild() {\n        for (var i = this.datas.length - 1; i >= 0; i--) {\n            if (this.isNone(this.datas[i])) {\n                this.datas.splice(i, 1);\n            }\n        }\n    }\n\n    clear() {\n        this.datas = [];\n    }\n\n    getActiveBgColor(ele) {\n\n        const configBg = window?.['aigensDeviceNormal']?.keyboardAction?.['activeBg'];\n        if (configBg) return configBg;\n        if (!ele) return \"\";\n        const originBg = window.getComputedStyle(ele).backgroundColor;\n        const a = window?.['aigensDeviceNormal']?.keyboardAction?.['activeBgTransparency'] || 0.3;\n        if (originBg.startsWith('rgb(')) {\n            return originBg.replace(\"rgb(\", \"rgba(\").replace(')', `,${a})`)\n        }\n\n        let bigint = parseInt(originBg.replace('#', ''), 16);\n        let r = (bigint >> 16) & 255;\n        let g = (bigint >> 8) & 255;\n        let b = bigint & 255;\n        return `rgba(${r},${g},${b},${a})`\n    }\n\n}\n","import {Directive, EventEmitter, HostListener, Input, OnDestroy, OnInit, Output} from '@angular/core';\nimport {throttleTime} from 'rxjs/operators';\nimport {Subject, Subscription} from 'rxjs';\n\n@Directive({\n  selector: '[appThrottleClick]'\n})\nexport class ThrottleClickDirective implements OnInit, OnDestroy {\n  @Input() throttleTime = 300;\n  @Output() throttleClick = new EventEmitter();\n  private clicks = new Subject();\n  private subscription: Subscription;\n\n  constructor() {\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.clicks.pipe(\n      throttleTime(this.throttleTime)\n    ).subscribe(e => this.throttleClick.emit(e));\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  @HostListener('click', ['$event'])\n  clickEvent(event): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.clicks.next(event);\n  }\n\n}\n","import { ErrorHandlerService } from './services/error-handler.service';\nimport { PointDisplay } from './pipes/point-display.pipe';\nimport { NgModule, ErrorHandler } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { HttpClientModule } from '@angular/common/http';\nimport { GetDateStringLabelPipe } from './pipes/getDateStringLabelPipe';\nimport { SortByPipe } from './pipes/sort-by.pipe';\nimport { FlattenItemPipe } from './pipes/flatten-item.pipe';\nimport { TimeStringLabelPipe } from './pipes/timeStringLabelPipe';\nimport { CustomFilterPipe } from './pipes/custom-filter.pipe';\nimport { SafeHtmlPipe } from './pipes/safe-html.pipe';\nimport { PriceDisplayPipe } from './pipes/price-display.pipe';\nimport { ItemPricePipe } from './pipes/item-price.pipe';\nimport { LetDirective } from './directives/ng-let.directive';\nimport { ThrottleClickDirective } from './directives/throttle-click';\nimport { StatusDisplayPipe } from './pipes/status-display.pipe';\nimport { ResortOrFilterUnlockItemPipe } from './pipes/resort-or-filter-unlock-item.pipe';\nimport { RemoveItemVariationsPipe } from './pipes/remove-item-variations.pipe';\nimport { DateLocalePipe } from './pipes/date-locale.pipe';\nimport { SubStoreNameByIdPipe } from './pipes/sub-store-name-by-id.pipe';\nimport { ApplyModalStyleDirective } from './directives/apply-modal-style.directive';\nimport { PointToCashPipe } from './pipes/point-to-cash.pipe';\nimport { SanitizePipe } from './pipes/sanitize.pipe';\nimport { CombineOrderStatusPipe } from './pipes/combine-order-status.pipe';\nimport { TextEllipsisPipe } from './pipes/text-ellipsis.pipe';\nimport { EwalletPipe } from './pipes/ewallet.pipe';\nimport { NumberDisplayPipe } from './pipes/number-display.pipe';\nimport { FormTranslatePipe } from './pipes/form-translate.pipe';\nimport { FormErrorMessagePipe } from './pipes/form-error-message.pipe';\nimport { SelectByKeyboardDirective } from './directives/select-by-keyboard';\n\nconst PIPES = [\n    GetDateStringLabelPipe,\n    SortByPipe,\n    FlattenItemPipe,\n    ResortOrFilterUnlockItemPipe,\n    RemoveItemVariationsPipe,\n    TimeStringLabelPipe,\n    CustomFilterPipe,\n    SafeHtmlPipe,\n    PriceDisplayPipe,\n    ItemPricePipe,\n    StatusDisplayPipe,\n    DateLocalePipe,\n    SubStoreNameByIdPipe,\n    PointToCashPipe,\n    SanitizePipe,\n    CombineOrderStatusPipe,\n    PointDisplay,\n    TextEllipsisPipe,\n    CombineOrderStatusPipe,\n    EwalletPipe,\n    NumberDisplayPipe,\n    FormTranslatePipe,\n    FormErrorMessagePipe,\n];\n\nconst DIRECTIVES = [LetDirective, ThrottleClickDirective, ApplyModalStyleDirective, SelectByKeyboardDirective];\n\n@NgModule({\n    declarations: [...PIPES, ...DIRECTIVES],\n    imports: [\n        CommonModule,\n        HttpClientModule,\n        TranslateModule,\n    ],\n    providers: [\n        CombineOrderStatusPipe,\n        NumberDisplayPipe,\n        {\n            provide: ErrorHandler,\n            useClass: ErrorHandlerService,\n        },\n    ],\n    exports: [...PIPES, ...DIRECTIVES]\n})\nexport class FrameworkModule { }\n","import { AQuery } from \"./base/aquery\";\nimport { BaseApp } from \"./base/base-app\";\nimport { BaseComponent } from \"./base/base-component\";\nimport { BaseContext } from \"./base/base-context\";\nimport { BasePage } from \"./base/base-page\";\nimport { BaseService } from \"./base/base-service\";\nimport { ModifierBuilder } from \"./base/modifier-builder\";\nimport { OrderItemBuilder } from \"./base/orderitem-builder\";\nimport { FrameworkModule } from \"./framework.module\";\nimport { DiscountManager } from \"./managers/discount-manager\";\nimport { InventoryManager } from \"./managers/inventory-manager\";\nimport { MenuManager } from \"./managers/menu-manager\";\nimport { OrderManager } from \"./managers/order-manager\";\nimport { PriceManager } from \"./managers/price-manager\";\nimport { RecommendationManager } from \"./managers/recommendation-manager\";\nimport { CustomFilterPipe } from \"./pipes/custom-filter.pipe\";\nimport { FlattenItemPipe } from \"./pipes/flatten-item.pipe\";\nimport { GetDateStringLabelPipe } from \"./pipes/getDateStringLabelPipe\";\nimport { RemoveItemVariationsPipe } from \"./pipes/remove-item-variations.pipe\";\nimport { ResortOrFilterUnlockItemPipe } from \"./pipes/resort-or-filter-unlock-item.pipe\";\nimport { SafeHtmlPipe } from \"./pipes/safe-html.pipe\";\nimport { SortByPipe } from \"./pipes/sort-by.pipe\";\nimport { TimeStringLabelPipe } from \"./pipes/timeStringLabelPipe\";\nimport { AnalyticsService } from \"./services/analytics.service\";\nimport { ConfigService } from \"./services/config.service\";\nimport { ContextManager } from \"./services/context-manager.service\";\nimport { Context } from \"./services/context.service\";\nimport { DataService } from \"./services/data.service\";\nimport { DialogService } from \"./services/dialog.service\";\nimport { LocationService } from \"./services/location.service\";\nimport { MemberContextManager } from \"./services/member-context-manager.service\";\nimport { MemberContext } from \"./services/member-context.service\";\nimport { OrderContext } from \"./services/order-context.service\";\nimport { StorageService } from \"./services/storage.service\";\nimport { ThemeColorService } from \"./services/theme-color.service\";\nimport { TextToSpeechService } from \"./services/text-to-speech.service\";\n\nexport {\n    Context, BaseContext, OrderContext, MemberContext, ConfigService, DataService, LocationService, ThemeColorService, DialogService, AnalyticsService, StorageService,\n    AQuery, BaseApp, BasePage, BaseComponent, BaseService, TextToSpeechService,\n    OrderManager, MenuManager, DiscountManager, InventoryManager, PriceManager, RecommendationManager, ContextManager, MemberContextManager,\n    OrderItemBuilder, ModifierBuilder,\n    GetDateStringLabelPipe, SortByPipe, FlattenItemPipe, ResortOrFilterUnlockItemPipe, RemoveItemVariationsPipe, TimeStringLabelPipe, CustomFilterPipe, SafeHtmlPipe, FrameworkModule,\n};\n","import { Injectable, Injector } from '@angular/core';\nimport { Condition, Discount, MathUtils, Order } from 'aigens-data';\nimport { MenuManager } from './menu-manager';\nimport { OrderManager } from './order-manager';\n\n/**\n * This discount manager is used to\n * calculate all discounts applied for current order\n * @function applyPromotion: apply all discounts orderly by priority,\n *           and calculate the order grand total\n * @function apply: apply one discount, check if all conditions are satisfied\n *           and then apply discount via main condition\n * **/\n\n@Injectable({ providedIn: 'root' })\nexport class DiscountManager {\n\n    protected orderManager: OrderManager;\n    protected menuManager: MenuManager;\n\n    constructor(injector: Injector) {\n\n        this.orderManager = injector.get(OrderManager);\n        this.menuManager = injector.get(MenuManager);\n    }\n\n    /**apply discount, by priority (sorted on server)\n     *can apply multiple discounts\n     * **/\n    public applyPromotions(order: Order, promotions: Discount[], orderManager?) {\n        order.discount = 0;\n        order.discounts = [];\n\n        let applied: number = 0;\n\n\n        //for duplicated promos (cdc coupon) fix itemgroup_count, can support mainitem only\n        //reset applied for all mainitems/ a le carte\n        for (let oi of order.orderitems) {\n            let group = oi.groups[0];\n            oi['tmpApplied'] = 0;\n            oi['discountClaimed'] = 0;\n            oi.discounts = [];\n            oi.discount = 0;\n        }\n        order.promotions = this.sortDiscountPrioInDescending(promotions);\n        let _orderManager = orderManager ? orderManager : this.orderManager\n        for (let promo of promotions) {\n            if (applied && promo.alone) {\n                //reset the condition applicable\n                for (let c of promo.conditions) {\n                    c.applicable = 0;\n                }\n                continue;\n            }\n\n            let success: boolean = this.apply(order, promo, orderManager);\n            _orderManager.calcDiscountGrandTotal(order);\n\n            if (success && promo.benefits[0] && promo.benefits[0].isDiscount()) {\n                if (promo.alone) applied++;\n                console.log(\"applied \", promo.name);\n            }\n\n        }\n\n        // in case calculate new tax\n        _orderManager.calcDiscountGrandTotal(order);\n    }\n\n    private sortDiscountPrioInDescending(promos) {\n        promos = promos.sort((a, b) => (b.priority - a.priority));\n        return promos;\n    }\n\n    private sortOrderItemInAscendingOrder(order) {\n        if (order && order.orderitems) {\n            order.orderitems = order.orderitems.sort((a, b) => (a.total - b.total));\n        }\n    }\n\n    /**\n     * Apply one single discount\n     * check all conditions\n     * take main condition to apply discount\n     * **/\n    checkPromotionConditionCanApply(order, promo, store) {\n        let conditions = promo.conditions;\n        let benefits = promo.benefits;\n        promo.available = 0;\n\n        let now = this.menuManager.getTime(store);\n        if (promo && promo.periods && promo.periods.length > 0) {\n            if (!this.menuManager.isAvailabeByPeriods(store, promo.periods, now)) {\n                return false;\n            }\n        }\n        if (!conditions || conditions.length === 0 || !benefits || benefits.length === 0 || !promo.enabled) {\n            return false;\n        }\n\n        let ok: boolean = true;\n\n        conditions.forEach(c => {\n            if (c instanceof Condition) {\n                if (ok && !c.isSatisfied(order, promo)) ok = false;\n            } else {\n                let condition = Condition.cloneCondition(c);\n                if (ok && !condition.isSatisfied(order, promo)) ok = false;\n            }\n        });\n\n        return ok;\n    }\n    private apply(order: Order, promo: Discount, orderManager?): boolean {\n        let _orderManager = orderManager ? orderManager : this.orderManager\n        let conditions = promo.conditions;\n        let benefits = promo.benefits;\n        promo.available = 0;\n\n        console.log(\"applying discount...\");\n        console.log(\"conditions:\", conditions);\n        console.log(\"benefits:\", benefits);\n        console.log(\"order\", order);\n        console.log(\"discount\", promo);\n\n        let now = this.menuManager.getTime(_orderManager.store);\n        if (promo && promo.periods && promo.periods.length > 0) {\n            if (!this.menuManager.isAvailabeByPeriods(_orderManager.store, promo.periods, now)) {\n                //reset applicable\n                promo.conditions.forEach(con => {\n                    con.applicable = 0;\n                })\n                return false;\n            }\n        }\n        if (!conditions || conditions.length === 0 || !benefits || benefits.length === 0 || !promo.enabled) return false;\n        if (!this.checkGroupPriority(order, promo)) return false\n\n        let ok: boolean = true;\n\n        conditions.forEach(c => {\n            // if (ok && !c.isSatisfied(order, promo)) ok = false;\n            if (c instanceof Condition) {\n                if (ok && !c.isSatisfied(order, promo)) ok = false;\n            } else {\n                let condition = Condition.cloneCondition(c);\n                if (ok && !condition.isSatisfied(order, promo)) ok = false;\n            }\n        });\n\n\n        if (ok) { // all conditions are satisfied\n\n            let p = this.getStoreGrandTotalPrecision(_orderManager.store.currency);\n\n            let c = this.getMainCondition(conditions);\n            let b = promo.benefits[0];\n            b.applied = false;// reset benefit.applied\n            let amount: number = c.apply(order, promo, b, _orderManager.store, p);\n            promo.available = 1;\n            console.log(\"condition ok \", c.display);\n            console.log(\"applying discount amount: \", amount);\n\n            promo.level = c.level;\n\n            if (amount > 0) { //calculable discount\n\n                amount = MathUtils.round(amount, 2);\n                promo.amount = amount;\n                promo.quantity = 1;\n                order.discounts.push(promo);\n\n                let totalDeduct: number = amount;\n                console.log(\"Total deduct: \", totalDeduct);\n\n                let grandTotal = order.grandTotal - totalDeduct;\n                let discount = order.discount + totalDeduct;\n                order.grandTotal = grandTotal;\n\n\n                order.discount = MathUtils.round(discount, p);\n\n\n            } else if (b.applied) { //unlock a new discount, or gift discount (not calculable)\n                order.discounts.push(promo);\n\n            } else {\n                console.log(\"skipping-\", promo.name, \": conditions satisfied, benefit not applicable\");\n                ok = false; //if apply at least one discount\n            }\n        } else {\n            promo.available = 0;\n            // 不满足所有conditions 改变 benefit.acpplied = false\n            promo && promo.benefits && promo.benefits[0] && (promo.benefits[0].applied = false);\n        }\n\n        return ok;\n\n    }\n    private checkGroupPriority(order: Order, promo: Discount): Boolean {\n        let canApply = true;\n\n        if (order.discounts.length > 0) { // filter group &\n            let discountGroupMap = {};\n            order.discounts.map((d) => {\n                if (d.group) {\n                    discountGroupMap[d.group] = discountGroupMap[d.group] ? discountGroupMap[d.group].push([d]) : discountGroupMap[d.group] = [d];\n                }\n            });\n            if (discountGroupMap[promo.group]) {\n                let sameGroupDiscounts = discountGroupMap[promo.group];\n                sameGroupDiscounts.map((gd) => {\n                    if (gd.priority > promo.priority) {\n                        canApply = false\n                    }\n                })\n            }\n        }\n        if (!canApply){\n            if (promo.benefits && promo.benefits[0] && promo.benefits[0].applied){\n                promo.benefits[0].applied = false;\n                promo.conditions[0].applicable = 0;\n            }\n        }\n        return canApply\n    }\n\n    private getStoreGrandTotalPrecision(currency) {\n        if (!currency) return 1;\n        let c = currency.slice(0, 2);\n        if (\"HK\" === c) {\n            return 1;\n        } else if (\"SG\" === c) {\n            return 2;\n        } else if (\"MY\" === c) {\n            //return \"MYR\";\n        } else if (\"CN\" === c) {\n            return 1;\n        } else if (\"TW\" === c) {\n            //return \"TWD\";\n        } else if (\"MO\" === c) {\n            //return \"MOP\";\n        } else if (\"US\" === c) {\n            return 2;\n        } else if (\"CA\" === c) {\n            return 2;\n        } else if (\"IN\" === c) {\n            //return \"INR\";\n        } else if (\"VN\" === c) {\n            //return \"VND\";\n        } else if (\"AU\" === c) {\n            return 2;\n        } else if (\"NZ\" === c) {\n            //return \"NZD\";\n        } else if (\"KR\" === c) {\n            //return \"KRW\";\n        } else if (\"ID\" === c) {\n            //return \"IDR\";\n        } else if (\"TH\" === c) {\n            //return \"THB\";\n        } else if ('EU' === c) {\n            return 2\n        }\n        return 1;\n    }\n\n    /**\n     * Get main condition for a discount\n     * when there is a condition is of item level, the first item level condition is the main condition,\n     * otherwise, the first condition is the main condition\n     * **/\n    getMainCondition(conds: Condition[]) {\n\n        let mainCond: Condition;\n\n        conds.forEach(c => {\n            if (!mainCond)\n                if (c.level == \"item\") mainCond = c;\n        });\n        if (!mainCond) mainCond = conds[0];\n\n        return mainCond;\n    }\n\n    private applyWholeOrderDiscounts(order, promotions): Order {\n        order.discount = 0;\n        order.discounts = [];\n        let applied: number = 0;\n\n        for (let oi of order.orderitems) {\n            oi['tmpApplied'] = 0;\n            oi['discountClaimed'] = 0;\n            oi.discounts = [];\n            oi.discount = 0;\n        }\n        order.promotions = this.sortDiscountPrioInDescending(promotions);\n\n        for (let promo of promotions) {\n            if (applied && promo.alone) {\n                //reset the condition applicable\n                for (let c of promo.conditions) {\n                    c.applicable = 0;\n                }\n                continue;\n            }\n\n            let success: boolean = this.applyCourt(order, promo);\n            // this.orderManager.calcDiscountGrandTotal(order);\n\n            if (success && promo.benefits[0] && promo.benefits[0].isDiscount()) {\n                if (promo.alone) applied++;\n                console.log(\"applied \", promo.name);\n            }\n\n        }\n        return order\n        // in case calculate new tax\n        // this.orderManager.calcDiscountGrandTotal(order);\n    }\n    private applyCourt(order: Order, promo: Discount): boolean {\n        let conditions = promo.conditions;\n        let benefits = promo.benefits;\n        promo.available = 0;\n\n        console.log(\"applying discount...\");\n        console.log(\"conditions:\", conditions);\n        console.log(\"benefits:\", benefits);\n        console.log(\"order\", order);\n        console.log(\"discount\", promo);\n        let ok: boolean = true;\n\n        conditions.forEach(c => {\n            // if (ok && !c.isSatisfied(order, promo)) ok = false;\n            if (c instanceof Condition) {\n                if (ok && !c.isSatisfied(order, promo)) ok = false;\n            } else {\n                let condition = Condition.cloneCondition(c);\n                if (ok && !condition.isSatisfied(order, promo)) ok = false;\n            }\n        });\n\n\n        if (ok) { // all conditions are satisfied\n\n            let c = this.getMainCondition(conditions);\n            let b = promo.benefits[0];\n            b.applied = false;// reset benefit.applied\n            let amount: number = c.apply(order, promo, b);\n\n            console.log(\"condition ok \", c.display);\n            console.log(\"applying discount amount: \", amount);\n\n            promo.level = c.level;\n\n            if (amount > 0) { //calculable discount\n\n                amount = MathUtils.round(amount, 2);\n                promo.amount = amount;\n                promo.quantity = 1;\n                order.discounts.push(promo);\n\n                let totalDeduct: number = amount;\n                console.log(\"Total deduct: \", totalDeduct);\n\n                let grandTotal = order.grandTotal - totalDeduct;\n                let discount = order.discount + totalDeduct;\n                order.grandTotal = grandTotal;\n\n                // let p = this.getStoreGrandTotalPrecision(this.orderManager.store.currency);\n                order.discount = MathUtils.round(discount, 1);\n\n\n            } else if (b.applied) { //unlock a new discount, or gift discount (not calculable)\n                order.discounts.push(promo);\n\n            } else {\n                console.log(\"skipping-\", promo.name, \": conditions satisfied, benefit not applicable\");\n                ok = false; //if apply at least one discount\n            }\n        } else {\n            promo.available = 0;\n        }\n\n        return ok;\n    }\n    public getAvailableDiscount(discounts: Discount[], orderbrandId = null, getWholeDiscounts = false) {\n        let arr = []\n\n        discounts.map((discount) => {\n            if (!discount.brandIds || discount.brandIds.length === 0) { //\n                getWholeDiscounts && arr.push(discount);\n            } else {\n                !getWholeDiscounts && discount.brandIds.map((brandId) => {\n                    brandId === orderbrandId && arr.push(discount);\n                });\n            }\n        });\n        return arr;\n    }\n\n    /*\n    public applyCourtPromotions(courtDiscounts = [], orders: Order[], orderManagerMap) {\n        try {\n            // apply the discount for each order with discount.brandIds\n            for (let i = 0; i < orders.length; i++) {\n                let o = orders[i];\n                let d: Discount[] = this.getAvailableDiscount(courtDiscounts, o.brandId, false)\n                if (d.length === 0) break;\n                console.log('before apply discounts', o, d)\n                this.applyPromotions(orders[i], d, orderManagerMap[o.storeId]);\n            }\n\n            // apply the whole orders\n            // brand.discount priority more highter than court whole-discount\n            let wholeDiscounts = this.getAvailableDiscount(courtDiscounts, null, true)\n            let wholeOrder = this.orderManager.initOrdersMes(orders, wholeDiscounts, orderManagerMap)\n            console.log('before apply Whole orders discounts', wholeOrder, wholeDiscounts)\n            return wholeOrder ? this.applyWholeOrderDiscounts(wholeOrder, wholeDiscounts) : wholeOrder\n\n        } catch (error) {\n            console.log(\"🚀 ~ file: discount-manager.ts ~ line 387 ~ DiscountManager ~ applyCourtPromotions ~ error\", error);\n            return this.orderManager.initOrdersMes(orders, null, orderManagerMap)\n        }\n\n\n    }\n    public initCourtDiscounts(discounts: Discount[] = [], menu?: Menu): Discount[] {\n        let _courtDiscount = [];\n        discounts && discounts.forEach(d => {\n            let promo = new Discount();\n            promo.level = d.level;\n            promo.benefits = [];\n\n            if (d.benefits) {\n                d.benefits.forEach(b => {\n                    if (menu && b.type === 'unlock' && menu.unlocks) promo.unlocks = menu.unlocks;\n                    if (menu && b.type === 'gift' && menu.gifts) promo.gifts = menu.gifts;\n                    promo.benefits.push(Benefit.cloneBenefit(b));\n                });\n            }\n            promo.conditions = [];\n            if (d.conditions) {\n                d.conditions.forEach(c => {\n\n                    promo.conditions.push(Condition.cloneCondition(c));\n                });\n            }\n            promo.name = d.name;\n            promo.amount = d.amount;\n            promo.available = d.available;\n            promo.backendId = d.backendId;\n            promo.brandIds = d.brandIds;\n            promo.id = d.id;\n            promo.enabled = d.enabled;\n            promo.desc = d.desc;\n            promo.quantity = d.quantity;\n            promo.alone = d.alone;\n            promo.priority = d.priority;\n            promo.group = d.group;\n\n            _courtDiscount.push(promo);\n        });\n        return _courtDiscount\n    }\n    */\n}\n","\nimport { Injectable } from '@angular/core';\nimport { Item} from 'aigens-data';\n\n\n\n@Injectable({ providedIn: 'root' })\nexport class InventoryManager {\n\n    inventory: any = {};\n    version: number = 0;\n\n    constructor() {\n\n    }\n\n    isEmpty(): boolean {\n\n        return Object.keys(this.inventory).length === 0;\n    }\n\n    getInv(item: Item) {\n\n        var q = null;\n        var liveInv = this.inventory;\n\n        if (liveInv && !this.isEmpty()) {\n\n\n            q = this.getQty(liveInv, item.backendId);// liveInv[item.backendId];\n            if (q == null) q = this.getQty(liveInv, item.id); //liveInv[item.id];\n            if (q == null) q = -1;\n\n        } else {\n            q = item.inventory;\n        }\n\n\n        return q;\n    }\n\n    isHidden(item: Item){\n\n        let qty = this.getInv(item);\n        if (qty == -1000) {\n            return true;\n        }\n\n        return false;\n\n    }\n\n    getQty(inv: any, itemid: string) {\n\n        let qty = inv[itemid];\n\n        if (typeof qty === 'undefined') {\n            return null;\n        }\n\n        return qty;\n    }\n\n    isPublish(item: Item): boolean {\n\n\n        let qty = this.getInv(item);\n        if (qty == -1000) {\n            return false;\n        }\n\n        return item.published;\n\n\n\n    }\n\n\n    isSoldout(item: Item, qty: number = 1): boolean {\n\n\n        var inv = this.getInv(item);\n\n        if (inv == -1 || inv == -999) return false; //-1=unlimited , -999 = preparing\n        if (inv <= 0)  return true;\n\n        return qty > inv;\n\n\n    }\n\n    isPreparing(item: Item): boolean {\n\n        var inv = this.getInv(item);\n\n        if (inv == -999) return true;\n\n        return false;\n\n    }\n    getSoldoutCount(items: Item[], qty: number = 1): number {\n\n        let count: number = 0;\n\n        for (let item of items) {\n\n            let soldout = this.isSoldout(item, qty);\n\n            if (soldout) {\n               count++;\n            }\n        }\n\n        return count;\n\n    }\n\n\n    set(inventory: any, version: number) {\n\n        console.log(\"inventory\", inventory, version);\n\n        if (!inventory) inventory = {};\n\n        this.inventory = inventory;\n        this.version = version;\n\n    }\n\n    needUpdate(version: number): boolean {\n\n        console.log(\"inv version:\" + version + \">\" + this.version);\n        let update = version > this.version;\n\n        console.log(\"need update inv\", update);\n        return update;\n    }\n}\n","import { TimeService } from './../../pure/services/time.service';\nimport { MenuUtil } from '@aigens/core/src/app/framework/services/menu.util';\nimport { Injectable, Injector } from '@angular/core';\nimport { Ad, Category, Item, ItemGroup, Menu, OpeningHours, Period, Recommendation, Store } from 'aigens-data';\nimport * as moment from 'moment';\nimport { PlatformService } from '../../pure/services/platform.service';\nimport { InventoryManager } from './inventory-manager';\nimport { MemberContext } from 'aigens-framework';\nimport { DirectoryContext } from '@aigens/core/src/app/framework/services/directory-context.service';\n\n\n@Injectable({providedIn: 'root'})\nexport class MenuManager {\n\n    store: Store;\n    menu: Menu;\n\n    showAllCats: boolean = false; //a flag in kiosk debug settings showing all categories in any cases\n    periodOverwrite: string;\n\n    availableMap: any = {}; //items' available map\n    availablePreparingMap: any = {};\n    debugTime: any; // used for console preview link\n\n    debug: boolean = false;\n\n    legacy: boolean = false;\n    userTypes = [];\n\n    static staticMenuMapForOh: any = {};\n    static staticMenuForOh: Menu;\n    static device: 'kiosk' | 'byod' | null = null;\n\n    private inventoryManager: InventoryManager;\n    private platformService: PlatformService;\n\n    memberContext: MemberContext;\n\n    timeService: TimeService;\n\n    needRecalMenuWhenMemberChange = false;\n    debugMode;\n\n    private directoryContext: DirectoryContext;\n\n    constructor(injector: Injector) {\n\n        this.inventoryManager = injector.get(InventoryManager);\n        this.platformService = injector.get(PlatformService);\n\n        this.memberContext = injector.get(MemberContext);\n        this.timeService = injector.get(TimeService);\n        this.directoryContext = injector.get(DirectoryContext);\n    }\n\n    //returns the current time or debug time\n    getTime(store = null) {\n        if (this.debugTime) {\n            return this.debugTime;\n        }\n        let now = this.convertNowDateToStoreTimeZone(store && store.timezone, this.directoryContext?.getUnixTime()).getTime();\n        return now;\n    }\n\n    convertNowDateToStoreTimeZone(timeZone, time_num?: number): Date {\n        timeZone = timeZone ? timeZone : 'GMT+8';\n        let timeZoneValue = timeZone.split('GMT')[1];\n        let integerTimeZoneValue = parseInt(timeZoneValue) * 60;\n        let now = this.timeService.getTimeObject();\n        if (time_num) {\n            now = new Date(time_num);\n        }\n        let timeZoneOffset = now.getTimezoneOffset();\n        let newTime = now.getTime() + (timeZoneOffset + integerTimeZoneValue) * 60000;\n\n        now.setTime(newTime);\n        return now;\n    }\n\n    setDebugTime(time: number) {\n        this.debugTime = time;\n    }\n\n    //available map id format\n    getAvailableMapId(catId: string = '', itemId: string = '') {\n        return catId + '-' + itemId;\n    }\n\n    clearAvailableMap() {\n        this.availableMap = {};\n        this.availablePreparingMap = {};\n    }\n\n    /*\n    getAvailableCategories(store: Store, now: number, takeout:boolean = false): Category[] {\n\n\n\n        var menu = store.menu;\n\n        //let showAllCats = this.prefService.getBoolean(\"debug.show-all-categories\", false);\n        //let period: string = this.prefService.get(\"kiosk.period\", \"auto\");\n\n\n        let categories: Category[] = store.menu.getAvailableCategories(store, showAllCats, period, now);\n\n        let inv: boolean = this.prefService.getBoolean(\"kiosk.enable-inventory\", true);\n\n        let result: Category[] = [];\n\n        categories.forEach(cat => {\n\n            let mainIg: ItemGroup = cat.groups[0];\n\n            let mainItems: Item[] = [];\n            mainIg.items.forEach(item => {\n\n                if (this.invManager.isPublish(item) && this.isBetween(item, now)) {\n                    mainItems.push(item);\n                }\n\n            })\n\n            if(takeout){\n                mainItems = mainItems.filter(i => { return !i.dinein });\n            }\n\n            if (mainItems.length > 0) {\n\n                for (let item of mainItems) {\n\n\n                    let soldout: boolean = false;\n\n                    for (let group of item.groups) {\n\n                        let publishs: number = 0;\n\n                        group.items.forEach(item => {\n\n                            if (this.invManager.isPublish(item) && this.isBetween(item, now)) {\n                                publishs++;\n                            }\n                        });\n\n                        let min = group.min;\n                        let valid: boolean = true;\n\n                        if (group.repeat) {\n                            valid = publishs > 0;\n                        } else {\n                            valid = publishs >= min;\n                        }\n\n\n                        if (!valid) {\n\n                            soldout = true;\n                            break;\n                        }\n                    }\n\n                    if (item.groups.length == 0) {\n                        item.combo = false;\n                    }\n\n                    if (soldout && inv) {\n                        this.invManager.soldout(item);\n                    }\n\n                }\n\n                result.push(cat);\n\n            }\n\n        });\n\n        return result;\n    }\n\n*/\n\n    private log(tag, ...others) {\n        if (!this.debug) {\n            return;\n        }\n        console.log(tag, others);\n    }\n\n    /**Get available recommendation category**/\n    getAvailableRecommendation(store: Store, now: number = this.getTime(store), takeout: boolean, mode?: string) {\n\n        if (!store || !store.menu) {\n            return null;\n        }\n\n        var storeOpen = Store.isOpeningHours(store, now);\n        if (!storeOpen) {\n            return null;\n        }\n        if (!store || !store.menu) {\n            return null;\n        }\n\n        var recommendation = store.menu.recommendation;\n        if (!recommendation) {\n            return null;\n        }\n\n        if (this.isAvailableCategory(store, recommendation, takeout, false, null, mode)) {\n            return recommendation;\n        }\n\n        return null;\n\n    }\n\n    /**Get available gift categories**/\n    getAvailableGifts(store: Store, now: number = this.getTime(store), takeout: boolean, mode?: string) {\n\n        if (!store || !store.menu) {\n            return null;\n        }\n\n        var storeOpen = Store.isOpeningHours(store, now);\n        if (!storeOpen) {\n            return null;\n        }\n        if (!store || !store.menu) {\n            return null;\n        }\n\n        var gifts = store.menu.gifts;\n        if (!gifts) {\n            return null;\n        }\n\n        let result: Category[] = [];\n        gifts.forEach((u) => {\n\n            if (this.isAvailableCategory(store, u, takeout, false, null, mode)) {\n                result.push(u);\n            }\n\n        });\n\n        return result;\n    }\n\n    /**Get available unlock categories**/\n    getAvailableUnlocks(store: Store, now: number = this.getTime(store), takeout: boolean, mode?: string) {\n\n        if (!store || !store.menu) {\n            return null;\n        }\n\n        var storeOpen = Store.isOpeningHours(store, now);\n        if (!storeOpen) {\n            return null;\n        }\n        if (!store || !store.menu) {\n            return null;\n        }\n\n        var unlocks = store.menu.unlocks;\n        if (!unlocks) {\n            return null;\n        }\n\n        let result: Category[] = [];\n        unlocks.forEach((u) => {\n\n            if (this.isAvailableCategory(store, u, takeout, false, null, mode)) {\n                result.push(u);\n            }\n\n        });\n\n        return result;\n    }\n\n    /**Get category's available main items(in main group)**/\n    getAvailableMainItems(store: Store, category: any, takeout: boolean, time?: number, mode?: string): Item[] {\n\n        var mainIg = category.groups[0];\n        if (!mainIg) {\n            return [];\n        }\n        return this.getAvailableItems(store, category, mainIg, takeout, time, mode);\n\n    }\n\n    /**\n     * Get availble main items(parent items) in the very group\n     * Get parent items available variations\n     *  **/\n    getAvailableItems(store: Store, category: any, ig: ItemGroup, takeout: boolean, time?: number, mode?: string): Item[] {\n\n        var now = time || this.getTime(store);\n\n        let items: Item[] = ig.parentItems;\n\n        if (!items) {\n            return [];\n        }\n\n        let result: Item[] = [];\n\n        var channel = this.platformService.getChannel();\n        var container = this.platformService.getContainer();\n\n        for (let item of items) {\n\n            if (!this.isAvailableItem(store, category, ig, item, takeout, now, mode) && this.isAvailableChannel(item, channel, container)) {\n                if (item.variations && item.variations.length > 0) {\n                    item.variations.forEach(v => {\n                        if (this.isAvailableItem(store, category, ig, v, takeout, now, mode)) {\n                            result.push(v);\n                        }\n                    });\n                }\n                continue;\n            }\n\n            if (item.variations && item.variations.length > 0) {\n                let variation = [];\n                item.variations.forEach(v => {\n                    if (this.isAvailableItem(store, category, ig, v, takeout, now, mode)) {\n                        variation.push(v);\n                    }\n                });\n                item.variations = variation;\n            }\n\n            result.push(item);\n\n        }\n\n        if (result.length != items.length) {\n            ig.parentItems = result;\n            this.log('filtered main items', category.name, items.length + '->' + result.length);\n        }\n\n        return result;\n    }\n\n    /**\n     * Check if item is available, according to rules:\n     * 1. dinein-takeout mode\n     * 2. inventory\n     * 3. available time slots or periods\n     * 4. published or not\n     * 5. todo: has available required modifiers\n     * 6. member tier only\n     * **/\n    isAvailableItem(store: Store, category: Category, ig: ItemGroup, item: Item, takeout: boolean, now: number, mode?: string) {\n        if (!this.isAvailableByUserGroup(item)) {\n            return false;\n        }\n\n\n        if (!MenuManager.staticMenuMapForOh[store?.id]) {\n            MenuManager.staticMenuMapForOh[store?.id] = store?.menu;\n        }\n\n        if (this.showAllCats) {\n            return true;\n        }\n\n        if (item.suspended) {\n            return false;\n        }\n\n        if(!this.isItemMemberTierAvailable(item, category)){\n            return false;\n        }\n\n\n        if (item.ohId) {\n            var brandOh = null;\n            if (store.brand) {\n                brandOh = store.brand.openings;\n            }\n            if (store.menu && store.menu.itemOpenings) {\n                var ohMap = store.menu.itemOpenings;\n                if (ohMap[item.ohId]) {\n                    var itemOhMap = ohMap[item.ohId];\n\n                    //console.log(\"MenuManager.staticMenuForOh.itemOpenings[item.ohId][ohResult]\", MenuManager.staticMenuForOh.itemOpenings[item.ohId][\"ohResult\"]);\n                    let itemOpenings = (MenuManager.staticMenuMapForOh[store.id] && MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId]) || {};\n                    if (!itemOpenings['ohResult']) {\n                        console.log('call check isTimeOpen', item);\n                        if (!OpeningHours.isTimeOpen(brandOh, itemOhMap, now)) {\n                            this.log('item openings not available', category.name);\n                            itemOpenings['ohResult'] = 1;\n                            MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId] = itemOpenings; // 1 for false\n                            return false;\n                        }\n\n                        itemOpenings['ohResult'] = 2;\n                        MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId] = itemOpenings; // 2 for true\n                    } else if (MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId] && MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId]['ohResult'] == 2) {\n                        // is ok\n                    } else {\n                        return false;\n                    }\n\n                }\n\n            }\n\n        } else {\n            //if category time not valid, don't show it\n            if (!this.isAvailabeByStartEnd(item, now)) {\n                this.log('item time not available', item.name);\n                return false;\n            }\n\n            // if (!this.isAvailabeByPeriods(store, category.periods, now)) {\n            //     this.log(\"cat period not available2\", category.name);\n            //     return false;\n            // }\n        }\n\n\n        //TODO: add item to availableMap??\n\n        //check dinein/takeout mode, *ignore delivery mode in kiosk\n        if (!this.isAvailablebyModes(item, takeout, mode)) {\n            this.log('item mode filter', item.name, item.modes);\n            return false;\n        }\n\n        //skip dinein only items DEPRECATED\n        /*if (takeout && item.dinein){\n            this.log(\"dine in filter\", item.name);\n            return false;\n        }*/\n\n        //skip items with inventory -1000\n        if (this.inventoryManager.isHidden(item)) {\n            this.log('inv hidden', item.name);\n            return false;\n        }\n        //check if item have start end time\n        if (!this.isAvailabeByStartEnd(item, now)) {\n            this.log('start end filter', item.name);\n            return false;\n        }\n        if (!this.isAvailabeByPeriods(store, item.periods, now)) {\n            this.log('periods filter', item.name);\n            return false;\n        }\n        if (!this.isItemPublished(category, ig, item)) {\n            this.log('cat pub filter', item.name);\n            return false;\n        }\n        if (!this.isAvailableByMenuPeriodMode(store, item.periods, now, mode)) {\n            this.log('menu period mode filter', item.name);\n            return false;\n        }\n\n        return true;\n    }\n\n\n    /**\n     * Check if item is available, according to rules:\n     * 1. dinein-takeout mode\n     * 2. inventory\n     * 3. available time slots or periods\n     * 4. remove the check published or not logic ===>> different ig has different ig.cmap, so the function isItemPublished is volatile with same item and different cat\n     * 5. todo: has available required modifiers\n     * 6. member tier only\n     * **/\n    isAvailableItemWithoutCheckItemPublish(store: Store, category: Category, ig: ItemGroup, item: Item, takeout: boolean, now: number, mode?: string) {\n        if (!this.isAvailableByUserGroup(item)) {\n            return false;\n        }\n\n\n        if (!MenuManager.staticMenuMapForOh[store?.id]) {\n            MenuManager.staticMenuMapForOh[store?.id] = store?.menu;\n        }\n\n        if (this.showAllCats) {\n            return true;\n        }\n\n        if (item.suspended) {\n            return false;\n        }\n\n        if(!this.isItemMemberTierAvailable(item, category)){\n            return false;\n        }\n\n\n        if (item.ohId) {\n            var brandOh = null;\n            if (store.brand) {\n                brandOh = store.brand.openings;\n            }\n            if (store.menu && store.menu.itemOpenings) {\n                var ohMap = store.menu.itemOpenings;\n                if (ohMap[item.ohId]) {\n                    var itemOhMap = ohMap[item.ohId];\n\n                    //console.log(\"MenuManager.staticMenuForOh.itemOpenings[item.ohId][ohResult]\", MenuManager.staticMenuForOh.itemOpenings[item.ohId][\"ohResult\"]);\n                    let itemOpenings = (MenuManager.staticMenuMapForOh[store.id] && MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId]) || {};\n                    if (!itemOpenings['ohResult']) {\n                        console.log('call check isTimeOpen', item);\n                        if (!OpeningHours.isTimeOpen(brandOh, itemOhMap, now)) {\n                            this.log('item openings not available', category.name);\n                            itemOpenings['ohResult'] = 1;\n                            MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId] = itemOpenings; // 1 for false\n                            return false;\n                        }\n\n                        itemOpenings['ohResult'] = 2;\n                        MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId] = itemOpenings; // 2 for true\n                    } else if (MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId] && MenuManager.staticMenuMapForOh[store.id].itemOpenings[item.ohId]['ohResult'] == 2) {\n                        // is ok\n                    } else {\n                        return false;\n                    }\n\n                }\n\n            }\n\n        } else {\n            //if category time not valid, don't show it\n            if (!this.isAvailabeByStartEnd(item, now)) {\n                this.log('item time not available', item.name);\n                return false;\n            }\n\n            // if (!this.isAvailabeByPeriods(store, category.periods, now)) {\n            //     this.log(\"cat period not available2\", category.name);\n            //     return false;\n            // }\n        }\n\n\n        //TODO: add item to availableMap??\n\n        //check dinein/takeout mode, *ignore delivery mode in kiosk\n        if (!this.isAvailablebyModes(item, takeout, mode)) {\n            this.log('item mode filter', item.name, item.modes);\n            return false;\n        }\n\n        //skip dinein only items DEPRECATED\n        /*if (takeout && item.dinein){\n            this.log(\"dine in filter\", item.name);\n            return false;\n        }*/\n\n        //skip items with inventory -1000\n        if (this.inventoryManager.isHidden(item)) {\n            this.log('inv hidden', item.name);\n            return false;\n        }\n        //check if item have start end time\n        if (!this.isAvailabeByStartEnd(item, now)) {\n            this.log('start end filter', item.name);\n            return false;\n        }\n        if (!this.isAvailabeByPeriods(store, item.periods, now)) {\n            this.log('periods filter', item.name);\n            return false;\n        }\n\n        if (!this.isAvailableByMenuPeriodMode(store, item.periods, now, mode)) {\n            this.log('menu period mode filter', item.name);\n            return false;\n        }\n\n        return true;\n    }\n\n    isAvailabeByStartEnd(item: any, now: number): boolean {\n\n        if (!item.start && !item.end) {\n            return true;\n        }\n\n        var greaterThanStart = true;\n        var lessThanEnd = true;\n\n        if (item.start) {\n            greaterThanStart = now >= item.start;\n        }\n\n        if (item.end) {\n            lessThanEnd = now <= item.end;\n        }\n\n        return greaterThanStart && lessThanEnd;\n\n    }\n\n    /**\n     * Check if it is an available item group/ modifier group\n     * @param modifier: if it is a modifier group\n     **/\n    isAvailableGroup(store: Store, cat: Category, group: ItemGroup, takeout: boolean, now: number, modifier: boolean, mode?: string) {\n\n\n        if (modifier && group.min == 0) {\n            return true;\n        }\n\n        let publishs: number = 0;\n        let valid: boolean = true;\n\n        if (group.items && group.items.length > 0) {\n            for (let item of group.items) {\n                valid = true;\n                if (item.mgroups) {\n\n                    for (let mgroup of item.mgroups) {\n\n                        if (!this.isAvailableGroup(store, cat, mgroup, takeout, now, true, mode)) {\n                            valid = false;\n                            this.log('isn\\'t available modifier group', cat.name, mgroup.name);\n                            break;\n                        }\n                    }\n                    if (!valid) {\n                        continue;\n                    }\n                }\n\n                //if(!valid) break;\n\n                if (!this.inventoryManager.isSoldout(item) && this.isAvailableItem(store, cat, group, item, takeout, now, mode)) {\n                    publishs++;\n                }\n\n            }\n            ;\n        }\n        //if(!valid) return false;\n\n        let min = group.min;\n\n        if (group.repeat) {\n            //valid = publishs > 0;\n            if (min == 0) {\n                valid = true;\n            } else {\n                valid = publishs > 0;\n            }\n        }else {\n\n            valid = publishs >= min;\n\n        }\n\n        return valid;\n\n    }\n\n    /**\n     * Check if it is an available item group/ modifier group\n     * @param modifier: if it is a modifier group\n     **/\n    isAvailableGroupCheckPrep(store: Store, cat: Category, group: ItemGroup, takeout: boolean, now: number, modifier: boolean, mode?: string) {\n\n\n        if (modifier && group.min == 0) {\n            return true;\n        }\n\n        let publishs: number = 0;\n        let valid: boolean = true;\n\n        if (group.items && group.items.length > 0) {\n            for (let item of group.items) {\n                valid = true;\n                if (item.mgroups) {\n\n                    for (let mgroup of item.mgroups) {\n\n                        if (!this.isAvailableGroupCheckPrep(store, cat, mgroup, takeout, now, true, mode)) {\n                            valid = false;\n                            this.log('isn\\'t available modifier group', cat.name, mgroup.name);\n                            break;\n                        }\n                    }\n                    if (!valid) {\n                        continue;\n                    }\n                }\n\n                if (!this.inventoryManager.isPreparing(item) && !this.inventoryManager.isSoldout(item) && this.isAvailableItem(store, cat, group, item, takeout, now, mode)) {\n                    publishs++;\n                }\n            }\n            ;\n        }\n\n\n        let min = group.min;\n\n        if (group.repeat) {\n            if (min == 0) {\n                valid = true;\n            } else {\n                valid = publishs > 0;\n            }\n        } else {\n            valid = publishs >= min;\n        }\n\n        return valid;\n\n    }\n\n    /**\n     * Check if it is an available combo, by checking:\n     * TODO: if main item is available;\n     * and if subgroups are all available.\n     * store availability status in availableMap\n     * **/\n    isAvailableCombo(store: Store, cat: Category, mainItem: Item, takeout: boolean, now: number, mode?: string): boolean {\n\n\n        let mapId = this.getAvailableMapId(cat.id, mainItem.id);\n        if (typeof this.availableMap[mapId] != 'undefined') {\n            return this.availableMap[mapId];\n        }\n\n        // combo 分两种\n        // 1.是從category 的item group 派sub-item group 下去的combo\n        // 2.是main item level attach 落去的combo\n        // 第二种不需要check cat.groups, 只check mainItem.groups\n        let isMainItemAttachCombo = false;\n        let mainGroups = mainItem.groups || [];\n        for (let i = 0; i < mainGroups.length; i++) {\n            if (mainGroups[i] && !mainGroups[i].modifier) {\n                isMainItemAttachCombo = true;\n                break;\n            }\n        }\n        let catgroups = cat.groups;\n        if (isMainItemAttachCombo || !catgroups) catgroups = [];\n        let mainItemGroups = mainItem.groups;\n        if (!mainItemGroups) mainItemGroups = [];\n        let groups = [...catgroups, ...mainItemGroups];\n\n\n        let isAvailable: boolean = true;\n\n        for (let group of groups) {\n            if (!this.isAvailableGroup(store, cat, group, takeout, now, false, mode)) {\n                isAvailable = false;\n                console.log(\"isn't available group\", cat.name, group.name)\n                break;\n            }\n        }\n\n        this.availableMap[mapId] = isAvailable ;\n\n        return isAvailable;\n    }\n\n    isAvailableComboCheckPrep(store: Store, cat: Category, mainItem: Item, takeout: boolean, now: number, mode?: string): boolean {\n\n        const mapId = this.getAvailableMapId(cat.id, mainItem.id);\n        if (mapId in this.availablePreparingMap) {\n            return this.availablePreparingMap[mapId];\n        }\n        let isMainItemAttachCombo = false;\n        let mainGroups = mainItem.groups || [];\n        for (let i = 0; i < mainGroups.length; i++) {\n            if (mainGroups[i] && !mainGroups[i].modifier) {\n                isMainItemAttachCombo = true;\n                break;\n            }\n        }\n        let catgroups = cat.groups;\n        if (isMainItemAttachCombo || !catgroups) catgroups = [];\n        let mainItemGroups = mainItem.groups;\n        if (!mainItemGroups) mainItemGroups = [];\n        let groups = [...catgroups, ...mainItemGroups];\n\n\n        let isAvailable: boolean = true;\n\n        for (let group of groups) {\n            if (!this.isAvailableGroupCheckPrep(store, cat, group, takeout, now, false, mode)) {\n                isAvailable = false;\n                console.log(\"isn't available group\", cat.name, group.name)\n                break;\n            }\n        }\n\n        this.availablePreparingMap[mapId] = isAvailable;\n\n        return isAvailable;\n    }\n\n\n    /**\n     * Check if it is an available category, determinded by rules:\n     * 1. category is suspended / published or not\n     * 2. if category's mode is the same as order dinein/takeout mode\n     * 3. category's available time slots or period\n     * 4. if category has main items\n     * 5. if category has member tiers\n     * **/\n    isAvailableCategory(store: Store, category: Category, takeout: boolean, checkPublish: boolean, now?: number, mode?: string): boolean {\n        if (!this.isAvailableByUserGroup(category)) {\n            return false;\n        }\n        if (!this.isItemMemberTierAvailable(undefined, category)) {\n            return false;\n        }\n\n        if (this.showAllCats) {\n            return true;\n        }\n\n        //if not published, don't show it\n        if (category.suspended) {\n            return false;\n        }\n\n        if (checkPublish && !category.published) {\n            return false;\n        }\n\n        if (!now) {\n            now = this.getTime(store);\n        }\n        console.log(\"测试\",!this.isAvailablebyModes(category, takeout, mode))\n        if (!this.isAvailablebyModes(category, takeout, mode)) {\n            this.log('cat mode not available', category.modes);\n            return false;\n        }\n\n        if (category.openings) {\n            var brandOh = null;\n            if (store.brand) {\n                brandOh = store.brand.openings;\n            }\n            if (!OpeningHours.isTimeOpen(brandOh, category.openings, now)) {\n                this.log('cat openings not available', category.name);\n                return false;\n            }\n\n        } else {\n            //if category time not valid, don't show it\n            if (!this.isAvailabeByStartEnd(category, now)) {\n                this.log('cat time not available', category.name);\n                return false;\n            }\n\n            if (!this.isAvailabeByPeriods(store, category.periods, now)) {\n                this.log('cat period not available2', category.name);\n                return false;\n            }\n\n            if (!this.isAvailableByMenuPeriodMode(store, category.periods, now, mode)) {\n                this.log('cat menu period mode not available', category.name);\n                return false;\n            }\n        }\n\n        // let mainItems = this.getAvailableMainItems(store, category, takeout, now, mode);\n        // if (mainItems.length == 0) {\n        //     return false;\n        // }\n\n        this.processAvailableItemsInItemGroup(category.groups, store, category, takeout, now, mode);\n        // check if category main group has items or not. If no items, then the category should not be available\n        if (!category.groups[0] || category.groups[0].parentItems.length === 0) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Get all available categories in the store\n     * **/\n    getAvailableCategories(store: Store, now: number = this.getTime(store), takeout: boolean, mode?: string): Category[] {\n\n        var result = [];\n\n        if (!store || !store.menu) {\n            return result;\n        }\n\n        var storeOpen = Store.isOpeningHours(store, now);\n        if (!storeOpen) {\n            return result;\n        }\n\n        var cats = store.menu.categories;\n        if (!cats || cats.length == 0) {\n            return result;\n        }\n\n        var channel = this.platformService.getChannel();\n        var container = this.platformService.getContainer();\n\n        for (let c of cats) {\n\n            if (this.isAvailableCategory(store, c, takeout, true, now, mode) && this.isAvailableChannel(c, channel, container)) {\n                result.push(c);\n            }\n\n\n        }\n\n\n        if (result.length != cats.length) {\n            this.log('filtered cat', cats.length + '->' + result.length);\n        }\n\n        return result;\n\n\n    }\n\n    isAvailableChannel(content, channel:string, container:string): boolean{\n\n\n        var containers = content.containers;\n        if(containers && containers.length > 0){\n            //there's container restriction\n\n            return containers.indexOf(container) != -1;\n\n        }\n\n        var channels = content.channels;\n        if(channels && channels.length > 0){\n            //there's container restriction\n\n            return channels.indexOf(channel) != -1;\n\n        }\n\n\n        return true;\n    }\n\n    processAvailableItemsInItemGroup(groups: ItemGroup[], store, c, takeout, now, mode): void {\n        groups.forEach(g => {\n            g.parentItems = g.parentItems.filter(it => { // todo: it is danger to change the origin data directly\n                if (!this.isAvailableByUserGroup(g)) {\n                    return false;\n                }\n\n                // process variation items availability\n                if (it.variations && it.variations.length > 0) {\n                    const variation = [];\n                    it.variations.forEach(v => {\n                        if (this.isAvailableItemWithoutCheckItemPublish(store, c, g, v, takeout, now, mode)) {\n                            variation.push(v);\n                        }\n                    });\n                    it.variations = variation;\n                }\n\n                return this.isAvailableItemWithoutCheckItemPublish(store, c, g, it, takeout, now, mode);\n            });\n            g.parentItems.forEach(it => {\n                this.processAvailableItemsInItemGroup(it.groups, store, c, takeout, now, mode);\n            });\n        });\n    }\n\n    public isAvailabeByPeriods(store: Store, periods: string[], now: number): boolean {\n\n        let brand = store?.brand;\n\n        if (!periods || periods.length == 0) {\n            return true;\n        }\n\n        let available: boolean = false;\n\n        if (this.periodOverwrite && this.periodOverwrite != 'auto') {\n\n            if (periods.indexOf(this.periodOverwrite) != -1) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n\n        //check if cat period is ok\n        for (let p of periods) {\n\n            //special case handling where cat period is a V3 cron expression\n            if (p.length > 10) {\n                //result.push(c);\n            } else {\n\n                if (store?.periods) {\n\n                    let period = store.periods.find(x => x.code == p);\n\n                    if (period) {\n                        if (this.isPeriodAvailable(brand ? brand.openings : null, period, now)) {\n                            available = true;\n                            break;\n\n                        }\n                    }\n                }\n            }\n\n\n        }\n\n\n        return available;\n    }\n\n    /**\n     * Compare order mode, item period and menu period mode\n     *\n     * @param store\n     * @param periods\n     * @param now\n     * @param orderMode\n     */\n    public isAvailableByMenuPeriodMode(store: Store, periods: string[], now: number, orderMode: string): boolean {\n        if (!periods || periods.length == 0) {\n            return true;\n        }\n\n        let available = false;\n\n        let relatedMenuPeriodModes: string[] = [];\n\n        const timeRelatedMenuPeriods = MenuUtil.getRelatedMenuPeriod(now, store);\n\n        for (let p of periods) {\n\n            if (store?.menu?.periods) {\n                const period = store.menu.periods.find(x => x.code == p);\n                const timeMatchMenuPeriod = timeRelatedMenuPeriods.find(f => f.code == p);\n\n                // console.log('p*** ', period, timeMatchMenuPeriod);\n\n                if (period && period.modes && timeMatchMenuPeriod) {\n                    relatedMenuPeriodModes = relatedMenuPeriodModes.concat(period.modes);\n                }\n            }\n        }\n\n        if (relatedMenuPeriodModes.length == 0) {\n            available = true;\n        } else {\n            available = relatedMenuPeriodModes.includes(this.debugMode || orderMode);\n        }\n\n        // console.log('**** ', relatedMenuPeriodModes, periods, orderMode, available);\n\n\n        return available;\n    }\n\n    /**\n     * filter by modes\n     * if modes has only one channel (kiosk/byod), then it is only available in that channel.\n     * then tell by dinein/takeaway\n     * @param item\n     * @param takeout\n     * @private\n     */\n\n    private isAvailablebyModes(item: any, takeout: boolean, mode?: string): boolean {\n\n        let modes: string[] = item.modes;\n        if (!modes || modes.length == 0) {\n            return true;\n        }\n\n\n        //check kiosk/mobile first\n        var device = MenuManager.device;\n\n        if (device) {\n            if (device == 'kiosk') {\n                if (modes.indexOf('kiosk') == -1 && modes.indexOf('byod') >= 0) {\n                    return false;\n                }\n\n            } else if (device == 'byod') {\n                if (modes.indexOf('byod') == -1 && modes.indexOf('kiosk') >= 0) {\n                    return false;\n                }\n            }\n        }\n        if (mode) {\n            // takeout boolean 指示不了三种mode dinein delivery takeaway\n            if (mode === 'byod') {\n                // byod: old flow if(mode === 'byod'), so takeout = false;结论: byod mode 会show dinein 餐单\n                return modes.indexOf('dinein') >= 0 || modes.indexOf(mode) >= 0;\n            } else if (mode == 'preorder' || mode == 'view') {\n                return modes.indexOf(this.debugMode || 'byod') >= 0;\n            }\n            return modes.indexOf(mode) >= 0;\n        }\n        return modes.indexOf(takeout ? 'takeaway' : 'dinein') >= 0;\n\n    }\n\n    /*\n    getCategories(store: Store, ignorePeriod: boolean = false, currentPeriod: string = \"auto\", now: number = this.getTime()): Category[] {\n\n        var result = [];\n\n        if (ignorePeriod) return this.filterEmptyGroup(this.categories);\n\n        var storePeriods = this.periods;\n        if (!storePeriods || storePeriods.length == 0) return this.filterEmptyGroup(this.categories);\n\n        var periodsMap = {};\n        for (let p of this.periods) {\n            periodsMap[p.code] = p;\n        }\n\n        //caught old style categories' period format\n       var periodCodes = [\"B\",\"L\",\"T\",\"D\",\"M\"];\n       if(this.categories.length > 0 && this.categories[0].periods){\n           if(periodCodes.indexOf(this.categories[0].periods[0]) == -1) return this.filterEmptyGroup(this.categories);\n\n       }\n\n\n        var today = new Date(now);\n        today.setHours(0, 0, 0, 0);\n        //this.log(today);\n        let todayTime = today.getTime();\n        let brand = store.brand;\n\n        for (let c of this.categories) {\n\n            if (!this.isBetween(c, now)) continue;\n            if (!c.published) continue;\n\n            var periods = c.periods;\n            if (periods == null) {\n\n                if (Store.isOpeningHours(store, now)) {\n                    result.push(c);\n                }\n            } else {\n\n                for (let p of periods) {\n\n                    if (currentPeriod == \"auto\") {\n\n                        var period = periodsMap[p];\n                        if (period) {\n                            if (this.isAvailable(brand.openings, period, todayTime, now)) {\n                                result.push(c);\n                                break;\n                            }\n                        }\n                    } else {\n\n                        if (periods.indexOf(currentPeriod) > -1) {\n                            result.push(c);\n                            break;\n                        }\n                    }\n\n\n                }\n\n            }\n\n        }\n\n\n        return this.filterEmptyGroup(result);\n    }  */\n\n    /*\n    setupVariations(i: Item): Item {\n\n        let result: Item = i;\n\n        if (i.parentId) {\n\n\n            let p = this.variations[i.parentId];\n            let exist: boolean = typeof p !== 'undefined';\n\n            if (exist) {\n\n                p.items.push(i);\n            }\n            else {\n                let items: Array<Item> = [];\n\n                items.push(i);\n\n                p = {\n\n                    items: items\n                };\n\n                this.variations[i.parentId] = p;\n            }\n\n            if(i.parentId != i.id)\n                result = null;\n        }\n\n\n\n        return result;\n    }*/\n\n    checkPrestopFromStart(useTime, period): boolean {\n        let useTimeDate = moment(useTime)?.toDate();\n        let {prestopFromStart, startTime} = period?.openings?.weekdays && period.openings.weekdays[useTimeDate.getDay()] || {};\n        if (!startTime || !prestopFromStart) {\n            return true;\n        }\n\n        let now = new Date();\n        let periodStartTime = useTimeDate.setHours(Number(startTime.split(':')[0]), Number(startTime.split(':')[1]), 0, 0);\n        if (periodStartTime <= now.getTime()) {// 当日处于当前或超过period period， 不用check perstop\n            return true;\n        } else {\n            return (periodStartTime - (prestopFromStart || 0) * 60000) > now.getTime(); // true is available\n        }\n    }\n\n    private isPeriodAvailable(brandOh: OpeningHours, period: Period, now: number) {\n\n        //this.log(\"is avail?\", period, now);\n\n        if (period.openings) {\n\n            this.log('isAvailable : check by opening rules');\n\n            if (!this.checkPrestopFromStart(now, period)) {\n                console.log('the period not available');\n                return false;\n            }\n            let open = OpeningHours.isTimeOpen(brandOh, period.openings, now);\n\n            return open;\n\n        } else {\n\n            //if (!period.start || !period.end) return false;\n\n            return Period.isTimeOpen(period, now);\n        }\n\n\n    }\n\n    isItemPublished(cat: Category, ig: ItemGroup, item: Item) {\n\n        var cmap = ig.cmap;\n\n\n        if (cmap && Object.keys(cmap).length > 0) {\n\n            var catPub = cmap[cat.id];\n\n            if (!catPub) {\n                //need to check for indexed map by adding .index\n                var index = cat.groupIds.indexOf(ig.id);\n\n                if (index >= 0) {\n                    catPub = cmap[cat.id + '.' + index];\n                }\n            }\n\n            if (catPub) {\n\n                var published = catPub[item.id];\n\n                if (published != null) {\n                    if (published == false) {\n                        return false;\n                    } else {\n                        return true;\n                    }\n                } else {\n                    return item.published;\n                }\n\n\n            } else {\n\n\n                //if menu is legacy, by default doesn't show\n                if (this.legacy) {\n                    return false;\n                } else {\n                    //return true;\n                    return item.published;\n                }\n            }\n\n        }\n\n        return item.published;\n    }\n\n    //patch slimmed item\n    patchItem(imap, item) {\n\n        if (!item['@id']) {\n            //already patched\n            return;\n        }\n\n        var baseId = item['@id'];\n        if (!baseId) {\n            return;\n        }\n\n\n        var base = imap[baseId];\n        if (!base) {\n            console.log('CRITICAL ERROR NO BASE ITEM');\n            return;\n        }\n\n        //make a new item\n        var merged = Object.assign({}, base);\n\n        //marge overwrites to base\n        if (item !== null && item !== undefined) {\n            for (const nextKey in item) {\n                // Avoid bugs when hasOwnProperty is shadowed\n                if (Object.prototype.hasOwnProperty.call(item, nextKey) && item[nextKey] && (!Array.isArray(item[nextKey]) || item[nextKey]?.length != 0)) {\n                    merged[nextKey] = item[nextKey];\n                }\n            }\n        }\n        // merged = Object.assign(merged, item);\n\n        //merge it back to item itself\n        Object.assign(item, merged);\n\n\n    }\n\n    /**\n     * Handle special cases in menu:\n     * 1. specially handle variations\n     * 2. separate recommendation/gifts/unlock categories\n     * 3. find out promotion group and push into mainitems\n     * 4. find out modifiers\n     * 5!!!. build up groups' map, categories' map and items' map (menu.gmap, menu.cmap, menu.imap )\n     * **/\n    processMenu(menu: Menu, device: any = null): Menu {\n\n        this.legacy = menu.legacy;\n        //set device source\n        if (device) {\n            MenuManager.device = device;\n        }\n\n        var gmap = {};\n        var imap = {};\n        var cmap = {};\n        var rimap = {};\n\n        //slim menu, setup imap first\n        if (menu.items) {\n            for (let item of menu.items) {\n                imap[item.id] = item;\n            }\n        }\n\n        var groups = menu.groups;\n        if (groups && groups.length > 0) {\n\n            for (let ig of groups) {\n                gmap[ig.id] = ig;\n\n                if (!menu.items) {\n                    for (let i of ig.items) {\n                        imap[i.id] = i;\n                    }\n                    ;\n                }\n\n                this.processVariations(ig, imap);\n            }\n\n\n            var cats = menu.categories.slice();\n\n            if (menu.recommendation) {\n                cats.push(menu.recommendation);\n            }\n\n            if (menu.unlocks) {\n                cats = cats.concat(menu.unlocks);\n            }\n\n            if (menu.gifts) {\n                cats = cats.concat(menu.gifts);\n            }\n\n            if (menu.pass) {\n                cats.push(menu.pass);\n            }\n\n            for (let cat of cats) {\n\n                cmap[cat.id] = cat;\n\n                var igs = [];\n                var i = 0;\n\n\n                for (let igId of cat.groupIds) {\n                    var ig = gmap[igId];\n                    if (ig) {\n\n                        igs.push(ig);\n\n                        if (i == 0) {\n\n                            var igPos = 0;\n\n                            for (let item of ig.items) {\n\n                                this.patchItem(imap, item);\n\n                                var subids = item.groupIds;\n                                if (subids && subids.length > 0) {\n                                    var subs = [];\n                                    for (let sgId of subids) {\n                                        var sg = gmap[sgId];\n                                        if (sg) {\n                                            subs.push(sg);\n                                        }\n                                    }\n                                    item.groups = subs;\n\n                                    for (let sig of subs) {\n                                        //this.log(\"checkingIgA\", sig);\n                                        this.checkIg(sig, gmap, imap);\n                                    }\n                                }\n\n\n                                var pgroupId = item.pgroupId;\n                                if (pgroupId) {\n                                    var pg = gmap[pgroupId];\n                                    if (pg) {\n                                        item.pgroup = pg;\n                                        //this.log(\"checkingIgB\", pg);\n                                        this.checkIg(pg, gmap, imap);\n                                    } else {\n                                        this.log('invalid pg', item);\n                                    }\n                                }\n\n                                item.igPos = igPos;\n\n                                igPos++;\n\n                                //console.log(\"IG POS\", item.name, igPos);\n\n                            }\n\n\n                        }\n\n                        //this.log(\"checkingIgC\", ig);\n                        this.checkIg(ig, gmap, imap);\n\n                        for (let item of ig.items) {\n                            //ig.items updated, now update it back to imap?\n                            imap[item.id] = item;\n\n                            //reverse imap, add if not a combo\n                            // if(MenuManager.isSingle(cat, ig, item)){\n                            //     this.addReverse(rimap, cat, ig, item);\n                            // }\n                            this.addReverse(rimap, cat, ig, item);\n\n                        }\n\n                        i++;\n\n\n                    }\n                    //this.log(\"checking ig\", ig.name);\n\n                    //for main item group, check if main items have any groups\n\n                }\n\n                //this.log(cat.name, cat.groupIds, igs.length);\n\n                cat.groups = igs;\n\n            }\n\n\n        }\n\n        menu['gmap'] = gmap;\n        menu['cmap'] = cmap;\n        menu['imap'] = imap;\n        menu['rimap'] = rimap;\n\n        return menu;\n    }\n\n    private static isSingle(cat: Category, ig: ItemGroup, item: Item){\n\n        var igMode = cat.igMode;\n\n        if('single' == igMode){\n            return true;\n        }else if('combo' == igMode){\n            return false;\n        }\n\n        if(item.groupIds && item.groupIds.length > 0) return false;\n\n        return true;\n    }\n\n    private addReverse(rimap, cat: Category, ig: ItemGroup, item: Item){\n\n        //we are adding 1 or 2 entries to reverse map, with item.id and item.backendID\n        var itemId2 = item.backendId;\n        var itemId1 = item.id;\n\n        var entry = rimap[itemId1];\n\n        if(!entry){\n            entry = {\n                c: cat,\n                ig: ig,\n                i: item\n            };\n            rimap[itemId1] = entry;\n        }\n\n\n        var entry2 = rimap[itemId2];\n\n        if(itemId2 && !entry2){\n            rimap[itemId2] = entry;\n        }\n\n    }\n\n    /**\n     * separate varations from menu's item list,\n     * and push them into their parents' parent.variations\n     * **/\n    private processVariations(ig: ItemGroup, imap: any) {\n\n        var items = ig.items;\n\n        if (!items) {\n            return;\n        }\n\n        var map = {};\n        for (let item of items) {\n            this.patchItem(imap, item);\n            map[item.id] = item;\n            map[item.id].variations = [];\n        }\n\n        var top = [];\n\n        //keep track of which level is each item assigned to, to break recursive parents and all items are presented someway\n        var L1 = {};\n        var L2 = {};\n\n        for (let item of items) {\n            if (item.parentId && item.parentId != item.id) {\n\n                var parent = map[item.parentId];\n\n                //if parent exists and parent is not in level 2\n                if (parent && !L2[parent.id]) {\n                    if (!parent.variations) {\n                        parent.variations = [];\n                    }\n                    parent.variations.push(item);\n                    L2[item.id] = item;\n                } else {\n                    top.push(item);\n                    L1[item.id] = item;\n                }\n\n\n            } else {\n                top.push(item);\n                L1[item.id] = item;\n            }\n        }\n\n\n        /*\n        for (let item of items) {\n            if (item.parentId && item.parentId != item.id) {\n                var parent = map[item.parentId];\n                if (parent) {\n                    if (!parent.variations) {\n                        parent.variations = [];\n                    }\n                    parent.variations.push(item);\n                } else {\n                    result.push(item);\n                }\n            } else {\n                result.push(item);\n            }\n        }\n        */\n        if (top.length != items.length) {\n\n            this.log('processed variations', ig.name, items.length + '->' + top.length);\n            this.log('L1', L1);\n            this.log('L2', L2);\n            this.log('parentItems', top);\n        }\n\n        ig.parentItems = top;\n\n    }\n\n    /**find out itemgroup's items' modifier groups**/\n    private checkIg(ig: ItemGroup, gmap: any, imap: any) {\n\n        if (!ig.items) {\n            return;\n        }\n\n        for (let item of ig.items) {\n\n            this.patchItem(imap, item);\n\n            this.checkMods(item, gmap, imap);\n        }\n    }\n\n    /**Check and push modifier groups**/\n    private checkMods(item: Item, gmap: any, imap: any) {\n        var mgIds = item.mgroupIds;\n        if (mgIds && mgIds.length > 0) {\n            var mgs = [];\n            for (let mgId of mgIds) {\n                var mg = gmap[mgId];\n                if (mg) {\n                    mgs.push(mg);\n                } else {\n                    this.log('missing mod ig', mgId);\n                }\n            }\n            item.mgroups = mgs;\n\n            // item updated, now update it back to imap?\n            imap[item.id] = item;\n        }\n    }\n\n    /**\n     * Get available category groups, by checking:\n     * 1. if category groups is published\n     * 2. available time slots or periods\n     * **/\n    getAvailableCategoryGroups(store: Store, takeout: boolean): Category[] {\n\n        var result = [];\n        let now: number = this.getTime(store);\n\n        if (!store || !store.menu) {\n            return result;\n        }\n\n        var storeOpen = Store.isOpeningHours(store, now);\n        if (!storeOpen) {\n            return result;\n        }\n\n        var cats = store.menu.cgroups;\n        if (!cats || cats.length == 0) {\n            return result;\n        }\n\n        for (let c of cats) {\n\n            if (this.showAllCats) {\n                result.push(c);\n                continue;\n            }\n\n            //if not published, don't show it\n            if (!c.published) {\n                continue;\n            }\n\n            if (c.openings) {\n                var brandOh = null;\n                if (store.brand) {\n                    brandOh = store.brand.openings;\n                }\n                if (!OpeningHours.isTimeOpen(brandOh, c.openings, now)) {\n                    this.log('cat openings not available', c.name);\n                    continue;\n                }\n\n            } else {\n                //if category time not valid, don't show it\n                if (!this.isAvailabeByStartEnd(c, now)) {\n                    this.log('cat time not available', c.name);\n                    continue;\n                }\n\n                if (!this.isAvailabeByPeriods(store, c.periods, now)) {\n                    this.log('cat period not available2', c.name);\n                    continue;\n                }\n            }\n\n            result.push(c);\n\n        }\n\n\n        if (result.length != cats.length) {\n            this.log('filtered cat groups', cats.length + '->' + result.length);\n        }\n\n        return result;\n\n\n    }\n\n\n    getAvailableRecommendations(store: Store, recoms: Recommendation[]) {\n\n\n        let now = this.convertNowDateToStoreTimeZone(store.timezone).getTime();\n\n        var result = [];\n\n        for (let rec of recoms) {\n            var catAval;\n            if (rec.category.type == 'recommendation') {\n                catAval = this.isAvailableCategory(store, rec.category, false, false);\n            } else {\n                catAval = this.isAvailableCategory(store, rec.category, false, true);\n            }\n\n            var itemAval = this.isAvailableItem(store, rec.category, rec.itemgroup, rec.item, false, now);\n\n            if (catAval && itemAval) {\n                result.push(rec);\n            } else {\n                this.log('Item Not Available', rec.item.name);\n            }\n\n        }\n\n        return result;\n    }\n\n\n    public static getCategory(menu: Menu, catId: string) {\n\n        var cmap = menu['cmap'];\n        if (!cmap) {\n            return null;\n        }\n\n        return cmap[catId];\n\n    }\n\n    public static getItemGroup(menu: Menu, igId: string) {\n\n        var gmap = menu['gmap'];\n        if (!gmap) {\n            return null;\n        }\n\n        return gmap[igId];\n\n    }\n\n    public static getItem(menu: Menu, ig: ItemGroup, itemId: string) {\n\n        var items = ig.items;\n        if (!items) {\n            return null;\n        }\n\n        return ig.items.find((item) => {\n            return item.id === itemId;\n        });\n\n    }\n\n    updateAvailableItem(cat: Category, mainItem: Item, isAvailable: boolean): void {\n        if (!cat || !mainItem) {\n            return;\n        }\n\n        const mapId = this.getAvailableMapId(cat.id, mainItem.id);\n        this.availableMap[mapId] = isAvailable;\n    }\n\n    /**\n     * Check whether item group is valid for specific user group\n     * @param ig\n     */\n    isAvailableByUserGroup(ig: ItemGroup | Category | Item | Ad): boolean {\n        // if (ig?.users != null) {\n        //     this.needRecalMenuWhenMemberChange = true;\n        //     const isMember = this.memberContext.isMember();\n        //     if (isMember && !ig.users?.includes('member')) {\n        //         // console.log('not available when member', ig.name);\n        //         return false;\n        //     } else if (!isMember && !ig.users?.includes('guest')) {\n        //         // console.log('not available when guest', ig.name);\n        //         return false;\n        //     }\n        // }\n        const allowed = ig?.users;\n        const have = this.userTypes;\n        if (!allowed || allowed.length === 0) { return true; }\n\n        for (const type of allowed) {\n            if (have.indexOf(type) >= 0) {\n                // console.log('ig allowed', ig?.name, allowed, have);\n                return true;\n            }\n        }\n        console.log('ig not allowed', ig?.name, allowed, have);\n        return false;\n    }\n\n    isItemMemberTierAvailable(item: Item,category: Category): boolean {\n        const itemMemberTier = item?.memberTier;\n        const isItemMemberTierValid = itemMemberTier?.length === 0 || itemMemberTier === undefined ? category?.memberTier : itemMemberTier;\n        const memberTier = this.memberContext.member?.membership?.tier || this.memberContext.member?.tier;\n        if (\n            (isItemMemberTierValid?.length > 0 && this.memberContext?.member?.guest) ||\n            (isItemMemberTierValid?.length > 0 && !isItemMemberTierValid.includes(memberTier))) {\n            return false;\n        }\n        return true;\n    }\n\n\n    /**\n     * Check if it is an available Ad, determinded by rules:\n     * 1. check Ad UserGroup\n     * 2. if Ad's mode is the same as order dinein/takeout mode\n     * 3. Ad's available time slots or period\n     * **/\n    isAvailableAd(store: Store, ad: Ad, takeout: boolean, now?: number, mode?: string): boolean {\n        if (!this.isAvailableByUserGroup(ad)) {\n            return false;\n        }\n\n        if (!now) {\n            now = this.getTime(store);\n        }\n\n        if (!this.isAvailablebyModes(ad, takeout, mode)) {\n            this.log('ad mode not available', ad.modes);\n            return false;\n        }\n\n        if (ad?.openings) {\n            var brandOh = null;\n            if (store?.brand) {\n                brandOh = store.brand.openings;\n            }\n            if (!OpeningHours.isTimeOpen(brandOh, ad?.openings, now)) {\n                this.log('ad openings not available', ad?.name);\n                return false;\n            }\n\n        } else {\n            //if category time not valid, don't show it\n            if (!this.isAvailabeByStartEnd(ad, now)) {\n                this.log('ad time not available', ad.name);\n                return false;\n            }\n\n            if (!this.isAvailabeByPeriods(store, ad?.periods, now)) {\n                this.log('ad period not available', ad.name);\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n}\n","import { Inject, Injectable, Injector } from '@angular/core';\nimport { Category, Court, Item, ItemGroup, MathUtils, Member, Offer, Order, OrderItem, Store } from 'aigens-data';\nimport { v4 as uuidv4 } from 'uuid';\nimport { PlatformService } from '../../pure/services/platform.service';\nimport { SubscribeService } from '../../pure/services/subscribe.service';\nimport { AnalyticsService } from '../services/analytics.service';\nimport { ConfigService } from '../services/config.service';\nimport { SingleOrderManager } from './single-order-manager';\nimport { InventoryManager } from './inventory-manager';\nimport { SettingManager } from '@aigens/core/src/app/pure/managers/setting-manager';\nimport { StorageService } from '../services/storage.service';\nimport { OrderContext } from '../services/order-context.service';\n\n//THIS IS multi order manager hiding as single order manager\n@Injectable({ providedIn: 'root' })\nexport class OrderManager {\n\n    order: Order;\n\n    count: number = 0;\n    store: Store;\n    court: Court;\n\n    mode: string;\n\n    upselling: boolean;\n\n    member: Member;\n    users: string[];\n    couponCode: string;\n    cutlery = false;\n    contactless = false;\n    alipayCnNotify = false;\n    alipayCnAuthCode = \"\";\n    note: string; // the remark of order\n\n    trackAnalytics: boolean = true;\n\n    private managers: SingleOrderManager[] = [];\n    private manager: SingleOrderManager;\n\n    multi: boolean = false;\n\n    selectedOffers: Offer[] = [];\n\n    promoCode: string = null;\n    promoCodes: string[] = [];\n\n    bundledOffer: Offer[] = [];\n    private configService: ConfigService;\n    private analyticsService: AnalyticsService;\n    private subscribe: SubscribeService;\n    private platformService: PlatformService;\n    public inventoryManager: InventoryManager;\n    private settingManager: SettingManager;\n    private storageService: StorageService;\n    marketing = false;\n\n    programs: string[] = [];\n\n    constructor(@Inject(Injector) private readonly injector: Injector) {\n\n        this.configService = injector.get(ConfigService);\n        this.analyticsService = injector.get(AnalyticsService);\n        this.subscribe = injector.get(SubscribeService);\n        this.platformService = injector.get(PlatformService);\n        this.inventoryManager = injector.get(InventoryManager);\n        this.settingManager = injector.get(SettingManager);\n        this.storageService = injector.get(StorageService);\n\n    }\n\n    /*\n    constructor(private configService: ConfigService, private analyticsService: AnalyticsService, private subscribe: SubscribeService, private platformService: PlatformService) {\n\n    }\n    */\n\n    get orderContextService() {\n        return this.injector.get(OrderContext);\n    }\n\n    getOrder(): Order {\n        return this.order;\n    }\n\n    createOrder(store: Store, mode: string, options: {} = {}, member: Member = undefined) {\n\n        var om = new SingleOrderManager(this.configService, this.analyticsService, this.subscribe);\n\n        this.managers = [om];\n        this.manager = om;\n\n        this.multi = false;\n\n        this.fillDefaultOptions(options);\n\n        om.createOrder(store, mode, options);\n        om.setUserPoints(member)\n\n        console.log(\"created options??\", options);\n\n        this.order = om.order;\n        this.store = store;\n        this.mode = mode;\n\n        return this.order;\n    }\n\n    private fillDefaultOptions(options: {}) {\n        var source = this.platformService.getSource();\n        var container = this.platformService.getContainer();\n\n        if (source) {\n            options['source'] = source;\n        }\n\n        if (container) {\n            options['container'] = container;\n        }\n    }\n\n    createSwitchCourtOrder(court: Court, store: Store, mode: string, options: {} = {}) {\n\n        if (this.court && this.court.id != court.id) {\n            console.log(\"ERROR: CANNOT SUPPORT CHANGE COURT\");\n            return;\n        } else {\n            console.log(\"creating court sub order!\");\n        }\n\n        this.court = court;\n        this.store = store;\n        this.multi = true;\n        this.mode = mode;\n\n        this.fillDefaultOptions(options);\n\n        var om = this.findOm(store.id);\n\n        if (!this.order) {\n            this.order = this.newCourtOrder(court, mode, options);\n            if (store) {\n                this.order.storeId = store.id; // need use after from court mode to byod\n            }\n        } else {\n            this.order.type = mode;\n        }\n\n        if (!om) {\n            om = new SingleOrderManager(this.configService, this.analyticsService, this.subscribe);\n            om.createOrder(store, mode, options);\n            this.managers.push(om);\n\n\n        } else {\n            om.store = store;\n        }\n\n        // update the mode/type\n        this.managers.forEach(m => {\n            m.order.type = mode;\n            m.mode = mode;\n        });\n\n        this.manager = om;\n\n        this.calculateCourtOrder();\n\n    }\n\n    //calculate court order\n    private calculateCourtOrder() {\n\n        var total = 0;\n        var grandTotal = 0;\n        var serviceCharge = 0;\n        var tax = 0;\n        var discount = 0;\n\n        var subs = [];\n\n        for (let om of this.managers) {\n\n            let so = om.order;\n\n            total += so.total;\n            grandTotal += so.grandTotal;\n            serviceCharge += so.serviceCharge;\n            tax += so.tax;\n            discount += so.discount;\n\n            subs.push(so);\n        }\n\n        this.order.total = MathUtils.round(total, 2);\n        this.order.grandTotal = MathUtils.round(grandTotal, 2);\n        this.order.serviceCharge = MathUtils.round(serviceCharge, 2);\n        this.order.tax = MathUtils.round(tax, 2);\n        this.order.discount = MathUtils.round(discount, 2);\n        this.order.subs = subs;\n\n        console.log(\"calculated court order\", this.order);\n    }\n\n\n    /*\n    private calculateCourtOrder() {\n\n        var count = 0;\n        var total = 0;\n        var usedPoints = 0;\n        var usedPoints_toItem = 0;// 存储 当前积分兑换item flow中使用的积分数\n\n        var quantities = {};\n\n        console.log('calculate order', this.order);\n\n        for (let oi of this.order.orderitems) {\n\n            // if (!OrderItem.isSet(oi)) {\n\n            count += oi.quantity;\n            let t = oi.quantity * oi.total;\n            total += MathUtils.round(t, 2);\n\n            var mainItemId = oi.items[0].id;\n            var quantity = quantities[mainItemId];\n            if (!quantity) {\n                quantity = 0;\n            }\n            quantity += oi.quantity;\n            quantities[mainItemId] = quantity;\n            // } else {\n\n            //     count += oi.quantity;\n            //     let t = oi.quantity * oi.total;\n            //     total += MathUtils.round(t, 2);\n            //     var mainItemId = oi.items[0].id;\n            //     var quantity = quantities[mainItemId];\n            //     if (!quantity) quantity = 0;\n            //     quantity += oi.quantity;\n            //     quantities[mainItemId] = quantity;\n            // }\n            // oi.points is not used in byod v2\n            usedPoints += (oi.points * oi.quantity);\n            usedPoints_toItem += (oi.points * oi.quantity);\n        }\n\n        total = MathUtils.round(total, 2);\n\n        this.count = count;\n        this.total = total;\n        this.quantities = quantities;\n\n        this.order.grandTotal = total;\n        this.order.total = total;\n        if (!this.order.discount) {\n            this.order.discount = 0;\n        }\n        this.order.handling = this.getHandling();\n        // this.order.usedPoints = usedPoints;\n\n        this.order.usedPoints_toItem = usedPoints_toItem;\n\n        this.calculateUsedPoints(usedPoints_toItem, this.order.usedPoints_toMoney);\n\n        this.order.serviceCharge = this.getServiceCharge();\n        this.order.tax = this.getTax();\n        //regenerate uuid, meaning the order is changed\n        this.calcGrandTotal();\n        this.order.uuid = uuidv4();\n\n        //this.order$.next(this.order);\n        //changeEmit && this.onOrderitemsChange.emit(\"order change\");\n\n        this.subscribe.next('order', this.order);\n    }\n    */\n\n    private newCourtOrder(court: Court, mode: string, options: {} = {}) {\n\n        var order = new Order();\n        order.type = mode;\n\n        Object.assign(order, options);\n\n        order.courtId = court.id;\n\n        order.orderitems = [];\n        order.uuid = uuidv4();\n        order.deviceId = this.configService.getDeviceId() + \"\";\n        order.takeout = false;\n\n        order.sourceUrl = window.location.href;\n\n        if (this.member) {\n            order.member = this.member;\n        }\n\n        if (this.member && this.member.backendId) {\n            order.memberNumber = Number(this.member.backendId); //Yoshinoya member\n        }\n\n\n        return order;\n    }\n\n    findOm(storeId: any) {\n\n        for (let om of this.managers) {\n            if (om.store.id == storeId) {\n                return om;\n            }\n        }\n\n        return null;\n    }\n\n\n    clear() {\n\n        this.order = null;\n        this.count = 0;\n        this.member = null;\n        this.users = null;\n        this.mode = null;\n        this.managers = [];\n        this.manager = null;\n        this.selectedOffers = [];\n        this.promoCode = null;\n        this.resetPromoCodes();\n\n        this.subscribe.next('order', null);\n\n        this.storageService.getStorageKeys().then(keys => {\n            keys.forEach(key => {\n\n                if (key?.startsWith(\"type=order\")) {\n                    console.log(\"clear order with key\", key);\n                    this.storageService.setStorage(key, null);\n                }\n            })\n        })\n\n        this.orderContextService.clearPreviousOrder();\n\n    }\n\n    clearOrderItems() {\n\n        this.managers.forEach((om) => {\n            om.clearOrderItems();\n        });\n\n    }\n\n    // please use carefully\n    clearLocalOrderItems(orderContext: any): void {\n        // only clear the localContext order not orderManager.order\n        orderContext?.storageService?.setStorage(orderContext?.contextId, null);\n    }\n\n    /**\n     * @deprecated\n     * @param actions\n     * @param callback\n     */\n    processActions(actions: any[], callback: Function) {\n\n        if (!actions) {\n            return;\n        }\n\n        for (let act of actions) {\n\n            var auto = act.auto;\n\n            if (auto) {\n\n                switch (act.action) {\n\n                    case \"addItem\":\n                        this.addSingleItemById(act.params.itemId);\n                        break;\n                    case \"addDiscount\":\n                        this.setPromoCode(act.params.code);\n                        break;\n                    case \"addOrder\":\n                        this.reconstructOrder(act.params.order);\n                        break;\n                    case \"addOrderItem\":\n                        var orderitem = act.params.orderitem;\n                        var rawOrder = new Order();\n                        rawOrder.orderitems = [orderitem];\n                        this.reconstructOrder(rawOrder);\n                        break;\n                    default:\n                        console.log(\"UNSUPPORTED ACTION\", act);\n                        break;\n                }\n\n            } else {\n\n                if (callback) {\n                    callback(act);\n                }\n\n            }\n\n        }\n\n    }\n\n\n\n\n    reconstructOrder(rawOrder: Order, continueUnlockCat = true) {\n\n\n        if (this.multi) {\n\n            var subs = rawOrder.subs;\n\n            for (let sub of subs) {\n\n                var om = this.findOm(sub.storeId);\n\n\n                if (!om) {\n\n                    om = new SingleOrderManager(this.configService, this.analyticsService, this.subscribe);\n\n                    var store = this.court.stores.find((s) => s.id == sub.storeId);\n\n                    if (store) {\n\n                        om.createOrder(store, this.mode, {});\n                        this.managers.push(om);\n                    } else {\n\n                        console.log(\"FAIL TO RECONSTRUCT SUB ORDER MISSING STORE\");\n\n                    }\n\n                } else {\n\n                    console.log(\"have existing OM\");\n\n                }\n\n                om.reconstructOrder(sub, true, continueUnlockCat);\n\n            }\n\n            //recal after added subs\n            this.calculateCourtOrder();\n\n        } else {\n            this.manager.reconstructOrder(rawOrder, false, continueUnlockCat);\n\n        }\n\n\n\n\n    }\n\n\n    findOrderItem(item: Item, ignoreModifiers: boolean = true): OrderItem {\n\n\n        console.log(\"MULTI findOrderItem\");\n\n        return this.manager.findOrderItem(item, ignoreModifiers);\n\n    }\n\n    findOrderItemEgift(item: Item, ignoreModifiers: boolean = true): OrderItem {\n\n\n        console.log(\"MULTI findOrderItem\");\n\n        return this.manager.findOrderItemEgift(item, ignoreModifiers);\n\n    }\n\n\n    //APPROVED\n    addOrderItem(orderitem: OrderItem, isRecom: boolean = false, discountId?: string) {\n\n        console.log(\"MULTI addOrderItem\");\n\n        var result = this.manager.addOrderItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n    }\n\n    //IHLP-30 Combo Flow Refactoring, add item to the head\n    addOrderItemRefactor(orderitem: OrderItem, isRecom: boolean = false, discountId?: string) {\n\n        console.log(\"MULTI addOrderItem\");\n\n        var result = this.manager.addOrderItemRefactor.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n    }\n\n\n    //APPROVED\n    addExistingOrderItem(orderitem: OrderItem) {\n\n        console.log(\"MULTI addExistingOrderItem\");\n\n        var result = this.manager.addExistingOrderItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n    }\n\n\n    //APPROVED\n    duplicateOrderItem(orderitem: OrderItem): OrderItem {\n        const result = this.manager.duplicateOrderItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n\n    }\n\n\n    //APPROVED\n    replaceOrderItem(old: OrderItem, oi: OrderItem, qty = 1) {\n\n        console.log('MULTI replaceOrderItem');\n\n        var result = this.manager.replaceOrderItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n\n    }\n\n\n    createOrderItem(category: Category, itemgroup: ItemGroup, item: Item) {\n\n        console.log(\"MULTI createOrderItem\");\n\n        return this.manager.createOrderItem.apply(this.manager, arguments);\n    }\n\n    //APPROVED\n    addSingleItem(category: Category, itemgroup: ItemGroup, item: Item, ignoreModifiers: boolean = true, isRecom: boolean = false, discountId?: string, checkItemMin?): OrderItem {\n\n        console.log(\"MULTI addSingleItem\");\n\n        var result = this.manager.addSingleItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n\n        return result;\n    }\n\n    //IHLP-30 Combo Flow Refactoring, add item to the head\n    addSingleItemRefactor(category: Category, itemgroup: ItemGroup, item: Item, ignoreModifiers: boolean = true, isRecom: boolean = false, discountId?: string, checkItemMin?): OrderItem {\n\n        console.log(\"MULTI addSingleItemRefactor\");\n\n        var result = this.manager.addSingleItemRefactor.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n\n        return result;\n    }\n\n    //APPROVED\n    addSingleItemById(itemId: string): OrderItem {\n\n\n        var result = this.manager.addSingleItemById.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n\n        return result;\n    }\n\n    //APPROVED\n    reverseLookupItem(itemId: string): any {\n        var result = this.manager.reverseLookupItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n    }\n\n    //APPROVED\n    refreshOrderItem(orderitem: OrderItem) {\n\n        console.log(\"MULTI addSingleItem\");\n\n        var result = this.manager.refreshOrderItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n\n    }\n\n    isSet(oi: OrderItem): boolean {\n        return oi.combo || OrderItem.isSet(oi);\n    }\n\n    isCouponMainItemOi(oi: OrderItem): boolean {\n        let mainItem = OrderItem.getMainItem(oi);\n        return mainItem?.type === 'coupon';\n    }\n\n    // order level max\n    checkOrderMaxItem(addQty: number = 0): boolean {\n        return this.manager.checkOrderMaxItem.apply(this.manager, arguments);\n\n    }\n\n    // check if current qty can be added to cart without exceeding item max\n    checkAddItemMax(item: Item, addQty: number): boolean {\n        return this.manager.checkAddItemMax.apply(this.manager, arguments);\n    }\n\n    checkInventory(item: Item, quantity: number): boolean {\n        if (!item || this.inventoryManager.getInv(item) == -1 || this.inventoryManager.getInv(item) >= quantity) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n\n    getInv(item: Item) {\n        return this.inventoryManager.getInv(item)\n    }\n\n    isTakeout() {\n        return this.mode === \"takeaway\";\n    }\n\n\n    minusItem(item: Item, ignoreModifiers: boolean = true, checkItemMin?) {\n\n        console.log(\"MULTI minusItem\");\n\n        var result = this.manager.minusItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n    }\n\n\n    minusUnlockItem(item: Item, checkItemMin?) {\n\n        console.log(\"MULTI minusUnlockItem\");\n\n        var result = this.manager.minusUnlockItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n    }\n\n    removeUnlockItems(unlockCat: Category) {\n        this.manager.removeUnlockItems.apply(this.manager, arguments);\n    }\n\n    removeUnlockByItemId(itemId: string): void {\n        this.manager.removeUnlockByItemId.apply(this.manager, arguments);\n    }\n\n    removeUnlockByDiscountId(discountId: string): void {\n        this.manager.removeUnlockByDiscountId.apply(this.manager, arguments);\n    }\n\n    minusOrderItem(orderitem: OrderItem, minusItem_all?) {\n\n        console.log('MULTI minusOrderItem');\n\n        var result = this.manager.minusOrderItem.apply(this.manager, arguments);\n\n        if (this.multi) {\n            this.calculateCourtOrder();\n        }\n\n        return result;\n\n    }\n\n    isEmpty() {\n\n        if (!this.multi) {\n            return this.manager?.isEmpty() ?? true;\n        }\n\n        if (!this.order) {\n            return true;\n        }\n\n        if (this.multi) {\n            let emptyMulti = true;\n            this.order.subs?.forEach(s => {\n                if (s.orderitems.length > 0) {\n                    emptyMulti = false;\n                }\n            });\n            return emptyMulti;\n        }\n        return this.order.total == 0;\n    }\n\n    getQuantity(item: Item) {\n        return this.manager?.getQuantity?.apply(this.manager, arguments);\n    }\n\n\n    //TODO: this sounds like should be at outter level\n    getPreparetionTime() {\n        return this.manager.getPreparetionTime.apply(this.manager, arguments);\n    }\n\n\n    setDiscountCode(code: string) {\n        this.promoCode = code;\n    }\n\n    setPromoCode(code: string) {\n        this.promoCode = code;\n    }\n\n    setDicountCodes(code: string) {\n        this.promoCodes.push(code);\n    }\n\n    setPromoCodes(code: string) {\n        this.promoCodes.push(code);\n    }\n\n    resetPromoCodes() {\n        this.promoCodes = [];\n    }\n\n    removeFromPromoCodes(code: string) {\n        this.promoCodes = this.promoCodes?.filter((promoCode) => {\n            return promoCode !== code;\n        });\n    }\n\n    setSeats(seats: number) {\n        this.order.seats = seats;\n    }\n\n    setSource(source: string) {\n        this.order.source = source;\n    }\n\n    getCount() {\n        return this.manager?.count ?? 0;\n    }\n\n    switchManager(storeId) {\n        if (this.managers?.length > 0 && this.manager?.store?.id != storeId) {\n            const om = this.findOm(storeId);\n            if (om) {\n                this.manager = om;\n                console.log('manager is switched', this.manager);\n            }\n        }\n    }\n\n    getStoreFromActiveManager(): Store {\n        return this.manager?.store;\n    }\n\n    getActiveManager() {\n        return this.manager;\n    }\n\n    getManagers() {\n        return this.managers ?? [];\n    }\n\n    isAllowCheckoutZeroTotal(total: number) {\n        let allowed = false;\n        let allowZeroTotalType;\n        if (this.court) {\n            allowZeroTotalType = this.court.allowZeroTotalType;\n        } else {\n            allowZeroTotalType = this.store?.menu?.allowZeroTotalType;\n        }\n\n        // if we have mode in allow zero total type, then should be allowed $0 order\n        if (allowZeroTotalType?.length > 0) {\n            if (allowZeroTotalType.includes('all') || allowZeroTotalType.includes(this.mode)) {\n                allowed = true;\n            }\n        }\n\n        const catType = [];\n\n        // if we have all order items that all within points category, then should be allowed $0 order\n        if (this.order) {\n            this.order.orderitems?.forEach(o => {\n                if (o.categoryType) {\n                    catType.push(o.categoryType);\n                }\n            });\n\n            this.order.subs?.forEach(sub => {\n                sub.orderitems?.forEach(o => {\n                    if (o.categoryType) {\n                        catType.push(o.categoryType);\n                    }\n                });\n            });\n\n            const uniqCatType = catType.filter((n, i) => catType.indexOf(n) === i);\n\n            if (uniqCatType.includes('points') && uniqCatType.length == 1) {\n                allowed = true;\n            }\n        }\n\n        return !this.isEmpty() && allowed && total == 0;\n    }\n    // 判断offer 是否可以单独下单(不点其他orderItem)\n    hasOfferAlone(): boolean {\n        const offers = [...this.selectedOffers, ...this.bundledOffer];\n        return offers.some(o => o?.reward?.['extra']?.alone);\n    }\n\n    setMemberPoints(member: Member) {\n        this.manager?.setUserPoints(member);\n    }\n    isAllItemPoints(): boolean {\n        let ois = [];\n        this.order.courtId ? this.order.subs?.forEach(s => { ois.push(s.orderitems); })\n            : ois = this.order?.orderitems;\n\n        if (ois.length === 0) {\n            return false;\n        } else {\n           return !ois.some((orderItem) => orderItem.categoryType !== 'points');\n        }\n    }\n\n    saveOrderCheckpoint(): void {\n        this.manager.saveOrderCheckpoint.apply(this.manager, arguments);\n    }\n\n    restoreLastOrderCheckpoint(): void {\n        this.manager.restoreLastOrderCheckpoint.apply(this.manager, arguments);\n    }\n\n    clearOrderCheckpoint(): void {\n        this.manager.clearOrderCheckpoint.apply(this.manager, arguments);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Item, Member, Menu, PriceRule, Store } from 'aigens-data';\nimport _ from 'lodash-es';\n\n/**\n * Update items' price according to different modes\n * **/\n\n@Injectable({providedIn: 'root'})\nexport class PriceManager {\n\n    level: number = 1;\n    priceRules: PriceRule[] = [];\n    debugTime: any;\n\n    priceLevelChange = false;\n\n    directoryUnixTime;\n\n    constructor() {\n\n    }\n\n    getTime() {\n        if (this.debugTime) {\n            return this.debugTime;\n        }\n        // return new Date().getTime();\n        return this.directoryUnixTime ?? new Date().getTime();\n    }\n\n    setDebugTime(time: number) {\n        this.debugTime = time;\n    }\n\n\n    pickPriceTierRule(menu: Menu, mode: string, member: Member, store: Store): number {\n\n        var level = 1;\n        var priceRules = menu.priceRules;\n        if (!priceRules) {\n\n            return level;\n        }\n        var now = this.getTime();\n\n        console.log(\"checking priceRules\", priceRules);\n\n        var topMPr;\n        var topScore = -10000;\n        var type = member?.membership?.memberTierPolicy?.tier || member?.membership?.tier;\n\n        for (const pr of priceRules) {\n            var score = PriceRule.getMatch(pr, now, mode, member, store, true);\n            if (score > topScore) {\n                if (!pr.priority) {\n                    pr.priority = 0;\n                }\n                if ((!topMPr || (topMPr && pr.priority > topMPr.priority) && type === pr?.tier)) {\n                    topMPr = pr;\n                    topScore = score;\n                }\n            }\n        }\n        if (topMPr) {\n            level = topMPr.level;\n        }\n        return level;\n    }\n\n    spotPeriodLevel(store, spotData): number | undefined {\n        const spotOpen = spotData?.['open'];\n        const spotPeriod = spotOpen && Store.checkTimeWithinPeriods(store, spotOpen)?.[0];\n        if (_.isEmpty(spotData) || _.isEmpty(spotPeriod)) {\n            return undefined;\n        }\n        const spotPeriodCode = spotPeriod?.code;\n        const currentPeriod = Store.checkTimeWithinPeriods(store, this.getTime())?.[0];\n        const periodOverride = currentPeriod?.periodOverride;\n\n        return periodOverride?.[spotPeriodCode];\n    }\n\n    pickPriceRule(menu: Menu, mode: string, member: Member, store: Store, spotData = {}): number {\n\n        var level = 1;\n\n        const spotLevel = this.spotPeriodLevel(store, spotData);\n        if (typeof spotLevel !== 'undefined') {\n            return spotLevel;\n        }\n\n        var priceRules = menu.priceRules?.filter((priceRule) => !priceRule.tier);\n        if (!priceRules) {\n\n            return level;\n        }\n        var now = this.getTime();\n\n        console.log(\"checking priceRules\", priceRules);\n\n        var topPr;\n        var topScore = -10000;\n\n        for (const pr of priceRules) {\n\n            var score = PriceRule.getMatch(pr, now, mode, member, store, false);\n            if (score > topScore) {\n                // if match, then get the highest priority\n                if (!pr.priority) {\n                    pr.priority = 0;\n                }\n\n                if (!topPr || (topPr && pr.priority > topPr.priority)) {\n                    topPr = pr;\n                    topScore = score;\n                }\n            }\n        }\n\n        if (topPr) {\n            level = topPr.level;\n        }\n\n        return level;\n    }\n\n    updateBasePrice(menu: Menu, mode: string, member: Member, store: Store = null, spotData = {}) {\n\n        console.log('updateBasePrice', mode, member, this.getTime());\n\n        var newLevel = this.pickPriceRule(menu, mode, member, store, spotData);\n\n        console.log('pick level', newLevel);\n\n        if (newLevel == menu.priceLevel) {\n            this.priceLevelChange = false;\n            return;\n        }\n\n        this.priceLevelChange = true;\n\n        this.level = newLevel;\n        menu.priceLevel = newLevel;\n        this.priceRules = menu.priceRules;\n\n        var gmap = menu['gmap'];\n\n        var keys = Object.keys(gmap);\n\n        for (const key of keys) {\n            var ig = gmap[key];\n\n            for (const item of ig.items) {\n                var priceX = Item.getPrice(item, this.level);\n                item.price = priceX;\n\n            }\n        }\n\n    }\n\n    updateMinMaxPrice(menu: Menu){\n\n        console.log(\"updating min max price\");\n\n        var gmap = menu['gmap'];\n\n        if(!gmap){\n            console.log(\"no gmap for this menu\", menu.id);\n            return;\n        }\n\n        var keys = Object.keys(gmap);\n\n        for(const key of keys){\n            var ig = gmap[key];\n\n            var maxPrice = null;\n            var minPrice = null;\n\n            for(const item of ig.items){\n                var price = item.price;\n                if(maxPrice == null || price > maxPrice) maxPrice = price;\n                if(minPrice == null || price < minPrice) minPrice = price;\n\n            }\n\n            if(ig.min > 0){\n                ig.minPrice = minPrice * ig.min;\n                ig.maxPrice = maxPrice * ig.min;\n            }\n\n\n        }\n\n        for(const key of keys){\n            var ig = gmap[key];\n\n            for(const item of ig.items){\n\n                if(item.groupIds && item.groupIds.length > 0){\n\n                    var price = item.price;\n                    var minPrice = price;\n                    var maxPrice = price;\n\n                    for(const gid of item.groupIds){\n                        var ig = gmap[gid];\n                        if(ig){\n                            if(ig.minPrice) minPrice += ig.minPrice;\n                            if(ig.maxPrice) maxPrice += ig.maxPrice;\n                        }\n                    }\n\n                    item.minPrice = minPrice;\n                    item.maxPrice = maxPrice;\n\n                }\n\n            }\n\n        }\n\n\n\n    }\n\n\n\n    pickOrderMinMax(menu: Menu, mode: string, member: Member, store: Store) {\n        var priceRules = menu.priceRules;\n        if(!priceRules) return;\n        var now = this.getTime();\n\n        console.log(\"checking priceRules\", priceRules);\n\n        var topPr;\n        var topScore = -10000;\n\n        for(const pr of priceRules){\n\n            var score = PriceRule.getMatch(pr, now, mode, member, store, false);\n            if (score > topScore) {\n                topPr = pr;\n                topScore = score;\n            }\n            console.log('score', score, pr.name);\n        }\n\n        return topPr;\n    }\n\n    memberTierPrice(menu: Menu, mode: string, member: Member, store: Store = null) {\n        const memberTier = member?.membership?.memberTierPolicy?.tier || member?.membership?.tier;\n        if (memberTier) {\n            var tierLevel = this.pickPriceTierRule(menu, mode, member, store);\n            var originalLevel = this.pickPriceRule(menu, mode, member, store);\n\n            var gmap = menu['gmap'];\n\n            var keys = Object.keys(gmap);\n            for (const key of keys) {\n                var ig = gmap[key];\n                for (const item of ig.items) {\n                    if (item.memberTier?.includes(memberTier) && tierLevel !== 0 && tierLevel !== originalLevel) {\n                        var priceX = Item.getPrice(item, tierLevel);\n                        var priceY = Item.getPrice(item, originalLevel);\n\n                        item.price = priceX;\n                        item['originalPrice'] = priceY;\n                    }\n                }\n            }\n        }\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Brand, Category, Item, Member, Menu, Recommendation, RecommendationGroup, Store } from 'aigens-data';\nimport { InventoryManager, MenuManager, OrderManager } from '..';\n\n\n\n/**\n * Get AI recommendated item for Aigens member\n * **/\n@Injectable({ providedIn: 'root' })\nexport class RecommendationManager {\n\n    debug: boolean = false;\n\n    constructor(public menuManager: MenuManager, public orderManager: OrderManager, public inventoryManager: InventoryManager) {\n\n    }\n\n    shouldRecommend(brand: Brand, store: Store, menu: Menu): boolean{\n\n        var enabled = Brand.hasFeature(brand, \"recommend\");\n\n        return enabled;\n    }\n\n    /* sort cateogry by top-5 item average score */\n    sortCategories(categories: Category[], member: Member = null, behavior: any = null, numTop: number = 5): any {\n        var likes = this.compileLikes(behavior);\n        let categoryScores = [];\n        for (let i = 0; i < categories.length; i++) {\n            let catScore = this.calculateCategoryAvgScore(categories[i], member, behavior, likes, numTop);\n            categoryScores.push(\n                {\n                    index: i,\n                    score: catScore.avgScore,\n                    topItem: catScore.topItem\n\n                });\n        }\n\n        categoryScores.sort((a, b) => b.score - a.score); //descending order\n        console.log('scores of original categories: ', categoryScores);\n        let sortedCats = [];\n        let topItems = [];\n        for (let i = 0; i < categories.length; i++) {\n            sortedCats.push(categories[categoryScores[i].index]);\n            topItems.push(categoryScores[i].topItem);\n        }\n\n        return {cats: sortedCats, topItems: topItems};\n    }\n\n    // calculate the average rating score of top-5(default) items in a category\n    calculateCategoryAvgScore(category: Category, member: Member, behavior: any, likes: any, numTop: number = 5): any {\n\n        var scores = [];\n        var numItems = 0;\n        var topItem;\n        var maxScore = 0;\n\n        for (let grp of category.groups) {\n            numItems = numItems + grp.items.length;\n            for (let item of grp.items) {\n                let score = this.calculateScore(member, behavior, item, likes).score;\n                scores.push(score);\n                if (score > maxScore) {\n                    maxScore = score;\n                    topItem = item;\n                }\n            }\n        }\n\n        scores.sort((a, b) => b - a); //descending order\n        numItems = numItems > numTop ? numTop : numItems;\n        let sumScores = 0;\n        for (let i = 0; i < numItems; i++) {\n            sumScores += scores[i];\n        }\n        let avgScore = sumScores / numItems;\n\n        return {avgScore: avgScore, topItem: topItem};\n    }\n\n    makeItemRecommendations(menu: Menu, item: Item, member: Member, behavior: any, type = \"main\", limit?: number): Recommendation[] {\n\n        if (!menu || !item || !behavior) return [];\n\n        var itemRelation = menu.itemRelation;\n\n        if(!itemRelation) return[];\n\n        var basics = this.makeRecommendations(menu, member, behavior, type, limit);\n\n        var rmap = itemRelation[item.id] || itemRelation[item.backendId];\n\n        var weights = {};\n\n        if (behavior) {\n            weights = behavior.weights || {};\n        }\n\n        var itemRelationWeight = weights[\"itemRelation\"] || 5;\n\n        this.log(\"rmap\", rmap);\n\n        for (let r of basics) {\n\n            var targetItem = r.item;\n\n            var weight;\n\n            if (rmap) {\n\n                weight = rmap[targetItem.id] || rmap[targetItem.backendId];\n\n            } else {\n\n                var reverse = itemRelation[targetItem.id] || itemRelation[targetItem.backendId];\n\n                if (reverse) {\n                    weight = reverse[item.id] || reverse[item.backendId];\n                }\n\n                this.log(\"reverse\", reverse);\n            }\n\n            if (weight) {\n                this.log(\"weight\", targetItem.name, weight);\n            } else {\n                weight = 0;\n            }\n\n            var relationScore = weight * itemRelationWeight;\n\n            var reason = {\n                type: \"itemRelation\",\n                value: weight,\n                score: relationScore\n            };\n\n            r.reasons.push(reason);\n\n            r.relationScore = relationScore;\n\n            r.score += relationScore;\n\n\n        }\n\n        basics.sort(this.compareRecommendation);\n\n        return basics;\n\n    }\n\n    //types, single, main, default main\n    makeRecommendations(menu: Menu, member: Member, behavior: any, type = \"main\", limit?: number, currentTime?: number): Recommendation[] {\n\n        if (!menu || !behavior) return [];\n\n        this.log(\"behavior\", behavior);\n\n        if(!currentTime) {\n            currentTime = new Date().getTime();\n        }\n\n        var likes = this.compileLikes(behavior);\n\n        var result = [];\n        let categories:Category[];\n        if(menu.recommendation) {\n            categories = menu.categories.concat(menu.recommendation);\n        } else {\n            categories = menu.categories;\n        }\n\n        for (let cat of categories) {\n\n            if (!cat.groups) continue;\n            if(!this.menuManager.isAvailableCategory(this.orderManager.store, cat, this.orderManager.mode === 'takeaway', true,currentTime, this.orderManager.mode)){\n                continue;\n            }\n            //only consider main items\n            var ig = cat.groups[0];\n\n            if (!ig.items) continue;\n\n            //if single only, and cat have usb groups, skip\n            if (\"single\" == type && cat.groups.length > 1) continue;\n\n            for (let item of ig.items) {\n\n                if(!this.menuManager.isAvailableItem(this.orderManager.store, cat, ig, item, this.orderManager.mode === 'takeaway', currentTime, this.orderManager.mode)){\n                    continue;\n                }\n\n                if(this.inventoryManager.isSoldout(item)) {\n                    continue;\n                }\n\n                if (\"single\" == type && item.groupIds && item.groupIds.length > 1) {\n                    //if single only, and item have sub groups, skip\n                    continue;\n                }\n\n                //free item should not be recommended\n\n                if (item.price <= 1) {\n                    this.log(\"skipping no price\", item);\n                    continue;\n                }\n\n\n                var r = this.calculateScore(member, behavior, item, likes);\n\n                r.category = cat;\n                r.itemgroup = ig;\n                r.item = item;\n\n                let isExist = result.some((res) => {\n                    return item && res && res.item && item.id === res.item.id;\n                });\n\n                !isExist && result.push(r);\n\n            }\n\n\n        }\n\n        result.sort(this.compareRecommendation);\n\n        this.log(\"low level recom sorted\", result);\n\n        if (limit && result.length > limit) {\n            result.splice(limit);\n\n        }\n        console.log(\"result\",result)\n        return result;\n    }\n\n    compileLikes(behavior: any) {\n        var likes = {};\n\n        if (!behavior) return likes;\n\n        for (var key in behavior) {\n\n            if ('weights' != key) {\n\n                this.addLikes(likes, behavior[key]);\n\n            }\n\n        }\n\n        //this.log(\"likes2\", likes);\n        return likes;\n    }\n\n    //types, single, main, default main\n    sortItems(items: Item[], member: Member = null, behavior: any = null): Item[] {\n\n        //this.log(\"behavior\", behavior);\n\n        var likes = this.compileLikes(behavior);\n\n        var result = [];\n\n        for (let item of items) {\n\n            var r = this.calculateScore(member, behavior, item, likes);\n\n            r.item = item;\n\n            result.push(r);\n\n        }\n\n        result.sort(this.compareRecommendation);\n\n        let sorted = result.map(r => r.item);\n        //this.log(\"sort results\", sorted);\n\n        return sorted;\n\n    }\n\n    groupRecommendations(recs: Recommendation[], sort: string = \"full\"): RecommendationGroup[] {\n\n        var map = {};\n\n        for (let rec of recs) {\n\n            var item = rec.item;\n            var cleanName = this.cleanName(item.name);\n            var prefId = rec.item['preferenceId'];\n\n            if (!prefId) {\n                prefId = cleanName;\n            }\n\n            var prefg = map[prefId];\n            if (!prefg) {\n\n                prefg = new RecommendationGroup();\n                prefg.name = cleanName;\n                prefg.preferenceId = prefId;\n                prefg.recommendations = [];\n                prefg.scores = {};\n\n                map[prefId] = prefg;\n            }\n\n            prefg.recommendations.push(rec);\n\n            this.setIfHigher(prefg.scores, \"full\", rec.score);\n\n            var featuredScore = rec.featuredScore;\n            if (!featuredScore) featuredScore = 0;\n\n            var finalScore = rec.score + featuredScore * 100;\n\n            this.setIfHigher(prefg.scores, \"featuredFull\", finalScore);\n\n            for (let reason of rec.reasons) {\n\n                this.setIfHigher(prefg.scores, reason.type, reason.score);\n            }\n\n        }\n\n\n        var result = [];\n\n        for (var key in map) {\n            result.push(map[key]);\n        }\n\n        if (sort == 'full') {\n            sort = 'featuredFull';\n        }\n\n        result = this.sortRecommendationGroups(result, sort);\n\n        this.log(\"rec groups\", result);\n        return result;\n    }\n\n    sortRecommendationGroups(rgroups: RecommendationGroup[], sort: string): RecommendationGroup[] {\n\n        //this.log(\"sorting by\", sort);\n\n        if (!rgroups || rgroups.length == 0) return [];\n\n        var result = rgroups.slice();\n\n        result.sort((a, b) => (a.scores[sort] > b.scores[sort]) ? -1 : ((b.scores[sort] > a.scores[sort]) ? 1 : 0));\n\n        return result;\n    }\n\n    private addLikes(likes: {}, segments: any[]) {\n\n        if (!segments) return;\n\n        for (let s of segments) {\n\n            s.options = segments.length;\n            likes[s.name] = s;\n\n        }\n\n    }\n\n    private calculateScore(member: Member, behavior: any, item: Item, likes: any = {}): Recommendation {\n\n        var rating = item.rating;\n        if (!rating) rating = 2.5;\n\n        var popularity = item.popularity;\n\n        if (!popularity) popularity = 2.5;\n\n        var segmentScore = 0;\n        var ratingScore = 0;\n        var popularityScore = 0;\n\n        var aiValue = 0;\n\n        var reasons = [];\n\n        var segments = [];\n\n        if (item.segments) {\n\n            for (var seg of item.segments) {\n\n                var profile = likes[seg];\n\n                if (profile) {\n\n                    var intensity = profile.intensity;\n                    if (intensity) {\n\n                        segmentScore += intensity / 100;\n                        segments.push(seg);\n\n                    }\n\n                    var prop = profile.prop;\n                    if (prop) {\n\n                        //we want the score value to max at 5\n                        aiValue += prop / 20;\n\n                    } else {\n\n                        //if propbability is not defined, we assumed the base line prob, which is 100 divide by number of options\n                        prop = 100 / profile.options;\n\n\n                        aiValue += prop / 20;\n                    }\n                }\n\n            }\n\n            //take the average?\n            aiValue = aiValue / item.segments.length;\n        }\n\n\n        //need to weight the segment scores, because this will favor food with many segments too much\n        var segmentCount = segments.length;\n        if (segmentCount > 0) {\n            var segmentWeight = 1 + ((segmentCount - 1) / 10);\n            segmentScore = (segmentScore / segmentCount) * segmentWeight;\n        }\n\n\n        var weights = {};\n\n        if (behavior) {\n            weights = behavior.weights || {};\n        }\n\n        var prefWeight = weights[\"preference\"] || 0.3;\n        var ratingWeight = weights[\"rating\"] || 0.4;\n        var popularWeight = weights[\"popularity\"] || 0.3;\n        var autoWeight = weights[\"auto\"] || 0.3;\n\n        var pref = segmentScore * 5.0;\n        var prefScore = pref * prefWeight;\n\n        reasons.push(\n            {\n                type: \"preference\",\n                value: segments,\n                score: prefScore\n            });\n\n\n        ratingScore = rating * ratingWeight;\n        reasons.push(\n            {\n                type: \"rating\",\n                value: rating,\n                score: ratingScore\n            });\n\n        popularityScore = popularity * popularWeight;\n        reasons.push(\n            {\n                type: \"popularity\",\n                value: popularity,\n                score: popularityScore\n            });\n\n\n        var aiScore = aiValue * autoWeight;\n\n        reasons.push(\n            {\n                type: \"ai\",\n                value: aiValue,\n                score: aiScore\n            });\n\n        var result = new Recommendation();\n\n        var featuredScore = item.featuredRating;\n        if (featuredScore && this.shouldFeatured(member, item)) {\n            result.featuredScore = featuredScore;\n            reasons.push(\n                {\n                    type: \"featured\",\n                    value: featuredScore,\n                    score: featuredScore\n                });\n        }\n\n\n        result.score = prefScore + ratingScore + popularityScore + aiScore;\n\n\n        result.reasons = reasons;\n\n        return result;\n    }\n\n    private compareRecommendation(a: Recommendation, b: Recommendation): number {\n\n\n        var fs1 = a.featuredScore ? a.featuredScore : 0;\n        var fs2 = b.featuredScore ? b.featuredScore : 0;\n\n        if (fs1 || fs2) {\n            return (fs1 > fs2) ? -1 : ((fs2 > fs1) ? 1 : 0);\n        }\n\n\n        return (a.score > b.score) ? -1 : ((b.score > a.score) ? 1 : 0);\n\n\n    }\n\n    private shouldFeatured(member: Member, item: Item) {\n\n        if (!item.featuredUsers || item.featuredRating == 0) return false;\n\n        if (member && member.id > 10 && item.featuredUsers.indexOf('member') >= 0) {\n            return true;\n        } else if (!member && item.featuredUsers.indexOf('guest') >= 0) {\n            return true;\n        }\n\n        return false;\n    }\n\n    private setIfHigher(scores: any, type: string, value: number) {\n\n        var existing = scores[type];\n\n        if (!existing || value > existing) {\n            scores[type] = value;\n        }\n    }\n\n    private cleanName(name: string) {\n\n        var result = name.replace(/ *\\([^)]*\\) */g, \"\");\n\n        return result;\n    }\n\n    private log(tag, ...others) {\n        if (!this.debug) return;\n        console.log(tag, others);\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Category, Item, ItemGroup, MathUtils, Member, Order, OrderItem, Pos, Store, TaxRule } from 'aigens-data';\nimport { v4 as uuidv4 } from 'uuid';\nimport { SubscribeService } from '../../pure/services/subscribe.service';\nimport { OrderItemBuilder } from '../base/orderitem-builder';\nimport { AnalyticsService } from '../services/analytics.service';\nimport { ConfigService } from '../services/config.service';\nimport { MenuManager } from './menu-manager';\n\n\n/**\n * Manage order's data(items, discounts, calculation, etc.)\n * Manage order's life cycle (create, update, clear)\n * **/\n\n@Injectable({ providedIn: 'root' })\nexport class SingleOrderManager {\n\n    order: Order;\n\n    count: number = 0;\n    total: number = 0;\n    store: Store;\n    mode: string;\n\n    //cache of main item quantities\n    quantities = {};\n    stores: Store[] = [];\n    upselling: boolean;\n    master: Store;\n    member: Member;\n    users: string[];\n    couponCode: string;\n    cutlery = false;\n    contactless = false;\n    note: string; // the remark of order\n    menuSettings: any = {};\n\n    // grandTotal / crmPointRatio = the point earned\n    crmPointRatio: number;\n    // usedPoint * pointsFactor = amount paid by point\n    pointsFactor: number;\n\n    private letter: string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n    trackAnalytics: boolean = true;\n\n    /**\n     * To store a copy of original order to be restored later\n     */\n    private checkpointOrder = null;\n\n    constructor(private configService: ConfigService, private analyticsService: AnalyticsService, private subscribe: SubscribeService) {\n\n    }\n\n\n    getOrder(): Order {\n        return this.order;\n    }\n\n    setOrder(order: Order) {\n        this.order = order;\n        this.calculate();\n    }\n\n    setStation(station: string) {\n        this.order.stationId = station;\n        this.order.station = this.order.stationId;\n    }\n\n    //createOrder(store: Store, takeout: boolean = false, orderId: string = null, type = null, session?, sourceUrl?) {\n    createOrder(store: Store, mode: string, options: {} = {}) {\n\n        this.order = new Order();\n        this.store = store;\n        this.mode = mode;\n        this.order.type = mode;\n\n        Object.assign(this.order, options);\n\n        console.log('creating order');\n        this.order.storeId = store.id;\n\n        this.order.orderitems = [];\n        this.order.uuid = uuidv4();\n        this.order.deviceId = this.configService.getDeviceId() + \"\";\n        this.order.takeout = false;\n\n        this.order.sourceUrl = window.location.href;\n\n        if (this.member) {\n            this.order.member = this.member;\n\n        }\n\n        if (this.member && this.member.backendId) {\n            this.order.memberNumber = Number(this.member.backendId); //Yoshinoya member\n        }\n\n        /*\n        if (store && store.menu) {\n            this.setDiscounts(store.menu);\n        } //CMS discounts\n        */\n\n        this.upselling = true;\n\n        this.menuSettings = this.store.menu?.settings || {};\n    }\n\n    // DANGER: should change orderManager.mode as well\n    // takeoutChange(takeout: boolean) {\n    //     this.order.takeout = takeout;\n    // }\n\n    setUserPoints(member: Member) {\n        if (!this.order || !member || !member['membership']) {\n            return;\n        }\n\n        var points = member.membership.usablePoints;\n        if (points) {\n            this.order.usablePoints = points;\n\n        }\n\n    }\n\n    setBrandId(id: number) {\n\n        if (this.order) {\n            this.order.brandId = id;\n        }\n    }\n\n    /*\n    setDiscounts(menu: Menu) {\n        let discounts: Discount[] = [];\n\n        if (menu.discounts) {\n            discounts = menu.discounts;\n        }\n\n        this.order.promotions = [];\n\n        discounts.forEach(d => {\n            let promo = new Discount();\n            promo.level = d.level;\n            promo.benefits = [];\n            if (d.benefits) {\n                d.benefits.forEach(b => {\n                    if (b.type == 'unlock' && menu.unlocks) {\n                        promo.unlocks = menu.unlocks;\n                    }\n                    if (b.type == 'gift' && menu.gifts) {\n                        promo.gifts = menu.gifts;\n                    }\n                    promo.benefits.push(Benefit.cloneBenefit(b));\n                });\n            }\n            promo.conditions = [];\n            if (d.conditions) {\n                d.conditions.forEach(c => {\n                    promo.conditions.push(Condition.cloneCondition(c));\n                });\n            }\n            promo.name = d.name;\n            promo.amount = d.amount;\n            promo.available = d.available;\n            promo.backendId = d.backendId;\n            promo.id = d.id;\n            promo.enabled = d.enabled;\n            promo.desc = d.desc;\n            promo.quantity = d.quantity;\n            promo.backendType = d.backendType;\n            promo.periods = d.periods;\n            promo.alone = d.alone;\n            promo.priority = d.priority;\n            promo.group = d.group;\n\n            this.order.promotions.push(promo);\n        });\n    }\n\n    setNewDiscounts(discounts: Discount[], menu?: Menu) {\n        this.order.promotions = [];\n\n        discounts.forEach(d => {\n            let promo = new Discount();\n            promo.level = d.level;\n            promo.benefits = [];\n\n            if (d.benefits) {\n                d.benefits.forEach(b => {\n                    if (menu && b.type == 'unlock' && menu.unlocks) {\n                        promo.unlocks = menu.unlocks;\n                    }\n                    if (menu && b.type == 'gift' && menu.gifts) {\n                        promo.gifts = menu.gifts;\n                    }\n                    promo.benefits.push(Benefit.cloneBenefit(b));\n                });\n            }\n            promo.conditions = [];\n            if (d.conditions) {\n                d.conditions.forEach(c => {\n\n                    promo.conditions.push(Condition.cloneCondition(c));\n                });\n            }\n            promo.name = d.name;\n            promo.amount = d.amount;\n            promo.available = d.available;\n            promo.backendId = d.backendId;\n            promo.id = d.id;\n            promo.enabled = d.enabled;\n            promo.desc = d.desc;\n            promo.quantity = d.quantity;\n            promo.periods = d.periods;\n            promo.group = d.group;\n            promo.alone = d.alone;\n            promo.priority = d.priority;\n\n            this.order.promotions.push(promo);\n        });\n    }\n    */\n\n\n    calcDiscountGrandTotal(order: Order) {\n\n        this.calculateOrder(order);\n        // this.order.grandTotal = MathUtils.round(this.order.total + this.order.handling + this.order.exTax - this.order.discount, 2);\n    }\n\n    public setStores(stores: Store[], masterId: any) {\n        this.stores = stores;\n        if (this.order) {\n            this.order.multi = true;\n        }\n        if (masterId) {\n            this.master = this.getStore(masterId);\n        }\n    }\n\n    setNoUpselling() {\n        this.upselling = false;\n    }\n\n    setMember(member: Member) {\n        this.member = member;\n        if (this.order) {\n            this.order.member = member;\n            if (member.backendId) {\n                this.order.memberNumber = Number(member.backendId); //Yoshinoya\n            }\n        }\n        console.log('set member:', member);\n    }\n\n    setDiscountCode(code: string) {\n        this.order.promoCode = code;\n    }\n\n    setPromoCode(code: string) {\n        this.order.promoCode = code;\n    }\n\n    setDicountCodes(code: string) {\n        this.order.promoCodes.push(code);\n    }\n\n    setPromoCodes(code: string) {\n        this.order.promoCodes.push(code);\n    }\n\n    resetPromoCodes() {\n        this.order.promoCodes = [];\n    }\n\n    setSeats(seats: number) {\n        this.order.seats = seats;\n    }\n\n    setSource(source: string) {\n        this.order.source = source;\n    }\n\n    isUsablePointsEnough(item: Item | OrderItem): boolean {\n        let usablePoints = this.order ? this.order.usablePoints : 0;\n        let usedPoints = this.order ? this.order.usedPoints : 0;\n        let points = item.points ? item.points : 0;\n\n        return usablePoints >= usedPoints + points;\n    }\n\n    //APPROVED\n    refreshOrderItem(orderitem: OrderItem) {\n\n        OrderItem.flattenItems(orderitem);\n\n        this.calculateOrderItem(orderitem);\n\n        this.calculateOrder(this.order);\n\n        console.log(this.order);\n    }\n\n    //APPROVED\n    addOrderItem(orderitem: OrderItem, isRecom: boolean = false, discountId?: string) {\n        if (!this.isUsablePointsEnough(orderitem)) {\n            throw { name: 'points-not-enough', layout: 'toast' }\n        }\n\n        OrderItem.flattenItems(orderitem);\n        orderitem.setRecommended(isRecom);\n        orderitem.setDicountcode(discountId);\n        this.order.orderitems.push(orderitem);\n\n        this.calculateOrderItem(orderitem);\n        this.calculateOrder(this.order);\n\n        if (this.trackAnalytics) {\n\n            this.analyticsService.trackAddToCart(orderitem);\n        }\n\n    }\n\n    //IHLP-30 Combo Flow Refactoring: IHLP-25 requirement, add item to the head\n    addOrderItemRefactor(orderitem: OrderItem, isRecom: boolean = false, discountId?: string) {\n        if (!this.isUsablePointsEnough(orderitem)) {\n            throw { name: 'points-not-enough', layout: 'toast' }\n        }\n\n        OrderItem.flattenItems(orderitem);\n        orderitem.setRecommended(isRecom);\n        orderitem.setDicountcode(discountId);\n        this.order.orderitems.unshift(orderitem);\n\n        this.calculateOrderItem(orderitem);\n        this.calculateOrder(this.order);\n\n        if (this.trackAnalytics) {\n\n            this.analyticsService.trackAddToCart(orderitem);\n        }\n\n    }\n\n    //APPROVED\n    addExistingOrderItem(orderitem: OrderItem) {\n        if (!this.isUsablePointsEnough(orderitem)) {\n            throw { name: 'points-not-enough', layout: 'toast' }\n        }\n\n        orderitem.quantity++;\n\n        this.calculateOrderItem(orderitem);\n        this.calculateOrder(this.order);\n\n        if (this.trackAnalytics) {\n            var index = this.order.orderitems.indexOf(orderitem);\n            if (index !== -1) {\n                this.analyticsService.trackAddToCart(orderitem);\n            }\n        }\n    }\n\n    //APPROVED\n    duplicateOrderItem(orderitem: OrderItem): OrderItem {\n        if (!this.isUsablePointsEnough(orderitem)) {\n            throw { name: 'points-not-enough', layout: 'toast' }\n        }\n\n        var oi = OrderItemBuilder.cloneOrderItem(orderitem, true);\n        this.addOrderItem(oi);\n\n        return oi;\n    }\n\n    //APPROVED\n    replaceOrderItem(old: OrderItem, oi: OrderItem, qty = 1) {\n\n\n        old.groups = oi.groups;\n        old.quantity = qty;\n\n        OrderItem.flattenItems(old);\n\n        this.calculateOrderItem(old);\n        this.calculateOrder(this.order);\n\n        console.log(this.order);\n        //this.$itemChange.next({ orderItem: oi, type: 'edit' });\n    }\n\n    createOrderItem(category: Category, itemgroup: ItemGroup, item: Item) {\n        let builder = new OrderItemBuilder(this.store);\n        builder.setCategory(category);\n        builder.setItem(itemgroup, item, 0);\n        let oi = builder.build();\n        return oi;\n    }\n\n    //APPROVED\n    addSingleItem(category: Category, itemgroup: ItemGroup, item: Item, ignoreModifiers: boolean = true, isRecom: boolean = false, discountId?: string, checkItemMin?): OrderItem {\n\n        console.log('addSingleItem');\n\n        if (!this.isUsablePointsEnough(item)) {\n            throw { name: 'points-not-enough', layout: 'toast' }\n        }\n\n        var orderitem = this.findOrderItem(item, ignoreModifiers);\n\n\n        if (!orderitem || item.type == 'coupon') {\n            var builder = new OrderItemBuilder(this.store);\n            builder.setCategory(category);\n            builder.setItem(itemgroup, item, 0);\n            var oi;\n            if (checkItemMin && item && item.min && item.min > 1) {\n                // 第一次加入的item quality = item.min\n                oi = builder.build(item.min);\n            } else {\n                oi = builder.build();\n            }\n            this.addOrderItem(oi, isRecom, discountId);\n            //this.$itemChange.next({ orderItem: oi, type: 'add', quantity: oi.quantity });\n\n            return oi;\n        } else {\n\n            orderitem.quantity++;\n            this.calculateOrderItem(orderitem);\n            this.calculateOrder(this.order);\n            //this.$itemChange.next({ orderItem: orderitem, type: 'add', quantity: 1 });\n\n\n            return orderitem;\n        }\n\n\n    }\n\n    //IHLP-30 Combo Flow Refactoring, add item to the head\n    addSingleItemRefactor(category: Category, itemgroup: ItemGroup, item: Item, ignoreModifiers: boolean = true, isRecom: boolean = false, discountId?: string, checkItemMin?): OrderItem {\n\n        console.log('addSingleItemRefactor');\n\n        if (!this.isUsablePointsEnough(item)) {\n            throw { name: 'points-not-enough', layout: 'toast' }\n        }\n\n        var builder = new OrderItemBuilder(this.store);\n        builder.setCategory(category);\n        builder.setItem(itemgroup, item, 0);\n        var oi;\n        if (checkItemMin && item && item.min && item.min > 1) {\n            // 第一次加入的item quality = item.min\n            oi = builder.build(item.min);\n        } else {\n            oi = builder.build();\n        }\n        this.addOrderItemRefactor(oi, isRecom, discountId);\n        //this.$itemChange.next({ orderItem: oi, type: 'add', quantity: oi.quantity });\n\n        return oi;\n\n    }\n\n    addSingleItemById(itemId: string): OrderItem {\n\n        console.log(\"adding item by string id\", itemId);\n\n        /*\n        var rimap = this.store?.menu['rimap'];\n        if(!rimap){\n            console.log(\"no rimap\");\n            return null;\n        }\n\n        var e = rimap[itemId];\n        if(!e){\n            console.log(\"no reverse item entry\", itemId);\n            return null;\n        }\n        */\n\n        var e = this.reverseLookupItem(itemId);\n        if (!e) {\n            console.log(\"no reverse item entry\", itemId);\n            return null;\n        }\n        return this.addSingleItem(e.c, e.ig, e.i);\n\n    }\n\n    reverseLookupItem(itemId: string): any {\n\n        var rimap = this.store?.menu['rimap'];\n        if (!rimap) {\n            console.log(\"no rimap\");\n            return null;\n        }\n\n        var e = rimap[itemId];\n        return e;\n\n    }\n\n    setItemQuantity(category: Category, itemgroup: ItemGroup, item: Item, quantity: number, isRecom: boolean = false, discountId?: string, checkItemMin?): OrderItem {\n        if (!this.isUsablePointsEnough(item)) {\n            throw { name: 'points-not-enough', layout: 'toast' }\n        }\n\n        var orderitem = this.findOrderItem(item, true);\n        if (!orderitem) {\n\n            if (quantity <= 0) {\n                return null;\n            }\n\n            var builder = new OrderItemBuilder(this.store);\n            builder.setCategory(category);\n            builder.setItem(itemgroup, item, 0);\n            var oi;\n            if (checkItemMin && item && item.min && item.min > 1) {\n                // 第一次加入的item quality = item.min\n                oi = builder.build(Math.max(item.min, quantity));\n            } else {\n                oi = builder.build(quantity);\n            }\n            this.addOrderItem(oi, isRecom, discountId);\n            //this.$itemChange.next({ orderItem: oi, type: 'add', quantity: oi.quantity });\n\n            return oi;\n        } else {\n            if (quantity <= 0) {\n                this.removeObject(orderitem, this.order.orderitems);\n                if (this.trackAnalytics) {\n                    this.analyticsService.trackRemoveFromCart(orderitem);\n                }\n            }\n\n            orderitem.quantity = quantity;\n            this.calculateOrderItem(orderitem);\n            this.calculateOrder(this.order);\n            //this.$itemChange.next({ orderItem: orderitem, type: 'edit' });\n            return orderitem;\n        }\n    }\n\n    minusItem(item: Item, ignoreModifiers: boolean = true, includesCombo: boolean = false, checkItemMin?) {\n\n        var orderitem = this.findOrderItem(item, ignoreModifiers, includesCombo);\n        if (orderitem) {\n            let minusItem_all = false;\n            if (checkItemMin && item && item.min && item.min > 1 && orderitem.quantity === item.min) {\n                minusItem_all = true;\n            }\n            this.minusOrderItem(orderitem, minusItem_all);\n\n            //this.$itemChange.next({ orderItem: orderitem, type: 'delete' });\n        }\n\n    }\n\n    // remove the combo-orderitem which is top by mainItem\n    minusUnlockItem(mainItem: Item, checkItemMin?) {\n\n        this.minusItem(mainItem, true, true, checkItemMin);\n    }\n\n    minusOrderItem(orderitem: OrderItem, minusItem_all?) {\n\n        if (orderitem) {\n\n            orderitem.quantity--;\n            minusItem_all && (orderitem.quantity = 0);\n            if (orderitem.quantity <= 0) {\n                this.removeObject(orderitem, this.order.orderitems);\n            }\n            if (this.trackAnalytics) {\n                this.analyticsService.trackRemoveFromCart(orderitem);\n            }\n\n            this.calculateOrder(this.order);\n\n        }\n\n    }\n\n    // remove UnlockItem\n    removeUnlockItems(unlockCat: Category) {\n        let unlockCatOrderItems: OrderItem[] = [];\n        this.order?.orderitems.forEach(oi => {\n            if (OrderItem?.isUnlockOrderItem(oi) && oi?.categoryId === unlockCat?.id) {\n                unlockCatOrderItems.push(oi);\n            }\n        })\n        unlockCatOrderItems.map((oi) => { this.minusOrderItem(oi, true) });\n\n        this.calculateOrder(this.order);\n    }\n\n    findOrderItem(item: Item, ignoreModifiers: boolean = true, includesCombo: boolean = false): OrderItem {\n\n        for (let oi of this.order.orderitems) {\n            var groups = oi.groups;\n            if (groups.length == 1 || includesCombo) { // 原始logic 不能通过 combo-item 找到对应的 comboOrderItem; now it will return 最顶层的与 mainItem.id 相同的 orderItem\n                var items = groups[0].items;\n                if (item.id == items[0].id) {\n                    if (ignoreModifiers) {\n                        return oi;\n                    } else {\n                        let mgroups: ItemGroup[] = items[0].mgroups;\n                        if (!mgroups || mgroups.length == 0) {\n                            return oi;\n                        }\n                    }\n\n                }\n            }\n        }\n\n        return null;\n\n    }\n\n    findOrderItemEgift(item: Item, ignoreModifiers: boolean = true, includesCombo: boolean = false): OrderItem {\n\n        for (let oi of this.order.orderitems) {\n            var groups = oi.groups;\n            if (groups.length == 1 || includesCombo) { // 原始logic 不能通过 combo-item 找到对应的 comboOrderItem; now it will return 最顶层的与 mainItem.id 相同的 orderItem\n                var items = groups[0].items;\n                if (item.id == items[0].id && item.custom.recipient === items[0].custom.recipient) {\n                    if (ignoreModifiers) {\n                        return oi;\n                    } else {\n                        let mgroups: ItemGroup[] = items[0].mgroups;\n                        if (!mgroups || mgroups.length == 0) {\n                            return oi;\n                        }\n                    }\n\n                }\n            }\n        }\n\n        return null;\n\n    }\n\n    getQuantity(item: Item) {\n\n        var result = this.quantities[item.id];\n        if (!result) {\n            result = 0;\n        }\n\n        return result;\n\n    }\n\n    calculate(changeEmit = true) {\n        this.calculateOrder(this.order, changeEmit);\n    }\n\n\n    settingOrderType(type: string) {\n        if (!this.order) {\n            return;\n        }\n\n        this.order.type = type;\n        this.order.takeout = type == 'takeaway';\n    }\n\n    isTakeout() {\n        return this.mode === 'takeaway';\n    }\n\n    isEmpty() {\n        if (!this.order || !this.order.orderitems) {\n            return true;\n        }\n\n        return this.order.orderitems.length == 0;\n    }\n\n    clear() {\n        this.order = null;\n        this.count = 0;\n        this.total = 0;\n        this.quantities = {};\n        this.member = null;\n        this.users = null;\n        this.mode = null;\n\n        if (this.subscribe) {\n            this.subscribe.next('order', null);\n        }\n    }\n\n    clearOrderItems() {\n\n        var list = this.order.orderitems;\n\n        this.order.orderitems = [];\n        this.calculate();\n\n        //this.order$.next(this.order);\n\n        //this.$itemChange.next(null);\n\n        if (this.trackAnalytics) {\n            for (let oi of list) {\n                this.analyticsService.trackRemoveFromCart(oi);\n            }\n        }\n\n    }\n\n    getStore(storeId): Store {\n\n\n        let t = this.store;\n\n        if (this.stores) {\n            for (let store of this.stores) {\n                if (store.id == storeId) {\n                    t = store;\n                    break;\n                }\n            }\n        }\n\n        return t;\n    }\n\n    getMultiOrders(order, masterId: any): Order[] {\n        if (!order.multi) {\n            return [order];\n        } else {\n            let index = 0;\n\n            let t = JSON.parse(JSON.stringify(order));\n            t.orderitems = [];\n            let result = new Map<number, Order>();\n            order.orderitems.forEach(oi => {\n                if (result && result.has(oi.storeId)) {\n                    let temp = result.get(oi.storeId);\n                    temp.orderitems.push(oi);\n                    console.log('push updated order', temp);\n                    result.set(oi.storeId, temp);\n                } else {\n                    let temp: Order = JSON.parse(JSON.stringify(t));\n                    temp.backendId = temp.orderNo;\n                    temp.orderNo = this.getOrderNumber(temp.orderNo, index);\n                    temp.orderitems.push(oi);\n                    temp.storeId = oi.storeId;\n                    temp.uuid = uuidv4();\n                    console.log('push order', temp);\n                    result.set(oi.storeId, temp);\n                    index++;\n                }\n            });\n            let temp = [];\n            let i = 0;\n            result.forEach(order => {\n                let master = this.getStore(masterId);\n                let store = this.getStore(order.storeId);\n                let first = i == 0;\n\n                order = this.calculateOrderSafe(order, master, first);\n                order.printers = store.printers;\n                temp.push(order);\n\n                i++;\n            });\n            console.log('multi Order return,', temp);\n            return temp;\n        }\n    }\n\n    public isOnlyPointsItem() {\n        let orderItems = (this.order && this.order.orderitems) || [];\n        if (orderItems.length == 0) {\n            return false;\n        }\n        let result = orderItems.some(oi => {\n            if (!oi || !oi.categoryType || oi.categoryType != 'points') {\n                return true;\n            }\n            return false;\n        });\n        return !result;\n    }\n\n    //calculate the net total need to pay\n    getNetAmount() {\n        let result = 0;\n        let master = this.getMasterStore();\n        let settings = this.menuSettings;\n        let point = this.pointsFactor * this.order.usedPoints;\n        if (isNaN(point) || point === null) {\n            point = 0;\n        }\n        if (settings && settings.checkoutTrimDecimals && settings.checkoutTrimDecimalsMode) {\n            let precision = this.menuSettings.checkoutTrimDecimalsPlace;\n            if ((typeof precision) !== 'number') {\n                precision = this.getStoreGrandTotalPrecision(master.currency);\n            }\n            if (this.menuSettings.checkoutTrimDecimalsMode === 'rounddown') {\n                result = MathUtils.floor(this.order.grandTotal - point, precision);\n            } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundup') {\n                result = MathUtils.ceil(this.order.grandTotal - point, precision);\n            } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundhalfup') {\n                result = MathUtils.round(this.order.grandTotal - point, precision);\n            } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundtonear5') {\n                result = MathUtils.roundToNearest5(this.order.grandTotal - point, precision);\n            } else {\n                console.warn('invalid checkoutTrimDecimalsMode setting', this.menuSettings);\n                result = MathUtils.round(this.order.grandTotal - point, precision);\n            }\n        } else {\n            let p = this.getStoreGrandTotalPrecision(master.currency);\n            result = MathUtils.round(this.order.grandTotal - point, p);\n        }\n\n\n        return result;\n    }\n\n    getOfferItemPriceSafe(): number {\n        var price = 0;\n        if (this.order && this.order.offers) {\n            for (let offer of this.order.offers) {\n                for (let orderItem of offer.orderitems) {\n                    price = price + orderItem.total;\n                }\n            }\n\n        }\n\n        this.setStoreGrandTotalFormat();\n        /*\n        let settings = this.menuSettings;\n\n        if (settings && settings.checkoutTrimDecimalsMode) {\n            this.setStoreGrandTotalFormat(this.order.grandTotal);\n        }*/\n\n        return price;\n    }\n\n    private removeObject(object: any, array: any[]) {\n\n        var idx = array.indexOf(object);\n\n        if (idx != -1) {\n\n            array.splice(idx, 1);\n\n        }\n\n    }\n\n    private calculateOrder(order: Order, changeEmit = true) {\n\n        var count = 0;\n        var total = 0;\n        var usedPoints = 0;\n        var usedPointsForItem = 0;// 存储 当前积分兑换item flow中使用的积分数\n\n        var quantities = {};\n\n        console.log('calculate order', this.order);\n\n        for (let oi of this.order.orderitems) {\n\n            // if (!OrderItem.isSet(oi)) {\n\n            count += oi.quantity;\n            let t = oi.quantity * oi.total;\n            total += MathUtils.round(t, 2);\n\n            var mainItemId = oi.items[0].id;\n            var quantity = quantities[mainItemId];\n            if (!quantity) {\n                quantity = 0;\n            }\n            quantity += oi.quantity;\n            quantities[mainItemId] = quantity;\n            // } else {\n\n            //     count += oi.quantity;\n            //     let t = oi.quantity * oi.total;\n            //     total += MathUtils.round(t, 2);\n            //     var mainItemId = oi.items[0].id;\n            //     var quantity = quantities[mainItemId];\n            //     if (!quantity) quantity = 0;\n            //     quantity += oi.quantity;\n            //     quantities[mainItemId] = quantity;\n            // }\n            // oi.points is not used in byod v2\n            usedPoints += (oi.points * oi.quantity);\n            usedPointsForItem += (oi.points * oi.quantity);\n        }\n\n        total = MathUtils.round(total, 2);\n\n        this.count = count;\n        this.total = total;\n        this.quantities = quantities;\n\n        this.order.grandTotal = total;\n        this.order.total = total;\n        if (!this.order.discount) {\n            this.order.discount = 0;\n        }\n        this.order.handling = this.getHandling();\n        // this.order.usedPoints = usedPoints;\n\n        this.order.usedPointsForItem = usedPointsForItem;\n\n        this.calculateUsedPoints(usedPointsForItem, this.order.usedPointsToMoney);\n\n        this.order.serviceCharge = this.getServiceCharge();\n        this.order.tax = this.getTax();\n        //regenerate uuid, meaning the order is changed\n        this.calcGrandTotal();\n        this.order.uuid = uuidv4();\n\n        //this.order$.next(this.order);\n        //changeEmit && this.onOrderitemsChange.emit(\"order change\");\n        if (this.subscribe) {\n            this.subscribe.next('order', this.order);\n        }\n    }\n\n    calculateUsedPoints(usedPointsForItem, usedPointsToMoney) {\n        !usedPointsForItem && (usedPointsForItem = 0);\n        !usedPointsToMoney && (usedPointsToMoney = 0);\n        if (usedPointsForItem === 0 && usedPointsToMoney === 0) {\n            this.order.usedPoints = 0;\n            return;\n        } //只有v3 才有 usedPointsToItem and usedPointsToMoney,防止干扰v2 v1\n        this.order.usedPoints = usedPointsForItem + usedPointsToMoney; // 目前v3 usedPoints只有兑换item 和 抵消部分价钱\n    }\n\n    private calculateOrderSafe(order: Order, store: Store, first: boolean) {\n\n        var count = 0;\n        var total = 0;\n\n        var quantities = {};\n\n        console.log('calculate order', order);\n\n        for (let oi of order.orderitems) {\n\n            if (!OrderItem.isSet(oi)) {\n\n                count += oi.quantity;\n                let t = oi.quantity * oi.total;\n                total += MathUtils.round(t, 2);\n\n                var mainItemId = oi.items[0].id;\n                var quantity = quantities[mainItemId];\n                if (!quantity) {\n                    quantity = 0;\n                }\n                quantity += oi.quantity;\n                quantities[mainItemId] = quantity;\n            } else {\n\n                count += oi.quantity;\n                let t = oi.quantity * oi.total;\n                total += MathUtils.round(t, 2);\n\n            }\n        }\n\n        total = MathUtils.round(total, 2);\n\n        order.grandTotal = total;\n        order.total = total;\n        if (!order.discount) {\n            order.discount = 0;\n        }\n        order.handling = this.getHandlingSafe(order, store, first);\n\n        order.grandTotal = MathUtils.round(order.total + order.handling - order.discount, 2);\n\n        order.tax = this.getTaxSafe(order, store);\n\n        //regenerate uuid, meaning the order is changed\n        order.uuid = uuidv4();\n\n        // console.log(\"listener\", this.listener);\n        // if (this.listener) {\n        //     this.listener.onOrderChanged(this.order);\n        // }\n\n        return order;\n    }\n\n    getSafeNum(value) {\n        return (isNaN(value) || value === null) ? 0 : value;\n    }\n\n    getPrecision(defaultPrecision = 0): number {\n        let precision = defaultPrecision;\n        try {\n            let master = this.getMasterStore();\n            let settings = this.menuSettings;\n            if (settings && settings.checkoutTrimDecimals && (typeof settings.checkoutTrimDecimalsPlace) === 'number') {\n                if ((typeof settings.checkoutTrimDecimalsPlace) === 'number') {\n                    return this.menuSettings.checkoutTrimDecimalsPlace;\n                }\n            }\n            precision = this.getStoreGrandTotalPrecision(master.currency);\n        } catch (error) {\n\n        }\n        return precision;\n    }\n\n    private calcGrandTotal() {\n        let master = this.getMasterStore();\n        let settings = this.menuSettings;\n        let p = this.getStoreGrandTotalPrecision(master.currency);\n\n        let taxExclusiveAmount = 0;\n        if (this.order && this.order.taxes && this.order.taxes.length > 0) {\n            this.order.taxes.forEach((taxR) => {\n                if (!taxR.inclusive) {\n                    taxExclusiveAmount += taxR.amount;\n                }\n            });\n        } else {\n            taxExclusiveAmount = this.order.tax;\n        }\n        let rawGrandTotal = this.getSafeNum(this.order.total) - this.getSafeNum(this.order.discount) + this.getSafeNum(this.order.handling) + this.getSafeNum(this.order.serviceCharge) + this.getSafeNum(taxExclusiveAmount) + this.getSafeNum(this.order.shipping);\n\n        if (settings && settings.checkoutTrimDecimals && settings.checkoutTrimDecimalsMode) {\n            let precision = this.menuSettings.checkoutTrimDecimalsPlace;\n            if ((typeof precision) !== 'number') {\n                precision = this.getStoreGrandTotalPrecision(master.currency);\n            }\n            if (this.menuSettings.checkoutTrimDecimalsMode === 'rounddown') {\n                //this.order.discount = Math.floor(this.order.discount);\n                this.order.grandTotal = MathUtils.floor(rawGrandTotal, precision);\n            } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundup') {\n                this.order.grandTotal = MathUtils.ceil(rawGrandTotal, precision);\n            } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundhalfup') {\n                this.order.grandTotal = MathUtils.round(rawGrandTotal, precision);\n            } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundtonear5') {\n                this.order.grandTotal = MathUtils.roundToNearest5(rawGrandTotal, precision);\n            } else {\n                console.warn('invalid checkoutTrimDecimalsMode setting', this.menuSettings);\n                this.order.grandTotal = MathUtils.round(rawGrandTotal, precision);\n            }\n        } else {\n            this.order.grandTotal = MathUtils.round(rawGrandTotal, p);\n        }\n\n        this.order.grandTotal = this.order.grandTotal > 0 ? this.order.grandTotal : 0;\n\n        let overpay = 0;\n        this.order.discounts.forEach((discount) => {\n            if (discount.overpay) {\n                overpay += discount.overpay;\n            }\n        });\n        this.order.overpay = overpay;\n\n    }\n\n    // order.discount and order.handling which are calculate.json return are differnet form ng-core\n    // frontend force to cover the order.handlin and order.discount in this.orderManager.order\n    calcGrandTotalServer() {\n        this.calcGrandTotal();\n    }\n\n    private setStoreGrandTotalFormat() {\n        let taxExclusiveAmount = 0;\n        if (this.order && this.order.taxes && this.order.taxes.length > 0) {\n            this.order.taxes.forEach((taxR) => {\n                if (!taxR.inclusive) {\n                    taxExclusiveAmount += taxR.amount;\n                }\n            });\n        } else {\n            taxExclusiveAmount = this.order.tax;\n        }\n\n        let precision = this.menuSettings.checkoutTrimDecimalsPlace;\n        if ((typeof precision) !== 'number') {\n            let master = this.getMasterStore();\n            precision = this.getStoreGrandTotalPrecision(master.currency);\n        }\n        if (this.menuSettings.checkoutTrimDecimalsMode === 'rounddown') {\n            //this.order.discount = Math.floor(this.order.discount);\n            this.order.grandTotal = MathUtils.floor(this.order.total - this.order.discount + this.order.handling + this.order.serviceCharge + taxExclusiveAmount + this.order.shipping, precision);\n        } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundup') {\n            this.order.grandTotal = MathUtils.ceil(this.order.total - this.order.discount + this.order.handling + this.order.serviceCharge + taxExclusiveAmount + this.order.shipping, precision);\n        } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundhalfup') {\n            this.order.grandTotal = MathUtils.round(this.order.total - this.order.discount + this.order.handling + this.order.serviceCharge + taxExclusiveAmount + this.order.shipping, precision);\n        } else if (this.menuSettings.checkoutTrimDecimalsMode === 'roundtonear5') {\n            this.order.grandTotal = MathUtils.roundToNearest5(this.order.total - this.order.discount + this.order.handling + this.order.serviceCharge + taxExclusiveAmount + this.order.shipping, precision);\n        } else {\n            this.order.grandTotal = MathUtils.round(this.order.total - this.order.discount + this.order.handling + this.order.serviceCharge + taxExclusiveAmount + this.order.shipping, precision);\n        }\n    }\n\n    public getStoreGrandTotalPrecision(currency) {\n        if (!currency) {\n            return 1;\n        }\n        let c = currency.slice(0, 2);\n        if ('HK' === c) {\n\n            return 1;\n        } else if ('SG' === c) {\n            return 2;\n        } else if ('MY' === c) {\n            return 2;\n        } else if ('CN' === c) {\n            return 2;\n        } else if ('TW' === c) {\n            //return \"TWD\";\n        } else if ('MO' === c) {\n            //return \"MOP\";\n        } else if ('US' === c) {\n            return 2;\n        } else if ('CA' === c) {\n            return 2;\n        } else if ('IN' === c) {\n            //return \"INR\";\n        } else if ('VN' === c) {\n            //return \"VND\";\n        } else if ('AU' === c) {\n            return 2;\n        } else if ('NZ' === c) {\n            //return \"NZD\";\n        } else if ('KR' === c) {\n            //return \"KRW\";\n        } else if ('ID' === c) {\n            //return \"IDR\";\n        } else if ('TH' === c) {\n            //return \"THB\";\n        } else if ('EU' === c) {\n            return 2;\n        }\n        return 1;\n    }\n\n\n    private getHandling(): number {\n\n        let handling: number = 0;\n\n        if (this.isEmpty()) {\n            return handling;\n        }\n\n        handling += this.handleTakeawayCharge();\n\n        handling += this.handleDeliveryCharge();\n\n\n        return handling;\n    }\n\n    private getHandlingSafe(order, store, first: boolean): number {\n\n        let handling: number = 0;\n\n        if (this.isEmpty()) {\n            return handling;\n        }\n\n        handling += this.handleTakeawayChargeSafe(order, store, first);\n\n        handling += this.handleDeliveryChargeSafe(order, store, first);\n\n\n        return handling;\n    }\n\n    initOrdersMes(orders = [], wholeDiscounts, orderManagerMap): any {\n        let ordersMes = {\n            total: 0,\n            tax: 0,\n            serviceCharge: 0,\n            grandTotal: 0,\n            discount: 0,\n            pointsFactor: 0,\n            pointEarned: 0,\n            currencySign: '',\n            orderitems: [],\n            promotions: [],\n            promoCodes: [],\n            discounts: [],\n            takeout: false\n        };\n        // hardcode currencySign = store.currencySign (which the first order in)\n        if (orderManagerMap[orders[0].storeId]) {\n            ordersMes.currencySign = orderManagerMap[orders[0].storeId].store.currencySign;\n        }\n        orders.forEach((order) => {\n            ordersMes.total += order.total;\n            ordersMes.tax += order.tax;\n            ordersMes.serviceCharge += order.serviceCharge;\n            ordersMes.grandTotal += order.grandTotal;\n            ordersMes.orderitems = ordersMes.orderitems.concat(order.orderitems);\n            ordersMes.promotions = wholeDiscounts;\n            // todo pointsFactor pointEarned\n        });\n        ordersMes.takeout = orders && orders[0] && orders[0].takeout; // condition.type === \"ordertype\" 时需要用到这个takeout属性\n        return ordersMes;\n    }\n\n    private getMasterStore() {\n        if (!this.master) {\n            return this.store;\n        }\n\n        return this.master;\n    }\n\n    private handleTakeawayCharge(): number {\n\n        let handling: number = 0;\n\n        if (this.order.type == 'takeaway' || (this.order.type == 'kiosk' && this.order.takeout)) {\n\n            let pickupCharge: number = 0;\n            let pickupItemCharge: number = 0;\n\n            let master = this.getMasterStore();\n\n            if (master.menu) {\n                pickupCharge = master.menu.pickupCharge;\n                pickupItemCharge = master.menu.pickupItemCharge;\n            }\n\n            handling = pickupCharge;\n\n\n            if (pickupItemCharge > 0) {\n\n                this.order.orderitems.forEach(oi => {\n\n                    let mainItem = OrderItem.getMainItem(oi);\n                    if (mainItem.packing && mainItem.packing > 0) {\n                        oi.handling = MathUtils.round(oi.quantity * pickupItemCharge * mainItem.packing, 2);\n                        handling += oi.handling;\n                    }\n                    // else\n                    // {\n                    //     //if do not set packing, default\n                    //     oi.handling = MathUtils.round(oi.quantity * pickupItemCharge, 2);\n                    //     handling += oi.handling;\n                    // }\n                });\n            }\n\n            this.order.orderitems.forEach(oi => {\n                let mainItem = OrderItem.getMainItem(oi);\n                if (mainItem.handling) {\n                    oi.handling = MathUtils.round(oi.quantity * mainItem.handling, 2);\n                    handling += oi.handling;\n                }\n            });\n\n            handling = MathUtils.round(handling, 2);\n\n            //this.order.grandTotal = Number((this.order.total + this.order.handling).toFixed(2));\n            console.log('order pickupItemCharge', this.count * pickupItemCharge);\n            console.log('order pickupCharge', pickupCharge);\n\n            //add package handling as item\n            let packageCode = master.menu?.settings.packageCode;\n            let menu = master.menu;\n            let category: Category;\n            if (packageCode) {\n                let unlocks = menu.unlocks;\n                let packageitem = null;\n                unlocks && unlocks.forEach(cat => {\n                    for (let item of cat.groups[0].items) {\n                        if (item.backendId === packageCode) {\n                            packageitem = item;\n                            category = cat;\n                            break;\n                        }\n                    }\n                });\n                if (packageitem) {\n                    let count = 0;\n                    this.order.orderitems.forEach(oi => {\n                        let mainItem = OrderItem.getMainItem(oi);\n                        let packageUnit = 0;\n                        packageUnit = mainItem.packing ? mainItem.packing : 0;\n                        if (mainItem.backendId !== packageCode) {\n                            count += (oi.quantity) * packageUnit;\n                        }\n                    });\n                    var orderitem = this.findOrderItem(packageitem, true);\n                    if (orderitem) {\n                        orderitem.quantity = count;\n                    } else {\n                        while (count--) {\n                            this.addSingleItem(category, category.groups[0], packageitem);\n                        }\n\n                    }\n                }\n            }\n\n        }\n\n        return handling;\n    }\n\n    private handleDeliveryCharge(): number {\n\n        let handling: number = 0;\n\n        if (this.order.type == 'delivery') {\n\n            let deliveryCharge: number = 0;\n\n            let master = this.getMasterStore();\n\n            if (master.menu) {\n                deliveryCharge = master.menu.deliveryCharge;\n            }\n\n            handling = deliveryCharge;\n            //this.order.grandTotal = Number((this.order.total + this.order.handling).toFixed(2));\n            console.log('order deliveryCharge', deliveryCharge);\n\n        }\n\n        return handling;\n    }\n\n    private handleTakeawayChargeSafe(order: Order, store: Store, first: boolean): number {\n\n        let handling: number = 0;\n\n        if (order.type == 'takeaway' || (order.type == 'kiosk' && order.takeout)) {\n\n            let pickupCharge: number = 0;\n            let pickupItemCharge: number = 0;\n\n            if (store.menu) {\n                pickupItemCharge = store.menu.pickupItemCharge;\n\n                if (first) {\n                    pickupCharge = store.menu.pickupCharge;\n                }\n            }\n\n            handling = pickupCharge;\n\n            if (pickupItemCharge > 0) {\n\n                this.order.orderitems.forEach(oi => {\n                    oi.handling = MathUtils.round(oi.quantity * pickupItemCharge, 2);\n                    handling += oi.handling;\n                });\n            }\n\n            order.orderitems.forEach(oi => {\n                let mainItem = OrderItem.getMainItem(oi);\n                if (mainItem.handling) {\n                    oi.handling = MathUtils.round(oi.quantity * mainItem.handling, 2);\n                    handling += oi.handling;\n                }\n            });\n\n            handling = MathUtils.round(handling, 2);\n\n            //this.order.grandTotal = Number((this.order.total + this.order.handling).toFixed(2));\n            //console.log(\"order pickupItemCharge\", count * pickupItemCharge);\n            //console.log(\"order pickupCharge\", pickupCharge);\n\n        }\n\n        return handling;\n    }\n\n    private handleDeliveryChargeSafe(order, store, first: boolean): number {\n\n        let handling: number = 0;\n\n        if (order.type == 'delivery') {\n\n            let deliveryCharge: number = 0;\n\n            if (store.menu && first) {\n                deliveryCharge = store.menu.deliveryCharge;\n            }\n\n            handling = deliveryCharge;\n            //this.order.grandTotal = Number((this.order.total + this.order.handling).toFixed(2));\n            console.log('order deliveryCharge', deliveryCharge);\n\n        }\n\n        return handling;\n    }\n\n    private calculateExTax(rule: TaxRule, item: Item, oIQty: number, taxBreakDown: any) {\n\n        let amount1 = this.addSubTax(rule.rate1, rule.alias1, item, oIQty, taxBreakDown, rule);\n        let amount2 = this.addSubTax(rule.rate2, rule.alias2, item, oIQty, taxBreakDown, rule);\n        let amount3 = this.addSubTax(rule.rate3, rule.alias3, item, oIQty, taxBreakDown, rule);\n        // let result = amount1 + amount2 + amount3;\n        // let percent = MathUtils.round( result / item.price, 2);\n        // console.log(\"item \"+ item.name + \", tax: \" + percent *100 + \"%\");\n    }\n\n    private addSubTax(taxRate: number, taxAlias: string, item: Item, oIQty: number, taxBreakDown: any, taxRule?: TaxRule): number {\n        let amount;\n        if (!taxRule || !taxRule.inclusive) {\n            amount = oIQty * item.quantity * (item.price - item.discount) * taxRate; //NOT handle discounted price\n        } else {\n            amount = oIQty * item.quantity * (item.price - item.discount) * taxRate / (1 + taxRate); //NOT handle discounted price\n        }\n        if (!amount) {\n            return 0;\n        }\n\n        let now = taxBreakDown.get(taxAlias);\n        let nowTaxAmount: number = 0;\n        let nowTotal: number = 0;\n        if (now) {\n            nowTaxAmount = now.amount;\n            nowTotal = now.total;\n        }\n\n\n        let precision = this.getPrecision();\n        taxBreakDown.set(taxAlias, {\n            amount: nowTaxAmount + amount,\n            inclusive: taxRule.inclusive,\n            total: MathUtils.round(nowTotal + (oIQty * item.quantity * (item.price - item.discount)), precision),\n            rate: taxRate,\n            name: taxRule.name\n        });\n        return amount;\n    }\n\n    private getServiceCharge(): number {\n        let serviceCharge: number = 0;\n\n        let master = this.getMasterStore();\n        if (master.menu && master.menu.settings && master.menu.settings.serviceChargeApplyOrderType) {\n            // if serviceChargeApplyOrderType is set and is not currently in use\n            if (master.menu.settings.serviceChargeApplyOrderType !== this.order.type) {\n                return 0;\n            }\n        }\n\n        if (master.menu && master.menu.serviceCharge && master.menu.serviceCharge > 0) {\n            var serviceChargeRate = (master.menu.serviceCharge / 100);\n            //serviceChargeRate = MathUtils.round(serviceChargeRate, 2);\n\n            //todo?? not first discount\n            // let discountableTotal = condition.discounted ? order.grandTotal : order.total;\n            let itemCanServiceChargeTotal = 0;\n\n            this.order.orderitems.forEach(oi => {\n\n                let oiServiceCharge = 0;\n                oi.items.forEach(item => {\n                    if (item.serviceChargeable) {\n                        let sc = item.price * (item.quantity * oi.quantity);\n                        itemCanServiceChargeTotal += sc;\n\n                        oiServiceCharge += sc;\n                    }\n                });\n\n                oi.serviceCharge = MathUtils.round(oiServiceCharge * serviceChargeRate, 2);\n            });\n\n            let serviceChargeTotal;\n            if (master.menu && master.menu.settings && master.menu.settings.serviceChargeApplyAfterDiscounted) {\n                serviceChargeTotal = (itemCanServiceChargeTotal - (this.order.discount * itemCanServiceChargeTotal / this.order.grandTotal)) * serviceChargeRate;\n            } else {\n                serviceChargeTotal = itemCanServiceChargeTotal * serviceChargeRate;\n            }\n            var serviceChargeAmount = MathUtils.round(serviceChargeTotal, 2);\n\n            this.order.grandTotal = MathUtils.round(this.order.grandTotal + serviceChargeAmount, 2);\n            console.log('order service charge amount and rate', serviceChargeAmount, serviceChargeRate);\n            return serviceChargeAmount;\n        } else {\n            return 0;\n        }\n\n    }\n\n    private getTax(): number {\n\n        let tax: number = 0;\n\n        let master = this.getMasterStore();\n        if (master.menu && master.menu.taxRules && master.menu.taxRules.length > 0) {\n\n            var taxRules = master.menu.taxRules;\n            let tempRule = [];\n            //tax rule priority\n            //mode (server filter) => priority => inclusive?\n            if (taxRules && taxRules.length > 0) {\n                taxRules = taxRules.sort((a, b) => b.priority - a.priority);\n                let p = taxRules[0].priority;\n                tempRule = taxRules.filter(r => r.priority == p);\n                taxRules = tempRule;\n            }\n\n            // taxRules = taxRules.filter(r => !r.inclusive);\n\n            let rules = new Map<string, TaxRule>();\n            taxRules.forEach(rule => {\n                if (rule.itemType && !rules.has(rule.itemType)) {\n                    rules.set(rule.itemType, rule);\n                }\n            });\n\n            console.log('Tax Rules: ', rules);\n\n            let taxBreakDown = new Map<string, any>();\n\n            this.order.orderitems.forEach(oi => {\n                let items = OrderItem.getFlattenItems(oi, true);\n\n                for (let item of items) {\n                    //if (!item.taxGroup) continue;\n                    let itemType = '';\n                    if (!item.taxGroup) {\n                        itemType = 'all';\n                    } else {\n                        itemType = item.taxGroup;\n                    }\n                    if (rules.has(itemType)) {\n                        let rule: TaxRule = rules.get(itemType);\n                        this.calculateExTax(rule, item, oi.quantity, taxBreakDown);\n                    } else {\n                        console.log('Missing Tax Type: ', itemType);\n                    }\n\n                }\n            });\n\n            let serviceChargeTaxable = this.menuSettings.serviceChargeTaxable;\n\n            if (this.order.serviceCharge != null && this.order.serviceCharge > 0 && serviceChargeTaxable) {\n\n                let serviceItem = new Item();\n                serviceItem.name = 'Service Charge';\n                serviceItem.price = this.order.serviceCharge;\n                serviceItem.quantity = 1;\n                let rule: TaxRule = rules.get('all');\n                if (rule != null) {\n                    this.calculateExTax(rule, serviceItem, 1, taxBreakDown);\n                }\n            }\n\n            let handlingChargeTaxable = this.menuSettings.handlingChargeTaxable;\n            if (this.order.handling != null && this.order.handling > 0 && handlingChargeTaxable) {\n\n\n                let handlingChargeItem = new Item();\n                handlingChargeItem.name = 'Handling Charge';\n                handlingChargeItem.price = this.order.handling;\n                handlingChargeItem.quantity = 1;\n                let rule: TaxRule = rules.get('all');\n                if (rule != null) {\n                    this.calculateExTax(rule, handlingChargeItem, 1, taxBreakDown);\n                }\n            }\n\n            // Handle  tax calculation is after the points as payment. When this flag is enabled, tax calculation goes first then points as payment\n            if (!this.menuSettings.pointsAsPaymentAfterTax) {\n                let pointsRedeemItem = new Item();\n                pointsRedeemItem.name = 'points Redeem';\n                let point = this.pointsFactor * this.order.usedPoints;\n                if (isNaN(point) || point === null) {\n                    point = 0;\n                }\n                if (point !== 0) {\n                    pointsRedeemItem.price = -point;\n                    pointsRedeemItem.quantity = 1;\n                    let rule: TaxRule = rules.get('all');\n                    if (rule != null) {\n                        this.calculateExTax(rule, pointsRedeemItem, 1, taxBreakDown);\n                    }\n                }\n            }\n\n            // Handle order level discount\n            // discount is just a negative priced item\n\n            const taxIgnoreDiscount = this.store?.menu?.settings?.taxIgnoreDiscount;\n\n            if (this.order.discount > 0 && !taxIgnoreDiscount) {\n\n                let discountItem = new Item();\n                discountItem.name = 'Discount';\n                if (this.order.discount > this.order.grandTotal) {\n                    discountItem.price = 0;\n                } else {\n                    discountItem.price = -this.order.discount;\n                }\n\n                discountItem.quantity = 1;\n                let rule: TaxRule = rules.get('all');\n                if (rule != null) {\n                    this.calculateExTax(rule, discountItem, 1, taxBreakDown);\n                }\n            }\n            // Handle order level discount end\n\n            this.order.taxes = [];\n            let precision = this.getPrecision();\n            taxBreakDown.forEach((obj, key, map) => {\n                let amount = obj['amount'];\n                let line = {\n                    //name: key,\n                    name: obj['name'],\n                    // value: amount, // legacy field?\n                    amount: MathUtils.round(amount, precision),\n                    inclusive: obj['inclusive'],\n                    total: obj['total'],\n                    rate: obj['rate'],\n                };\n\n                if (!obj['inclusive']) {\n                    tax += amount;\n                }\n                this.order.taxes.push(line);\n            });\n            tax = MathUtils.round(tax, precision);\n\n            // this.order.grandTotal = MathUtils.round(this.order.grandTotal + tax, 2);\n\n            console.log('order taxes', this.order.taxes);\n\n        } else {\n\n            if (master.menu && !master.menu.taxIncluded) {\n\n\n                tax = master.menu.tax;\n\n\n                if (!tax || !Number(tax)) {\n                    tax = 0;\n                }\n\n\n                if (tax > 0) {\n                    let gst: number = (this.order.grandTotal / (100 + tax)) * tax;\n                    tax = MathUtils.round(gst, 2);\n                }\n            }\n        }\n        console.log('order tax', tax);\n\n        return tax;\n\n\n    }\n\n    public setShippingFee(shipping) {\n        this.order.shipping = shipping;\n    }\n\n    private getTaxSafe(order, store): number {\n\n        let tax: number = 0;\n\n        if (store.menu && store.menu.taxRules && store.menu.taxRules.length > 0) {\n\n            var taxRules = store.menu.taxRules;\n\n            let rules = new Map<string, TaxRule>();\n            taxRules.forEach(rule => {\n                if (rule.itemType && !rules.has(rule.itemType)) {\n                    rules.set(rule.itemType, rule);\n                }\n            });\n\n            let taxBreakDown = new Map<string, number>();\n\n            order.orderitems.forEach(oi => {\n\n                let items = OrderItem.getFlattenItems(oi, true);\n\n                for (let item of items) {\n                    if (!item.taxGroup) {\n                        continue;\n                    }\n\n                    let itemType = item.taxGroup;\n                    if (rules.has(itemType)) {\n                        let rule: TaxRule = rules.get(itemType);\n                        this.calculateExTax(rule, item, oi.quantity, taxBreakDown);\n                    } else {\n                        console.log('Missing Tax Type: ', itemType);\n                    }\n\n                }\n            });\n\n\n            order.taxes = [];\n            taxBreakDown.forEach((value, key, map) => {\n                let amount = MathUtils.round(value, 2);\n                let line = {\n                    name: key,\n                    value: amount\n                };\n                tax += value;\n                order.taxes.push(line);\n            });\n            tax = MathUtils.round(tax, 2);\n            order.grandTotal = MathUtils.round(order.grandTotal + tax, 2);\n\n            console.log('order taxes', order.taxes);\n\n        } else {\n\n            if (store.menu) {\n                tax = store.menu.tax;\n            }\n\n            if (!tax || !Number(tax)) {\n                tax = 0;\n            }\n\n\n            if (tax > 0) {\n                let gst: number = (order.grandTotal / (100 + tax)) * tax;\n                tax = MathUtils.round(gst, 2);\n            }\n        }\n        console.log('order tax', tax);\n        return tax;\n\n\n    }\n\n    private calculateOrderItem(orderitem: OrderItem) {\n\n        var total = 0;\n\n        for (let item of orderitem.items) {\n            var q = item.quantity;\n\n            if (!!item.baseQty) {\n                if ((q - item?.baseQty) > 0) { q = (q - item?.baseQty); }\n                else { q = 0; }\n            }\n\n            //if (!q || q < 0) q = 1;\n            let t = item.price * q;\n\n            total += MathUtils.round(t, 2);\n        }\n\n        orderitem.total = MathUtils.round(total, 2);\n\n    }\n\n    private getOrderNumber(orderNumber: string, index: number) {\n\n        if (index == -1) {\n            return orderNumber;\n        }\n\n        let suffix = this.letter.charAt(index);\n\n        return orderNumber + suffix;\n    }\n\n    //APPROVED\n    //CALL this to add raw order to the new order, filling with proper menu etc\n    reconstructOrder(rawOrder: Order, subOrder: boolean = false, continueUnlockCat = true) {\n\n        console.log('reconstruct from order', rawOrder, continueUnlockCat);\n\n        if (!rawOrder) {\n            return;\n        }\n\n        var orderitems = rawOrder.orderitems;\n        if (!orderitems) {\n            return;\n        }\n\n        this.trackAnalytics = false;\n\n        try {\n\n            var menu = this.store.menu;\n\n            //clear all the orderitems when loading suborder\n            if (subOrder && this.order) {\n                this.order.orderitems = [];\n            }\n\n            if (menu) {\n                for (let oi of orderitems) {\n\n                    var builder = new OrderItemBuilder(this.store);\n                    var realCat = MenuManager.getCategory(menu, oi.categoryId);\n                    if (realCat?.type === 'unlock' || oi.categoryType === 'unlockItem') {\n                        if (continueUnlockCat) {\n                            continue;\n                        }\n                    }\n                    builder.setCategory(realCat);\n\n\n                    var igIndex = 0;\n\n                    for (let ig of oi.groups) {\n\n                        var realIg = MenuManager.getItemGroup(menu, ig.id);\n\n                        for (let item of ig.items) {\n                            var realItem = MenuManager.getItem(menu, realIg, item.id);\n\n                            //do we need to copy from real item?\n                            item.price = realItem.price;\n                            item.min = realItem?.min;\n                            item.max = realItem?.max;\n                            item.baseQty = realItem.baseQty;\n                            item.absentId = realItem.absentId;\n                            item.backendId = realItem?.backendId;\n                            item.setLayout = realItem?.setLayout;\n\n                            builder.setItem(realIg, item, igIndex, item.quantity, true, true);\n\n                            var newOi = builder.build();\n                            newOi.combo = !!oi?.combo;\n                            if (!newOi) continue;\n                            newOi.quantity = oi.quantity;\n\n                            //TODO: NEED TO RECONSTRUCT MODIFIER!!!\n\n                        }\n\n                        igIndex++;\n\n\n                    }\n\n                    console.log('newOi', newOi);\n                    if (!newOi) continue;\n                    this.addOrderItem(newOi, oi.recommended == true, oi.discountId);\n\n                }\n\n                if (this.order?.orderitems?.length > 0 && rawOrder?.uuid) {\n                    // 读取本地的 cache Order, 但需要保持 uuid 一致，server 边需要keep 住同一张单（from Peter）\n                    this.order.uuid = rawOrder?.uuid;\n                }\n\n            } else if (subOrder) {\n\n                //court order that doesnt have menu, just construct oi with what we have\n\n                for (let oi of orderitems) {\n                    if (OrderItem.isUnlockOrderItem(oi)) { // skip reconstruct of unlock item\n                        continue;\n                    }\n                    var newOi = new OrderItem();\n\n                    Object.assign(newOi, oi);\n\n                    this.addOrderItem(newOi, oi.recommended == true, oi.discountId);\n                }\n            }\n\n\n\n        } catch (ex) {\n            console.log(ex);\n        }\n\n        this.trackAnalytics = true;\n\n\n    }\n\n    isSet(oi: OrderItem): boolean {\n        return oi.combo || OrderItem.isSet(oi);\n    }\n\n    // order level max\n    checkOrderMaxItem(addQty: number = 0): boolean {\n        // const orderManager: OrderManager = this.multOrderManager.enableMutlOrder && storeId ? this.multOrderManager.getOrderManager(storeId) : this.orderManager;\n        const maxItems = this.store?.menu?.maxItems;\n        const infinity = maxItems === 0;\n        return (maxItems < (this.count + addQty) && !infinity && (this.mode == 'byod' || this.mode == \"preorder\"));\n    }\n\n    // // item level max\n    // checkItemMax(item: Item): boolean {\n    //     return this.checkAddItemMax(item, 0);\n    // }\n\n    // check if current qty can be added to cart without exceeding item max\n    checkAddItemMax(item: Item, addQty: number): boolean {\n        if (!item) {\n            return true;\n        }\n        let currentQua = this.getQuantity(item);\n        currentQua += addQty;\n        if (item && item.max === 0) {\n            return false;\n        }\n        return !(currentQua <= item.max);\n    }\n\n    getPreparetionTime() {\n        let order = this.getOrder();\n        let pos = this.store && this.store.pos;\n        let preparetionTime = 15;\n        if (pos) {\n            // if preparetionTime is 0 should still use the default(by ray).\n            if (order) {\n                preparetionTime = this.calculateFoodTime(order, pos);\n            } else {\n                preparetionTime = pos.basePrep;\n            }\n        }\n        // unit 分钟\n        return preparetionTime;\n    }\n\n    calculateFoodTime(order: Order, pos: Pos) {\n\n        let baseMin = pos.basePrep;\n        let total = order.grandTotal;\n        let scaleAmount = pos['prepScale'];\n\n        let scale = 0;\n        if (scaleAmount > 0) {\n            scale = total / scaleAmount;\n        }\n\n        let prepTime = baseMin + scale * baseMin;\n        return prepTime;\n    }\n\n    removeUnlockByItemId(itemId: string) {\n        const unlockCatOrderItems: OrderItem[] = [];\n        this.order?.orderitems.forEach(oi => {\n            if (OrderItem?.isUnlockOrderItem(oi) && oi?.items?.length > 0 && oi?.items[0].id == itemId) {\n                unlockCatOrderItems.push(oi);\n            }\n        });\n        unlockCatOrderItems.map((oi) => {\n            this.minusOrderItem(oi, true);\n        });\n\n        this.calculateOrder(this.order);\n    }\n\n    removeUnlockByDiscountId(discountId: string) {\n        const unlockCatOrderItems: OrderItem[] = [];\n        this.order?.orderitems.forEach(oi => {\n            if (OrderItem?.isUnlockOrderItem(oi) && oi.discountId == discountId) {\n                unlockCatOrderItems.push(oi);\n            }\n        });\n        unlockCatOrderItems.map((oi) => {\n            this.minusOrderItem(oi, true);\n        });\n\n        this.calculateOrder(this.order);\n    }\n\n    saveOrderCheckpoint(): void {\n        const cleanOrder = Order.toOrderData(this.order);\n        this.checkpointOrder = cleanOrder;\n    }\n\n    restoreLastOrderCheckpoint(): void {\n        if(!this.checkpointOrder) {\n            return;\n        }\n        this.order.orderitems = [];\n        this.reconstructOrder(this.checkpointOrder);\n        this.clearOrderCheckpoint();\n    }\n\n    clearOrderCheckpoint(): void {\n        this.checkpointOrder = null;\n    }\n}\n\n\nexport interface OrderChangedListener {\n    onOrderChanged(order: Order);\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Order } from '../../data';\n\n@Pipe({\n    name: 'combineOrderStatus',\n    pure: false\n})\nexport class CombineOrderStatusPipe implements PipeTransform {\n\n    statusList = [\n        'pending',\n        'paying',\n        'paid',\n        'scheduled',\n        'sending',\n        'received',\n        'ready',\n        'completed',\n    ];\n\n    getStatusLevel(status: string): number {\n        return this.statusList.indexOf(status);\n    }\n\n    getLowestStatus(order: Order): string {\n        let minLevel = 999;\n        order?.subs?.forEach((sub) => {\n            const level = this.getStatusLevel(sub.status);\n            if(level > -1 && level < minLevel) {\n                minLevel = level;\n            }\n        });\n\n        if(minLevel >= this.statusList.length || minLevel < 0) {\n            return null;\n        }\n\n        return this.statusList[minLevel];\n    }\n\n    transform(order: Order): string {\n        if(order?.subs?.length <= 0) {\n            return order?.status ?? '';\n        }\n\n        const lowestStatus = this.getLowestStatus(order);\n\n        if(lowestStatus) {\n            return lowestStatus;\n        }\n        return order?.status ?? '';\n    }\n\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({name: 'filter'})\nexport class CustomFilterPipe implements PipeTransform {\n    transform(values: any[], callback?: any, reverse?: boolean, enable?: boolean): any[] {\n        if (!enable) {\n            return values;\n        }\n        if (typeof callback === 'function') {\n            let temp = values.filter(a => reverse ? !callback(a) : callback(a));\n            console.log(temp.length);\n            return temp;\n        }\n\n        return values;\n    }\n}\n","import { DatePipe } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'dateLocale'\n})\nexport class DateLocalePipe implements PipeTransform {\n\n    localeMap = {\n        'zh': 'zh',\n        'zh-cn': 'zh'\n    }\n\n    transform(value: any, locale: string = 'en', pattern: string = 'mediumDate', timezone = null): any {\n        const code = this.localeMap[locale] ?? 'en';\n        const datePipe: DatePipe = new DatePipe(code, timezone );\n\n        return datePipe.transform(value, pattern) != undefined ? datePipe.transform(value, pattern) : null;\n      }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Context } from '../services/context.service';\nimport { NumberDisplayPipe } from './number-display.pipe';\nimport { EwalletService } from '../services/ewallet.service';\n\n@Pipe({\n    name: 'ewallet'\n})\nexport class EwalletPipe implements PipeTransform {\n\n    // to do(ewallet) Topup\n    constructor(private context: Context, public numberDisplay: NumberDisplayPipe, public ewalletService: EwalletService) {\n\n    }\n\n    transform(member: any): string {\n        console.log('ecreditBalance member:', member);\n        // return this.ewalletService.getMemberEwallectCurrencySign() + str;\n        const total = this.ewalletService?.getDisplayEwalletNumber();\n        return this.ewalletService.getMemberEwallectCurrencySign() + this.numberDisplay.transform(total);\n\n    }\n\n}\n","import {Pipe, PipeTransform} from '@angular/core';\nimport {Item, OrderItem} from 'aigens-ng-core';\n\n\n@Pipe({\n    name: 'flattenItem'\n})\nexport class FlattenItemPipe implements PipeTransform {\n    constructor() {\n    }\n\n    transform(orderItem: OrderItem, includeMods: boolean = true): Item[] {\n        let result = [];\n        // assume server flatten result is correct\n        if (orderItem.items) {\n            result = orderItem.items;\n        } else if (orderItem.groups && orderItem.groups.length) {\n            //flatten groups within 1 depth\n            orderItem.groups.forEach(group => {\n                \n                group?.items?.forEach(item => {\n                    result.push(item);\n                    if (includeMods && item?.['mgroups']) {\n                        item?.['mgroups'].forEach(mg => {\n                            result.push(...mg.items);\n                        })\n                    }\n                });\n            });\n        } else {\n            console.warn('the order item input seems to be empty?', orderItem);\n        }\n        return result;\n    }\n}\n","import { TranslateService } from '@ngx-translate/core';\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'formErrorMessage',\n})\nexport class FormErrorMessagePipe implements PipeTransform {\n    constructor(public translation: TranslateService) {\n    }\n\n    transform(content: string): string {\n        const translate = this.translation.instant(content) as string;\n        const isTranslationFound = translate !== content;\n        if (!isTranslationFound) {\n            let defaultTranslation = 'form.errorMsg';\n            if (content.includes('regex')) {\n                defaultTranslation += '.regex';\n                return this.translation.instant(defaultTranslation) as string;\n            }\n            return this.translation.instant(`${defaultTranslation}.default`) as string;\n        }\n        return translate;\n    }\n}\n","import { TranslateService } from '@ngx-translate/core';\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'formTranslate'\n})\nexport class FormTranslatePipe implements PipeTransform {\n    constructor(public translation: TranslateService) {\n    }\n\n    transform(content, lang: string, field: string = \"name\", formName: string = 'register'): string {\n        const formKey = `forms.${formName}.${content['title']}.${field}`;\n        return `${this.translation.instant(formKey) === formKey ? this.serverTranslate(content, lang, field) : this.translation.instant(formKey)}`\n    }\n\n    serverTranslate(content, lang: string, field: string = \"name\") {\n\n        if (!content) return \"\";\n\n        //return value.name;\n        return this.lookup(content, lang, field);\n    }\n\n    private lookup(content, lang: string, field: string) {\n\n        var result = null;\n\n        if (lang) {\n            result = content[field + \"_\" + lang];\n        }\n\n        if (!result) {\n            result = content[field];\n        }\n\n        return result;\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n// 自定义管道 getDateStringLabel\n@Pipe({\n  name: 'getDateStringLabel'\n})\nexport class GetDateStringLabelPipe implements PipeTransform {\n    transform(milliseconds: number): string {\n        const date = new Date(milliseconds);\n        let timeString = date.getFullYear().toString() + '-';\n        if ((date.getMonth() + 1) <= 9) {\n            timeString = timeString + '0' + (date.getMonth() + 1).toString() + '-';\n        } else {\n            timeString = timeString + (date.getMonth() + 1).toString() + '-';\n        }\n        if (date.getDate() <= 9) {\n            timeString = timeString + '0' + date.getDate().toString();\n        } else {\n            timeString = timeString + date.getDate().toString();\n        }\n        return timeString;\n      }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DecimalPipe } from '@angular/common';\nimport { Item } from '../../data';\n\n@Pipe({\n    name: 'itemPrice'\n})\nexport class ItemPricePipe implements PipeTransform {\n    constructor(public decimalPipe: DecimalPipe) {\n    }\n\n    transform(item: Item, quantity: number = 0): number {\n        if (quantity > 0) {\n            return item?.price * quantity;\n        } else {\n            return item?.price * 1;\n        }\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'numberDisplay'\n})\nexport class NumberDisplayPipe implements PipeTransform {\n    constructor() {\n\n    }\n\n    // 数字 每隔3位用逗号分开 1,234,560\n    transform(input: number | string): string {\n        console.log('numberDisplay', input);\n        // 判断是正数还是负数\n        const flag = (input || input === 0) ? true : false;\n        const arr = typeof input === 'number' ? Math.abs(input)?.toString()?.split('.') : input?.split('.');\n        let left = arr[0];\n        const right = arr[1] ? arr[1] : 0;\n        let tmp = '';\n        while (left.length > 3) {\n            tmp = ',' + left.slice(-3) + tmp;\n            left = left.slice(0, left.length - 3);\n        }\n        if (right === 0){\n            return flag ? left + tmp : '-' + left + tmp;\n        }\n        return flag ? left + tmp + '.' + right : '-' + left + tmp + '.' + right;\n    }\n\n}\n","import { TranslateService } from '@ngx-translate/core';\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'pointDisplay'\n})\nexport class PointDisplay implements PipeTransform {\n    constructor(public translation: TranslateService) {\n    }\n\n    transform(point: number): string {\n        return `${point}  ${this.translation.instant('byod.components.item-card.points')}`\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Context } from '../services/context.service';\nimport { CurrencyPipe } from '@angular/common';\n\n@Pipe({\n    name: 'pointToCash'\n})\nexport class PointToCashPipe implements PipeTransform {\n\n    redeemPointFactor: number = 1;\n    smallestPointsUnit: number = 1;\n    pointRatio: number = 1;\n\n    pointsDigitsInfo: string;\n\n    constructor(private context: Context, private currencyPipe: CurrencyPipe) {\n        this.initCrmPoint();\n        this.calculateDisplayScale();\n    }\n\n    private initCrmPoint(): void {\n        this.redeemPointFactor = this.context?.membership?.['redeemPointFactor'] ?? this.context?.crm?.redeemPointFactor ?? 1;\n        this.smallestPointsUnit = this.context?.membership?.['smallestPointsUnit'] ?? this.context?.crm?.smallestPointsUnit ?? 1;\n        this.pointRatio = this.context?.membership?.['pointToMoneyRatio'] ?? this.context?.crm?.pointToMoneyRatio ?? 1;\n        if (this.smallestPointsUnit <= 0) {\n            this.smallestPointsUnit = 1;\n        }\n    }\n\n    private convertPointToAmount(points) {\n        return (points / this.smallestPointsUnit) / this.pointRatio;\n    }\n\n    private calculateDisplayScale(): void {\n        // take log10 to get the digits in zero: log10(1) = 0, log10(100) = 2\n        const log10 = Math.log10 || function(x) {\n            return Math.log(x) * Math.LOG10E;\n        };\n\n        const digits = log10(this.smallestPointsUnit);\n\n        this.pointsDigitsInfo = `1.${digits}-${digits}`;\n    }\n\n    private roundToPointFactor(points): number {\n        const redeemPointFactor = this.redeemPointFactor ?? 1;\n        return Math.floor(points / redeemPointFactor) * redeemPointFactor;\n    }\n\n    transform(points: number): string {\n        const roundedPoint = this.roundToPointFactor(points);\n        const finalAmount = this.convertPointToAmount(roundedPoint);\n        return this.currencyPipe.transform(finalAmount,\n            this.context.currency, 'symbol-narrow',\n            this.pointsDigitsInfo);\n    }\n\n}\n","import { DecimalPipe } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { SettingManager } from '../../pure/managers/setting-manager';\n\n\nexport class PriceDisplayPipeOptions {\n    sign?: string; // the currency sign\n    spacing?: string = ' '; // the spacing put between the currency sign and price\n    itemPricePrecision?: any;\n    hideZeroItemPrice?: any = false;\n    force?: boolean = false; // ignore the hideZeroItemPrice flag\n}\n\n@Pipe({\n    name: 'priceDisplay'\n})\nexport class PriceDisplayPipe implements PipeTransform {\n    signPositions = {'$': 0, '¥': 0, 'S$': 0, 'RM': 0, 'Rp': 0, '€': 2}; // 用数字标记货币符号相对于价格的位置，0表示符号在前，1表示符号在数字中间，2表示符号在后\n\n    constructor(public decimalPipe: DecimalPipe, public settingManager: SettingManager) {\n    }\n\n    /**\n     *\n     * @param price price to deal with\n     * @param shouldDisplaySign display the currency sign or not, set true by default\n     * @param spacing the spacing put between the currency sign and price\n     * @param sign the currency sign\n     * @param force: ignore the hideZeroItemPrice flag\n     * @param prefix\n     * @param suffix\n     */\n    transform(price: number = 0, shouldDisplaySign: boolean = true, context?: any, checkHideZero = false, spacing: string = ' '): string {\n        const p = this.settingManager.get('itemPricePrecision', -1);\n        let currencySign = (context?.currencySign ?? context?.store?.currencySign) || '$';\n        let hideZero = context?.store?.menu?.settings?.hideZeroItemPrice;\n        let options: PriceDisplayPipeOptions = {};\n        // const p = options.itemPricePrecision;\n        // const hideZero = this.orderService?.store?.menu?.settings?.hideZeroItemPrice;\n        // const hideZero = options.hideZeroItemPrice;\n        // const spacing = options?.spacing || ' ';\n\n        if (checkHideZero && price === 0 && this.settingManager.get('menu.hideZeroItemPrice', false)) {\n            return '';\n        }\n\n        let displayedPrice;\n        if (p < 0) { // as per doc config, if itemPricePrecision == -1, then it will not control\n            displayedPrice = this.decimalPipe.transform(price);\n        } else {\n            const dc = p >= 0 ? '1.' + p + '-' + p : '1.0-2';\n            displayedPrice = this.decimalPipe.transform(price, dc);\n        }\n\n        if (shouldDisplaySign) {\n            // let currencySign = sign || this.orderService.sign || this.orderService.store.currencySign || '';\n            // let currencySign = options.sign || '';\n            if (this.signPositions[currencySign] === 0) {\n                return currencySign + spacing + displayedPrice;\n            } else if (this.signPositions[currencySign] === 1) {\n                return displayedPrice; // 货币符号在中间时，暂时没有修改格式\n            } else if (this.signPositions[currencySign] === 2) {\n                return displayedPrice + spacing + currencySign;\n            } else {\n                return currencySign + spacing + displayedPrice;// 没set 默认在前\n            }\n        } else {\n            return displayedPrice;\n        }\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Item, OrderItem } from 'aigens-ng-core';\nimport * as _ from 'lodash-es';\n\n\n@Pipe({\n    name: 'removeItemVariations'\n})\nexport class RemoveItemVariationsPipe implements PipeTransform {\n\n    constructor() {\n    }\n\n    // remove the item variations\n    transform(items: Item[]): Item[] {\n        let resultItems = []\n        items?.forEach(item => {\n            let item_new = _.cloneDeep(item);\n            if (item?.variations) {\n                item_new.variations = [];\n            }\n            resultItems.push(item_new);\n        });\n        return resultItems;\n    }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { Item, OrderItem } from 'aigens-ng-core';\n\n\n@Pipe({\n    name: 'resortOrFilterUnlockItem'\n})\nexport class ResortOrFilterUnlockItemPipe implements PipeTransform {\n\n    constructor() {\n    }\n\n    // resort the unlock item or hide them in shop cart\n    transform(orderItems: OrderItem[], filter = false): OrderItem[] {\n        let normalOIs: OrderItem[] = [];\n        let unlockOIs: OrderItem[] = [];\n        // console.log('resortOrFilterUnlockItem');\n        // resort the unlock item position in Array\n        if (orderItems) {\n            orderItems.forEach(oi => {\n                if (!oi) return;\n                if (OrderItem?.isUnlockOrderItem(oi)) {\n                    if (filter) return; // hide the unlock item in shop cart\n                    unlockOIs.push(oi);\n                } else {\n                    normalOIs.push(oi);\n                }\n            })\n        } else {\n            console.warn('the order item input seems to be empty?', orderItems);\n        }\n        return normalOIs.concat(unlockOIs);\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from \"@angular/platform-browser\";\n/**\n * Generated class for the SafeHtmlPipe pipe.\n *\n * See https://angular.io/api/core/Pipe for more info on Angular Pipes.\n */\n@Pipe({\n  name: 'safeHtml',\n})\nexport class SafeHtmlPipe implements PipeTransform {\n  /**\n   * Takes a value and makes it lowercase.\n   */\n  constructor(private sanitized: DomSanitizer) { }\n  transform(value) {\n    // console.log(this.sanitized.bypassSecurityTrustHtml(value));\n    return this.sanitized.bypassSecurityTrustHtml(value);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'sanitize'\n})\nexport class SanitizePipe implements PipeTransform {\n  constructor(private sanitizer: DomSanitizer) { }\n  transform(url): any {\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n}\n","import {Pipe, PipeTransform} from '@angular/core';\n\n@Pipe({\n  name: 'sortBy'\n})\nexport class SortByPipe implements PipeTransform {\n\n  constructor() {\n  }\n\n  transform(input: any[]): any[] {\n    if (!input) {\n      return [];\n    } else if (input.length < 1) {\n      return input;\n    } else {\n      return input.sort((a, b) => {\n        return a['name'] > b['name'] ? 1 : -1;\n      });\n    }\n  }\n}\n\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Context } from '..';\n\n@Pipe({\n    name: 'statusDisplay'\n})\nexport class StatusDisplayPipe implements PipeTransform {\n\n    constructor(public t: TranslateService) {\n\n    }\n\n    transform(status: string, mode: string, lang: string = 'en', context?: any): string {\n        let statusDisplay = '';\n        let type = mode;\n        // byod fallback\n        if (type === 'pos') {\n            type = 'byod';\n        }\n        if (!status) {\n            return null;\n        }\n\n        const orderStatusDisplayMap = context?.brand?.['config']?.[0]?.general || null;\n\n        if (lang.startsWith('zh')) {\n            if (orderStatusDisplayMap && orderStatusDisplayMap[status] && orderStatusDisplayMap[status]['nameZh'] &&\n                orderStatusDisplayMap[status]['nameZh'] !== '') {\n                statusDisplay = orderStatusDisplayMap[status]['nameZh'];\n                return statusDisplay;\n            } else {\n                const translateWord = 'status.' + type + '.' + status;\n                statusDisplay = this.t.instant(translateWord);\n                return statusDisplay;\n            }\n        } else if (lang === 'en') {\n            if (orderStatusDisplayMap && orderStatusDisplayMap[status] && orderStatusDisplayMap[status]['nameEn'] &&\n                orderStatusDisplayMap[status]['nameEn'] !== '') {\n                statusDisplay = orderStatusDisplayMap[status]['nameEn'];\n                return statusDisplay;\n            } else {\n                const translateWord = 'status.' + type + '.' + status;\n                statusDisplay = this.t.instant(translateWord);\n                return statusDisplay;\n            }\n        } else {\n            const translateWord = 'status.' + type + '.' + status;\n            statusDisplay = this.t.instant(translateWord);\n            return statusDisplay;\n        }\n    }\n\n}\n","\nimport { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'subStoreName',\n    pure: true\n})\nexport class SubStoreNameByIdPipe implements PipeTransform {\n    transform(subStoreId: any, lang: string = \"en\", field: string = \"name\"): any {\n        // console.log(\"asdasd123\");\n\n\n        let storeName = \"\";\n        if (!subStoreId) { return \"\" }\n        let store = window?.['aigens']?.context?.court?.stores?.find(x => x.id == subStoreId);\n        if (store) {\n\n            //var lang = window['aigens']?.context?.userLang;\n            //console.log(\"i18n pipe\", content, field,  lang);\n\n            if (lang && lang != 'en') {\n                storeName = store[field + \"_\" + lang];\n            } else {\n                storeName = store.name;\n            }\n\n        }\n\n        return storeName;\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'textEllipsisPipe'\n})\nexport class TextEllipsisPipe implements PipeTransform {\n    constructor() {\n    }\n\n    transform(text, maxCharacters: number = 20, ellipsis: string = '...'): string {\n        if (!text) {\n            return '';\n        }\n        return text.length > maxCharacters ? text.substring(0, maxCharacters) + ellipsis : text;\n    }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n// 自定义管道 timeStringLabel\n@Pipe({\n  name: 'timeStringLabel'\n})\n\n// 创建的管道的类\nexport class TimeStringLabelPipe implements PipeTransform {\n    transform(pickUpTime?: number, withSecond: boolean = false): string {\n        let date: Date;\n        if (pickUpTime) {\n            date = new Date(pickUpTime);\n        } else {\n            date = new Date();\n        }\n        let timeString = date.getHours() + ':';\n        if (date.getMinutes() === 0) {\n            timeString = timeString + '00';\n        } else if (date.getMinutes() <= 9) {\n            timeString = timeString + '0' + date.getMinutes();\n        } else {\n            timeString = timeString + date.getMinutes();\n        }\n        if (withSecond) {\n            timeString = timeString + ':';\n            if (date.getSeconds() === 0) {\n                timeString = timeString + '00';\n            } else if (date.getSeconds() <= 9) {\n                timeString = timeString + '0' + date.getSeconds();\n            } else {\n                timeString = timeString + date.getSeconds();\n            }\n        }\n        return timeString;\n      }\n}\n","import { Ad } from './../../data/data/ad';\n\nimport { Injectable, Injector } from '@angular/core';\nimport { ActivatedRoute, ActivationEnd, Event, Router } from '@angular/router';\nimport { AQuery, ConfigService, Context } from 'aigens-framework';\nimport { Category, Courier, Item, ItemGroup, Order, OrderItem } from '../../data';\nimport { PageParams } from '../../pure/base/page-params';\nimport { PlatformService } from '../../pure/services/platform.service';\nimport { SentryService } from '../../pure/services/sentry.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AnalyticsService {\n\n    constructor(injector: Injector) {\n\n        this.aq = new AQuery(injector);\n\n        this.navParams = new PageParams();\n\n        this.router = injector.get(Router);\n        this.context = injector.get(Context);\n        this.configService = injector.get(ConfigService);\n        this.route = injector.get(ActivatedRoute);\n        this.platformService = injector.get(PlatformService);\n        this.sentryService = injector.get(SentryService);\n\n        this.listenRoute();\n\n        console.log(\"AnalyticsService constructor\");\n\n    }\n\n    private aq: AQuery;\n    app: any;\n    analytics: any;\n    config: any;\n    mode: string;\n    storeId: string = null;\n    navParams: PageParams;\n\n    disabled: boolean = false;\n\n    raw = false;\n\n\n    private router: Router;\n    private context: Context;\n    private configService: ConfigService;\n    private route: ActivatedRoute;\n    platformService: PlatformService;\n    private sentryService: SentryService;\n\n    startedABTest = false;\n\n    track(...args: any[]) {\n\n        if(this.disabled){\n            return;\n        }\n\n        //IHLP-71 modified. Due to ...args may produce \"RangeError: Maximum call stack size exceeded\"\n        if (this.raw) {\n            this.trackRaw(...args); //IHLP-71 modified. Previous it is ...args\n        } else {\n            this.trackJs(...args); //IHLP-71 modified. Previous it is ...args\n        }\n\n    }\n\n    protected trackJs(...args: any[]) {\n\n        //Peter: don't put any print log inside this code, kiosk was really slow due to print log\n\n        const gtag = window['gtag'];\n        if (gtag) {\n            const event = args[2]; //IHLP-71 modified. Previous it is args[2]\n\n            this.addContext(event);\n\n            gtag(...args);\n            console.log('trackJs');\n\n        }\n\n    }\n\n    protected trackRaw(...args: any[]) {\n\n        console.log('raw', args); //IHLP-71 modified. Previous it is args\n\n        const url = 'https://www.google-analytics.com/mp/collect?measurement_id=G-PDEP9178P4&api_secret=eekr9qRYRwqI0qhZclWyjQ';\n\n        const eventName = args[1]; //IHLP-71 modified. Previous it is args[1]\n        const event = args[2]; //IHLP-71 modified. Previous it is args[2]\n\n        this.addContext(event);\n\n        const body = {\n            client_id: '1234567890',\n            events: [\n                {\n                    name: eventName,\n                    params: event\n                }\n            ]\n        };\n\n        console.log('track raw');\n\n        const aq = this.aq;\n        aq.url = url;\n        aq.method = 'post';\n        aq.body = body;\n\n        // some payments require attribute(jo.charge)\n        return aq.auth(false).getJson().subscribe((data => {\n            console.log('raw result', data);\n        }));\n\n\n    }\n\n    protected addContext(event) {\n\n        if (this.context.groupId) {\n            event.groupId = this.context.groupId + '';\n        }\n\n        if (this.context.brandId) {\n            event.brandId = this.context.brandId + '';\n        }\n\n        if (this.storeId || this.context?.storeId) {\n            event.storeId = (this.storeId ?? this.context?.storeId) + '';\n        }\n\n        if (this.context.courtId) {\n            event.courtId = this.context.courtId + '';\n        }\n\n        if (this.mode) {\n            event.mode = this.mode + '';\n        }\n\n        if (this.context?.brand?.orderModeSelection) {\n            event.order_mode_selection = this.context?.brand?.orderModeSelection + '';\n        }\n\n        const channel = this.platformService.getChannel();\n        const container = this.platformService.getContainer();\n        const qrId = this.platformService.getQrId();\n\n        if (channel) {\n            event.channel = channel;\n        }\n\n        if (container) {\n            event.container = container;\n        }\n\n        if (qrId) {\n            event['qrId'] = qrId;\n        }\n\n        const appInfo = this.platformService.getAppInfoInstant();\n        if (appInfo?.id) {\n            event['app_id'] = appInfo.id;\n            event['app_version'] = appInfo.version;\n            event['app_name'] = appInfo.name;\n        }\n\n        this.navParams.querys = this.route.snapshot?.queryParams;\n        this.navParams.params = this.route.snapshot?.params;\n\n        // const on_premise = this.platformService.onpremise; //this.navParams.get('onpremise') ?? false;\n\n        // event.on_premise = Boolean(on_premise);\n        event.on_premise = this.platformService.onpremise;\n\n        const member = this.context.member as any;\n\n        const mid = member?.id || this.configService.getCookie('mid');\n\n        if (mid && !event['user_id']) {\n            event['user_id'] = mid + '';\n        }\n\n        let converted = false;\n        if (member?.converted) {\n            converted = true;\n        }\n        event['converted'] = converted;\n\n        event['platform'] = this.platformService.getNativePlatform();\n\n        const backendId = member?.backendId;\n        if (backendId) {\n            event['user_bid'] = backendId;\n        }\n\n        const alipayId = member?.alipayId;\n        if (!event['container_user'] && alipayId) {\n            event['container_user'] = alipayId;\n        }\n\n        const version = this.platformService.getVersion();\n        event['version'] = version || 'unknown';\n\n        event['currency'] = this.context.currency;\n\n        event['source'] = 'v4';\n\n        event['debug_mode'] = !this.configService.isPrd();\n\n    }\n\n\n\n    private listenRoute() {\n\n        this.router.events.subscribe((event: Event) => {\n\n            if (event instanceof ActivationEnd) {\n\n                const snapshot = event.snapshot;\n                const data = snapshot.data;\n\n                // this.trackRoute(data.screen);\n                if (data && data.screen) {\n                    this.trackScreen('PWA', data.screen);\n                }\n            }\n\n        });\n\n\n    }\n\n    trackScreen(appName: string, screenName: string) {\n        console.log('tracking screen', appName, screenName);\n\n        // SPA screen view\n        try {\n\n            this.track('event', 'screen_view', {\n                screen_name: screenName,\n                page_title: screenName,\n                app_name: appName\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n\n    private trackRoute(pageName) {\n\n        console.log('tracking route!!');\n\n        // page view\n        try {\n            const path = window.location.pathname;\n            this.track('event', 'page_view', {\n                content_id: path,\n                page_title: pageName\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n\n        // old route: Remove me\n        try {\n            const path = window.location.pathname;\n            this.track('event', 'route', {\n                content_id: path\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n\n    trackDialog(dialogName: string) {\n\n        try {\n            const path = window.location.pathname;\n            this.track('event', 'dialog', {\n                content_id: dialogName,\n                path\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n\n\n    }\n    /**\n     * When a user selects a dining mode\n     * @param mode\n     */\n    trackStartOrder(mode: string) {\n\n        try {\n\n            this.setMode(mode);\n\n            this.track('event', 'start_order', {\n                mode\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user selects a dining mode\n     * @param mode\n     */\n    trackSelectMode(mode: string) {\n\n        try {\n\n            this.setMode(mode);\n\n            this.track('event', 'select_mode', {\n                mode\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    trackStartAB() {\n\n        if (this.startedABTest) {\n            return;\n        }\n\n        try {\n\n            this.startedABTest = true;\n\n            this.track('event', 'optimize.activate', {\n\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user views location list (even if there's zero locations available)\n     */\n    trackViewLocationList() {\n        try {\n\n            this.track('event', 'view_location_list', {\n\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user selects a store\n     */\n    trackSelectLocation() {\n        try {\n\n            this.track('event', 'select_location', {\n\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user submits address for delivery (before selecting a nearby store)\n     * @param order\n     * @param courier\n     * @returns\n     */\n    trackAddShippingInfo(order: Order, courier: Courier) {\n\n        if (!courier) { return; }\n\n        try {\n\n            this.track('event', 'add_shipping_info', {\n                shipping_tier: courier.partner,\n                currency: this.context.currency,\n                value: order.shipping\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user submits contact & payment method\n     */\n    trackAddContactInfo() {\n        try {\n\n            this.track('event', 'add_contact_info', {\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a users submits payment information & clicks \"complete order\"\n     * @param paymentConfig\n     */\n    trackAddPaymentInfo(paymentConfig) {\n        try {\n\n            this.track('event', 'add_payment_info', {\n                payment_type: paymentConfig.method,\n                gateway: paymentConfig.gateway,\n                sub: paymentConfig.sub\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user selects a category\n     * @param cat\n     */\n    trackSelectCategory(cat: Category) {\n\n        try {\n            const catId = cat.backendId || cat.id;\n\n            const jo = {\n                category_name: cat.name,\n                category_id: catId\n            };\n\n            this.track('event', 'select_category', jo);\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n\n    /**\n     * When a user sees a category\n     * @param cat\n     */\n    trackViewCategory(cat: Category) {\n\n        try {\n            const catId = cat.backendId || cat.id;\n\n            const jo = {\n                category_name: cat.name,\n                category_id: catId\n            };\n\n            this.track('event', 'view_category', jo);\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user selects an item list\n     * @param cat\n     * @param ig\n     */\n    trackSelectItemList(cat: Category, ig: ItemGroup) {\n\n        try {\n\n            const igId = ig.backendId || ig.id;\n\n            const items = this.makeViewItemsJo(cat, ig);\n\n            const jo = {\n                item_list_name: ig.name,\n                item_list_id: igId,\n                items\n            };\n\n            this.track('event', 'select_item_list', jo);\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user sees a list of items\n     * @param cat\n     * @param ig\n     */\n    trackViewItemList(cat: Category, ig: ItemGroup) {\n\n        try {\n\n            const igId = ig.backendId || ig.id;\n\n            const items = this.makeViewItemsJo(cat, ig);\n\n            const jo = {\n                item_list_name: ig.name,\n                item_list_id: igId,\n                items\n            };\n\n            this.track('event', 'view_item_list', jo);\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When an item is selected from a list\n     * @param cat\n     * @param ig\n     * @param item\n     */\n    trackSelectItem(cat: Category, ig: ItemGroup, item: Item) {\n\n        try {\n\n            const igId = ig.backendId || ig.id;\n            const catId = cat.backendId || cat.id;\n\n            this.track('event', 'select_item', {\n                items: [this.makeItemJo(cat, ig, item, false)]\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When 50% of an item image is viewable (on active screen)\n     * @param cat\n     * @param ig\n     */\n    trackViewItems(cat: Category, ig: ItemGroup) {\n\n        try {\n\n            const igId = ig.backendId || ig.id;\n            const catId = cat.backendId || cat.id;\n\n            const itemJos = [];\n\n            for (const item of ig.items) {\n                itemJos.push(this.makeViewItemJo(cat, ig, item));\n            }\n\n            this.track('event', 'view_item', {\n                items: itemJos,\n                item_list_name: ig.name,\n                item_list_id: igId\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When 50% of an item image is viewable (on active screen)\n     * @param cat\n     * @param ig\n     */\n    trackViewItem(item: Item, cat: Category, ig: ItemGroup) {\n\n        try {\n\n            const igId = ig.backendId || ig.id;\n            const catId = cat.backendId || cat.id;\n\n            const cleanItem = this.makeViewItemJo(cat, ig, item);\n\n\n            this.track('event', 'view_item', {\n                items: [cleanItem],\n                item_list_name: ig.name,\n                item_list_id: igId\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    makeViewItemsJo(cat: Category, ig: ItemGroup) {\n\n        const itemJos = [];\n\n        for (const item of ig.items) {\n            itemJos.push(this.makeViewItemJo(cat, ig, item));\n        }\n\n        return itemJos;\n    }\n\n    makeViewItemJo(cat: Category, ig: ItemGroup, item: Item) {\n\n        const itemId = item.sku || item.backendId || item.id;\n        const igId = ig.backendId || ig.id;\n        const catId = cat.backendId || cat.id;\n\n        let igPos = 0;\n        if (item.igPos >= 0) { igPos = item.igPos; }\n\n        const jo = {\n            item_id: itemId,\n            item_name: item.name,\n            category_name: cat.name,\n            category_id: catId,\n            // item_category: catId,\n            // item_category_name: cat.name,\n            item_list_name: ig.name,\n            item_list_id: igId,\n            index: igPos\n        };\n\n        return jo;\n    }\n\n    makeItemJo(cat: Category, ig: ItemGroup, item: Item, includeAddon: boolean = true) {\n\n        const itemId = item.sku || item.backendId || item.id;\n        const igId = ig.backendId || ig.id;\n        const catId = cat.backendId || cat.id;\n\n        const q = item.quantity > 0 ? item.quantity : 1;\n\n        let igPos = 0;\n        if (item.igPos >= 0) { igPos = item.igPos; }\n\n        let addon = {};\n        if (includeAddon) {\n            addon = {\n                addon1: 'N/A',\n                addon2: 'N/A',\n                addon3: 'N/A',\n                addon4: 'N/A',\n                ...this.makeModifierItemJo(item)\n            };\n        }\n\n        const jo = {\n            item_id: itemId,\n            item_name: item.name,\n            category_name: cat.name,\n            category_id: catId,\n            // item_category: catId,\n            // item_category_name: cat.name,\n            item_list_name: ig.name,\n            item_list_id: igId,\n            price: item.price,\n            currency: this.context.currency,\n            quantity: q,\n            index: igPos,\n            ...addon\n        };\n\n        return jo;\n    }\n\n    makeModifierItemJo(item: Item): any {\n        console.log('makeModifierItemJo', item.mgroups);\n        if (!item.mgroups || item.mgroups?.length <= 0) {\n            return {};\n        }\n        const addons = {};\n        item.mgroups[0]?.items?.forEach((modifier, index) => {\n            addons['addon' + (index + 1)] = modifier.name;\n        });\n        return addons;\n    }\n\n    /**\n     * When a user adds an item to cart\n     * @param orderitem\n     */\n    trackAddToCart(orderitem: OrderItem) {\n\n        try {\n\n            console.log('trackAddToCart', orderitem);\n\n            const jo = this.makeOrderItemJo(orderitem);\n\n            this.track('event', 'add_to_cart', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user removes items from the cart\n     * @param orderitem\n     */\n    trackRemoveFromCart(orderitem: OrderItem) {\n\n        try {\n\n            const jo = this.makeOrderItemJo(orderitem);\n\n            this.track('event', 'remove_from_cart', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user views the cart\n     * @param order\n     */\n    trackViewCart(order: Order) {\n\n        try {\n\n            const jo = this.makeOrderJo(order);\n\n            this.track('event', 'view_cart', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    makeOrderJo(order: Order) {\n        const jo = {\n            currency: this.context.currency,\n            value: order.total\n        } as any;\n\n        const items = [];\n\n        for (const oi of order.orderitems) {\n\n            const oiJo = this.makeOrderItemJo(oi);\n            items.push(...oiJo.items);\n        }\n\n        jo.items = items;\n        return jo;\n    }\n\n\n    /**\n     * When a user clicks \"checkout\" on cart pane\n     * @param order\n     */\n    trackBeginCheckout(order: Order) {\n\n        try {\n\n            const jo = this.makeOrderJo(order);\n\n            this.track('event', 'begin_checkout', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user clicks \"continue\" after upselling prompt\n     * @param order\n     */\n    trackContinueCheckout(order: Order) {\n\n        try {\n\n            const jo = this.makeOrderJo(order);\n\n            this.track('event', 'continue_to_checkout', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user applies promo code\n     */\n    trackApplyPromoCode(currentPromoCode: string) {\n        try {\n\n            this.track('event', 'apply_promo_code', {\n                promo_code: currentPromoCode\n            });\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    makePurchaseOrderJo(order: Order) {\n        const jo = {\n            currency: this.context.currency,\n            total: order.total,\n            value: order.grandTotal,\n            transaction_id: order.id,\n            shipping: order.shipping,\n            tax: order.tax,\n            coupon: order.discountCode,\n            discount: order.discount,\n            service: order.service,\n            handling: order.handling,\n            business: order.business,\n            tips: order.tips,\n            container_user: order.containerUser,\n            user_id: order.memberId\n\n        } as any;\n\n        const items = [];\n\n        for (const oi of order.orderitems) {\n            OrderItem.flattenItems(oi);\n\n            const oiJo = this.makeOrderItemJo(oi);\n            items.push(...oiJo.items);\n        }\n\n        jo.items = items;\n        return jo;\n    }\n\n    checkSetDup(type: string, key: string) {\n\n        const set = type + '-ga';\n        let dups = this.configService.getLocal(set) || [];\n\n        const index = dups.indexOf(key);\n        if (index != -1) {\n            console.log('duplicated event', type, key);\n            return false;\n        }\n\n        dups.push(key);\n\n        if (dups.length > 10) {\n            dups = dups.slice(dups.length - 10, dups.length);\n        }\n\n\n        this.configService.setLocal(set, dups);\n        return true;\n\n    }\n\n    /**\n     * (N/A for some payment methods) When a user clicks confirm button\n     * @param order\n     */\n    trackPurchase(order: Order) {\n\n        try {\n\n            if (!this.checkSetDup('purchase', order.id)) {\n                return;\n            }\n\n            const jo = this.makePurchaseOrderJo(order);\n\n            this.track('event', 'purchase', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n\n\n\n    /**\n     * When a user completes a purchase & lands onto order status page\n     * @param order\n     */\n    trackPaymentSuccess(order: Order) {\n\n        try {\n\n            if (!this.checkSetDup('payment_success', order.id)) {\n                return;\n            }\n\n            const jo = this.makePurchaseOrderJo(order);\n\n            this.track('event', 'payment_success', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When the order status on the order status page is success\n     * @param order\n     */\n    trackOrderSuccess(order: Order) {\n\n        try {\n\n            if (!this.checkSetDup('order_success', order.id)) {\n                return;\n            }\n\n            const jo = this.makePurchaseOrderJo(order);\n\n            this.track('event', 'order_success', jo);\n\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user is asked to enter shipping address OR to select a store\n     */\n    trackLocationStart() {\n        try {\n\n            this.track('event', 'location_start', {\n\n            });\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n\n    /**\n     * When a user select a preferred payment method\n     */\n    trackSelectedPaymentMethod(method: string, gateway: string, order: Order) {\n        try {\n            if (!method || !gateway) { return; }\n            const jo = this.makeOrderJo(order);\n            jo['payment_method'] = method;\n            jo['payment_gateway'] = gateway;\n\n            this.track('event', 'select_payment_method', jo);\n\n            this.sentryService.setTag('payment_method', method);\n            this.sentryService.setTag('payment_gateway', gateway);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user login\n     */\n    trackLogin(method: string, from: string = null) {\n        try {\n            this.track('event', 'login', {\n                method,\n                from\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user signup\n     */\n    trackSignUp(method: string, from: string = null) {\n        try {\n            const jo = {\n                method,\n                from\n            };\n            this.track('event', 'sign_up', jo);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user clicks on view rewards in checkout page\n     */\n    trackViewRewards() {\n        try {\n            this.track('event', 'view_rewards', {});\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When a user signup\n     */\n    trackSelectReward(selectedRewardId) {\n        try {\n            const jo = { selected_reward_id: selectedRewardId };\n            this.track('event', 'select_reward', jo);\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When user view ads, will have ads array as attribute\n     */\n     trackViewAds(ads: Ad[], trigger: string): void {\n        try {\n            const adsJo = ads.map((ad, index) => {\n                return this.makeAdJo(ad, trigger, index);\n            });\n            this.track('event', 'view_content', {\n                ads: adsJo\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When user clicks on an ad\n     * @param ad\n     * @param trigger\n     * @param index\n     */\n    trackSelectAd(ad: Ad, trigger: string, index: number): void {\n        try {\n            this.track('event', 'select_ad', {\n                ...this.makeAdJo(ad, trigger, index)\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    makeAdJo(ad: Ad, trigger: string, index: number): any {\n        return {\n            ad_name: ad.name,\n            ad_id: ad.id,\n            trigger,\n            index\n        };\n    }\n\n    /**\n     * When user click on change store on order page\n     */\n    trackClickOpenDirectory(): void {\n        try {\n            this.track('event', 'click_open_directory', {});\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When user click on change time on order page\n     */\n    trackClickOpenTimeSelection(): void {\n        try {\n            this.track('event', 'click_open_time_selection', {});\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When user confirm an address when add new address\n     */\n    trackDeliveryAddressComfirmed(): void {\n        try {\n            this.track('event', 'delivery_address_confirmed', {});\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When user changed advance time\n     * @param date\n     * @param startTime\n     * @param endTime\n     */\n    trackChangeAdvanceTime(date: string, startTime: string, endTime: string): void {\n        try {\n            this.track('event', 'change_advance_time', {\n                startTime,\n                endTime,\n                date\n            });\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    /**\n     * When user click to start complete profile for quick registration\n     */\n    trackClickCompleteProfile(): void {\n        this.track('event', 'click_complete_profile', {});\n    }\n\n    /**\n     * When user completed their profile for quick registation\n     */\n    trackCompletedProfile(): void {\n        this.track('event', 'completed_profile', {});\n    }\n\n    /**\n     * When user click on forgot password in login page\n     * @param method\n     */\n    trackClickForgotPassword(method: string): void {\n        this.track('event', 'click_forgot_password', { method });\n    }\n\n    /**\n     * When user click on request otp in register page\n     * @param method\n     * @param from\n     */\n    trackRequestOtp(method: string, from: string = null): void {\n        this.track('event', 'request_otp', { method, from });\n    }\n\n    /**\n     * When user verify their otp in register page\n     * @param method\n     * @param from\n     */\n    trackVerifyOtp(method: string, from: string = null): void {\n        this.track('event', 'verify_otp', { method, from });\n    }\n\n    /**\n     * Track different actions in combo page, action: 'add', 'minus', 'add_to_cart', 'enlarge_image'\n     * @param action\n     * @param item\n     */\n    trackItemDialogAction(action: string, item: Item): void {\n        this.track('event', 'item_dialog_action', {\n            action,\n            item_id: item.id,\n            item_name: item.name,\n            type: item?.groups?.length > 0 ? 'combo' : 'alacarte'\n        });\n    }\n\n    makeOrderItemJo(orderitem: OrderItem) {\n        let cat = orderitem.category;\n\n        if (!cat) {\n            cat = new Category();\n            cat.id = orderitem.categoryId;\n        }\n\n        const q = orderitem.quantity || 1;\n\n        const jo = {\n            currency: this.context.currency\n        } as any;\n\n        const itemList = [];\n\n        for (const ig of orderitem.groups) {\n\n            const items = ig.items;\n            for (const item of items) {\n\n                const itemJo = this.makeItemJo(cat, ig, item);\n\n                // itemJo.index = orderitem.itemPosition;\n                itemJo.quantity = itemJo.quantity * q;\n\n                itemList.push(itemJo);\n            }\n        }\n\n        jo.items = itemList;\n        jo.value = orderitem.total * q;\n        return jo;\n    }\n\n    setMode(mode: string): void {\n        this.mode = mode;\n        this.sentryService.setTag(\"mode\", mode);\n    }\n\n    setCurrentStoreId(storeId: string): void {\n        this.storeId = storeId;\n        this.sentryService.setTag(\"storeId\", storeId);\n    }\n\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { PlatformService } from '../../pure/services/platform.service';\nimport { AQuery } from '../base/aquery';\nimport { ConfigService } from './config.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ApiBridgeService {\n\n    rules = [\n        {\n            method: \"get\",\n            match: \"/api/v1/menu/store/\",\n            replace: \"/api/v2/menu/store/\",\n            channels:[\"kiosk\"],\n            disabled: true\n        }\n    ];\n\n    constructor(injector: Injector, private platformService: PlatformService, private configService: ConfigService) {\n\n\n    }\n\n    private channelOk(channel, rule){\n\n        var channels = rule.channels;\n        if(channels){\n            return channels.indexOf(channel) >= 0;\n        }\n\n        return true;\n\n    }\n\n    public translateUrl(fromUrl:string, aq: AQuery): string{\n\n        //console.log(\"translating path\", fromUrl, aq);\n\n        //TEST ONLY, not enabled at PRD\n        if(this.configService.isPrd()) return fromUrl;\n\n        var channel = this.platformService.getChannel();\n\n\n        var result = fromUrl;\n\n        const u = new URL(fromUrl);\n\n        const path = u.pathname;\n\n        for(let proxy of this.rules){\n\n            if(proxy.disabled){\n               continue;\n            }\n            if(!this.channelOk(channel, proxy)){\n                continue;\n            }\n\n\n            if(aq.method == proxy.method && path.indexOf(proxy.match) >= 0){\n\n                console.log(\"translating proxy path match\", proxy);\n\n                result = fromUrl.replace(proxy.match, proxy.replace);\n\n\n                console.log(\"translated path\", result);\n\n                break;\n            }\n\n        }\n\n\n        return result;\n    }\n\n\n\n\n}\n","import { Injectable } from '@angular/core';\nimport * as localForage from 'localforage';\nimport { CookieService } from 'ngx-cookie-service';\nimport { v4 as uuidv4 } from 'uuid';\nimport { CommonService } from '../../pure/services/common.service';\nimport { PlatformService } from '../../pure/services/platform.service';\nimport { SubscribeService } from '../../pure/services/subscribe.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ConfigService {\n\n    config: any;\n    configRegion: string;\n    //app: any;\n    firebase: any;\n\n    sessionId: string = null;\n    locale: string;\n\n    private debugTime: number;\n    private host: string;\n\n    private loaded = {};\n    private loadedElement = {};\n\n    stationId: string = null;\n\n    apiKey: string;\n\n    constructor(protected cookieService: CookieService , ss : SubscribeService, private platformService: PlatformService) {\n\n        ss.bind(this, ['sessionId']);\n        console.log(\"ConfigService construct\", window['aigens']);\n\n        // this.config = new Config();\n        var config = window['appConfig'];\n        if (config) {\n            this.config = config;\n            this.pickRegion(config);\n        }\n\n        this.initFromContext();\n\n    }\n\n    initFromContext(){\n\n        var aigens = window['aigens'];\n        //TODO: Find a better way to set up profile\n        if (!aigens.profile) {\n            aigens.profile = {\n                \"api\": \"https://aigensstoretest.appspot.com\"\n            }\n        }\n\n        // aigens.profile.api = 'https://fairwood-test.appspot.com';\n        // aigens.profile.api =  'https://aigensstoretest.appspot.com';\n\n\n        if (aigens && aigens.profile && !this.isConsole()) {\n\n            this.configRegion = 'profile';\n\n            var p = Object.assign({}, aigens.profile);\n\n            //if cn network, use api2 if available\n            if(this.platformService.network == 'cn'){\n                if(p.api2){\n                    p.api = p.api2;\n                    p.api2 = null;\n                }\n            }\n\n            this.config = {\n                'profile': p\n            };\n\n\n            console.log(\"DYNAMIC PROFILE\", p);\n        }\n    }\n\n    //adhoc fix....\n    isConsole(): boolean{\n        var referer = window['aigens']?.referer;\n        if(referer && referer.indexOf('console') != -1){\n            return true;\n        }\n        return false;\n    }\n\n\n\n    setConfig(config: any) {\n        this.config = config;\n    }\n\n    setRegion(name: string) {\n\n        this.configRegion = name;\n\n        this.setLocal('config.region', name);\n\n    }\n\n    private pickRegion(config) {\n\n\n        var domain = window.location.hostname;\n        var region = config.domains[domain];\n\n        if (region) {\n            this.setRegion(region);\n        }\n\n\n\n    }\n\n    restoreRegion() {\n\n        console.log('restore Region');\n        this.configRegion = this.getLocal('config.region');\n\n    }\n\n    getRegion(): string {\n        return this.configRegion;\n    }\n\n    get(name: string): any {\n        const map = this.getConfig();\n\n        return map[name];\n    }\n\n    getConfig() {\n        let map = null;\n        if (this.configRegion) {\n            map = this.config[this.configRegion];\n        }\n        // console.log('config', map);\n\n        if (!map) {\n            // console.log('using default config');\n            map = this.config.default;\n        }\n\n        return map;\n    }\n\n    getApi(): string {\n\n        if (this.host) { return this.host; }\n\n        return this.get('api');\n    }\n\n    getBackendApi(): string {\n\n        var host = this.get(\"backend\");\n\n        if (!host) {\n            return this.getApi();\n        }\n\n        return host;\n    }\n\n\n    putPreference(key: string, value: any) {\n\n        //this.storage.set(key, value);\n\n    }\n\n    isDev() {\n\n        // return \"dev\" == this.config.default['name'];\n        return 'dev' == this.get('name');\n    }\n\n    isExperiment() {\n\n        // return \"dev\" == this.config.default['name'];\n\n        return this.isDev() || 'test' == this.get('name');\n    }\n\n    isLocalhost() {\n\n        return window.location.hostname == 'localhost';\n\n    }\n\n    isPrd() {\n\n        return this.get('production');\n    }\n\n\n    getSessionId(): string {\n\n        return this.sessionId;  // || this.getLocal(\"session\");\n\n    }\n\n    getLocale() {\n        return this.getLocal(\"locale\");\n    }\n\n    setLocale(lang: string) {\n        return this.setLocal(\"locale\", lang);\n    }\n\n    getAnonSessionId() {\n\n        var session = this.sessionId || this.getLocal(\"session\");\n\n        if (!session) {\n            session = uuidv4();\n            this.setLocal(\"session\", session);\n            this.sessionId = session;\n        }\n\n        return session;\n    }\n\n\n\n\n\n    getDeviceId() {\n\n        var deviceId = this.getLocal(\"deviceId\");\n\n        if (!deviceId) {\n            deviceId = uuidv4();\n            this.setLocal(\"deviceId\", deviceId);\n        }\n\n        return deviceId;\n    }\n\n    // pass deviceId from app (by core sdk)\n    setDeviceId(deviceId) {\n        if (!deviceId) return;\n        this.setLocal(\"deviceId\", deviceId);\n    }\n\n\n    setCookie(name: string, value: string) {\n\n        this.cookieService.set(name, value);\n    }\n\n    getCookie(name: string): string {\n\n        return this.cookieService.get(name);\n    }\n\n\n    setLocal(key: string, object: any) {\n\n        CommonService.setLocal(key, object);\n    }\n\n    getLocal(key: string): any {\n\n        return CommonService.getLocal(key);\n    }\n\n    clearAll() {\n        this.setCookie(\"sid\", null);\n        this.setLocal(\"sid\", null);\n        this.setLocal(\"aigens.member\", null);\n        this.setLocal(\"member\", null);\n        this.setLocal(\"session.expire\", null);\n        this.sessionId = null;\n    }\n\n    setSessionStorage(key: string, object: any): void {\n\n        CommonService.setSessionStorage(key, object);\n    }\n\n    getsessionStorage(key: string): any {\n\n        return CommonService.getSessionStorage(key);\n    }\n\n    setStorage(key: string, object: any): Promise<any> {\n\n        return localForage.setItem(key, object);\n\n    }\n\n    getStorage(key: string): Promise<any> {\n\n        return localForage.getItem(key);\n\n    }\n\n    loadScript(url: string, callback: any = () => { }, param?: any) {\n\n        if (this.loaded[url] && url.indexOf('session.js') == -1) {\n            // console.log(\"script already loaded!!!\", url);\n            if (callback) {\n                callback();\n            }\n            return;\n        } else if (this.loaded[url] && url.indexOf('session.js') != -1) {\n            // to re-init the mpgs session script\n            this.loadedElement[url].remove();\n            this.loadedElement[url] = null;\n            this.loaded[url] = false;\n        }\n\n        // Adding the script tag to the head as suggested before\n\n        const head = document.getElementsByTagName('head')[0];\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = url;\n\n        if (param) {\n            for (const key in param) {\n                script.setAttribute(key, param[key]);\n            }\n        }\n\n        script.onload = () => {\n\n            this.loaded[url] = true;\n            if (callback) {\n                // script.onreadystatechange = callback;\n\n                callback();\n            }\n        };\n\n        // Fire the loading\n        const temp = head.appendChild(script);\n        this.loadedElement[url] = temp;\n    }\n\n\n    loadJavaScript(url, param = {}): Promise<boolean> {\n        return new Promise((resolve, reject) => {\n            if (this.loaded[url] && url.indexOf('session.js') === -1) {\n                console.log(url + 'had already loaded');\n                resolve(true);\n                return;\n            } else if (this.loaded[url] && url.indexOf('session.js') !== -1) {\n                // to re-init the mpgs session script\n                this.loadedElement[url].remove();\n                this.loadedElement[url] = null;\n                this.loaded[url] = false;\n            }\n\n            const head = document.getElementsByTagName('head')[0];\n            const script = document.createElement('script');\n            script.type = 'text/javascript';\n            script.src = url;\n\n            if (param) {\n                for (const key in param) {\n                    script.setAttribute(key, param[key]);\n                }\n            }\n\n            script.onload = () => {\n                console.log(url + 'now loaded');\n                this.loaded[url] = true;\n                resolve(true);\n            };\n            head.appendChild(script);\n            const temp = head.appendChild(script);\n            this.loadedElement[url] = temp;\n        });\n    }\n\n    // for mpgs2 remove the old session.js which already import in this,loaded Map\n    removeJavaScriptJs(url: string): void {\n        if (this.loaded[url] && url.indexOf('session.js') !== -1) {\n            // to re-init the mpgs session script\n            this.loadedElement[url].remove();\n            this.loadedElement[url] = null;\n            this.loaded[url] = false;\n        }\n    }\n\n    loadScriptJS(path: string, callback: Function, param?: any, forceLoad?: boolean, removeOldJs?: boolean, removeCallback?: Function) {\n\n\n        if (this.loaded[path] && !forceLoad) {\n            console.log('script already loaded!!!', path);\n            callback();\n            return;\n        }\n\n        if (this.loaded[path] && forceLoad) {\n            // 已经存在js 但强迫重新load时：是否remove 原有的js节点 and then reload(google login btn render需要remove and then 重新加载js)\n            if (removeOldJs) {\n                removeCallback && removeCallback();\n            }\n        }\n\n        const head = document.getElementsByTagName('head')[0];\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = path;\n\n        if (param) {\n            for (const key in param) {\n                script.setAttribute(key, param[key]);\n            }\n        }\n\n        script.onload = () => {\n\n            this.loaded[path] = true;\n            if (callback) {\n                // script.onreadystatechange = callback;\n                callback();\n            }\n        };\n\n        head.appendChild(script);\n\n    }\n\n    loadCSS(url: string, callback: Function, param?: any) {\n        const link = document.createElement('link');\n        link.setAttribute('rel', 'stylesheet');\n        link.setAttribute('href', url);\n\n        if (param) {\n            for (const key in param) {\n                link.setAttribute(key, param[key]);\n            }\n        }\n\n        link.onload = () => {\n\n            this.loaded[url] = true;\n            if (callback) {\n                callback();\n            }\n        };\n\n        document.getElementsByTagName('head')[0].appendChild(link);\n    }\n\n    getVersionCode(): string {\n        return this.get('version');\n    }\n\n    // returns the current time or debug time\n    getTime() {\n\n        if (this.config?.default?.name == 'pos') {\n            return new Date().getTime();\n        }\n\n        if (this.debugTime) { return this.debugTime; }\n        return new Date().getTime();\n    }\n\n    setDebugTime(time: number) {\n        this.debugTime = time;\n    }\n\n    // some logic copy from v3\n    clearSessionId() {\n        this.setSessionId(null);\n    }\n\n    deleteCookie(name: string) {\n        this.cookieService.delete(name, '/');\n    }\n\n    setSessionId(sessionId: string) {\n        this.sessionId = sessionId;\n        this.setLocal(\"session\", sessionId);\n    }\n\n    setStationId(stationId: string) {\n        this.stationId = stationId;\n        this.setLocal(\"session\", stationId);\n    }\n\n    getStationId() {\n        return this.stationId;\n    }\n\n    getUserToken(): string {\n        // return Cookie.get(\"_ut\");\n        return this.getCookie('_ut');\n    }\n\n    getAnimationOff(): boolean {\n        return this.getLocal(\"animationOff\") || false;\n    }\n\n    setAnimationOff(isOff: boolean) {\n        this.setLocal(\"animationOff\", isOff);\n    }\n\n    getAutoExpand(): boolean {\n        let isAutoExpand = this.getLocal(\"autoExpand\");\n\n        console.log('isAutoExpand1', isAutoExpand);\n        if(typeof isAutoExpand == 'undefined'){\n            isAutoExpand = true;\n        }\n\n        console.log('isAutoExpand2', isAutoExpand);\n        return isAutoExpand;\n    }\n\n    setAutoExpand(isOn: boolean) {\n        console.log('setAutoExpand', isOn);\n        this.setLocal(\"autoExpand\", isOn);\n    }\n\n    getDoubleConfirm(): boolean {\n        return this.getLocal(\"doubleConfirm\") || false;\n    }\n\n    setDoubleConfirm(isOn: boolean) {\n        console.log('doubleConfirm', isOn);\n        return this.setLocal(\"doubleConfirm\", isOn);\n    }\n\n    setAutoModifier(isOn: boolean) {\n        console.log('setAutoModifier', isOn);\n        this.setLocal(\"autoModifier\", isOn);\n    }\n\n    getAutoModifier(): boolean {\n        let isAutoModifier = this.getLocal(\"autoModifier\");\n\n        console.log('isAutoModifier1', isAutoModifier);\n        if(typeof isAutoModifier == 'undefined'){\n            isAutoModifier = false;\n        }\n\n        console.log('isAutoModifier2', isAutoModifier);\n        return isAutoModifier;\n    }\n\n    setApiKey(apiKey: string) {\n        console.log('setApiKey', apiKey);\n        this.apiKey = apiKey;\n        this.setLocal(\"apiKey\", apiKey);\n    }\n\n    getApiKey(): string{\n        return this.apiKey;\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Context, DataService, StorageService, ThemeColorService } from 'aigens-framework';\nimport { ConfigService } from './config.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ContextManager {\n\n\n\n    constructor(private context: Context, private dataService: DataService, private themeService: ThemeColorService,\n        private storageService: StorageService, private configService: ConfigService,\n        //private memberContext: MemberContext, private orderContext: OrderContext\n        ) {\n\n\n    }\n\n    autoContext(fields: string[], params: any, callback?: Function) {\n\n        var update = false;\n\n        if (this.context.brandId != params.brandId) {\n            console.log(\"different brandId\");\n            update = true;\n        }\n\n        if (!this.haveAllFields(fields, this.context.fields)) {\n            console.log(\"missing fields fetching context\", fields, this.context.fields);\n            update = true;\n        }\n\n        if (!update) {\n            console.log(\"context have all fields and correct brand\");\n            if (callback) callback(this.context);\n            return;\n        }\n\n        console.log(\"reloading context\", fields, params);\n\n        this.loadContext(fields, params, false, callback);\n\n    }\n\n    private haveAllFields(fields: string[], existing: string[]) {\n\n        if (!existing) return false;\n\n        for (let f of fields) {\n            if (existing.indexOf(f) == -1) {\n                console.log(\"context missing field\", f);\n                return false;\n            }\n        }\n\n        return true;\n\n    }\n\n    loadContext(fields: string[], contextIds: any, refresh: boolean, callback?: Function): void {\n\n        const url = '/api/v1/asset/context.json';\n\n        var params = contextIds;\n\n        if (fields) {\n            params['fields'] = fields.join();\n        }\n\n        params['locale'] = 'multi'; // add this to avoid new context (order-context) created with different key\n\n        this.dataService.get(url, params).subscribe(\n            data => {\n\n                console.log('context', data);\n\n                if (window['aigens']) {\n                    Object.assign(window['aigens'].context, data);\n                }\n                this.context.setContextData(data);\n\n                this.themeService.setThemeByContext();\n\n                callback && callback(this.context);\n\n            },\n            err => {\n\n\n                console.log(err);\n                callback && callback(null);\n            }\n        );\n\n    }\n\n    loadEmbeddedContext(url: string, refresh: boolean, callback?: Function): void {\n\n        this.readUrlCache(url).then((cached)=>{\n\n            if(cached){\n                console.log(\"Serving CACHED App Context\");\n                this.setContextAndCallback(url, cached, callback);\n            }\n\n            //always go fetch again\n            this.dataService.get(url, {}, !refresh).subscribe({\n                next: data => {\n\n                    if(!cached){\n                        this.setContextAndCallback(url, data, callback);\n                    }\n\n                    this.saveEmbddedContext(url, data);\n                },\n                error: err => {\n\n                    console.log(err);\n                    callback && callback(null);\n                }\n            });\n\n\n\n        });\n\n\n\n\n    }\n\n    private saveEmbddedContext(url, data){\n        if(data?.app){\n            this.saveUrlCache(url, data);\n            console.log(\"init json saved silently in background\");\n        }\n        return;\n    }\n\n    private setContextAndCallback(url, data, callback){\n\n        if (data) {\n            //inject new content into aigens object\n            var aigens = window['aigens'] || {};\n            Object.assign(aigens, data);\n\n            //aigens is set, now reset the profile\n            this.configService.initFromContext();\n            this.context.initFromContext();\n            //this.memberContext.initFromContext();\n            //this.orderContext.initFromContext();\n\n        }\n\n        this.context.setContextData(data.context);\n        this.themeService.setThemeByContext();\n\n        callback && callback(data);\n\n    }\n\n    private saveUrlCache(url: string, jo){\n\n        var key = \"type=cache&url=\" + url;\n\n        console.log(\"SAVING URL CACHE\", key);\n\n        this.storageService.setStorage(key, jo);\n\n    }\n\n    private readUrlCache(url: string):Promise<any>{\n\n        var key = \"type=cache&url=\" + url;\n\n        return this.storageService.getStorage(key);\n\n    }\n\n}\n\n","import { Injectable, Injector } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Ad, Brand, Court, Crm, Group, Member, Membership, Store } from 'aigens-data';\nimport { get, merge } from 'lodash-es';\nimport { Location } from '../../data/data/location';\nimport { BaseContext } from '../base/base-context';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class Context extends BaseContext {\n\n    //hold the app context\n    app: any;\n\n    member: Member;\n    membership: Membership;\n\n    config: any;\n\n    userLang: string = \"en\";\n    contentLang: string;\n\n    language: string;\n    languages: string[];\n    country: string;\n\n    groupId: number;\n    brandId: number;\n    storeId: number;\n    courtId: number;\n    ads: Ad[];\n    discounts: any[];\n\n    group: Group;\n    brand: Brand;\n    store: Store;\n    court: Court;\n    //property: any;\n\n    location: Location;\n\n    contextContent: any;\n\n    currencySign: string = \"$\";\n    currency: string;\n\n    agreements: any[];\n    campaigns: any[];\n\n    settings: any;\n\n    locale: string;\n    level: string;\n    timezone: string;\n    adminLevel: string;\n    embed: boolean = false;\n\n    admin: boolean = false;\n\n    crm: Crm;\n    form: any;\n\n    payments: any[] = [];\n    sessionId: string;\n\n    t: TranslateService;\n\n    domain: any;\n    version: string;\n    singleStore: boolean;\n    featuredItems: any[];\n    defaultStoreMode: string;\n\n    station:string;\n\n    // The native app may be set this, which represents redirect to the specified app scheme\n    appSchemesOrigin: string;\n    constructor(injector: Injector) {\n\n        super(injector);\n\n        this.t = injector.get(TranslateService);\n\n        console.log(\"constructing context, this should only happen once\");\n\n        this.initFromContext();\n\n        this.bind([\"member\", \"membership\", \"sessionId\"]);\n\n    }\n\n    initFromContext(){\n        this.initFromJs();\n        this.setTranslation();\n    }\n\n\n    private initFromJs() {\n\n        if (!window['aigens']) {\n            window['aigens'] = {};\n        }\n\n        var aigens = window['aigens'];\n\n        if (aigens && aigens.context) {\n            this.version = aigens.version;\n            this.setContextData(aigens.context);\n\n        }\n\n\n    }\n\n\n\n    //clear the context, likely due to logout or switching to different brand\n    clear() {\n\n        /*\n        this.membership = null;\n        this.groupId = null;\n        this.group = null;\n        this.brandId = null;\n        this.brand = null;\n        this.store = null;\n        this.storeId = null;\n        this.courtId = null;\n        this.court = null;\n        this.currencySign = null;\n        this.currency = null;\n        this.crm = null;\n        this.form = null;\n        this.payments = null;\n        this.sessionId = null;\n        */\n    }\n\n    public logout(): void {\n        console.log('logout');\n\n        this.setLocal(\"member\", null);\n        this.setLocal(\"session\", null);\n\n        this.next(\"member\", null);\n        this.next(\"membership\", null);\n        this.next(\"sessionId\", null);\n\n        this.sentryService.removeMember();\n\n        this.save();\n    }\n\n    protected makeSaveData(): {} {\n\n        if (!this.groupId) {\n            console.log(\"cannot save incomplete context\");\n            return null;\n        }\n\n        var data = {\n            member: this.member,\n            membership: this.membership,\n            userLang: this.userLang,\n            contentLang: this.contentLang,\n            language: this.language,\n            languages: this.languages,\n            country: this.country,\n            group: this.group,\n            groupId: this.groupId,\n            brandId: this.brandId,\n            brand: this.brand,\n            store: this.store,\n            storeId: this.storeId,\n            court: this.court,\n            courtId: this.courtId,\n            currencySign: this.currencySign,\n            currency: this.currency,\n            crm: this.crm,\n            form: this.form,\n            sessionId: this.sessionId,\n            payments: this.payments,\n            agreements: this.agreements,\n            config: this.config,\n            locale: this.locale,\n            defaultStoreMode: this.defaultStoreMode\n        };\n        return data;\n    }\n\n    protected restoreSavedData(data: any) {\n\n        console.log(\"init context doesn't restore saved data\");\n\n    }\n\n    /**\n     * @deprecated Use settingManager.get() instead\n     */\n    getDeviceConfig(key: string): any {\n\n        var result = null;\n\n        if (this.config?.data) {\n\n            var config = this.config.data;\n            result = get(config, key);\n        }\n\n        return result;\n    }\n\n\n    private setTranslation() {\n        let userLang;\n\n        const languages = window['aigens']?.context?.languages;\n\n        if (!languages || languages?.includes(this.getLocal('locale'))) {\n            userLang = this.getLocal('locale');\n        }\n\n        var lang = userLang || window['aigens']?.context?.language || 'en';\n        this.setLocal('locale', lang);\n\n\n        this.t.onLangChange.subscribe((res) => {\n\n            this.mergeTranslation();\n        });\n\n        this.t.setDefaultLang('en');\n        this.t.use(lang);\n\n        this.userLang = userLang;\n\n\n        this.mergeTranslation(); // initial merge the translations, in case just one lang and no onLangChange trigger\n\n        console.log(\"lang setup done\");\n\n    }\n\n\n\n    mergeTranslation() {\n\n        var lang = this.t.currentLang;\n        var currentTrans = this.t.translations[lang];\n\n        //console.log(\"current lang\", lang);\n        //console.log(\"currentTrans\", currentTrans);\n        this.userLang = lang;\n\n        var overwrites = this.config?.data?.translations;\n\n        if (overwrites) {\n            var newTrans = overwrites[lang];\n            //console.log(\"overwrites\", newTrans);\n            if (newTrans) {\n                merge(currentTrans, newTrans);\n            }\n\n            //console.log(\"mergedTrans\", currentTrans);\n        }\n\n\n\n\n    }\n\n\n    setMember(member: any) {\n\n        this.member = member;\n        this.setLocal(\"member\", member);\n\n        if(member?.membership) {\n            this.membership = member?.membership;\n        }\n\n        this.next(\"member\", member);\n\n        try {\n            this.sentryService.setMember(member);\n        } catch(err) {\n            console.log(err);\n        }\n    }\n\n    isSignedIn() {\n        return this.member && this.member.sessionId && !this.member.guest;\n    }\n\n    setContextData(data): void {\n\n        if (!data) {\n            return;\n        }\n\n        const context = this;\n\n\n        // invalid data\n        if (!data.groupId) {\n            console.log(\"INVALID CONTEXT\", data);\n            return;\n        }\n\n        Object.assign(context, data);\n\n        context.contentLang = context.language;\n        context.settings = context.config?.data;\n\n        this.contextId = this.makeGenericKey(data, \"init\", data.locale);\n\n\n        context.save();\n\n    }\n\n    switchStore(brand: Brand, store: Store) {\n\n        if (this.brand && this.brand.id != store.brandId) {\n            console.log(\"CANNOT SWITCH store due to brand mismatch\");\n            return;\n        }\n\n        this.store = store;\n        this.storeId = store.id;\n\n        this.switchBrand(brand);\n\n    }\n\n    switchBrand(brand: Brand) {\n\n        if (this.group && this.group.id != brand.groupId) {\n            console.log(\"CANNOT SWITCH brand due to group mismatch\");\n            return;\n        }\n\n        this.brand = brand;\n        this.brandId = brand.id;\n\n    }\n}\n\n","import { TimeService } from './../../pure/services/time.service';\nimport { Injectable, Injector } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { AQuery } from '../base/aquery';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DataService {\n\n    private aq: AQuery;\n\n    private CACHE: any = {};\n\n    private timeService: TimeService;\n\n    constructor(injector: Injector) {//, private context: Context) {\n\n        this.aq = new AQuery(injector);\n        this.timeService = injector.get(TimeService);\n    }\n\n\n    get(url: string, params: {} = {}, useCache: boolean = false, syncTime: boolean = false): Observable<any> {\n\n        var cacheKey = this.makeCacheKey(url, params);;\n\n        //check if cache have the value\n        if (useCache) {\n            var result = this.CACHE[cacheKey];\n            if (result) {\n                console.log(\"cache hit\");\n                return of(result);\n            }\n        }\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"get\";\n        aq.params = params;\n\n\n        //bypass service worker for API get\n        /*\n        aq.headers = {\n            \"ngsw-bypass\": \"true\"\n        };\n        */\n\n\n\n        return aq.auth(true).getJson().pipe(map(jo => {\n\n            var data = jo['data'];\n\n            if (syncTime) {\n                const time = jo['time'];\n                if(time) {\n                    this.timeService.setServerVerifiedTime(time);\n                }\n            }\n\n            if (useCache && data) {\n                this.CACHE[cacheKey] = data;\n            } else {\n                //if cache do exist, update the cache reguardless\n                if (this.CACHE[cacheKey]) {\n                    this.CACHE[cacheKey] = data;\n                }\n            }\n\n            return data;\n        }\n        ));\n\n    }\n\n    private makeCacheKey(url: string, params: {}) {\n\n        var key = url + \"?\" + new URLSearchParams(params).toString();\n\n        console.log(\"cache key\", key);\n\n        return key;\n\n    }\n\n\n    getRaw(url: string, params = {}, auth = false): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"get\";\n        aq.params = params;\n\n        return aq.auth(auth).getJson();\n\n    }\n\n    getRawWithHeaders(url: string, params = {}, auth = false, headers): Observable<any> {\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"get\";\n        aq.params = params;\n        aq.headers = headers;\n\n        return aq.auth(auth).getJson();\n    }\n\n\n    postWithBody(url: string, body: {}, params = {}, auth = true): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"post\";\n        aq.body = body;\n        aq.params = params;\n\n        // some payments require attribute(jo.charge)\n        return aq.auth(auth).getJson().pipe(map(jo => jo/*['data']*/));\n\n    }\n\n    postWithHeaders(url: string, body: {}, params = {}, headers: {} = null, auth = true): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"post\";\n        aq.body = body;\n        aq.params = params;\n\n        if (headers) {\n            aq.headers = headers;\n        }\n\n        return aq.auth(auth).getJson().pipe(map(jo => jo/*['data']*/));\n\n    }\n\n    put(url: string, body: {}, auth = true): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"put\";\n        aq.body = body;\n\n        return aq.auth(auth).getJson().pipe(map(jo => jo['data']));\n\n    }\n\n    putWithParams(url: string, params: {}): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = 'put';\n        aq.params = params;\n\n        return aq.auth(true).getJson().pipe(map(jo => jo['data']));\n\n    }\n\n    postWithParams(url: string, params: {}, headers: {} = null): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"post\";\n        aq.params = params;\n\n        if (headers) {\n            aq.headers = headers;\n        }\n\n        return aq.auth(true).getJson().pipe(map(jo => jo['data']));\n\n    }\n\n    postWithBodyAndParamsAndHeaders(url: string, body: {}, params: {}, headers: {} = null, shouldAuth = false): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = \"post\";\n        aq.params = params;\n\n        if (headers) {\n            aq.headers = headers;\n        }\n        if (body) {\n            aq.body = body;\n        }\n\n        return aq.auth(shouldAuth).getJson().pipe(map(jo => jo));\n    }\n\n    deleteWithParams(url: string, params: {}): Observable<any> {\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = 'delete';\n        aq.params = params;\n\n        return aq.auth(true).getJson().pipe(map(jo => jo['data']));\n    }\n\n    postFile(url: string, file: Blob, params: any = {}): Observable<any> {\n\n        var aq = this.aq;\n        aq.url = url;\n        aq.method = 'post';\n        aq.file = file;\n        aq.params = params;\n        return aq.auth(true).getJson();\n\n    }\n    /*\n       private haveAllFields(fields: string[], existing: string[]) {\n\n           if (!existing) return false;\n\n           for (let f of fields) {\n               if (existing.indexOf(f) == -1) {\n                   console.log(\"context missing field\", f);\n                   return false;\n               }\n           }\n\n           return true;\n\n       }\n\n\n       autoContext(fields: string[], params: any, callback?: Function) {\n\n\n\n           var update = false;\n\n           if (this.context.brandId != params.brandId) {\n               console.log(\"different brandId\");\n               update = true;\n           }\n\n           if (!this.haveAllFields(fields, this.context.fields)) {\n               console.log(\"missing fields fetching context\", fields, this.context.fields);\n               update = true;\n           }\n\n           if (!update) {\n               console.log(\"context have all fields and correct brand\");\n               if (callback) callback(this.context);\n               return;\n           }\n\n           console.log(\"reloading context\", fields, params);\n\n           this.loadContext(fields, params, false, callback);\n\n       }\n\n       loadContext(fields: string[], contextIds: any, refresh: boolean, callback?: Function): void {\n\n           const url = '/api/v1/asset/context.json';\n\n           var params = contextIds;\n\n           if (fields) {\n               params['fields'] = fields.join();\n           }\n\n\n           this.get(url, params).subscribe(\n               data => {\n\n                   console.log(\"context\", data);\n\n                   //this.setContextData(data);\n                   this.context.setContextData(data);\n\n                   callback && callback(this.context);\n\n               },\n               err => {\n\n\n                   console.log(err);\n                   callback && callback(null);\n               }\n           );\n\n       }\n       */\n\n\n\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport { Observable } from 'rxjs';\nimport { RoutingService } from '../../pure/services/routing.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DialogService {\n\n    private dialogCtr: any;\n    private snackBar: any;\n    private superLoader;\n    private superLoaderComponent;\n    private alertComponent;\n    private confirmComponent;\n    private confirmCancelDialogComponent;\n    public t: TranslateService;\n    private routingService: RoutingService;\n\n\n    busy: boolean = false;\n    logoutHandler: Function;\n\n    constructor(injector: Injector) {\n\n        this.t = injector.get(TranslateService);\n        this.routingService = injector.get(RoutingService);\n    }\n\n    setDialogController(dialogCtr) {\n        this.dialogCtr = dialogCtr;\n    }\n\n    getDialogController(): any {\n        return this.dialogCtr;\n    }\n\n    setSnackBar(snackBar) {\n        this.snackBar = snackBar;\n    }\n\n    setSuperLoaderComponent(component) {\n        this.superLoaderComponent = component;\n    }\n\n    setAlertComponent(component) {\n        this.alertComponent = component;\n    }\n\n    setConfirmComponent(component) {\n        this.confirmComponent = component;\n    }\n\n    setConfirmCancleComponent(component) {\n        this.confirmCancelDialogComponent = component;\n    }\n\n\n    showError(err, handleSessionExpired = true) {\n        console.log(err);\n        // this.loading(false);\n        this.superloading(false);\n\n\n        if (err.status == 0) {\n            this.showAlert('', this.t.instant('global.network-error'));\n        } else if (err.status == 401 && handleSessionExpired) {\n\n            // this.showConfirm('Authentication Error', 'Insufficient permission or session expired. ' + '(' + err.error + ')', null, null, () => {\n            //     this.goLogin();\n            // });\n\n            return this.showAlert(this.t.instant('global.auth-error'), this.t.instant('global.auth-error-msg'), (type) => {\n\n                if(this.logoutHandler){\n                    this.logoutHandler();\n                }\n            });\n        } else if (err.message){\n            return this.showAlert('', err.message);\n        } else{\n            return this.showAlert(err.status, err.error);\n        }\n\n\n    }\n\n\n    showAlert(title: string ,message: string , callback = (clickedType?: 'confirm' | 'cancel' | 'bg') => { }, showCancel = false, disableBgClose = false, configs:any = {} , error ?: string ): any {\n\n        if (!this.dialogCtr) {\n            window.alert(message);\n            callback && callback('confirm');\n            return;\n        }\n        const customModalClass = ['alert-dialog'];\n\n        if(configs?.panelClass) {\n            customModalClass.push(configs?.panelClass);\n        }\n\n        const alert = this.dialogCtr.open(this.alertComponent, { data: { title , message , error , showCancel }, disableClose: disableBgClose, panelClass: customModalClass, ...configs });\n\n        alert.afterClosed().subscribe((respone: any) => {\n            switch (respone) {\n                case 'confirm':\n                case 'cancel':\n                    callback && callback(respone);\n                    break;\n                default:\n                    callback && callback('bg');\n                    break;\n            }\n\n        });\n        return alert;\n\n    }\n\n\n\n\n    showToast(message: string, duration = 2000, position: 'top' | 'bottom' = 'bottom', clsName: string[] = []): void {\n\n        if (!this.snackBar) {\n            alert(message);\n            return;\n        }\n\n        this.snackBar.open(message, null, {\n            duration,\n            verticalPosition: position,\n            panelClass: ['snackbar', ...clsName], // add this to styling the snack bar , ::ng-deep .snackbar\n        });\n\n    }\n\n\n    showConfirm(title: string, message: string, options: any = {}): Observable<any> {\n\n\n        const cancel = options.cancelText || this.t.instant('buttons.cancel');\n        const ok = options.okText || this.t.instant('buttons.ok');\n\n        const customModalClass = ['confirm-dialog'];\n\n        if(options?.panelClass) {\n            customModalClass.push(options?.panelClass);\n        }\n\n        const dialogRef = this.dialogCtr.open(this.confirmComponent, { data: { title, message, cancel: cancel, ok: ok, callback: options.callback}, panelClass: customModalClass });\n\n        return dialogRef.afterClosed();\n\n    }\n\n    showConfirmRef(title: string, message: string, options: any = {}) {\n\n\n        const cancel = options.cancelText || this.t.instant('buttons.cancel');\n        const ok = options.okText || this.t.instant('buttons.ok');\n\n        const customModalClass = ['confirm-dialog'];\n\n        if(options?.panelClass) {\n            customModalClass.push(options?.panelClass);\n        }\n\n        const dialogRef = this.dialogCtr.open(this.confirmComponent, { data: { title, message, cancel: cancel, ok: ok, callback: options.callback}, panelClass: customModalClass });\n\n        return dialogRef;\n\n    }\n\n\n    showConfirmCancle(title: string, message: string, options: any = {}): Observable<any> {\n\n\n        const cancel = options.cancelText || this.t.instant('buttons.cancel');\n        const ok = options.okText || this.t.instant('buttons.ok');\n\n        const customModalClass = ['confirm-dialog'];\n\n        if(options?.panelClass) {\n            customModalClass.push(options?.panelClass);\n        }\n\n        const dialogRef = this.dialogCtr.open(this.confirmCancelDialogComponent, { data: { title, message, cancel: cancel, ok: ok, callback: options.callback}, panelClass: customModalClass });\n\n        return dialogRef.afterClosed();\n\n    }\n\n\n\n    showSnack(message: string, action: string, fn): void {\n\n\n        const bar = this.snackBar.open(message, action, {\n            duration: 5000\n        });\n\n        bar.onAction().subscribe(fn);\n\n    }\n\n    loading(show, message: string = null): void {\n\n        //this.context.app.loading(show, message);\n\n    }\n\n\n    setBusy(busy: boolean): void {\n\n        this.busy = busy;\n    }\n\n\n    superloading(show): void {\n\n        if (show) {\n\n            if (this.dialogCtr && this.superLoaderComponent) {\n                if (this.superLoader) {\n                    // has an exiting loading showing, dont create new;\n                } else {\n                    this.superLoader = this.dialogCtr.open(this.superLoaderComponent, { data: {}, disableClose: true });\n\n                }\n            }\n\n\n        } else {\n\n            if (this.superLoader) {\n                this.superLoader.close();\n                this.superLoader = null;\n            }\n\n        }\n\n    }\n\n\n    dismissPreLoader() {\n\n        /*\n        var w = window as any;\n\n        if (w.dismissPreLoader) {\n            w.dismissPreLoader();\n        }\n        */\n\n        this.routingService.dismissPreLoader();\n    }\n\n\n    protected openDialog(component: any, data: any = {}, options: any = {}) {\n\n        var input = { data: data };\n        input = Object.assign(input, options);\n\n        const dialogRef = this.dialogCtr.open(component, input);\n        return dialogRef;\n\n    }\n\n    //IMPLEMENT ME\n    async openLazyDialog(componentName: string, data: any, options: any = {}): Promise<any> {\n        console.log(\"openLazyDialog not implemented\");\n        return null;\n    }\n\n    async openLazyFullDialog(componentName: string, data: any, options: any = {}): Promise<any> {\n        console.log(\"openLazyFullDialog not implemented\");\n        return null;\n    }\n\n    openComponent(component: any, data: any = {}, options: any = {}, callback: Function = null) {\n\n        var input = { data: data };\n        input = Object.assign(input, options);\n\n        if (callback) {\n            data.callback = callback;\n        }\n        console.log(\"open COmp check input: \", input,options);\n        const dialogRef = this.dialogCtr.open(component, input);\n        return dialogRef;\n\n    }\n\n    openAux(path: string, data: any = {}, options: any = {}, callback: Function = null) {\n\n        if (callback) {\n            data.callback = callback;\n        }\n\n        this.routingService.navigateModal(path, data, options);\n\n    }\n\n\n    closeAll() {\n\n        console.log(\"closing all\", this.dialogCtr);\n\n        this.dialogCtr.closeAll();\n    }\n\n\n    submitAuxDialog(result: {} = {}, forceClose: boolean = false) {\n\n        var profile = this.routingService.getAuxProfile();\n\n        console.log('profile: ', profile);\n\n        var input = profile.input;\n        var extras = profile.extras;\n\n        var autoClose = extras?.autoClose != false || forceClose;\n\n        console.log(\"autoClose\", autoClose);\n\n        if (autoClose) {\n\n            this.routingService.navigateCloseAllModal();\n\n            if (input?.callback) {\n\n                //IMPORTANT to not callback immediately, because dialog might not have closed and can cause issue if callback open another dialog\n                setTimeout(() => {\n                    input.callback(result);\n                }, 20);\n            }\n        } else {\n            if (input?.callback) {\n                input.callback(result);\n            }\n        }\n\n\n    }\n\n\n}\n","import { TimeService } from './../../../../../core/src/app/pure/services/time.service';\nimport { SettingManager } from '@aigens/core/src/app/pure/managers/setting-manager';\nimport { RoutingService } from '@aigens/core/src/app/pure/services/routing.service';\nimport { DirectoryState } from '@aigens/core/src/app/data/data/directory-state.model';\nimport { Injectable, Injector } from '@angular/core';\nimport { Slot, Store } from 'aigens-data';\nimport { BaseContext, ConfigService, Context } from 'aigens-framework';\nimport * as moment from 'moment';\nimport { BehaviorSubject } from 'rxjs';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class DirectoryContext extends BaseContext {\n    readonly DINE_IN = 'dinein';\n    readonly TAKEAWAY = 'takeaway';\n    readonly DELIVERY = 'delivery';\n    readonly CATERING = 'catering';\n    readonly WEB = 'web';\n    readonly PREORDER = 'preorder';\n\n    readonly VIEW_MODE_SELECT_DELIVERY_ADDRESS = 'selectDeliveryAddress';\n    readonly VIEW_MODE_SELECT_STORE = 'selectStore';\n\n    readonly TIME_FORMAT = 'DD MMM';\n\n    routingService: RoutingService;\n    configService: ConfigService;\n    position: any;\n    position$: BehaviorSubject<any> = new BehaviorSubject(null);\n    stores: Store[];\n\n    nav: string[] = [];\n\n    changeLocationMode = false;\n    autoSelectSingleStore = false;\n    replaceUrlNavToOrderPage = null;\n\n    _isCatering = false;\n\n    lastSid; // for cache\n\n    // @ts-ignore\n    private sharedData: { canAdvanceOrder: boolean, noServiceCode: string, isStoreOpen: boolean } = {};\n\n    /**\n     * temporary state is a convenient share state during user interaction in the directory module\n     * it is NOT safe to use by outer module\n     */\n    tempState: DirectoryState = new DirectoryState();\n\n    /**\n     * state is a FINAL RESULT of user selection in directory module\n     * other modules should refer to this state\n     * this state MUST BE WRITTEN ONLY when user do final confirmation to avoid anomaly state\n     */\n    state: DirectoryState;\n\n    context: Context;\n\n    fromStoreHome = false;\n\n    fromHomeType = '';\n\n    debugTimestamp;\n\n    tempPendingAction;\n\n    /**\n     * Use to maintain search state in directory\n     */\n    searchState = null;\n\n    constructor(injector: Injector, private settingManager: SettingManager, private timeService: TimeService) {\n        super(injector);\n\n        this.context = injector.get(Context);\n\n        console.log('constructing dir context, this should only happen once');\n\n        this.routingService = injector.get(RoutingService);\n        this.configService = injector.get(ConfigService);\n        if (this.context.courtId) {\n            this.contextId = `type=directory&groupId=${this.context.groupId}&courtId=${this.context.courtId}`;\n        } else {\n            this.contextId = `type=directory&groupId=${this.context.groupId}&brandId=${this.context.brandId}`;\n        }\n    }\n\n    setPosition(pos): void {\n        if (!pos) {\n            return;\n        }\n\n        if (this.position != null) {\n            if (pos.longitude === this.position.longitude && pos.latitude === this.position.latitude) {\n                return;\n            }\n        }\n\n        this.position = pos;\n        console.log('prov position: ', this.position);\n        this.position$.next(pos);\n    }\n\n    // clear the context, likely due to logout or switching to different brand\n    clear(): void {\n        this.resetTempState();\n        this.state = null;\n        this.stores = [];\n    }\n\n    makeSaveData(): DirectoryState {\n        return this.state;\n    }\n\n    restoreSavedData(data: DirectoryState): void {\n        this.state = data;\n    }\n\n    /**\n     * Called when we need to fetch dir state from storage\n     * Use case: user enter to order page directly, so dir state need to be fetch\n     *\n     */\n    restoreFromStorage(orderMode: string, spot: string, storeId: number, brandId: number ,callback ?:Function): void {\n        // restore directory state context from storage\n        this.restore(res => {\n            // if no state on storage then create it and mark it as ASAP\n            if (!this.state) {\n                this.state = new DirectoryState();\n                this.state.asap = true;\n            }\n\n            if (this.state.storeId != storeId) {\n                if (orderMode == this.DELIVERY) {\n                    this.state.deliveryAddress = null;\n                }\n            }\n\n            this.state.mode = orderMode || this.state.mode;\n            this.state.storeId = storeId ||this.state.storeId  ;\n\n            // force to ASAP if mode other than TA / Delivery / Dine in / time is outdate / dine in with spot\n            if ((orderMode != this.TAKEAWAY && orderMode != this.DINE_IN && orderMode != this.DELIVERY) ||\n                (orderMode == this.DINE_IN && spot) || this.isSelectedTimeOutdated()) {\n                this.state.asap = true;\n                this.state.scheduleDate = null;\n                this.state.scheduleTime = null;\n                this.state.humanScheduleTime = null;\n            }\n\n            // reset delivery related state for non delivery mode\n            if (this.state.mode != this.DELIVERY) {\n                this.state.deliveryAddress = null;\n            }\n\n            // if debug time is defined, then override the state\n            if (this.debugTimestamp) {\n                this.state.asap = false;\n                this.state.scheduleDate = moment(this.debugTimestamp).format('YYYY-MM-DD');\n                const sl = new Slot();\n                sl.startTime = moment(this.debugTimestamp).format('HH:mm');\n                this.state.scheduleTime = sl;\n                this.state.humanScheduleTime = moment(this.debugTimestamp).format('DD MMM HH:mm');\n            }\n            if( callback ){\n                callback();\n            }\n            this.save();\n        });\n\n    }\n\n    resetTempState(): void {\n        this.tempState = {\n            mode: null,\n            deliveryAddress: null,\n            expectedDeliveryTime:  null,\n            storeId: null,\n            scheduleDate: null,\n            scheduleTime: null,\n            asap: false,\n            humanScheduleTime: null,\n            store: null\n        };\n    }\n\n    getUnixTime(varState: DirectoryState = null): any {\n        // if param is not define, then fetch from final state by default\n        // make a copy and convert to string for safe process\n        // No need to create new objects , If the object is too large, it will get stuck in JSON.stringify\n        // const dirState = (this.state || varState) ? JSON.parse(JSON.stringify(varState ? varState : this.state)) : null;\n        const dirState = (this.state || varState) ? (varState ? varState : this.state) : null;\n        if (dirState?.asap) {\n            // TODO: replace the function completly\n            return this.timeService.getTime();\n        } else {\n            try {\n                const temp = moment(dirState.scheduleDate).format('DD MMM YYYY') + ' ' + dirState.scheduleTime.startTime;\n                return moment(temp, 'DD MMM YYYY hh:mm').valueOf();\n            } catch {\n                return moment().valueOf();\n            }\n        }\n    }\n\n    getLastNav(): string {\n        if (this.tempState.mode === this.DELIVERY) {\n            if (this.nav.length > 0) {\n                return this.nav[this.nav.length - 1];\n            }\n        }\n\n        return '';\n    }\n\n    /**\n     * Clone final state to temp state. To avoid misbehavior\n     */\n    cloneStateToTemp(): void {\n        this.tempState = JSON.parse(JSON.stringify(this.state));\n    }\n\n    isSelectedTimeOutdated(): boolean {\n        if (!this.state.asap) {  // scheduled order\n            // scheduled time selection is in past\n            return this.getUnixTime(this.state) < moment().valueOf();\n        }\n\n        return false;\n    }\n\n    setNoServiceOk(): void {\n        this.sharedData.noServiceCode = 'ok';\n    }\n\n    isHideTodayOrder(): boolean {\n        return this.settingManager.get('hideTodayOrder', false);\n    }\n\n    setIsCatering(isCatering: boolean): void {\n        this._isCatering = isCatering;\n    }\n\n    isCatering(): boolean {\n        return this._isCatering;\n    }\n\n    publishDefaultSharedData(store: Store, mode: string, spot: string): void {\n        const {totalAdvOrderDays, canAdvanceOrder} = this.canAdvanceOrder(mode, spot);\n        this.sharedData.canAdvanceOrder = canAdvanceOrder;\n        this.sharedData.isStoreOpen = Store.isOpeningHours(store, this.getUnixTime());\n\n        if (!this.sharedData.isStoreOpen) {\n            this.sharedData.noServiceCode = 'openinghours';\n        }\n\n        this.publishSharedData();\n    }\n\n    private publishSharedData(): void {\n        this.next('sharedData', this.sharedData);\n    }\n\n    canAdvanceOrder(mode: string, spot: string): { totalAdvOrderDays: number, canAdvanceOrder: boolean } {\n        const enableStoreLevelAdvanceOrder = this.settingManager.get('enableStoreLevelAdvanceOrder', false);\n        if (this.fromStoreHome && !enableStoreLevelAdvanceOrder && !(mode == this.DINE_IN && spot)) {\n\n            // If mode is catering, allow to change date and time\n            if (mode === this.CATERING) {\n                return {totalAdvOrderDays: 0, canAdvanceOrder: true};\n            }\n\n            return {totalAdvOrderDays: 0, canAdvanceOrder: false};\n        }\n\n        let canAdvanceOrder = true;\n\n        // get advance order days from config\n        let configAdvKeyV4;\n        switch (mode) {\n            case this.TAKEAWAY:\n                configAdvKeyV4 = 'takeawaySamePeriodAdvanceOrder';\n                break;\n            case this.DELIVERY:\n                configAdvKeyV4 = 'deliverySamePeriodAdvanceOrder';\n                break;\n            case this.DINE_IN:\n                configAdvKeyV4 = spot ? 'dineinWithSpotSamePeriodAdvanceOrder' : 'dineinSamePeriodAdvanceOrder';\n                break;\n        };\n\n        let configAdvKeyV3;\n        switch (mode) {\n            case this.TAKEAWAY:\n                configAdvKeyV3 = 'advanceTakeawayDays';\n                break;\n            case this.DELIVERY:\n                configAdvKeyV3 = 'advanceDeliveryDays';\n                break;\n            case this.DINE_IN:\n                configAdvKeyV3 = spot ? 'advanceDineinWithSpotDays' : 'advanceDineinDays';\n                break;\n        };\n        if (!(configAdvKeyV4 || configAdvKeyV3)) {\n            return {totalAdvOrderDays: 0, canAdvanceOrder: false};\n        }\n        let totalAdvOrderDaysV3 = this.settingManager.get(configAdvKeyV3, null);\n        let totalAdvOrderDays = this.settingManager.get(configAdvKeyV4, totalAdvOrderDaysV3);\n        // if no config, then date can only be today and time can only be ASAP\n        if (totalAdvOrderDays == null) {\n            totalAdvOrderDays = 0;\n            canAdvanceOrder = false;\n        }\n\n        return {totalAdvOrderDays, canAdvanceOrder};\n    }\n\n    isTimeStateChange(oldState: DirectoryState): boolean {\n        if (this.state.asap != oldState.asap) {\n            return true;\n        }\n\n        if (this.getUnixTime() != this.getUnixTime(oldState)) {\n            return true;\n        }\n\n        return false;\n    }\n}\n","import { DialogService } from './dialog.service';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { Injectable, Injector, NgZone, ErrorHandler, Inject } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable } from 'rxjs';\nimport { RoutingService } from '../../pure/services/routing.service';\nimport { BaseErrorHandlerService } from '../../pure/services/base-error-handler.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ErrorHandlerService extends BaseErrorHandlerService implements ErrorHandler {\n\n    constructor(private injector: Injector, private zone: NgZone, private t: TranslateService) {\n        super(injector);\n    }\n\n    handleError(error) {\n        super.handleError(error);\n        this.customErrorHandler(error)\n    }\n\n    /**\n     * Need to get DialogService from injector rather than constructor injection to avoid cyclic dependency error\n     * @returns {}\n     * ref: https://github.com/ngneat/hot-toast/issues/70\n     */\n     private get dialogService() {\n        return this.injector.get(DialogService);\n    }\n\n    customErrorHandler(param) {\n        const name = param?.name;\n        const layout = param?.layout;\n        const isDefaultLayout = layout === 'dialog';\n        const error = new Error()\n\n        error.message = this.t.instant(`error-codes.${name}.message`)\n        error.name = this.t.instant(`error-codes.${name}.title`)\n        if (!isDefaultLayout) {\n            layout === 'toast' && this.errorToast(error.message, 1000, 'bottom');\n            layout === 'page' && '';\n            return;\n        }\n\n        this.errorDialog(error.name, error.message)\n    }\n\n    errorDialog(name, message) {\n        this.zone.run(() =>\n            this.dialogService.showAlert(name, message)\n        );\n    }\n\n    errorToast(message, time, position) {\n        this.zone.run(() =>\n            this.dialogService.showToast(message, time, position)\n        );\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { Item, ItemGroup, Store } from '../../data';\nimport { ConfigService } from './config.service';\nimport { DataService } from './data.service';\nimport { MemberContextManager } from './member-context-manager.service';\nimport { MemberContext } from './member-context.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EwalletService {\n\n  // Topup\n  virtualStore: Store;\n  virtualStoreId: string;\n\n  ewalletGroupId: string;\n  ewalletGroup: ItemGroup;\n  ewalletItems: Item[];\n\n  ewalletMode = 'takeaway';\n\n  private ewalletTopUpItem: Item;\n\n  private ecreditPolicy; // moneyToEcreditRatio\n\n  constructor(public dataService: DataService, public context: MemberContext, public memberContextManager: MemberContextManager, public config: ConfigService) { }\n\n  setVirtualStoreId(storeId: string): void {\n    this.virtualStoreId = storeId;\n  }\n\n  setEwalletGroupId(groupId: string = '500-IGecredit'): void {\n    this.ewalletGroupId = groupId;\n  }\n\n  getFreeInputMax(): number {\n    return this.virtualStore?.crm?.['ecreditPolicy']?.freeInputMax;\n  }\n\n  setEwalletMode(mode): void {\n    this.ewalletMode = mode;\n  }\n\n\n  setVirtualStore(store): void {\n    this.virtualStore = store;\n  }\n\n  setEwalletTopUpItem(item): void {\n    this.ewalletTopUpItem = item;\n  }\n\n  setEcreditPolicy(ecreditPolicy: any): void {\n    this.ecreditPolicy = ecreditPolicy;\n  }\n\n  getEcreditRatio(isUseContextStoreCurrencyUnit = false): number {\n    let unit: number = this.ecredit?.smallestCurrencyUnit || this.virtualStore?.['smallestCurrencyUnit'];\n    if (isUseContextStoreCurrencyUnit && !unit && unit !== 0) {\n      unit = this.context?.store?.['smallestCurrencyUnit']; // fallback context store smallestCurrencyUnit\n    }\n    return (unit || unit === 0) ? Math.pow(10, -unit) : 1;\n  }\n\n  getTopUpPoints(): number {\n    // return this.ewalletTopUpItem?.points || 0;\n    return this.ewalletTopUpItem?.price / this.getEcreditRatio();\n  }\n\n  getVirtualStoreId(): string {\n    return this.virtualStoreId;\n  }\n\n  getVirtualStore(): Observable<any> {\n    if (!this.virtualStoreId) {\n      return new Observable(null);\n    }\n\n    const url = '/api/v1/menu/store/' + this.virtualStoreId + '.json';\n    const params = {\n      menu: this.ewalletMode || 'takeaway',\n      locale: 'multi',\n      // nocache: true\n    };\n    return this.dataService.getRaw(url, params);\n  }\n\n\n  getEwalletItems(): Item[] {\n    return this.ewalletItems || [];\n  }\n\n  updateMember(complete = () => { }, error = () => { }): any {\n    if (!this.context.member) {\n      error();\n      return;\n    }\n\n    const url = '/api/v1/crm/member.json';\n\n    const params = {\n      brandId: this.context.brand.id,\n      fetchAllSc: this.crmHasFeature('stampcard'),\n    };\n    this.dataService.get(url, params).subscribe(\n      (data) => {\n        console.log(data);\n        // this.context.setMember(data);\n        this.memberContextManager.updateMemberData(data);\n\n        complete();\n      },\n      (err) => {\n        console.log(err);\n\n        if (err.status === 401) {\n          this.context?.logout();\n        }\n\n        error();\n      }\n    );\n  }\n\n  crmHasFeature(feature: string): boolean {\n    return (\n      this.context.crm &&\n      this.context.crm.features &&\n      this.context.crm.features.indexOf(feature) >= 0\n    );\n  }\n\n  // update the ecredit balance\n  handleEwallet(order): void {\n    // may be call member.json to update the member\n    this.context.member.ecredit.balance = order?.['afterEcredit'];\n    if (this.context?.member) {\n      const sid = this.config.getSessionId();\n      // this.memberContextManager?.setMemberData( sid ? {...this.context?.member, sessionId: sid } : this.context?.member);\n      this.memberContextManager.updateMemberData(sid ? {...this.context?.member, sessionId: sid } : this.context?.member);\n    }\n  }\n\n  get ecredit(): any {\n    return this.context?.member?.ecredit || this.context?.membership?.member?.ecredit;\n  }\n\n  getMemberEwallectTotal(): number { // new logic : ecredit?.balance only for BE , FE should use getDisplayEwalletNumber()\n    return this.ecredit?.balance || 0;\n  }\n\n  // display ewallet total\n  getDisplayEwalletNumber(): number {\n    return this.transformEwalletBalanceToPrice(this.getMemberEwallectTotal());\n  }\n\n  // display ewallet currency(HKD)\n  getMemberEwallectCurrency(): string {\n    return this.ecredit?.currency || this.context?.currency;\n  }\n\n  // display ewallet currencySign($)\n  getMemberEwallectCurrencySign(): string {\n    return this.ecredit?.currencySign || this.context?.currencySign;\n  }\n\n  // display ewallet top up item price\n  getTopUpItemPriceByPoints(points: number): number {\n    return this.transformEwalletBalanceToPrice(points);\n  }\n\n  transformEwalletBalanceToPrice(val: number): number {\n    const res = val * this.getEcreditRatio();\n    const result = res?.toString().indexOf('.') ? parseFloat(res?.toFixed(2)) : res;\n    return result;\n  }\n\n}\n","import { Injectable } from '@angular/core';\nimport { CommonService } from '../../pure/services/common.service';\nimport { Geolocation } from '@capacitor/geolocation';\n@Injectable({\n    providedIn: 'root'\n})\nexport class LocationService {\n\n    DEBUG_GPS = {\n        latitude: 22.3193,\n        longitude: 114.1694\n    };\n\n    constructor() {\n\n    }\n\n    round(num, decimals) {\n        var x = Math.pow(10, decimals);\n        return Math.round(num * x) / x;\n    }\n\n    getLast():any{\n        return CommonService.getLocal(\"lastGps\");\n    }\n\n    getGps(callback: Function): void {\n        if (!(navigator?.geolocation)) {\n            callback(null);\n            return;\n        }\n\n        // Please use Geolocation plugin, If on Web it will use : navigator.geolocation.getCurrentPosition as well , but on native , it will use native code.\n        Geolocation.getCurrentPosition({\n            enableHighAccuracy: false,\n            timeout: 10000,\n            maximumAge: Infinity\n        }).then(pos => {\n            const result = {\n                latitude: this.round(pos.coords.latitude, 4),\n                longitude: this.round(pos.coords.longitude, 4)\n            }\n            if(result.latitude){\n                CommonService.setLocal(\"lastGps\", result);\n                callback(result);\n            }else{\n                callback(null);\n            }\n        }).catch(err  => {\n            console.error(err);\n            callback(null);\n        })\n        // navigator.geolocation.getCurrentPosition(\n        //     (pos) => {\n        //         const result = {\n        //             latitude: this.round(pos.coords.latitude, 4),\n        //             longitude: this.round(pos.coords.longitude, 4)\n        //         }\n\n        //         if(result.latitude){\n        //             CommonService.setLocal(\"lastGps\", result);\n        //             callback(result);\n        //         }else{\n        //             callback(null);\n        //         }\n\n        //     }, (err) => {\n        //         console.error(err);\n        //         callback(null);\n        //     },\n        //     {\n        //         enableHighAccuracy: false,\n        //         timeout: 10000,\n        //         maximumAge: Infinity\n        //     }\n        // );\n    }\n\n    requestPermissions() {\n        console.warn(\"web does not have this method\");\n    }\n\n}\n","// import { MiniAppService } from '@aigens/miniapp/src/app/miniapp/standard/services/mini-app.service';\nimport { Injectable } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { SubscribeService } from '../../pure/services/subscribe.service';\n// import { PlatformService } from '../../pure/services/platform.service';\nimport { ConfigService } from './config.service';\nimport { Context } from './context.service';\nimport { DataService } from './data.service';\nimport { MemberContext } from './member-context.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class MemberContextManager {\n\n\n    constructor(private context: Context, private memberContext: MemberContext, private configService: ConfigService, private dataService: DataService, private subscribe: SubscribeService, private t: TranslateService\n        /* private platformService: PlatformService, private miniService: MiniAppService, */) {\n\n\n        this.handleObservable();\n    }\n\n    handleObservable() {\n        this.subscribe.getObservable(this.subscribe.SDK_MEMBER_CONTEXT).subscribe({\n            next: (member) => {\n                if (!member) return;\n\n                this.configService.clearAll();\n\n                // console.log(\"SDK_MEMBER_CONTEXT member2\", member);\n                if (member?.sessionId) {\n                    this.setMemberData(member);\n                }\n\n                const deviceId = member?.deviceId;\n                if (deviceId) {\n                    this.configService.setDeviceId(deviceId);\n                }\n                const name = member?.name;\n                if (name) {\n                    this.configService.setLocal('aigens-guest-name', name);\n                }\n                const email = member?.email;\n                if (email) {\n                    this.configService.setLocal('aigens-guest-email', email);\n                }\n                const phone = member?.phone;\n                if (phone) {\n                    this.configService.setLocal('aigens-guest-phone', phone);\n                }\n\n                const lang = member?.language;\n                if (lang) {\n                    this.t.use(lang);\n                    this.configService.setLocale(lang);\n                    this.t.setDefaultLang(lang);\n                    this.t.currentLang = lang;\n                }\n            },\n            error: (error) => {\n                console.log(\"error:\", error);\n            }\n        })\n    }\n\n\n    checkDeviceLogin() {\n\n        console.log(\"checking member\", this.memberContext.member);\n\n        if (!this.memberContext.isSignedIn()) {\n\n            if (!this.isAliApp()) {\n                console.log(\"logging in as device guest\");\n                this.deviceLogin();\n            } else {\n                // inside miniapp, dont do deviceLogin for now, chope/alipaycn, to use the container member\n                console.log(\"under miniapp, use container member later\");\n            }\n        } else {\n\n            if (this.memberContext.isGuest()) {\n                console.log(\"already signed in as guest\");\n            } else {\n                console.log(\"already signed in as user\");\n            }\n\n        }\n\n    }\n\n\n    deviceLogin(callback?: Function) {\n\n        console.log(\"device login!\");\n\n        const url = '/api/v1/store/devicelogin.json';\n\n        var deviceId = this.configService.getDeviceId();\n\n        var params = {\n            deviceId: deviceId\n        };\n\n        this.dataService.postWithParams(url, params).subscribe(\n            data => {\n\n                console.log(\"login data\", data);\n\n                if (data) {\n                    this.setMemberData(data);\n                    callback && callback(this.memberContext.member);\n                }\n            },\n            err => {\n\n\n                console.log(err);\n                callback && callback(null);\n            }\n        );\n\n    }\n\n\n    setMemberData(data) {\n\n        this.memberContext.clearMember();\n        this.memberContext.member = data;\n\n        if (data?.membership) {\n            this.memberContext.membership = data.membership;\n        }\n\n        this.configService.setSessionId(data.sessionId);\n\n        this.context.setMember(data);\n\n        this.memberContext.save();\n\n        // if (this.platformService.isAliApp() && data?.source == 'aliplus') {\n        //     this.miniService.saveMemberToMiniapp(data, () => {\n        //         console.log(\"saveMemberToMiniapp done\");\n        //     });\n        // }\n    }\n\n    updateMemberData(data) {\n        this.memberContext.member = data;\n\n        if (data?.membership) {\n            this.memberContext.membership = data.membership;\n        }\n\n        this.context.setMember(data);\n\n        this.memberContext.save();\n    }\n\n\n    // replace this.platformService.isAliApp()\n    isAliApp() {\n        var ua = navigator.userAgent.toLowerCase();\n        var terms = [\"miniprogram\", \"alipayide\"];\n\n        for (let t of terms) {\n            if (ua.indexOf(t) >= 0) {\n                return true;\n            }\n        }\n\n        return false;\n\n    }\n}\n\n","// import { MiniAppService } from '@aigens/miniapp/src/app/miniapp/standard/services/mini-app.service';\nimport {Injectable, Injector} from '@angular/core';\nimport {TranslateService} from '@ngx-translate/core';\nimport {Ad, Brand, Court, Crm, Group, Member, Membership, Store} from 'aigens-data';\nimport * as moment from 'moment';\nimport {SettingManager} from '../../pure/managers/setting-manager';\n// import { PlatformService } from '../../pure/services/platform.service';\nimport {BaseContext} from '../base/base-context';\nimport {ConfigService} from './config.service';\nimport {Context} from './context.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class MemberContext extends BaseContext {\n\n    // hold the app context\n    app: any;\n    member: Member;\n    membership: Membership;\n    availableRewards: any[] = [];\n\n    config: any;\n\n    userLang: string;\n    contentLang: string;\n\n    language: string;\n    languages: string[];\n    country: string;\n\n    groupId: number;\n    brandId: number;\n    storeId: number;\n    courtId: number;\n\n    group: Group;\n    brand: Brand;\n    store: Store;\n    court: Court;\n    location: Location;\n\n    directoryData: any;\n\n    currencySign = '$';\n    currency: string;\n\n    agreements: any[];\n    campaigns: any[];\n\n    level: string;\n    adminLevel: string;\n\n    refresh = false;\n    admin = false;\n\n    crm: Crm;\n    form: any;\n\n    returnUrl: string;\n    continueAsGuest: boolean;\n\n    inboxMessage: any[] = [];\n    rewards: any[] = [];\n\n    payments: any[] = [];\n\n    privateMessages: any[] = [];\n    publicNotices: any[] = [];\n\n    deferredPrompt: any = null;\n\n    fields: string[];\n\n    // For payment scheme , If you use payment at app (not includes byod), please set. iOS & android need add scheme also.\n    appName = '';\n\n    loginFlow: any[] = [];\n    ads: Ad[];\n\n    private memberListeners: MemberListener[] = [];\n    private listenerIds: number[] = [];\n\n    // contextSubscribe: Subject<any>;\n    configService: ConfigService;\n    context: Context;\n    settingManager: SettingManager;\n    discounts: any[];\n\n    t: TranslateService;\n    // private platformService: PlatformService;\n    // private miniService: MiniAppService;\n\n\n    constructor(injector: Injector) {\n\n        super(injector);\n\n        console.log('constructing member context, this should only happen once');\n\n        // this.contextSubscribe = new Subject();\n\n        this.configService = injector.get(ConfigService);\n        this.context = injector.get(Context);\n        this.settingManager = injector.get(SettingManager);\n        this.t = injector.get(TranslateService);\n        // this.platformService = injector.get(PlatformService);\n        // this.miniService = injector.get(MiniAppService);\n\n        this.initFromContext();\n\n        this.bind(['member', 'membership']);\n\n        this.restore();\n\n        this.subscribeEvent();\n\n    }\n\n    copyFromContext(context) {\n\n\n        this.form = context.form;\n        this.brand = context.brand;\n        this.group = context.group;\n        this.court = context.court;\n        this.store = context.store;\n\n        this.location = context.location;\n        this.crm = context.crm;\n\n        this.brandId = context.brandId;\n        this.groupId = context.groupId;\n        this.storeId = context.storeId;\n        this.courtId = context.courtId;\n\n        this.currency = context.currency;\n        this.currencySign = context.currencySign;\n        this.userLang = context.userLang;\n\n\n    }\n\n    initFromContext() {\n\n        const aigens = window['aigens'];\n        if (aigens && aigens.context) {\n\n            const context = aigens.context;\n\n            this.copyFromContext(context);\n\n            let contextId = 'type=member';\n            const crm = context.crm;\n\n            if (crm) {\n                contextId += '&crm=' + crm.type;\n                if (crm.source) {\n                    contextId += '&source=' + crm.source;\n                }\n            }\n            this.contextId = contextId;\n            // this.contextSubscribe.next();\n\n        }\n\n    }\n\n    setMember(member: Member) {\n\n        this.member = member;\n        if (member && member.membership) {\n            this.membership = member.membership;\n        }\n\n        // save member obj data to local storage\n        this.setLocal('member', this.member);\n        if (this.member.sessionId) {\n            this.configService.setSessionId(this.member.sessionId);\n        }\n\n        const memberFlow = (this.isMember() && this.member?.[\"flow\"]) || null;\n        this.loginFlow = !!memberFlow ? memberFlow.split(',') : this.loginFlow;\n\n        this.next('member', member);\n    }\n\n    getMember(): Member {\n        return this.member;\n    }\n\n    isGuest(): boolean {\n        const member = this.member;\n        return !member || !!(member && member.guest);\n    }\n\n    isMember(): boolean {\n        const member = this.member;\n        return !!(member && !member.guest);\n    }\n\n    setAvailableRewards(rewards: any[]) {\n        this.availableRewards = rewards;\n        this.save();\n    }\n\n    getAvailableRewards(): any[] {\n        return this.availableRewards || [];\n    }\n\n    // clear the context, likely due to logout or switching to different brand\n    clear() {\n\n        console.log('clear member context');\n\n        this.membership = null;\n        this.group = null;\n        this.brandId = null;\n        this.brand = null;\n        this.store = null;\n        this.storeId = null;\n        this.court = null;\n        this.currencySign = null;\n        this.currency = null;\n        this.crm = null;\n        this.form = null;\n        this.payments = null;\n        this.directoryData = null;\n        this.availableRewards = [];\n        this.loginFlow = [];\n        this.userLang = null;\n    }\n\n    clearMember() {\n        this.member = null;\n        this.membership = null;\n        this.configService.clearSessionId();\n    }\n\n    public logout(): void {\n        console.log('logout');\n        this.member = null;\n        this.membership = null;\n\n        this.context.logout();\n\n        this.privateMessages = [];\n        this.publicNotices = [];\n        this.availableRewards = [];\n        this.loginFlow = [];\n        // this.contextSubscribe.next();\n        this.save();\n\n\n    }\n\n    makeSaveData() {\n        if (this.isGuest()) {\n            this.loginFlow = [];\n        }\n\n        const memberFlow = (this.isMember() && this.member?.[\"flow\"]) || null;\n        this.loginFlow = !!memberFlow ? memberFlow.split(',') : this.loginFlow;\n\n        const data = {\n            member: this.member,\n            membership: this.membership,\n            userLang: this.userLang,\n            contentLang: this.contentLang,\n            availableRewards: this.availableRewards || [],\n            loginFlow: this.loginFlow || [],\n            session: this.configService.sessionId\n        };\n\n        console.log('saving member data', data);\n\n        return data;\n    }\n\n    // in order to test (login repeatedly)\n    getLocalContext() {\n        const localContext = JSON.parse(localStorage.getItem('context'));\n        if (localContext) {\n            this.setLocalContext(localContext);\n        }\n    }\n\n    setLocalContext(localContext) {\n        console.log('setLocalContext');\n        if (!localContext || !localContext.membership || !localContext.member) {\n            return;\n        }\n        for (const key in localContext) {\n            localContext && localContext[key] && (this[key] = localContext[key]);\n        }\n    }\n\n    // async getMiniMember() {\n    //     return new Promise<any>((resolve, reject) => {\n\n    //         this.miniService.getContainerMember((member) => {\n    //             console.log(\"restore with container member\", member);\n\n    //             if (member) {\n    //                 resolve(member)\n\n    //             }\n    //             reject();\n\n    //         });\n    //     });\n    // }\n\n    protected async restoreSavedData(data: any) {\n        // if (data?.member?.source == \"aliplus\" && this.platformService.isAliApp()) {\n\n        //     try {\n        //         let miniMember = await this.getMiniMember();\n\n        //         if (miniMember) {\n        //             data['member'] = miniMember;\n        //             this.setMember(miniMember)\n        //         }\n        //     } catch (error) {\n        //         console.log(\"restoreSavedData mini member err\", error)\n        //     }\n\n        // }\n\n        console.log('RESTORE MEMBER CONTEXT', data);\n\n        Object.assign(this, data);\n        // let urlLocale = this.getQuery(\"locale\");\n        // if ((data?.userLang && window['aigens']?.context?.languages?.includes(data?.userLang))\n        //     || (urlLocale && window['aigens']?.context?.languages?.includes(urlLocale))) {\n        //     this.setLang(urlLocale || data.userLang)\n        // }\n        // else {\n        //     this.setLang(\"en\")\n        // }\n    }\n\n    getQuery(name: string) {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        return urlParams.get(name);\n    }\n\n    subscribeEvent() {\n        this.subscribeService.getObservable('language').subscribe((lang) => {\n            this.setLang(lang);\n        });\n\n        this.subscribeService.getObservable('member').subscribe((member) => {\n            console.log(\"member change:\", member);\n            const memberFlow = (this.isMember() && this.member?.[\"flow\"]) || null;\n            this.loginFlow = !!memberFlow ? memberFlow.split(',') : this.loginFlow;\n        });\n    }\n\n\n    setLang(storeLang: string) {\n        this.t.use(storeLang);\n        this.configService.setLocale(storeLang);\n\n\n        this.userLang = storeLang;\n        this.language = storeLang;\n        this.contentLang = storeLang;\n        window['aigens'].context.userLang = storeLang;\n        window['aigens'].context.language = window['aigens'].context.userLang;\n        window['aigens'].context.contentLang = window['aigens'].context.userLang;\n        // Object.assign(this, this.makeSaveData());\n\n        // this.save();\n\n    }\n\n\n    public save() {\n\n        super.save();\n\n    }\n\n    isSignedIn(): boolean {\n        // return !!(this.member /* && this.membership */ && this.member?.method !== 'device');\n        if (this.configService.getSessionId()) {\n            return true;\n        }\n        return false;\n    }\n\n    canRegister(): boolean {\n\n        const crm = this.crm as any;\n\n        if (!crm) {\n            return false;\n        }\n\n        if (!crm.recruitable) {\n            return false;\n        }\n\n        if (!crm.recruitStart || !crm.recruitEnd) {\n            return true;\n        }\n\n        return moment().isBetween(crm.recruitStart, crm.recruitEnd, 'day');\n    }\n\n    canLogin(mode: string = null): boolean {\n        if (this.settingManager.get('hideLoginBtn', false)) {\n            return false;\n        }\n\n        return this.crmAvailable(mode);\n    }\n\n    crmAvailable(mode: string = null): boolean {\n        const crm = this.crm;\n        if (!crm) { return false; }\n\n        if (this.brand && !Brand.hasFeature(this.brand, 'login')) {\n            return false;\n        }\n\n        if (this.court && !Court.hasFeature(this.court, 'login')) {\n            return false;\n        }\n\n        if (crm['disabled']) {\n            return false;\n        }\n\n        if (crm.modes == null || crm.modes.length === 0) { return true; }\n\n        if (!mode) {\n            return true;\n        }\n\n        return crm.modes.indexOf(mode) >= 0;\n    }\n\n    getDeviceId(): string {\n        return this.configService.getDeviceId();\n    }\n\n    isLimitedMember(): boolean {\n        return this.isMember() && (this.loginFlow?.indexOf('verify') >= 0 || this?.loginFlow?.indexOf('fillprofile') >= 0);\n    }\n\n    public setMemberListener(listener: MemberListener): number {\n        const listenerId_ = this.genListenerId();\n        listener.listenerId = listenerId_;\n        this.memberListeners.push(listener);\n        return listenerId_;\n    }\n\n    private fireMemberChange(member?) {\n        if (this.memberListeners && this.memberListeners.length) {\n            this.memberListeners.forEach(listener => {\n                listener.onMemberChange(member);\n            });\n        }\n    }\n\n    public unsubscribeMemberListener(listenerId: number) {\n        if (!listenerId) {\n            return;\n        }\n        if (this.listenerIds.indexOf(listenerId) < 0) {\n            console.warn('not include listenerId');\n            return;\n        }\n        const i = this.listenerIds.indexOf(listenerId);\n        this.listenerIds.splice(i, 1);\n        this.freedListener(this.memberListeners, listenerId);\n    }\n\n    private genListenerId(): number {\n        let id = 100;\n        if (this.listenerIds.length > 0) {\n            id = this.listenerIds[this.listenerIds.length - 1] + 1;\n        }\n        this.listenerIds.push(id);\n        return id;\n    }\n\n    private freedListener(listeners: any[], listenerID: number) {\n        listeners.find((listener, index) => {\n            if (listener.listenerId === listenerID) {\n                listeners.splice(index, 1);\n                return true;\n            }\n\n            return false;\n        });\n    }\n}\n\nexport interface MemberListener {\n\n    listenerId?: number;\n    onMemberChange(member?: Member);\n}\n","import { Period, Store } from 'aigens-data';\nimport * as moment from 'moment';\n\nexport class MenuUtil {\n    static getRelatedMenuPeriod(timestamp: number, store) {\n        const useTime = new Date(timestamp || new Date());\n        const processPeriods = MenuUtil.getValidPeriod(timestamp, store);\n\n        return processPeriods.filter(f => useTime >= f?.startNum && useTime <= f?.endNum);\n    }\n\n    static getValidPeriod(timestamp: number, store) {\n        const useTime = new Date(timestamp || new Date()); // 当chooseOtp 为null 时，用当前时间\n\n        // filter 原始数据中set startTime === endTime 的period (有些时段特殊不set start or end 但可用) (特别处理:filter start=0 end= 0 的情况)\n        let periods = store && store.menu && store.menu.periods &&\n            store.menu.periods.filter(period => period && (!period.start && period.start !== 0) || (!period.end && period.end !== 0) || (period.start && period.end && period.start !== period.end));\n\n        if (periods && periods.length > 0) {\n            periods = JSON.parse(JSON.stringify(periods));\n        }\n\n        const processPeriods = periods?.map(period => MenuUtil.syncPeriodWithOpeningStore(period, useTime, store))?.filter(f => f != null);\n\n        if (processPeriods) {\n            // get cross day periods\n            const cdp = processPeriods?.filter(f => f?.start > f?.end);\n\n            const x = processPeriods[0];\n            // add cross day period into beginning of periods\n            cdp.reverse().forEach(o => {\n                const temp = JSON.parse(JSON.stringify(o));\n                temp.startTime = '23:59';\n                temp.endTime = temp.originalEndTime;\n                temp.cloneFromId = o.id;\n                o.prestop = 0;\n                temp.endNum = this.toTime(temp.endTime, useTime.getTime()) + (60 * 60 * 24 * 1000);\n                temp.startNum = this.toTime(temp.startTime, useTime.getTime());\n                processPeriods.unshift(temp);\n            });\n        }\n\n        return processPeriods || [];\n    }\n\n    static isModeAvailableWithinMenuPeriod(timestamp: number, store, mode: string): boolean {\n        const x = this.getRelatedMenuPeriod(timestamp, store);\n\n        return !(x?.length > 0 && x[0].modes && !x[0].modes?.includes(mode));\n    }\n\n    static syncPeriodWithOpeningStore(period, useTime, store) {\n        const useTime_weekDay = useTime.getDay(); // 当前选的day 是星期（0：星期天\n        // console.log('period  ' + period.code + ':' + period.startTime + '--' + period.endTime);\n        // 先check period.openings 然后赋值 period.startTime and period.endTime\n        period = this.coverPeriod(period, useTime_weekDay);\n        // console.log('用period进阶数据openings覆盖   ' + period.code + \":\" + period.startTime + \"--\" + period.endTime);\n\n        // 在check period.startTime and period.endTime\n        if (!period.startTime || !period.endTime) {\n            return;\n        }\n        let periodStartNum = this.toTime(period.startTime, useTime.getTime());\n        let periodEndNum = this.toTime(period.endTime, useTime.getTime());\n\n        // cross day\n        if (periodStartNum > periodEndNum) {\n            periodEndNum = moment(periodEndNum).add(1, 'days').valueOf();\n        }\n\n        // period.startNum = periodStart_num;\n        // period.endNum = periodEnd_num;\n\n        // 阶段的时间与 店铺营业时间做比较，重新赋值end_num\n        let storeOpening_start, storeOpening_end;\n        let proceed = false;\n        if (store?.openings?.always) { // 24 hours\n            // console.log('always open');\n            storeOpening_start = '00:00';\n            storeOpening_end = '23:59';\n            proceed = true;\n        } else {\n            const storeOpening = this.getStoreOpeningsByDay(store, useTime_weekDay);\n            // console.log('storeOpening ', storeOpening, useTime_weekDay, storeOpening.type);\n            storeOpening_start = storeOpening && storeOpening.startTime; // 店铺开店时间 如:'8:00'\n            storeOpening_end = storeOpening && storeOpening.endTime; // 店铺结束时间 如:'22:00'\n\n            if (storeOpening.type === 'close') {\n                return;\n            }\n\n            proceed = storeOpening && storeOpening.type && storeOpening.type === 'open' && storeOpening_start && storeOpening_end;\n        }\n\n\n        // console.log('店铺营业时间段:' + storeOpening_start + '--' + storeOpening_end);\n        // this.openings = storeOpening_start + '--' + storeOpening_end;\n        if (proceed) {\n            let storeOpeningStartNum = this.toTime(storeOpening_start, useTime.getTime());\n            let storeOpeningEndNum = this.toTime(storeOpening_end, useTime.getTime());\n\n            // cross day\n            if (storeOpeningStartNum > storeOpeningEndNum) {\n                storeOpeningEndNum = moment(storeOpeningEndNum).add(1, 'days').valueOf();\n            }\n\n            if (storeOpeningStartNum > periodStartNum) {\n                // console.log('storeOpeningStartNum > periodStartNum ', storeOpeningStartNum, periodStartNum);\n                periodStartNum = storeOpeningStartNum;\n            }\n\n            if (periodEndNum > storeOpeningEndNum) {\n                // console.log('periodEndNum > storeOpeningEndNum ', storeOpeningEndNum, periodEndNum);\n                periodEndNum = storeOpeningEndNum;\n            }\n        }\n\n        if (periodEndNum <= periodStartNum) {\n            return; // filter 原始数据中set period.startTime 在营业结束时间之后的 period\n        }\n        // 'HH:mm'\n        period.originalEndTime = period.endTime;\n\n        period.startTime = moment(periodStartNum).format('HH:mm');\n        period.endTime = moment(periodEndNum).format('HH:mm');\n\n        period.startNum = periodStartNum;\n        period.endNum = periodEndNum;\n\n        // console.log('period ' + period.code + ':' + period.startTime + '--' + period.endTime);\n        return period;\n    }\n\n    static toTime(timeString: string, day: number): number {\n        const temp = moment(timeString, 'HH:mm');\n        const now = moment(day);\n\n        temp.year(now.year());\n        temp.month(now.month());\n        temp.dayOfYear(now.dayOfYear());\n        // console.log('temp', temp);\n        return +temp;\n    }\n\n    static getStoreOpeningsByDay(store: Store, useTime_weekDay) {\n        if (store && store.openings && store.openings.weekdays) {\n            return store.openings.weekdays[useTime_weekDay];\n        }\n        return [];\n    }\n\n    static coverPeriod(period: Period, useTime_weekDay): Period {\n        const weekdays = period && period.openings && period.openings.weekdays;\n        if (!weekdays || !weekdays[useTime_weekDay]) {\n            return period;\n        }\n\n        // mark if period is closed\n        if (weekdays[useTime_weekDay].type !== 'open') {\n            period.startTime = null;\n            period.endTime = null;\n            return period;\n        }\n\n        weekdays[useTime_weekDay].startTime && (period.startTime = weekdays[useTime_weekDay].startTime);\n        weekdays[useTime_weekDay].endTime && (period.endTime = weekdays[useTime_weekDay].endTime);\n        return period;\n    }\n}\n","import { Item } from 'aigens-ng-core';\nimport { Injectable, Injector } from '@angular/core';\nimport { Brand, Category, Court, Data, Member, Menu, Order, Pos, Store } from 'aigens-data';\nimport { OrderManager } from 'aigens-framework';\nimport { DeepLinkService } from '../../pure/services/deep-link.service';\nimport { BaseContext } from '../base/base-context';\nimport { MenuManager } from '../managers/menu-manager';\nimport { PreOrderContext } from '@aigens/core/src/app/framework/services/pre-order-context.service';\nimport { EwalletService } from './ewallet.service';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class OrderContext extends BaseContext {\n\n    store: Store;\n    brand: Brand;\n    court: Court;\n\n    menu: Menu;\n\n    currentCategory: Category;\n    currenCatGroup: any = null;\n    selectedMode: string;\n\n    availableCategories: Category[];\n    cgroups: any[] =[];\n\n    storeId: number;\n    courtId: number;\n\n    mode: string;\n\n    behavior: any;\n\n    payments: any[] = [];\n\n    currentPayment: any;\n\n    previousOrder: any;\n    completedOrder: Order;\n\n    personalMenu: boolean = false;\n\n    //byod QR code key\n    key: string;\n\n    //table\n    spot: string;\n    seats: number;\n\n    session: any;\n\n    pos: Pos;\n\n    courier: any;\n    memberCode: string;\n\n    responsePostedOrderJson: any; // save the response after posting order success\n    checkoutPageHandleParams: any; // save the result after running paymentUniqueHandle() in paymentComponent\n    submitingRedirectForm: boolean = false; // save the result about whether sumbit redirect form to prevent the double order\n\n    codCashNumber: number;\n\n    fixedStoreId = false;\n    confirmedStore = false;\n    confirmedMode = false;\n    viewMode = false;\n\n    lastStoreId = null;\n    threeSecureVerifyBody: any = null; // for SecureVerifyPageComponent to use iframe\n\n    slimMenu: any;\n    spotData: {}; // for byod order with spot&key\n\n    verified = [];\n\n    private cacheCourtStoreMap = {};\n\n    constructor(public injector: Injector, public orderManager: OrderManager, public deeplinkService: DeepLinkService,\n        public preOrderContext: PreOrderContext, public ewalletService: EwalletService) {\n\n        super(injector);\n\n        console.log('constructing order context, this should only happen once');\n\n        this.initFromContext();\n    }\n\n\n    initFromContext() {\n\n        var aigens = window['aigens'];\n        if (aigens && aigens.context) {\n\n            var context = aigens.context;\n            if (context.store) {\n                this.store = context.store;\n                this.storeId = this.store.id;\n            }\n\n            this.contextId = this.makeGenericKey(context, 'order', context.locale);\n        }\n\n        this.restore();\n\n        // for calling ewallet virtual storeId.json\n        if (this.mode) {\n            console.log('setEwalletMode for virtual storeId.json');\n            this.ewalletService?.setEwalletMode(this.mode);\n        }\n\n    }\n\n    public clearPreviousOrder() {\n        this.previousOrder = null;\n    }\n    checkRestoreOrder() {\n\n        var existingOrder = this.previousOrder;\n\n        if (this.mode == 'byod' && !existingOrder && this.preOrderContext.order && this.preOrderContext.storeId == this.storeId) {\n            existingOrder = this.preOrderContext.order;\n        }\n\n\n        console.log('checkRestoreOrder', existingOrder, this.mode);\n\n        if (existingOrder) {\n            if (existingOrder.type == this.mode) {\n\n                if (existingOrder.storeId && existingOrder.storeId == this.store.id) {\n                    this.orderManager.reconstructOrder(existingOrder);\n                    console.log('reconsructred store order', this.orderManager.order);\n                } else if (existingOrder.courtId && existingOrder.courtId == this.court?.id) {\n                    this.orderManager.reconstructOrder(existingOrder);\n                    console.log('reconsructred court order', this.orderManager.order);\n                }\n            } else if (existingOrder.type == 'preorder') {\n                this.deeplinkService.addPendingPreorder(existingOrder, false);\n            }\n        }\n\n        this.previousOrder = null;\n\n\n\n    }\n\n    getCompletedOrder(orderId: string) {\n\n        if (this.completedOrder && this.completedOrder.id == orderId) {\n            return this.completedOrder;\n        }\n\n        return null;\n    }\n    getOrderByStoreId(storeId): Store | undefined {\n        const stores = this.court?.stores || [];\n        if (this.cacheCourtStoreMap[storeId]) {\n            return this.cacheCourtStoreMap[storeId];\n        } else {\n            const store = stores.find((s) => s.id === storeId);\n            if (store) {\n                this.cacheCourtStoreMap[storeId] = store;\n            }\n            return store;\n        }\n    }\n\n    setMenu(store: Store, fromCache = false) {\n\n        this.store = store;\n\n        const menu = store.menu;\n\n        if (!fromCache || this.lastStoreId !== this.store?.id) {\n            const mm = new MenuManager(this.injector);\n            mm.processMenu(menu);\n            // this.reconfig();\n        }\n        this.reconfig();\n\n        this.menu = menu;\n\n        this.availableCategories = menu.categories;\n\n        this.lastStoreId = this.store?.id;\n    }\n\n    // it should run after the check all cat isAvailable\n    initMenuCatGroup(): void{\n        // console.log('catGroup HTML TEMPLATE', this.availableCategories);\n        if (this.store?.menu?.catGroup) {\n            this.cgroups = this.store?.menu?.cgroups?.map(cgroup => ({\n                ...cgroup,\n                categoryIds: cgroup?.categoryIds?.filter(catid => !!this.findCatById(catid)), // 过滤当前不可用的 categoryIds\n            }))?.filter(c => c?.categoryIds?.length > 0); // 过滤当前 categoryIds = []的 cgroup\n\n            // all cats not assigned to any cat-group will be placed under the other Group\n            // other group logic start\n            const otherGroupCats = this.availableCategories.filter(currentCat => {\n                let isInCGroups = false;\n                this.cgroups.map(cgroup => {\n                    if (cgroup.categoryIds?.includes(currentCat?.id)/* && currentCat?.id !== '4aef9384-53ec-4fe3-bef4-b06e8f5e0389'*/) {\n                        isInCGroups = true;\n                    }\n                });\n                return !isInCGroups;\n            });\n            console.log('catGroup HTML TEMPLATE:', otherGroupCats);\n            const otherCGroup = {\n                name: 'Other group',\n                categoryIds: otherGroupCats.map(cat => cat?.id)\n            };\n            console.log('catGroup HTML TEMPLATE:', otherCGroup);\n            if (otherCGroup?.categoryIds?.length > 0) {\n                this.cgroups?.push(otherCGroup);\n            }\n            // other group logic end\n\n            console.log('catGroup HTML TEMPLATE:', this.cgroups);\n            // console.log('catGroup HTML TEMPLATE:', this.store.menu?.cgroups);\n            // console.log('catGroup HTML TEMPLATE:', otherGroupCats);\n            this.currenCatGroup = this.cgroups?.[0];\n        }\n    }\n\n    findCatById(catId: string): Category {\n        return this.availableCategories?.find(cat => /*cat?.id !== '4aef9384-53ec-4fe3-bef4-b06e8f5e0389' &&*/ cat?.id === catId);\n    }\n\n    private reconfig() {\n\n        this.brand = this.store.brand;\n        this.payments = this.brand.payments || [];\n\n    }\n\n\n    //clear the context, likely due to logout or switching to different brand\n    clear() {\n\n        this.store = null;\n        this.storeId = null;\n        this.menu = null;\n        this.currentCategory = null;\n        this.availableCategories = null;\n        this.cgroups = null;\n    }\n\n    makeSaveData() {\n        if (this.copyOrder) {\n            return this.copyOrder;\n        }\n\n        var order = this.orderManager.order;\n        if (!order) {\n            return null;\n        }\n\n        var slimOrder = Order.toOrderData(order);\n\n        var data = {\n            order: slimOrder\n        };\n\n        if (this.court) {\n            data['courtId'] = this.court.id;\n        } else {\n            data['storeId'] = this.storeId;\n        }\n\n        if(this.verified?.length > 0){\n            data['verified'] = this.verified;\n        }\n\n        return data;\n    }\n\n    protected restoreSavedData(data: any) {\n\n        console.log('OrderContext restoreSavedData', data);\n\n        if(data?.verified){\n            this.verified = data.verified\n        }\n\n        if (data.order) {\n\n            this.previousOrder = data.order;\n            console.log('restored previous order', this.previousOrder);\n        }\n\n    }\n\n    copyOrder;\n\n    copyOrderDataToContextId(storeId, mode) {\n        const currentOrder = JSON.parse(JSON.stringify(this.makeSaveData()));\n\n        if (currentOrder) {\n            currentOrder.storeId = storeId;\n            currentOrder.order.storeId = storeId;\n            currentOrder.order.type = mode;\n            this.copyOrder = currentOrder;\n            this.save();\n            this.copyOrder = null;\n        }\n\n        return currentOrder;\n    }\n\n    setResponsePostedOrderJson(orderJson: Order | any): void {\n        // this.responsePostedOrderJson_ = orderJson;\n        this.next('responsePostedOrderJson', orderJson);\n    }\n\n    clearResponsePostedOrderJson(): void {\n        this.next('responsePostedOrderJson', null);\n    }\n\n    setCheckoutPageHandleParams(pramas): void {\n        console.log('set checkoutPageHandleParams');\n        // this.miniAppService?.echoLog(['run setCheckoutPageHandleParams, it should go to orderDetailsPage'], () => { });\n        this.next('checkoutPageHandleParams', pramas);\n    }\n\n    clearCheckoutPageHandleParams(): void {\n        console.log('clear checkoutPageHandleParams');\n        this.next('checkoutPageHandleParams', null);\n    }\n\n    checkCanPayByEwalletBalance(): boolean {\n        const ewalletTotal = this.ewalletService?.getMemberEwallectTotal();\n        const currenOrderSpendBalance = this.orderManager?.order?.eqvEcreditAmt;\n        // console.log('ewalletTotal', this.orderManager?.order?.eqvEcreditAmt);\n        return ewalletTotal >= currenOrderSpendBalance;\n    }\n\n    isVerified(cat: Category = undefined, item: Item = undefined) {\n\n        if(item !== undefined && item.verificationGroupIds?.length > 0){\n            const verificationIds = item?.verificationGroupIds\n            if (this.verified.length === 0 && verificationIds?.length > 0) {\n                return false;\n            }\n\n            if (this.verified?.length > 0 && verificationIds?.length > 0) {\n                if (!this.isMatchAll(verificationIds, this.verified)) {\n                    return false;\n                }\n            }\n        }\n        if(cat !== undefined){\n            if (cat?.warning && !cat?.isWarningViewed) {\n                return false;\n            }\n\n            const verificationIds = cat?.verificationGroupIds\n            if (this.verified.length === 0 && verificationIds?.length > 0) {\n                return false;\n            }\n\n            if (this.verified?.length > 0 && verificationIds?.length > 0) {\n                if (!this.isMatchAll(verificationIds, this.verified)) {\n                    return false;\n                }\n            }\n        }\n\n\n\n        return true;\n    }\n\n    /*\n    getMenuDeviceConfig(key: string): any {\n\n        var result = null;\n\n        if (this.menu?.config) {\n\n            let config = this.menu?.config;\n            result = get(config, key);\n        }\n\n        return result;\n    }\n    */\n\n    isMatchAll(arr1: String[], arr2: String[]){\n        if(arr2.length < arr1.length){\n            return false;\n        }\n        for (let i = 0; i < arr1.length; i++) {\n            const isExist = arr2?.includes(arr1[i]);\n            if(!isExist){\n                return false;\n            }\n        }\n        return true;\n    }\n\n\n}\n\n","import { Injectable, Injector } from '@angular/core';\nimport { lastValueFrom } from 'rxjs';\nimport { BaseContext } from '../base/base-context';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class PreOrderContext extends BaseContext {\n    order: any;\n    orderId: any;\n    data: any;\n    storeId: any;\n    hasPreOrderContext = true;\n\n    constructor(private injector: Injector) {\n        super(injector);\n\n        console.log('constructing PRE order context, this should only happen once');\n\n        this.initFromContext();\n    }\n\n\n    initFromContext() {\n\n        var aigens = window['aigens'];\n        if (aigens && aigens.context) {\n            var context = aigens.context;\n            this.contextId = this.makeGenericKey(context, 'preorder', context.locale);\n        }\n\n        this.restore();\n    }\n\n    clear() {\n        this.storeId = null;\n        this.data = null;\n        this.order = null;\n    }\n\n    makeSaveData() {\n        return this.data;\n    }\n\n    protected async restoreSavedData(data: any) {\n\n        console.log('PreorderContext restoreSavedData', data);\n        if (data.order) {\n            this.order = data.order;\n        }\n        if (this.order === undefined && data.uuid) {\n            this.orderId = data?.uuid;\n            await lastValueFrom(this.getOrder()).then((x) => {\n                this.order = x\n                return x;\n            })\n            this.next('order', this.order)\n        }\n        console.log('restored PRE order', this.order);\n\n\n        this.storeId = data?.storeId || this.order?.storeId;\n    }\n\n    getOrder() {\n        const url = `/api/v1/menu/order/${this.orderId}.json`\n        let param = {};\n        param['locale'] = 'multi';\n        return this.dataService.get(url, param)\n    }\n}\n\n","import { Injectable, Injector } from '@angular/core';\nimport * as localForage from 'localforage';\nimport * as LZUTF8 from 'lzutf8';\nimport { CommonService } from '../../pure/services/common.service';\n//var LZUTF8 = require('lzutf8');\n\n\n//WARNING: DO NOT MODIFY THIS CLASS\n//WARNING: DO NOT ADD DEPENDENCY\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class StorageService {\n\n    private dev: boolean = false;\n    public static prohibitWritingToStorage = false;\n    constructor(injector: Injector) {\n\n        console.log('new storage service');\n        this.dev = window.location.hostname == 'localhost';\n\n        this.initForage();\n\n\n    }\n\n    initForage() {\n\n        localForage.config({\n            name: 'aigens',\n            storeName: 'context'\n        });\n    }\n\n    setLocal(key: string, object: any) {\n\n        CommonService.setLocal(key, object);\n    }\n\n    getLocal(key: string): any {\n\n        return CommonService.getLocal(key);\n    }\n\n    setStorage(key: string, object: any, compress: boolean = false): Promise<any> {\n        /**\n         * Sometimes we need to prohibit writing to storage\n         * * If get storage takes 3 seconds, get to order and then write into storage.\n         * * It takes 1 second to remove order, and there will be a problem. The order is deleted, but it still exists in storage, so we need to write an attribute to prohibit writing to storage.\n         * ** 假如get storage 需要 3秒, get 到 order 再写入 storage\n         * ** remove order 需要1秒, 就会出现一个问题. 订单被删除了, storage 中仍存在, 所以需要写一个属性去禁止写入 storage.\n         */\n         if (StorageService.prohibitWritingToStorage) {\n            return Promise.resolve(null);\n        }\n\n        if(object == null){\n            localForage.removeItem(key);\n\n            return null;\n        }\n\n        if(compress){\n\n            return this.setStorageCompress(key, object);\n        }else{\n            return localForage.setItem(key, object);\n        }\n    }\n\n    async removeItem(key) {\n        if (!key) return;\n        await localForage.removeItem(key);\n    }\n\n    async getStorageKeys(){\n        return (await localForage.keys()) || [];\n    }\n\n    getStorage(key: string, compress: boolean = false): Promise<any> {\n\n        if(compress){\n            return this.getStorageCompress(key);\n        }else{\n            return localForage.getItem(key);\n        }\n    }\n\n\n    setStorageCompress(key: string, object: object): Promise<any> {\n\n\n\n        var promise = new Promise((resolve, reject) => {\n\n            var str = JSON.stringify(object);\n            console.log(\"before compress\", str.length);\n\n            LZUTF8.compressAsync(str, { outputEncoding: \"StorageBinaryString\" }, function (result, error) {\n                if (error === undefined){\n                    console.log(\"after compress\", result.length);\n\n                    localForage.setItem(key, result);\n\n                    resolve(result);\n                }\n                else{\n                    console.log(\"Compression error\", error);\n                    reject(error.message);\n                }\n\n            });\n\n        });\n\n        return promise;\n    }\n\n    getStorageCompress(key: string): Promise<any>{\n\n\n        var promise = new Promise((resolve, reject) => {\n\n            localForage.getItem(key, (error, value)=>{\n\n                if(error){\n                    resolve(null);\n                }else{\n\n                    console.log(\"compressed length\", value['length']);\n\n                    LZUTF8.decompressAsync(value, { inputEncoding: \"StorageBinaryString\" }, function (result, error) {\n                        if (error === undefined){\n                            console.log(\"decompressed length\", result.length);\n\n                            var obj = JSON.parse(result);\n\n                            resolve(obj);\n                        }\n                        else{\n                            console.log(\"Decompression error\", error);\n                            resolve(null);\n                        }\n\n                    });\n\n                }\n\n            });\n\n\n\n\n        });\n\n        return promise;\n    }\n\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Capacitor } from '@capacitor/core';\nimport { TTSOptions, TextToSpeech, SpeechSynthesisVoice} from '@capacitor-community/text-to-speech';\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class TextToSpeechService {\n    speechSynthesisAvailable: boolean = false;\n\n    constructor(injector: Injector) {\n\n    }\n\n    isAvailable(): boolean {\n        return true;\n    }\n\n    speak = async (options: TTSOptions) => {\n        try {\n            return await TextToSpeech.speak(options);\n        } catch (error) {\n            console.error(error);\n        }\n    };\n\n    stop = async () => {\n        await TextToSpeech.stop();\n    };\n\n    getSupportedLanguages = async () => {\n        return await TextToSpeech.getSupportedLanguages();\n    };\n\n    getSupportedVoices = async () => {\n        return  TextToSpeech.getSupportedVoices();\n    };\n\n    isLanguageSupported = async (lang: string) => {\n        return await TextToSpeech.isLanguageSupported({ lang });\n    };\n}\n","import { Injectable, Injector, RendererStyleFlags2 } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { TinyColor } from '@ctrl/tinycolor';\nimport { HueValue, MatCssPalettePrefix, MaterialCssVarsService } from 'angular-material-css-vars';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class ThemeColorService {\n\n\n    cssGroups;\n\n    hues = [\n        { value: '50', viewValue: '50' },\n        { value: '100', viewValue: '100' },\n        { value: '200', viewValue: '200' },\n        { value: '300', viewValue: '300' },\n        { value: '400', viewValue: '400' },\n        { value: '500', viewValue: '500' },\n        { value: '600', viewValue: '600' },\n        { value: '700', viewValue: '700' },\n        { value: '800', viewValue: '800' },\n        { value: '900', viewValue: '900' },\n        /*\n        { value: 'A100', viewValue: 'A100' },\n        { value: 'A200', viewValue: 'A200' },\n        { value: 'A400', viewValue: 'A400' },\n        { value: 'A700', viewValue: 'A700' },\n        */\n    ];\n\n    colorMap;\n\n    currentContentId: any;\n\n    constructor(injector: Injector, private materialCssVarsService: MaterialCssVarsService,\n                private route: ActivatedRoute) {\n\n        //some bug with the lib that these values sometimes are not set, so we set them\n        let root = document.documentElement;\n        root.style.setProperty('--light-primary-text', '255, 255, 255');\n        root.style.setProperty('--dark-primary-text', '0, 0, 0');\n\n        this.materialCssVarsService.setAutoContrastEnabled(true);\n        this.materialCssVarsService['_calculateContrastColorsForCurrentValues'] = this._calculateContrastColorsForCurrentValues;\n        this.materialCssVarsService['_setStyle'] = this._setStyle;\n    }\n\n\n    //this method overwrite the contrast color calculation\n    private _calculateContrastColorsForCurrentValues(palettePrefix: MatCssPalettePrefix): { contrastColorVar: string, hue: HueValue }[] {\n\n        var csss = this as any;\n\n        return csss.cfg.sortedHues.map((hue) => {\n\n            const hueVarVal = csss._getCssVarValue(`${palettePrefix}${hue}`);\n            const c = new TinyColor(`rgb(${hueVarVal})`);\n            const isDark = c.getBrightness() < 155;\n\n            const contrastColorVar = isDark\n                ? '--light-primary-text'\n                : '--dark-primary-text';\n\n            //console.log(\"calculate\", hue, contrastColorVar);\n\n            return {\n                contrastColorVar,\n                hue,\n            };\n        });\n    }\n\n    //this method prevent setting the vars, and use our format instead\n    private _setStyle = (vars: any[]) => {\n\n        var csss = this.materialCssVarsService as any;\n        var colorMap = this.colorMap;\n\n        vars.forEach(s => {\n\n            //this is the line we save the variables\n            colorMap[s.name] = s.val;\n\n            //console.log(\"setting val\", s, s.val);\n\n            //this is the line from original source code\n            csss.renderer.setStyle(csss.ROOT, s.name, s.val, RendererStyleFlags2.DashCase);\n        });\n    }\n\n    setThemeByColors(brandColors): void {\n\n        if (!brandColors) return;\n\n        this.colorMap = {};\n\n        //console.log(\"theme colors\", brandColors);\n\n        let {\n            primary = \"#3f51b5\",\n            secondary = \"#ff4081\",\n            warn = \"#f44336\",\n            isDark = false\n        } = brandColors;\n\n        isDark && this.materialCssVarsService.setDarkTheme(isDark);\n        primary && this.materialCssVarsService.setPrimaryColor(primary);\n        secondary && this.materialCssVarsService.setAccentColor(secondary);\n        warn && this.materialCssVarsService.setWarnColor(warn);\n\n\n        this.computeVars();\n    }\n\n\n    setThemeByContent(brand: any): void {\n\n        if (!brand) return;\n\n        //console.log(\"setThemeByContent\", brand);\n\n        if (brand.id == this.currentContentId) {\n            console.log(\"skip theme due to same brandId\");\n            return;\n        }\n\n        this.currentContentId = brand.id;\n\n        var brandColors = brand.colors || {};\n        // temporary fix issue with null theme color from server\n        // TODO: this issue should be fixed from server return default value of theme color\n        if(!brandColors.primary) {\n            brandColors = {\n                \"bg\": \"#eb5a4b\",\n                \"primary\": \"#eb5a4b\",\n                \"secondary\": \"#FF4081\",\n                \"warn\": \"#F44336\"\n            }\n        }\n        this.setThemeByColors(brandColors);\n    }\n\n    setThemeByContext(): void {\n\n\n        const ai = window['aigens'];\n\n        if (ai && ai.context) {\n            this.route.queryParams.subscribe(params => {\n                if (params.groupId) { // group mode, using theme from group\n                    this.setThemeByContent(ai.context.group);\n                } else if (params.courtId) { // court mode, using theme from court\n                    this.setThemeByContent(ai.context.court);\n                } else { // no req param, could be on brand home / court home / group home\n                    const brand = ai.context.court || ai.context.brand || ai.context.group;\n                    this.setThemeByContent(brand);\n                }\n            });\n        }\n\n\n    }\n\n    /*\n    hexToColor(hex){\n        var rgb = this.hexToRgb(hex);\n        var c = new Color(rgb.r, rgb.g, rgb.b);\n        return c;\n    }*/\n\n    hexToRgb(hex) {\n        // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        return result ? {\n            r: parseInt(result[1], 16),\n            g: parseInt(result[2], 16),\n            b: parseInt(result[3], 16)\n        } : null;\n    }\n\n    computeVars() {\n\n        //console.log(\"computing color with map\", this.colorMap);\n\n        var groups = [\n            {\n                name: 'primary',\n                namec: 'primary-contrast',\n                short: \"P\",\n                shortc: \"PC\",\n                items: []\n            },\n            {\n                name: 'accent',\n                namec: 'accent-contrast',\n                short: \"A\",\n                shortc: \"AC\",\n                items: []\n            },\n            {\n                name: 'warn',\n                namec: 'warn-contrast',\n                short: \"W\",\n                shortc: \"WC\",\n                items: []\n            }\n        ];\n\n        let root = document.documentElement;\n\n        var cs = this.colorMap;\n\n        var newCss = [];\n\n        var i = 0;\n\n\n        //--palette-accent-contrast-600\n        for (let group of groups) {\n\n            for (let h of this.hues) {\n\n                var name = \"--palette-\" + group.name + \"-\" + h.value;\n                var namec = \"--palette-\" + group.name + \"-contrast-\" + h.value;\n\n                var rgb = cs[name];\n                var rgbc = cs[namec];\n\n                if(rgbc == 'var(--light-primary-text)'){\n                    rgbc = 'white';\n                }else if(rgbc == 'var(--dark-primary-text)'){\n                    rgbc = 'black';\n                }else if(!rgbc){\n                    rgbc = 'white';\n                }\n\n                if (rgb) {\n\n                    var hex = this.rgbToHex(rgb);\n                    var hexc = this.rgbToHex(rgbc);\n\n                    var newName = \"--\" + group.short + h.value;\n                    var newNameC = \"--\" + group.short + \"C\" + h.value;\n\n                    var dis = newName;\n                    var disc = newNameC;\n\n                    if (h.value == '500') {\n                        dis = dis.replace('500', '');\n                        disc = disc.replace('500', '');\n                    }\n\n                    var item = {\n                        name: newName,\n                        namec: newNameC,\n                        dis: dis,\n                        disc: disc,\n                        value: hex,\n                        valuec: hexc,\n                        hue: h.value,\n                        cls: group.short + h.value\n                    };\n\n                    newCss.push(item);\n\n                    group.items.push(item);\n\n                }\n            }\n\n            i++;\n\n        }\n\n        console.log(\"css groups\", groups);\n\n        for (let css of newCss) {\n\n            root.style.setProperty(css.name, css.value);\n            root.style.setProperty(css.namec, css.valuec);\n\n            if (css.hue == '500') {\n                root.style.setProperty(css.name.replace('500', ''), css.value);\n                root.style.setProperty(css.namec.replace('500', ''), css.valuec);\n\n            }\n\n        }\n\n        this.cssGroups = groups;\n\n    }\n\n    componentToHex(c) {\n        var hex = c.toString(16);\n        return hex.length == 1 ? \"0\" + hex : hex;\n    }\n\n    rgbToHex(rgbStr) {\n\n        var splits = rgbStr.split(',');\n\n        if (splits.length <= 1) return rgbStr;\n\n        var r = parseInt(splits[0]);\n        var g = parseInt(splits[1]);\n        var b = parseInt(splits[2]);\n\n        return \"#\" + this.componentToHex(r) + this.componentToHex(g) + this.componentToHex(b);\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\n@Injectable()\nexport class PageParams {\n\n\n    params = {};\n    querys = {};\n    input = {};\n\n    route: ActivatedRoute;\n\n    constructor() {\n\n    }\n\n    set(params: any) {\n        this.params = params;\n    }\n\n    get(name: string) {\n\n        var result = null;\n\n        if (this.input) {\n            result = this.input?.[name];\n        }\n\n        if (this.route) {\n\n            //console.log('get', name);\n            //console.log('route', this.route);\n\n            var snapshot = this.route?.snapshot;\n\n            if (!result) {\n                result = snapshot?.params?.[name];\n            }\n\n            //checking parent route as well\n            if (!result) {\n                result = snapshot?.parent?.params?.[name];\n            }\n\n            if (!result) {\n                result = snapshot?.queryParams?.[name];\n            }\n\n            var hash = snapshot?.fragment;\n\n            if(!result && hash){\n\n                try{\n                    console.log(\"HASH\", hash);\n                    const urlParams = new URLSearchParams(hash);\n                    result = urlParams.get(name);\n                }catch(e){\n                    console.log(e);\n                }\n\n            }\n\n\n        } else {\n            if (!result) {\n                result = this.params?.[name];\n            }\n            if (!result) {\n                result = this.querys?.[name];\n            }\n        }\n\n        if (!result) {\n            result = history?.state?.[name];\n        }\n\n        return result;\n    }\n\n}\n","import { LocationStrategy } from '@angular/common';\nimport { Injectable } from \"@angular/core\";\nimport {\n    ActivatedRouteSnapshot,\n    DetachedRouteHandle, RouteReuseStrategy\n} from '@angular/router';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class CustomRouteReuseStrategy implements RouteReuseStrategy {\n\n    handlers: { [key: string]: DetachedRouteHandle };\n    id: any;\n    isDebug: boolean = false;\n\n    backward: boolean = false;\n    backFrom: string;\n    backTo: string;\n\n    constructor(ls: LocationStrategy) {\n\n        console.log(\"CustomRouteReuseStrategy constructor\");\n\n\n        var cache = window['reuseCache'];\n\n        if (!cache) {\n            cache = {};\n            window['reuseCache'] = cache;\n        }\n\n        this.handlers = cache;\n\n        this.id = new Date().getTime();\n\n        ls.onPopState((event) => {\n\n            this.backward = true\n\n            console.log('GOING BACK', event, window.location.pathname, event.state);\n\n            setTimeout(() => {\n                console.log(\"back completed\");\n                this.backward = false;\n            }, 10);\n        });\n\n\n\n    }\n\n    private debug(msg, result, route: ActivatedRouteSnapshot = null) {\n\n        if (this.isDebug) {\n\n\n            if (route) {\n\n                console.log(msg, result, this.getUrl(route), Object.keys(this.handlers).length);\n            } else {\n                console.log(msg, result, Object.keys(this.handlers).length);\n            }\n\n            if (this.backward) {\n                console.log(\"backward\");\n            } else {\n                console.log(\"forward\");\n            }\n        }\n\n\n    }\n\n    clearAll() {\n\n        //this.handlers = {};\n        console.log(\"check HANDLERS:\", this.handlers);\n        var handlers = this.handlers;\n        for (var member in handlers) delete handlers[member];\n\n        this.debug(\"clearing reuse\", \"\");\n\n    }\n\n    clear(url: string) {\n\n        delete this.handlers[url];\n\n    }\n\n    /**\n     * Determines if this route (and its subtree) should be detached to be reused later\n     * @param route\n     */\n    shouldDetach(route: ActivatedRouteSnapshot): boolean {\n\n        //console.log('[router-reuse] checking if this route should be re used or not', route);\n\n        if (!route.routeConfig || route.routeConfig.loadChildren) {\n            return false;\n        }\n\n\n\n        /** Whether this route should be re used or not */\n\n        let shouldReuse = false;\n\n        if (route.routeConfig.data) {\n\n            route.routeConfig.data.reuse ? shouldReuse = true : shouldReuse = false;\n\n            var url = this.getUrl(route);\n            //console.log(\"shouldDetach data\", route.routeConfig.data);\n\n            if (this.backward) {\n                console.log(\"should not save because it's backing\");\n                shouldReuse = false;\n                this.clear(url);\n            }\n\n            this.debug(\"should detach\", shouldReuse, route);\n\n\n            this.backFrom = url;\n\n        }\n\n\n        return shouldReuse;\n\n        //return true;\n    }\n\n    /**\n     * Stores the detached route.\n     */\n    store(route: ActivatedRouteSnapshot, handler: DetachedRouteHandle): void {\n        //console.log('[router-reuse] storing handler');\n        if (handler) {\n\n            var url = this.getUrl(route);\n            this.debug(\"store saving resue\", \"true\", route);\n            this.handlers[url] = handler;\n        }\n    }\n\n    /**\n     * Determines if this route (and its subtree) should be reattached\n     * @param route Stores the detached route.\n     */\n    shouldAttach(route: ActivatedRouteSnapshot): boolean {\n        //console.log('[router-reuse] checking if it should be re attached');\n\n        var url = this.getUrl(route);\n\n        //if going forward, DO NOT cache anything\n        if (!this.backward) {\n            this.debug(\"should not attach when forward\", result, route);\n            return false;\n        }\n\n        var result = !!this.handlers[url];\n\n        if (this.backward) {\n            this.backTo = url;\n        }\n\n        this.debug(\"should attach\", result, route);\n\n        return result;\n    }\n\n\n\n    /**\n     * Retrieves the previously stored route\n     */\n    retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n\n        //console.log('[router-reuse] retrieve');\n\n        if (!route.routeConfig || route.routeConfig.loadChildren || route.routeConfig.children) {\n            return null;\n        };\n\n        var url = this.getUrl(route);\n        var result = this.handlers[url] as any;\n\n        if (result) {\n\n            //delete this.handlers[url];\n            console.log(\"reuse success\", url);\n            this.debug(\"reuse\", \"true\", route);\n            \n            var comp = result.componentRef?.instance;\n\n            //console.log(\"reused component\", comp);\n            if(comp && comp.ngOnAttach){\n\n                if(!result.attachCalled){\n                    result.attachCalled = true;\n                    console.log(\"attached callback\");\n                    comp.ngOnAttach();\n                }else{\n\n                    console.log(\"skipping attached callback\");\n                }\n\n                \n            }\n        }\n        return result;\n    }\n\n    /**\n     * Determines if a route should be reused\n     * @param future\n     * @param current\n     */\n    shouldReuseRoute(future: ActivatedRouteSnapshot, current: ActivatedRouteSnapshot): boolean {\n\n        //console.log('[router-reuse] shouldReuseRoute');//, future, current);\n\n        const defaultReuse = (future.routeConfig === current.routeConfig);\n\n        return defaultReuse;\n\n\n    }\n\n\n    private getUrl(route: ActivatedRouteSnapshot): string {\n        var result = route.pathFromRoot\n            .map(v => v.url.map(segment => segment.toString()).join('/'))\n            .filter(url => !!url)\n            .join('/');\n\n        //console.log('router-reuse url', result);\n\n        return result;\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { get, merge } from 'lodash-es';\n\n\n@Injectable({providedIn: 'root'})\nexport class SettingManager {\n\n    private context: any;\n\n    merged: any = {};\n\n    constructor() {\n\n        this.context = window['aigens'].context;\n\n        this.initByContext();\n    }\n\n    private initByContext(storeConfig: any = {}) {\n        this.merged = {};\n        // var configData = this.context?.config?.data; // this.context?.config is from initJs config\n        var configData = Object.assign(this.context?.config?.data || {}, storeConfig); // use storeConfig to overwrite initJs config\n        Object.assign(this.merged, configData);\n\n        this.merged.brand = this.context.brand;\n        this.merged.form = this.context.form;\n\n    }\n\n    setStoreMenu(store: any){\n        this.initByContext(store?.menu?.config); // reset merged to make sure we get correct current store config\n        this.merged.menu = store.menu?.settings;\n        this.merged.pos = store.pos;\n\n        const storeConfig = store.menu?.config;\n        Object.assign(this.merged, storeConfig);\n\n        console.log(\"setStoreMenu\", store);\n\n    }\n\n    merge(config:any){\n\n        console.log(\"income config\", config)\n\n        //merge kiosk's station config into merged object\n        Object.assign(this.merged, config);\n\n        console.log(\"full config\", this.merged);\n    }\n\n\n    get(path: string, defValue: any): any {\n\n        if(path.indexOf('basic.') == 0){\n            path = path.substring(6);\n        }\n\n        var result = get(this.merged, path);\n\n        if (typeof (result) == \"undefined\" || result == null) {\n            result = defValue;\n        }\n\n\n\n        //console.log(\"RES\", path, result);\n\n\n        return result;\n    }\n\n    setForm(form) {\n        console.log('CALLED MERGED SESSION FORM')\n        if(form){\n        console.log('SESSION FORM FOUND')\n            this.merged.form = form\n        }\n        console.log('SESSION FORM MERGED', this.merged.form)\n    }\n}\n","import { CommonService } from './common.service';\nimport { Injectable } from '@angular/core';\nimport { SubscribeService } from './subscribe.service';\nimport { PlatformService } from '@aigens/core/src/app/pure/services/platform.service';\n\nexport interface AdFilterOptions {\n    checkBrandOnly?: boolean;\n    isBrandOnly?: boolean;\n    checkBanner?: boolean;\n    orderMode?: string;\n    checkSignIn?: boolean;\n    isSignIn?: boolean;\n    storeId?: string;\n    checkFreq?: boolean;\n}\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class AdService {\n\n    private sessionSeenMap: any = {};\n    private onceSeenMap: any = {};\n\n    constructor(private context: SubscribeService,\n                private platformService: PlatformService) {\n        this.onceSeenMap = CommonService.getLocal(`${this.context?.['brandId']}-freq-once-ad`) ?? {};\n        this.sessionSeenMap = CommonService.getSessionStorage(`${this.context?.['brandId']}-freq-session-ad`) ?? {};\n    }\n\n    /**\n     * Method for filtering ads.\n     * options can be vary. Please take a look detail code about attributes that we can set\n     *\n     * @param ads\n     * @param triggerName\n     * @param options\n     */\n    public filterAds(ads: any[], triggerName: string, options: AdFilterOptions): any[] {\n        let result = ads;\n\n        result = result.filter(ad => {\n            if (!ad.openings || ad.openings.always) {\n                return true;\n            }\n\n            const now = new Date();\n            const currentTime = (('0' + now.getHours().toString()).slice(-2) + ':' + now.getMinutes().toString());\n\n            const start = ad.openings?.weekdays[now.getDay()].startTime;\n            const end = ad.openings?.weekdays[now.getDay()].endTime;\n            const status = ad.openings?.weekdays[now.getDay()].type;\n\n            return currentTime >= start && currentTime <= end;\n        });\n\n        if (options?.checkFreq) {\n            result = ads.filter((ad) => {\n                return this.checkAdFreq(ad);\n            });\n        }\n\n        if (options?.checkBrandOnly) {\n            if (options?.isBrandOnly) {\n                result = result.filter(ad => ad.brandOnly);\n            } else {\n                result = result.filter(ad => !ad.brandOnly);\n            }\n        }\n\n        result = result.filter(ad => {\n\n            if (options?.checkBanner && !ad.images?.banner) {\n                return false;\n            }\n\n            const trigger = ad.trigger || [];\n            return trigger.includes(triggerName);\n        });\n\n\n        // if (options?.orderMode) { // commented, to make sure always filter by order mode\n        result = result.filter(ad => {\n            if (ad.modes && ad.modes.length > 0) {\n                return ad.modes.includes(options?.orderMode);\n            }\n\n            return true;\n        });\n        // }\n\n        // if (options?.checkSignIn) { // commented, to make sure always filter by users\n        result = result.filter(ad => {\n            if (!ad.users || ad.users.length <= 0) {\n                return true;\n            }\n\n            if (options?.isSignIn == null) {\n                return false;\n            }\n\n            if (options?.isSignIn && ad.users.indexOf('member') >= 0) {\n                return true;\n            }\n            if (!options?.isSignIn && ad.users.indexOf('guest') >= 0) {\n                return true;\n            }\n\n            return false;\n        });\n        // }\n\n\n        // if (options?.storeId) { // commented, to make sure always filter by store id\n        result = result.filter(ad => {\n            const stores = (ad.storeIds || []).map(o => String(o));\n            if (stores.length == 0) {\n                return true;\n            }\n\n            return stores.includes(options?.storeId);\n        });\n        // }\n\n        // filter ads by devices\n        result = result.filter(ad => {\n            if (!ad.devices || ad.devices.length == 0) {\n                return true;\n            }\n\n            return ad.devices.includes(this.platformService.platform);\n        });\n\n        result = this.sortAds(result);\n\n        return result;\n    }\n\n    private checkAdFreq(ad: any): boolean {\n        if (!ad?.frequency || ad?.frequency === 'always') {\n            return true;\n        }\n\n        if (ad.frequency === 'session') {\n            return !(ad.id in this.sessionSeenMap && this.sessionSeenMap[ad.id]);\n        }\n\n        return !(ad.id in this.onceSeenMap && this.onceSeenMap[ad.id]);\n    }\n\n    public markAdsAsSeen(ads: any[]): void {\n        ads.forEach((ad) => {\n            this.makeAdAsSeen(ad);\n        });\n\n        CommonService.setLocal(`${this.context?.['brandId']}-freq-once-ad`, this.onceSeenMap);\n        CommonService.setSessionStorage(`${this.context?.['brandId']}-freq-session-ad`, this.sessionSeenMap);\n    }\n\n    private makeAdAsSeen(ad: any): void {\n        if (!ad?.frequency || ad?.frequency === 'always') {\n            return;\n        }\n\n        if (ad.frequency === 'session') {\n            this.sessionSeenMap[ad.id] = true;\n            console.log(this.sessionSeenMap);\n        }\n\n        if (ad.frequency === 'once') {\n            this.onceSeenMap[ad.id] = true;\n            console.log(this.onceSeenMap);\n        }\n    }\n\n    public sortAds(ads: any[]): any[] {\n        let result = ads;\n\n        result = result.sort((a, b) => {\n            if (a['featured']) {\n                return -1;\n            }\n            if (b['featured']) {\n                return 1;\n            }\n\n            return a?.start > b?.start ? -1 : 1;\n        });\n\n\n        result = result.sort((a, b) => {\n            const aVal = a.priority ?? 0;\n            const bVal = b.priority ?? 0;\n\n            return bVal - aVal;\n        });\n\n        return result;\n    }\n}\n","import { Injectable, Injector, NgZone, ErrorHandler, Inject } from '@angular/core';\nimport { SentryService } from './sentry.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class BaseErrorHandlerService implements ErrorHandler {\n\n    sentryService: SentryService;\n\n    constructor(injector: Injector) {\n        this.sentryService = injector.get(SentryService);\n    }\n\n    handleError(error) {\n        console.error(error.name, error);\n        this.sentryService.captureException(error);\n    }\n}\n","import { Injectable, Injector } from '@angular/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class CommonService {\n\n\n    constructor(injector: Injector) {\n\n\n    }\n\n    public static getLocal(key: string): any {\n\n        try{\n\n            const str = localStorage.getItem(key);\n            if (str == null || str == 'undefined') {\n                return null;\n            }\n            return JSON.parse(str);\n        }catch(e){\n            console.log(e);\n        }\n\n        return null;\n    }\n\n    public static setLocal(key: string, object: any) {\n\n        try{\n            localStorage.setItem(key, JSON.stringify(object));\n        }catch(e){\n            console.log(e);\n        }\n    }\n\n    public static getSessionStorage(key: string): any {\n\n        try{\n\n            const str = sessionStorage.getItem(key);\n            if (str == null || str === 'undefined') {\n                return null;\n            }\n            return JSON.parse(str);\n        }catch (e){\n            console.log(e);\n        }\n\n        return null;\n    }\n\n    public static setSessionStorage(key: string, object: any): void {\n        try{\n            sessionStorage.setItem(key, JSON.stringify(object));\n        }catch(e){\n            console.log(e);\n        }\n    }\n\n\n\n    public static deserialize(str: string): any {\n\n        try{\n\n            if (str == null || str == 'undefined') {\n                return null;\n            }\n            return JSON.parse(str);\n        }catch(e){\n            console.log(e);\n        }\n\n        return null;\n    }\n\n    public static serialize(object: any):string{\n\n        return JSON.stringify(object);\n\n    }\n\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CommonService } from './common.service';\nimport { LazyService } from './lazy.service';\nimport { PlatformService } from './platform.service';\nimport { SubscribeService } from './subscribe.service';\n\n//WARNING: DO NOT MODIFY THIS CLASS\n//WARNING: DO NOT ADD DEPENDENCY\n\n@Injectable({\n    providedIn: 'root',\n})\nexport class DeepLinkService {\n    static readonly AFTER_LOGIN_SUCCESS_TARGET = 'afterLoginSuccess';\n    orderActions: any[] = [];\n\n    deeplinkMember;\n    // 如果是callback的link就不用再處理, 說明打開時已經處理過\n    static CanParseSdkDepplink = true;\n    defaultTarget = 'orderPage';\n\n    // If there are deeplink actions in URL, will process immediately (listening router event) by calling deeplinkManager.run\n    // We can delay the immediate process by set it = false in the page constructor. And let the page to do run process by itself.\n    // deeplinkManager.run should run once in a time\n    processActionsInFirstRoute = true;\n\n    constructor(private route: ActivatedRoute, private router: Router, private subscribeService: SubscribeService, private platformService: PlatformService, private lazyService: LazyService) {\n    }\n\n\n    popOrderActions() {\n        var result = this.orderActions;\n        this.orderActions = [];\n        return result;\n    }\n\n    processUrl(removeParams: boolean = false) {\n        var params = this.route.snapshot.queryParams;\n\n        var keepParams = {};\n\n        var count = 0;\n\n        for (const field in params) {\n            const value = params[field];\n\n            switch (field) {\n                case 'addItemId':\n                    this.addItemIds(value);\n                    count++;\n                    break;\n                case 'addDiscountCode':\n                    this.addDiscountCodes(value);\n                    count++;\n                    break;\n                case 'addDiscount':\n                    this.addDiscount(value);\n                    count++;\n                    break;\n                case 'addOfferId':\n                    this.addOfferId(value);\n                    count++;\n                    break;\n                case 'sessionId':\n                case 'sid':\n                    this.addSid(value);\n                    count++;\n                    break;\n                case 'addCouponCode':\n                    this.addPendingCouponCode(value, true, 'any');\n                    count++;\n                    break;\n                /*\n                Uncomment this when miniapp is stable\n                case \"random\":\n\n                    count++;\n                    break;\n                */\n                default:\n                    keepParams[field] = value;\n                    break;\n            }\n        }\n\n        if (removeParams && count > 0) {\n            this.removeParams(keepParams);\n        }\n\n        console.log('pending order actions', this.orderActions);\n    }\n\n    private removeParams(keepParams) {\n        console.log('keeping params', keepParams);\n\n        this.router.navigate([], {\n            relativeTo: this.route,\n            queryParams: keepParams,\n            replaceUrl: true,\n        });\n    }\n\n    private addSid(sid: string) {\n        console.log('setting cookie for sid!', sid);\n        // if (!sid) return;\n\n        CommonService.setLocal('session', sid);\n\n    }\n\n    private addItemIds(itemIds: string) {\n        console.log('addItemIds', itemIds);\n\n        var splits = itemIds.split(',');\n\n        for (let itemId of splits) {\n            this.addPendingItem(itemId, false);\n        }\n    }\n\n    addPendingItem(itemId, autoExecute: boolean, isRecommend: boolean = false, target: string = this.defaultTarget) {\n        var action = {\n            action: 'addItem',\n            params: {\n                itemId: itemId,\n                isRecommend,\n            },\n            auto: autoExecute,\n            target\n        };\n\n        // this.orderActions.push(action);\n        this.pushToOrderActions(action);\n    }\n\n    /**\n     * Add search result item to pending action.\n     * Usually it happens if in menu first flow and not confirmed, then user want to add item from the search result.\n     *\n     * @param itemId\n     * @param autoExecute\n     */\n    addPendingSearchItem(item: any, autoExecute: boolean, target: string = this.defaultTarget): void {\n        const action = {\n            action: 'addSearchItem',\n            params: {\n                itemId: item.id,\n                itemObj: item\n            },\n            auto: autoExecute,\n            target\n        };\n\n        this.orderActions = [action];\n    }\n\n    /**\n     * @description: the result about checking offer.reward.discount.conditons will be return by calulation.json\n     *  some benefits about offer.reward.discount  will be return by caculation.json\n     * @return {*}\n     * @param offer\n     * @param autoExecute\n     * @param flow\n     * @param offerId\n     * @param target\n     */\n    addPendingCrmOffer(offer: any, autoExecute: boolean, flow: string = 'order', offerId?: string, target: string = this.defaultTarget) {\n        var action = {\n            action: 'addCrmOffer',\n            params: {\n                offer,\n                flow,\n                offerId,\n            },\n            auto: autoExecute,\n            target\n        };\n\n        // this.orderActions.push(action);\n        this.pushToOrderActions(action);\n    }\n\n    private addDiscountCodes(codes: string) {\n        console.log('addDiscountCodes', codes);\n\n        var splits = codes.split(',');\n\n        for (let code of splits) {\n            this.addPendingDiscountCodes(code, false);\n        }\n    }\n\n    private addDiscount(discount) {\n        console.log('addDiscount', discount);\n\n        this.addPendingDiscount(discount, false);\n    }\n\n    addPendingDiscount(discount, autoExecute: boolean, flow: string = 'order', target: string = this.defaultTarget) {\n        // flow = order   -> go to order page   , flow = \"checkout\" -> go to cart page\n        var action = {\n            action: 'addDiscount',\n            params: {\n                discount: discount,\n                flow: flow,\n            },\n            auto: autoExecute,\n            target\n        };\n\n        // this.orderActions.push(action);\n        this.pushToOrderActions(action);\n    }\n\n    addPendingDiscountCodes(code, autoExecute: boolean, target: string = this.defaultTarget) {\n        var action = {\n            action: 'addDiscountCodes',\n            params: {\n                code: code,\n            },\n            auto: autoExecute,\n            target\n        };\n\n        // this.orderActions.push(action);\n        this.pushToOrderActions(action);\n    }\n\n    addPendingOrder(order, autoExecute: boolean, target: string = this.defaultTarget) {\n        var action = {\n            action: 'addOrder',\n            params: {\n                order: order,\n            },\n            auto: autoExecute,\n            target\n        };\n\n        // this.orderActions.push(action);\n        this.pushToOrderActions(action);\n    }\n\n    addPendingOrderItem(orderitem, autoExecute: boolean, target: string = this.defaultTarget) {\n        var action = {\n            action: 'addOrderItem',\n            params: {\n                orderitem: orderitem,\n            },\n            auto: autoExecute,\n            target\n        };\n\n        // this.orderActions.push(action);\n        this.pushToOrderActions(action);\n    }\n\n    addPendingPreorder(order, autoExecute: boolean, target: string = this.defaultTarget) {\n        var action = {\n            action: 'addPreorder',\n            params: {\n                order: order,\n            },\n            auto: autoExecute,\n            target\n        };\n\n        // this.orderActions.push(action);\n        this.pushToOrderActions(action);\n    }\n\n    addPendingNavigation(uri, autoExecute: boolean, target: string = this.defaultTarget) {\n        var action = {\n            action: 'navigation',\n            params: {\n                uri\n            },\n            auto: autoExecute,\n            target\n        };\n\n        this.pushToOrderActions(action);\n    }\n\n    addPendingCouponCode(code, autoExecute: boolean, target: string = this.defaultTarget) {\n        var action = {\n            action: 'addCouponCode',\n            params: {\n                code\n            },\n            auto: autoExecute,\n            target\n        };\n\n\n        this.pushToOrderActions(action);\n    }\n\n    removePendingActions() {\n        this.orderActions = [];\n    }\n\n    private addOfferId(offerId: string) {\n        console.log('addOfferId', offerId);\n\n        let offerIdSplit = offerId.split(',');\n\n        for (let offerId of offerIdSplit) {\n\n            console.log('deeplink offer', offerId);\n\n            this.addPendingCrmOffer(null, false, 'order', offerId);\n        }\n    }\n\n    // '{deviceId=aa8caf7598efcc65, source=600001, addItemId=null, memberCode=null, universalLink=https://fairwoodappsit.fairwood.com.hk/aigens, addDiscountCode=null, sessionId=, addOfferId=null, pushId=null}'\n    private javaMapTojsObject(obj: string) {\n        if (!obj) return {};\n        let r = {}\n        if (obj.startsWith('{')) obj = obj.replace('{', '');\n        if (obj.endsWith('}')) obj = obj.substring(obj.length - 1, 0);\n        obj = obj && obj.trim() || \"\";\n        if (~obj.indexOf(',')) {\n            const seps = obj.split(',');\n            seps.forEach(sep => {\n                sep = sep && sep.trim() || \"\";\n\n                if (~sep.indexOf('=')) {\n                    const Ss = sep.split('=');\n                    const Ss_0 = Ss[0];\n                    // let Ss_1 = Ss[1].trim();\n                    let Ss_1_ = sep.substring(Ss_0.length+1);\n                    let Ss_1 = Ss_1_ && Ss_1_.trim() || \"\";\n                    try {\n                        Ss_1 = JSON.parse(Ss_1);\n                    } catch (error) {\n                    }\n                    r[Ss_0.trim()] = Ss_1;\n                }\n            })\n        } else if (~obj.indexOf('=')) {\n            const v = obj.split('=');\n            const vs_0 = v[0];\n            let vs_1_ = obj.substring(vs_0.length+1);\n            let vs_1 = vs_1_ && vs_1_.trim() || \"\";\n            try {\n                vs_1 = JSON.parse(vs_1);\n            } catch (error) {\n            }\n            r[vs_0.trim()] = vs_1;\n        }\n        return r;\n    }\n    private javaDeeplinkMapTojsObject(obj: string) {\n        if (!obj) return {};\n        let r = {}\n        if (obj.startsWith('{')) obj = obj.replace('{', '');\n        if (obj.endsWith('}')) obj = obj.substring(obj.length - 1, 0);\n        const pre = \"add\"\n        const appPre = \", add\";\n        if (~obj.indexOf(appPre)) {\n            const seps = obj.split(appPre);\n            seps.forEach(sep => {\n                if (~sep.indexOf('=')) {\n                    const index = sep.indexOf(\"=\");\n                    let Ss_0 = sep.substring(index,-1)\n                    let Ss_1 = sep.substring(index+1,).trim();\n                    try {\n                        Ss_1 = JSON.parse(Ss_1);\n                    } catch (error) {\n                    }\n                    if (!Ss_0.startsWith(pre)) Ss_0 = `${pre}${Ss_0}`\n                    r[Ss_0.trim()] = Ss_1;\n                }\n            })\n        } else if (~obj.indexOf('=')) {\n            const index = obj.indexOf(\"=\");\n            let vs_0 = obj.substring(index,-1)\n            let vs_1 = obj.substring(index+1,).trim();\n            try {\n                vs_1 = JSON.parse(vs_1);\n            } catch (error) {\n            }\n            if (!vs_0.startsWith(pre)) vs_0 = `${pre}${vs_0}`\n            r[vs_0.trim()] = vs_1;\n        }\n        return r;\n    }\n\n    checkContainerMember() {\n\n        if (this.platformService.isSDK()) {\n            var containerService = this.lazyService.getService(\"ContainerService\") as any;\n            if (!containerService) return;\n\n            containerService?.init();\n\n            containerService.getMember().then((m) => {\n\n                let member = m?.member || {};\n\n                if (typeof member === 'string') {\n                    console.log(\"is string member\");\n                    try {\n                        member = this.javaMapTojsObject(member);\n                    } catch (error) {\n\n                    }\n                }\n                console.log(\"container member\", m, member);\n\n                // member.sessionId = \"eb1408b9-06f0-46fd-887a-b8101c421d97\";\n                // console.log(\"SDK_MEMBER_CONTEXT member1 \", member);\n\n                // this.configService.clearAll();\n\n                // var sid = member?.sessionId;\n                if (m) {// no need to check sid if null, just need to check if sdk, because sid=null means outside the app is logged-out\n                    // this.memberContextManager.setMemberData(member);\n                    this.addSid(member.sessionId);\n                }\n\n\n                // // deviceId from app\n                // const deviceId = member?.deviceId;\n                // if (deviceId) {\n                //     this.configService.setDeviceId(deviceId);\n                // }\n\n                // const name = member?.name;\n                // if (name) {\n                //     this.configService.setLocal('aigens-guest-name', name);\n                // }\n                // const email = member?.email;\n                // if (email) {\n                //     this.configService.setLocal('aigens-guest-email', email);\n                // }\n                // const phone = member?.phone;\n                // if (phone) {\n                //     this.configService.setLocal('aigens-guest-phone', phone);\n                // }\n\n\n\n                // let member:Dictionary<String, Any> = [\n                //     \"memberCode\" : \"<crmMemberId>\",\n                //     \"source\" : \"<merchant>\",\n                //     \"sessionId\" : \"<sessionId>\",\n                //     \"pushId\": \"<applePushToken>\",\n                //     \"deviceId\": \"<deviceId>\",\n                //     \"universalLink\": \"<start with https://xxxx>\",\n                //     \"appleMerchantId\": \"<YourAppleMerchantId>\",\n                //     \"cachedOrderContext\": true\n                //     \"name\": \"xx\",\n                //     \"email\": \"xxd\",\n                //     \"phone\": \"xxx\",\n                //      \"closedData\": string (object)\n\n                // ]\n                if (member?.closedData) {\n                    try {\n                        member.closedData = JSON.parse(member?.closedData);\n                    } catch (error) {\n\n                    }\n                }\n                this.deeplinkMember = member;\n\n                window['cachedOrderContext'] = member?.cachedOrderContext == false ? false : true;\n\n                this.subscribeService.next(this.subscribeService.SDK_MEMBER_CONTEXT, member);\n\n            });\n\n            containerService.getDeeplink().then(d => {\n\n                if (!DeepLinkService.CanParseSdkDepplink) return;\n\n                console.log(\"deeplink:\", d);\n                let deeplink = d?.deeplink || {};\n                if (typeof deeplink === 'string') {\n                    try {\n                        deeplink = this.javaDeeplinkMapTojsObject(deeplink);\n                    } catch (error) {\n\n                    }\n                }\n\n                // const addItemId = deeplink?.addItemId || \"600001-288-67340191\";\n                const addItemId = deeplink?.addItemId;\n                if (addItemId) this.addItemIds(addItemId);\n                const addDiscountCode = deeplink?.addDiscountCode;\n                // const addDiscountCode = deeplink?.addDiscountCode || \"e096a44f-4a3d-41b1-9ce6-8369500d9e98\";\n                if (addDiscountCode) this.addDiscountCodes(addDiscountCode);\n                const addOfferId = deeplink?.addOfferId;\n                // const addOfferId = deeplink?.addOfferId || \"5649565948575744-383180002\";\n                if (addOfferId) this.addOfferId(addOfferId);\n\n                const addCouponCode = deeplink?.addCouponCode;\n                if (addCouponCode) this.addPendingCouponCode(addCouponCode, true, 'any');\n\n                const addReorder = deeplink?.addReorder;\n                console.log(\"deeplink:\",deeplink);\n                if (addReorder) {\n                    let order = addReorder;\n                    try {\n                        if (typeof addReorder == 'string') {\n                            order = JSON.parse(addReorder);\n                        }\n                    } catch (error) {\n                        order = null;\n                        console.log('addReorder error:', error);\n                    }\n                    if (order) {\n                        this.addPendingOrder(order, false);\n                    }\n                }\n\n            })\n\n        }\n\n\n    }\n\n    pushToOrderActions(action: any) {\n        action.id = Math.random(); // add id with unique identifier\n        this.orderActions.push(action);\n    }\n\n\n    /**\n     * Filter order action by target and remove it from deeplink action list\n     *\n     * if strict is true (default false) then it will only get action with the target only. Otherwise, will fetch all.\n     */\n    getOrderActionsByTarget(target: string, strict = false): any[] {\n        let filteredActions = [];\n        if (strict) {\n            filteredActions = this.orderActions.filter(f => f.target == target);\n        } else {\n            filteredActions = this.orderActions.filter(f => f.target == target || f.target == 'any');\n        }\n\n        // remove filtered actions from list\n        this.orderActions = this.orderActions.filter(f => !filteredActions.find(fa => fa.id == f.id));\n        console.log('to be executed DL actions = ', filteredActions);\n        console.log('rest of DL actions = ', this.orderActions);\n\n        return filteredActions;\n    }\n}\n","import { Injectable, Injector } from '@angular/core';\n\n//WARNING: DO NOT MODIFY THIS CLASS\n//WARNING: DO NOT ADD DEPENDENCY\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class LazyService {\n\n\n    public static loadedModules = {};\n    public static loadedServices = {};\n\n    constructor(private injector: Injector) {\n\n    }\n\n\n    setService(name: string, service){\n        LazyService.loadedServices[name] = service;\n\n        console.log(\"setting lazy loaded service\", name);\n    }\n\n    getService(name: string){\n        return LazyService.loadedServices[name];\n    }\n\n/*\n    getServiceByClass(name: string){\n\n    }\n\n\n\n    public static makeServiceFactory(defaultClass: any):Function{\n\n        return () =>{\n\n            return defaultClass;\n\n        };\n\n\n    }*/\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { PlatformService } from './platform.service';\nimport { SubscribeService } from './subscribe.service';\n\nexport interface NavigationMenuItem {\n    /**\n     * The translation key of the menu item\n     */\n    title: string;\n    /**\n     * The url of route, can be external or internal link\n     */\n    route?: string;\n    /**\n     * The name of external link defined at brand.link\n     */\n    link?: string;\n    /**\n     * Select which mode in URL to display\n     */\n    modes?: string[];\n    /**\n     * Do determin if mode is required to be present in the page\n     */\n    requireMode?: boolean;\n    /**\n     * Do deside which channel to display\n     */\n    channels?: string[];\n    /**\n     * Icon\n     */\n    icon?: {\n        name: string;\n        src?: 'mat' | 'custom';\n    };\n    /**\n     * Icon when the route is active\n     */\n    activeIcon?: {\n        name: string;\n        src?: 'mat' | 'custom';\n    };\n    /**\n     * To determin if the currect url match with the item\n     */\n    match?: string | RegExp;\n    /**\n     * To determin if the sdk url match with the item\n     */\n     sdkMatch?: string | RegExp;\n    /**\n     * To determin if the link is member only, if not, redirect to login page\n     */\n    member?: boolean;\n    /**\n     * To determin if displaying the item to member or guest\n     */\n    displayUserGroups?: ('guest' | 'member')[];\n    /**\n     * To set if this menu item point to home\n     */\n    isHome?: boolean;\n    /**\n     * If set to true, only display when crm is enabled\n     */\n    crmEnabled?: boolean;\n    /**\n     * Insert back=true in query param when navigation\n     */\n    back?: boolean;\n    /**\n     * Nested navigation, only works in side menu\n     */\n    children?: NavigationMenuItem[];\n    /**\n     * To filter item by brand feature or crm feature\n     */\n    features?: string[];\n    /**\n     * Route state to pass when navigation\n     */\n    state?: any;\n    /**\n     * To determin how to display the item\n     */\n     displayType?: string;\n}\n\nconst DEFAULT_SIDE_MENU: NavigationMenuItem[] = [\n    {\n        title: 'app.tabs.home',\n        route: '/app/home/brand/@brandId',\n        icon: {name: 'nav-bar-home-outline'},\n        match: 'home',\n        channels: ['app'],\n        isHome: true\n    },\n    {\n        title: 'app.tabs.inbox',\n        route: '/app/inbox/brand/@brandId',\n        icon: {name: 'side-menu-inbox-outline'},\n        channels: ['app'],\n        features: ['crm:inbox'],\n        crmEnabled: true,\n        match: 'inbox'\n    },\n    {\n        title: 'app.tabs.news',\n        route: '/app/news/brand/@brandId',\n        icon: {name: 'side-menu-news-outline'},\n        channels: ['app'],\n        features: ['crm:news'],\n        match: 'news'\n    },\n    {\n        title: 'app.tabs.ordering',\n        route: '/app/ordering/brand/@brandId',\n        icon: {name: 'nav-bar-ordering-outline'},\n        channels: ['app'],\n        features: ['brand:byod'],\n        match: 'ordering'\n    },\n    {\n        title: 'app.tabs.stores',\n        route: '/app/stores/brand/@brandId',\n        icon: {name: 'nav-bar-store-list-outline'},\n        channels: ['app'],\n        match: 'stores'\n    },\n    {\n        title: 'app.tabs.reward',\n        route: '/app/rewards/brand/@brandId',\n        icon: {name: 'nav-bar-reward-outline'},\n        channels: ['app'],\n        features: ['brand:reward'],\n        crmEnabled: true,\n        match: 'rewards'\n    },\n    {\n        title: 'app.tabs.stamps',\n        route: '/app/stamps/brand/@brandId',\n        icon: {name: 'side-menu-stamps-outline'},\n        channels: ['app'],\n        features: ['crm:stampcard'],\n        crmEnabled: true,\n        match: 'stamps'\n    },\n    {\n        title: 'app.tabs.membership',\n        route: '/app/membership/brand/@brandId',\n        icon: {name: 'nav-bar-member-outline'},\n        channels: ['app'],\n        features: ['brand:crm'],\n        crmEnabled: true,\n        match: 'membership',\n    },\n    {\n        title: 'app.tabs.order-history',\n        route: '/app/reorder/brand/@brandId',\n        icon: {name: 'nav-bar-order-history-outline'},\n        channels: ['app'],\n        features: ['brand:byod'],\n        match: 'reorder'\n    },\n    {\n        title: 'app.tabs.settings',\n        route: '/app/settings/brand/@brandId',\n        icon: {name: 'side-menu-settings-outline'},\n        channels: ['app'],\n        match: 'settings'\n    },\n    {\n        title: 'app.tabs.customer-survey',\n        link: 'surveyApp',\n        icon: {name: 'side-menu-customer-survey-outline'},\n        channels: ['app'],\n    },\n    {\n        title: 'directory.components.side-menu.home',\n        route: '#home',\n        channels: ['web', 'mobile'],\n    },\n    {\n        title: 'directory.components.side-menu.ordering',\n        route: '#ordering',\n        channels: ['web', 'mobile'],\n    },\n    {\n        title: 'directory.components.side-menu.rewards',\n        route: 'modal:crm/brand/@brandId/reward',\n        channels: ['web', 'mobile'],\n        back: true,\n        crmEnabled: true,\n        displayUserGroups: ['member'],\n        features: ['brand:reward'],\n    },\n    {\n        title: 'directory.components.side-menu.news',\n        route: 'modal:crm/brand/@brandId/news',\n        channels: ['web', 'mobile'],\n        back: true,\n        features: ['crm:news'],\n    },\n    {\n        title: 'directory.components.side-menu.stamp',\n        route: 'modal:crm/brand/@brandId/stamp',\n        channels: ['web', 'mobile'],\n        back: true,\n        features: ['crm:stampcard'],\n        crmEnabled: true,\n        displayUserGroups: ['member']\n    },\n    {\n        title: 'directory.components.side-menu.inbox',\n        route: 'modal:crm/brand/@brandId/inbox',\n        channels: ['web', 'mobile'],\n        back: true,\n        features: ['crm:inbox'],\n        crmEnabled: true,\n        displayUserGroups: ['member']\n    },\n    {\n        title: 'directory.components.side-menu.order-history',\n        route: '#orderHistory',\n        channels: ['web', 'mobile'],\n        features: ['brand:byod'],\n    },\n    {\n        title: 'directory.components.side-menu.queue',\n        route: 'modal:directory/queue',\n        channels: ['web', 'mobile'],\n        back: true,\n        features: ['brand:queuing'],\n    },\n    {\n        title: 'directory.components.side-menu.referral',\n        route: 'modal:crm/brand/@brandId/membership/referral',\n        channels: ['web', 'mobile'],\n        back: true,\n        features: ['crm:referral'],\n    },\n    // {\n    //     title: 'directory.components.side-menu.settings',\n    //     route: 'modal:crm/brand/@brandId/settings',\n    //     channels: ['web', 'mobile'],\n    //     back: true,\n    // },\n];\n\nconst DEFAULT_COURT_SIDE_MENU: NavigationMenuItem[] = [\n    {\n        title: 'directory.components.side-menu.home',\n        route: '#home',\n        channels: ['web', 'mobile'],\n    },\n    {\n        title: 'directory.components.side-menu.ordering',\n        route: 'modal:directory/court/@courtId',\n        channels: ['web', 'mobile'],\n    },\n    {\n        title: 'directory.components.side-menu.order-history',\n        route: '#orderHistory',\n        channels: ['web', 'mobile'],\n    }\n];\n\nconst DEFAULT_SIDE_MENU_STICKY: NavigationMenuItem[] = [\n    {\n        title: 'directory.components.side-menu.login-or-signup',\n        route: '#login',\n        channels: ['web', 'mobile'],\n        crmEnabled: true,\n        displayUserGroups: ['guest']\n    },\n    {\n        title: 'directory.components.side-menu.login-or-signup',\n        route: '#login',\n        channels: ['app'],\n        icon: {name: 'side-menu-login-outline'},\n        crmEnabled: true,\n        displayUserGroups: ['guest']\n    }\n];\n\nconst DEFAULT_TABBAR: NavigationMenuItem[] = [\n    // App\n    {\n        title: 'app.tabs.home',\n        route: '/app/home/brand/@brandId',\n        icon: {name: 'nav-bar-home-outline'},\n        channels: ['app'],\n        match: 'home',\n        isHome: true,\n    },\n    {\n        title: 'app.tabs.membership',\n        route: '/app/membership/brand/@brandId',\n        icon: {name: 'nav-bar-member-outline'},\n        channels: ['app'],\n        match: 'membership'\n    },\n    {\n        title: 'app.tabs.ordering',\n        route: '/app/ordering/brand/@brandId',\n        icon: {name: 'nav-bar-ordering-outline'},\n        channels: ['app'],\n        match: 'ordering'\n    },\n    {\n        title: 'app.tabs.stores',\n        route: '/app/stores/brand/@brandId',\n        icon: {name: 'nav-bar-store-list-outline'},\n        channels: ['app'],\n        match: 'stores'\n    },\n    {\n        title: 'app.tabs.order-history',\n        route: '/app/reorder/brand/@brandId',\n        icon: {name: 'nav-bar-order-history-outline'},\n        channels: ['app'],\n        match: 'reorder'\n    },\n    // Miniapp\n    {\n        title: 'miniapp.tabs.home',\n        route: '/miniapp/home/brand/@brandId',\n        icon: {name: 'miniapp-home'},\n        channels: ['miniapp'],\n        match: 'home',\n        isHome: true,\n    },\n    {\n        title: 'miniapp.tabs.coupons',\n        route: '/miniapp/coupons/brand/@brandId',\n        icon: {name: 'miniapp-reward'},\n        channels: ['miniapp'],\n        match: 'coupons'\n    },\n    {\n        title: 'miniapp.tabs.order',\n        route: '/miniapp/selectmode/brand/@brandId',\n        icon: {name: 'miniapp-ordering'},\n        channels: ['miniapp'],\n        match: 'selectmode'\n    },\n    {\n        title: 'miniapp.tabs.reorder',\n        route: '/miniapp/reorder/brand/@brandId',\n        icon: {name: 'miniapp-history'},\n        channels: ['miniapp'],\n        match: 'reorder'\n    },\n    {\n        title: 'miniapp.tabs.account',\n        route: '/miniapp/account/brand/@brandId',\n        icon: {name: 'miniapp-member'},\n        channels: ['miniapp'],\n        match: 'account'\n    },\n];\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NavigationMenuService {\n\n    constructor(private context: SubscribeService, private platformService: PlatformService) {}\n\n    private isMatchChannel(item: NavigationMenuItem, chennel: string): boolean {\n        if (!item.channels || item.channels?.length <= 0) {\n            return true;\n        }\n        return item.channels.indexOf(chennel) >= 0;\n    }\n\n    private patchTabs(items: NavigationMenuItem[]): NavigationMenuItem[] {\n        const newItems: NavigationMenuItem[] = [...items];\n        newItems.forEach((item) => {\n            if (item.route) {\n                item.route = this.patchRoute(item);\n            }\n\n            if(item.children?.length > 0) {\n                item.children = this.patchTabs(item.children);\n            }\n        });\n        return newItems;\n    }\n\n    private patchRoute(item): string {\n        return item.route.replace(/@brandId/g, '' + this.context?.['brandId']).replace(/@groupId/g, '' + this.context?.['groupId']).replace(/@courtId/g, '' + this.context?.['courtId']);\n    }\n\n    private paramsToObject(url = ''): any {\n        try {\n            const paramsString = url.match(/\\?\\S+=\\S+/g) ?? '';\n\n            if (paramsString.length <= 0) {\n                return {};\n            }\n\n            const entries = new URLSearchParams(paramsString[0]?.slice(1)) as any;\n\n            const result = {};\n            for (const [key, value] of entries) { // each 'entry' is a [key, value] tupple\n                result[key] = value;\n            }\n            return result;\n        } catch (e) {\n            return {};\n        }\n    }\n\n    public getNavParams(url: string = '', key: string = ''): any {\n        const queryParams = this.paramsToObject(url);\n        if (key in queryParams) {\n            return queryParams[key];\n        }\n\n        const splited = url.replace(/\\?\\S+=\\S+/g, '').split('/');\n        const keyIndex = splited.indexOf(key);\n\n        if (keyIndex < 0 || keyIndex >= splited.length) {\n            return null;\n        }\n\n        return splited[keyIndex + 1] ?? null;\n    }\n\n    public getTabbarItems(channel: string): NavigationMenuItem[] {\n        const nav = this.getDeviceConfig('nav');\n        const tabbar = nav?.tabbar ?? DEFAULT_TABBAR;\n        if(!tabbar) {\n            return [];\n        }\n\n        const items = tabbar.filter(item => this.isMatchChannel(item, channel));\n        return this.patchTabs(items);\n    }\n\n    public getSideMenuItems(channel: string): NavigationMenuItem[] {\n        const nav = this.getDeviceConfig('nav');\n        const sideMenu = nav?.['side-menu'] ?? DEFAULT_SIDE_MENU;\n        if (!sideMenu) {\n            return [];\n        }\n        const items = sideMenu.filter(item => this.isMatchChannel(item, channel));\n        return this.patchTabs(items);\n    }\n\n    public getSideMenuStickyItems(channel: string): NavigationMenuItem[] {\n        const nav = this.getDeviceConfig('nav');\n        const sideMenu = nav?.['side-menu-sticky'] ?? DEFAULT_SIDE_MENU_STICKY;\n        if (!sideMenu) {\n            return [];\n        }\n        const items = sideMenu.filter(item => this.isMatchChannel(item, channel));\n        return this.patchTabs(items);\n    }\n\n    public getHomeItems(channel: string): NavigationMenuItem[] {\n        return this.patchTabs([]);\n    }\n\n    public matchUserGroups(item: NavigationMenuItem, isMember: boolean = false): boolean {\n        if (!item.displayUserGroups || item.displayUserGroups.length < 0) {\n            return true;\n        }\n        if (item.displayUserGroups.indexOf('guest') >= 0 && !isMember) {\n            return true;\n        }\n        if (item.displayUserGroups.indexOf('member') >= 0 && isMember) {\n            return true;\n        }\n        return false;\n    }\n\n    public shouldDisplay(item: NavigationMenuItem, isMember: boolean = false, currentUrl: string = ''): boolean {\n        if (!this.matchUserGroups(item, isMember)) {\n            return false;\n        }\n\n        const currentMode = this.getNavParams(currentUrl, 'mode');\n        if (!currentMode && item.requireMode) {\n            return false;\n        }\n\n        if (currentMode && item.modes?.length > 0) {\n            if (item.modes.indexOf(currentMode) < 0) {\n                return false;\n            }\n        }\n\n        if (item.crmEnabled && !this.crmAvailable(currentUrl)) {\n            return false;\n        }\n\n        if (!this.checkFeatures(item)) {\n            return false;\n        }\n\n        if (!item.route) {\n            if (item.link) {\n                if(!(item.link in this.context['brand']?.['links'])) {\n                    return false;\n                }\n            } else if (!item?.children || item?.children?.length <= 0) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    public getUrl(item: NavigationMenuItem): string {\n        let url = item?.route;\n        if (item.link) {\n            url = this.context['brand']?.['links']?.[item.link]?.['url'];\n        }\n        if (!url) {\n            console.error('URL not found');\n            return '';\n        }\n        return url;\n    }\n\n    public getHomePath(channel: string): string {\n        let menuItems = this.getSideMenuItems(channel);\n        let homeItem = menuItems.find((item) => {\n            return item?.isHome;\n        });\n\n        if(homeItem) {\n            return homeItem?.route;\n        }\n\n        menuItems = this.getTabbarItems(channel);\n        homeItem = menuItems.find((item) => {\n            return item?.isHome;\n        });\n\n        return homeItem?.route ?? null;\n    }\n\n    public hasRouteMatch(item: NavigationMenuItem, currentUrl: string = ''): boolean {\n        if (item.match instanceof RegExp) {\n            return !!currentUrl.match(item.match);\n        }\n        if (this.platformService.isSDK() && item.sdkMatch) {\n            if (item.sdkMatch instanceof RegExp) {\n                return !!currentUrl.match(item.sdkMatch);\n            }\n            const sdkMatches = (item.sdkMatch).split(',');\n            return sdkMatches.some(match => {\n                return currentUrl.indexOf(match) >= 0;\n            })\n        }\n        const matches = (item?.match || \"\").split(',');\n        return item?.match && matches.some(match => {\n            return currentUrl.indexOf(match) >= 0;\n        })\n        // return currentUrl.indexOf(item.match) >= 0;\n    }\n\n    public isRoot(currentUrl: string, channel: string): boolean {\n        const items = this.getTabbarItems(channel);\n        const back = this.getNavParams(currentUrl, 'back');\n        return !back && items.some((item) => {\n            return this.hasRouteMatch(item, currentUrl);\n        });\n    }\n\n    public isRequireLogin(item: NavigationMenuItem, isMember: boolean = false): boolean {\n        if (isMember) {\n            return false;\n        }\n        return item?.member ?? false;\n    }\n\n    private crmAvailable(currentUrl: string = ''): boolean {\n\n        if (this.context['brand']?.features?.indexOf('login') < 0) {\n            return false;\n        }\n\n        const crm = this.context['crm'];\n        if (!crm) { return false; }\n\n        if (crm?.['disabled']) {\n            return false;\n        }\n\n        if (crm.modes == null || crm.modes.length === 0) { return true; }\n\n        const mode = this.getNavParams(currentUrl, 'mode');\n\n        if (!mode) {\n            return true;\n        }\n\n        return crm.modes.indexOf(mode) >= 0;\n\n    }\n\n    private checkFeatures(item: NavigationMenuItem): boolean {\n        if (!item.features || item.features?.length <= 0) {\n            return true;\n        }\n\n        const brandFeature = [];\n        const crmFeatures = [];\n\n        item.features.forEach((featureItem) => {\n            const [key, name] = featureItem.split(':');\n            if (key === 'brand') {\n                brandFeature.push(name);\n            } else if (key === 'crm') {\n                crmFeatures.push(name);\n            }\n        });\n\n        const brandMatch = brandFeature?.length <= 0 || brandFeature?.every((feature) => {\n            return this.context['brand']?.features?.indexOf(feature) >= 0;\n        });\n        if (!brandMatch) {\n            return false;\n        }\n\n        const crmMatch = crmFeatures?.length <= 0 || crmFeatures?.every((feature) => {\n            return this.context['crm']?.features?.indexOf(feature) >= 0;\n        });\n        if (!crmMatch) {\n            return false;\n        }\n\n        return true;\n    }\n\n    private getDeviceConfig(key: string): any {\n        return this.context?.['config']?.data?.[key] ?? null;\n    }\n}\n","import { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { ApplicationRef, Injectable, Injector, isDevMode } from '@angular/core';\n\n\n//WARNING: DO NOT MODIFY THIS CLASS\n//WARNING: DO NOT ADD DEPENDENCY\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class PlatformService {\n\n\n    platform: string = \"mobile\";\n    platformClasses: string = \"mobile\";\n    platformLimited: boolean = false;\n    private container: string; // raw value of the container\n    menuChannel: string = 'mobile';\n    source: string;\n    webp: boolean = false;\n    network: string;\n    referral: string;\n    qrId: string;\n    alipayAppId: string;\n    onpremise: boolean = false;\n\n    breakpointObserver: BreakpointObserver;\n    appRef: ApplicationRef;\n\n    constructor(injector: Injector) {\n\n        this.breakpointObserver = injector.get(BreakpointObserver);\n        this.appRef = injector.get(ApplicationRef);\n\n        //special handling to remember network = cn\n        if (this.haveQuery(\"network=cn\") || window.location.host.indexOf(\".cn\") != -1) {\n            this.network = \"cn\";\n            var aigens = window['aigens'];\n            if (aigens) {\n                aigens.network = \"cn\";\n            }\n\n        }\n\n        //recognize onpremise flag\n        if (this.haveQuery(\"onpremise=true\")) {\n            this.setReferral(\"scan\");\n            this.onpremise = true;\n        }\n\n        this.qrId = this.getQueryParam(\"qrId\");\n\n        this.alipayAppId = this.getQueryParam(\"alipayAppId\");\n\n        var channel = this.getQueryParam(\"channel\");\n        if (channel && !this.isSDK()) {\n            this.menuChannel = channel;\n            this.source = channel;\n        }\n\n        var container = this.getQueryParam(\"container\");\n        if (container) {\n            this.container = container;\n        }\n\n        console.log(\"PlatformService construct\", this.network, this.referral, this.qrId);\n\n        this.checkWebp();\n\n        this.breakpointObserver.observe([\n\n            Breakpoints.HandsetPortrait,\n            Breakpoints.HandsetLandscape,\n            Breakpoints.TabletPortrait,\n            Breakpoints.TabletLandscape,\n            Breakpoints.Web\n        ]).subscribe(result => {\n            if (result.matches) {\n\n                //console.log(\"BREAKPOINTS\", result);\n\n                this.updateLayout();\n            }\n        });\n\n        this.updateLayout();\n\n    }\n\n    setReferral(referral) {\n        this.referral = referral;\n        var aigens = window['aigens'];\n        if (aigens) {\n            aigens.referral = referral;\n        }\n    }\n\n    isMobile() {\n        var width = window.innerWidth;\n        return width < 600;\n    }\n\n    isTablet() {\n        var width = window.innerWidth;\n        return width >= 600 && width < 840;\n    }\n\n    isSmallTabletHeight() {\n        var height = window.innerHeight;\n        return height >= 500 && height < 875;\n    }\n\n    isDesktop() {\n        var width = window.innerWidth;\n        return width >= 840;\n    }\n\n    isKiosk(): boolean {\n        return this.platform == 'kiosk'\n    }\n\n\n    isTestBuild() {\n\n        return isDevMode();\n    }\n\n    isNative() {\n        return false;\n    }\n\n    isSDK() {\n\n        return window['isSDK'] == true;\n    }\n\n    static isSDK(){\n        return window['isSDK'] == true;\n    }\n\n    getNativePlatform() {\n        return \"web\";\n    }\n\n    getAppInfo(): Promise<any> {\n        return Promise.resolve({});\n    }\n\n    getAppInfoInstant() {\n        return null;\n    }\n\n    getNativeAppId() {\n        return null;\n    }\n\n    getVersion() {\n        var aigens = window['aigens'];\n        if (aigens?.version) {\n            return aigens.version;\n        }\n        return \"unknown\";\n    }\n\n    isEmbedded() {\n\n        //return true;\n\n        //check if current web app is embedded by other containers\n        return this.isAliApp();\n\n    }\n\n    private haveQuery(keyValue) {\n        var search = window.location.search;\n        if (search && search.indexOf(keyValue) >= 0) {\n            return true;\n        }\n        return false;\n    }\n\n    getQueryParam(name) {\n\n        var p = null;\n        try {\n            const urlParams = new URLSearchParams(window.location.search);\n            p = urlParams.get(name);\n\n        } catch (e) {\n        }\n        return p;\n    }\n\n    isOnPremise() {\n\n        if (!this.referral) {\n            return false;\n        }\n\n        return \"scan\" == this.referral;\n\n    }\n\n    getMenuChannel() {\n\n        if (this.isAliApp()) return \"miniapp\";\n\n        if (this.isSDK()) return 'app';\n\n        if (this.menuChannel) return this.menuChannel;\n\n        return \"mobile\";\n\n    }\n    //channel is null for non specific, it's not same as source\n    getChannel() {\n        if (this.isAliApp() || this.getSource() == 'miniapp') {\n            return \"miniapp\";\n        }else if (this.isSDK()) {\n            return 'app';\n        }\n        return this.menuChannel || null;\n    }\n\n    getSource() {\n\n        if (this.isSDK()) return 'app';\n\n        if (this.source) return this.source;\n\n        if (this.isAliApp()) {\n            return \"miniapp\";\n        }\n\n        return \"mobile\";\n    }\n\n    getReferral() {\n\n        if (this.referral) return this.referral;\n        return null;\n\n    }\n\n    getQrId() {\n\n        if (this.qrId) return this.qrId;\n        return null;\n\n    }\n\n    setContainer(container) {\n        this.container = container;\n        localStorage.setItem(\"miniContainer\", container);\n    }\n\n    //TODO: fix me not hardcode hope\n    getContainer() {\n\n        if (this.container) return this.container;\n\n        if (this.isAliApp()) {\n            let localStorageContainer = localStorage.getItem(\"miniContainer\");\n            if (localStorageContainer) return localStorageContainer;\n            if (this.getQueryParam(\"container\")) {\n                this.setContainer(this.getQueryParam(\"container\"));\n                return this.getQueryParam(\"container\"); // assume miniapp DSL already added &network=cn&channel=miniapp&container= in URL\n\n            }\n        }\n\n        return null;\n    }\n\n    getAlipayAppId() {\n\n        if (this.alipayAppId) return this.alipayAppId;\n\n\n        if (this.getQueryParam(\"alipayAppId\")) {\n            return this.getQueryParam(\"alipayAppId\");\n\n        }\n\n\n        return null;\n    }\n\n    isAliApp() {\n        var ua = navigator.userAgent.toLowerCase();\n        var terms = [\"miniprogram\", \"alipayide\"];\n\n        for (let t of terms) {\n            if (ua.indexOf(t) >= 0) {\n                return true;\n            }\n        }\n\n        return false;\n\n    }\n\n    redrawUI() {\n        this.appRef.tick();\n    }\n\n    enums: string[] = [\"mobile\", \"tablet\", \"desktop\"];\n\n    updateLayout() {\n\n        var pt = \"mobile\";\n\n        if (this.isDesktop()) {\n            pt = \"desktop\";\n        } else if (this.isTablet()) {\n            pt = \"tablet\";\n        }\n\n        //if the platform is alipayApp\n        if (this.isAliApp()) {\n            pt = 'mobile'\n        }\n\n\n        if (pt != this.platform) {\n\n            this.setPlatform(pt);\n\n        }\n\n\n    }\n\n    setPlatform(pt: string) {\n\n        this.platform = pt;\n        this.platformClasses = pt;\n\n        var body = document.body;\n\n        var aigens = window['aigens'];\n        if (aigens) aigens.platform = this.platform;\n\n        for (let p of this.enums) {\n            body.classList.remove(\"plt-\" + p);\n        }\n\n        body.classList.add(\"plt-\" + this.platform);\n\n        console.log(\"platform\", this.platform);\n    }\n\n\n    checkLimited(platforms: string[]) {\n\n        if (platforms.length > 0) {\n            let limited = true;\n\n            if (platforms.indexOf('mobile') >= 0 && this.isMobile()) {\n                limited = false;\n            }\n\n            if (platforms.indexOf('tablet') >= 0 && this.isTablet()) {\n                limited = false;\n            }\n\n            this.platformLimited = limited;\n        }\n\n    }\n\n    isApp(): boolean {\n        return this.menuChannel === 'app';\n    }\n\n    private setSupport(support: boolean) {\n        var aigens = window['aigens'];\n        if (aigens) {\n            aigens.webp = support;\n        }\n        this.webp = support;\n    }\n\n    private checkWebp(feature = 'lossy') {\n\n        const webpSupport = localStorage.getItem('webpSupport');\n        if (webpSupport != null) {\n\n\n            this.setSupport(webpSupport == 'true');\n\n            return;\n        }\n\n\n        var kTestImages = {\n            lossy: 'UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA',\n            lossless: 'UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==',\n            alpha: 'UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==',\n            animation: 'UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA'\n        };\n        var img = new Image();\n        img.onload = () => {\n            //var result = (img.width > 0) && (img.height > 0);\n            //callback(feature, result);\n            localStorage.setItem('webpSupport', 'true');\n\n            this.webp = true;\n            console.log(\"webp supported\");\n            //if (aigens) aigens.webp = true;\n            this.setSupport(true);\n        };\n        img.onerror = () => {\n            //callback(feature, false);\n            localStorage.setItem('webpSupport', 'false');\n            //this.webp = false;\n            this.setSupport(false);\n            console.log(\"webp NOT supported\");\n        };\n        img.src = \"data:image/webp;base64,\" + kTestImages[feature];\n    }\n\n    openSettingsPage(): Promise<any> {\n        return Promise.resolve();\n    }\n\n    openExternalLink(url: string): void {\n        window.open(url, '_blank', 'noopener');\n    }\n}\n","import { TabbarService } from './tabbar.service';\nimport { Location } from '@angular/common';\nimport { Injectable, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { PlatformService } from './platform.service';\nimport { SubscribeService } from './subscribe.service';\nimport { NavigationMenuService } from './navigation-menu.service';\nimport { SplashScreen } from '@capacitor/splash-screen';\nimport { LazyService } from '@aigens/core/src/app/pure/services/lazy.service';\nimport { SettingManager } from '../managers/setting-manager';\n\n\n//WARNING: DO NOT MODIFY THIS CLASS\n//WARNING: DO NOT ADD DEPENDENCY\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class RoutingService {\n\n    private router: Router;\n    private context: any;\n    private location: Location;\n    protected platformService: PlatformService;\n    private tabbarService: TabbarService;\n    private navigationMenuService: NavigationMenuService;\n\n    private static auxCounter = 1;\n    private static auxCache = {};\n\n    private dev: boolean = false;\n\n    private lazyService: LazyService;\n    rootIndexInHistory;\n\n    private settingManager: SettingManager;\n\n    private readonly ijt: Injector;\n\n    constructor(injector: Injector) {\n\n        console.log('RoutingService constructor');\n        this.dev = window.location.hostname == 'localhost';\n\n        this.router = injector.get(Router);\n        this.context = injector.get(SubscribeService);\n\n        this.location = injector.get(Location);\n        this.platformService = injector.get(PlatformService);\n        this.tabbarService = injector.get(TabbarService);\n        this.navigationMenuService = injector.get(NavigationMenuService);\n        this.lazyService = injector.get(LazyService);\n\n        this.rootIndexInHistory = window.history.length;\n\n        this.ijt = injector;\n    }\n\n    back() {\n\n        if (this.isAux()) {\n\n            // this.navigateCloseAllModal();\n            this.navigateCloseModal();\n        } else {\n\n            this.location.back();\n        }\n    }\n\n    exit() {\n        console.log(\"web exit not implemented\");\n\n    }\n\n    finish(closedData?: any): void {\n\n        console.log(\"web finish not implemented\");\n    }\n\n    isMobile() {\n        var width = window.innerWidth;\n        return width < 600;\n    }\n\n    isRoot(): boolean {\n        if (this.platformService.isApp()) {\n            return this.navigationMenuService?.isRoot(this.getPrimaryPath(), this.platformService.getChannel()) ?? false;\n        }\n        return true;\n    }\n\n    canBack(): boolean {\n        const back = (this.getQuery('back') === 'true');\n        return back || !this.isRoot();\n    }\n\n    getQuery(name: string) {\n\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        return urlParams.get(name);\n    }\n\n    hasMenu(): boolean {\n\n        if (!this.isRoot() || !this.platformService.isApp()) {\n            return false;\n        }\n\n        return true;\n    }\n\n    isAux(url: string = null) {\n\n        if (!url) {\n            url = window.location.href;\n        }\n\n        if (url.indexOf('(') > 0 && url.indexOf(')') > 0) {\n\n            console.log('is aux', url);\n\n            return true;\n        }\n\n        return false;\n    }\n\n    getPrimaryPath(url: string = null) {\n\n        if (!url) {\n            url = window.location.pathname;\n        }\n\n        return url.replace(/ *\\([^)]*\\) */g, '');\n    }\n\n    //always close modal and go to path\n    navigate(path: string, extras = {} as any): void {\n\n        if (path.startsWith('/')) {\n            path = path.substring(1);\n        }\n\n        var history = window.history;\n\n        //always merge query params\n        if (!extras.queryParamsHandling) {\n            extras.queryParamsHandling = 'merge';\n        }\n\n        console.log('CUSTOM NAV', path, extras);\n\n        if (this.isAux()) {\n\n            var auxDepth = history.state.auxDepth;\n\n            if (auxDepth > 0) {\n                console.log('need to clear histoy of', auxDepth);\n\n                history.go(-auxDepth);\n\n                this.clearCache();\n\n                setTimeout(() => {\n                    console.log('GO', path);\n                    this.router.navigate([{ outlets: { primary: path, modal: null } }], extras);\n                }, 300);\n\n\n            } else {\n                this.router.navigate([{ outlets: { primary: path, modal: null } }], extras);\n            }\n\n            //this.router.navigate([{ outlets: { modal: null } }], { replaceUrl: true });\n        } else {\n            this.router.navigate([{ outlets: { primary: path, modal: null } }], extras);\n        }\n\n\n    }\n\n    private saveAuxProfile(auxId, profile) {\n        RoutingService.auxCache[auxId] = profile;\n\n        console.log('aux profiles', RoutingService.auxCache);\n    }\n\n    getAuxInput() {\n\n        var profile = this.getAuxProfile();\n        return profile.input;\n    }\n\n    getAuxProfile() {\n        const auxId = history.state.auxId;\n        return this.getAuxById(auxId);\n    }\n\n    getAuxById(auxId: number) {\n        if (auxId >= 0) {\n            var profile = RoutingService.auxCache[auxId];\n            if (profile) {\n                return profile;\n            }\n        }\n\n        return {};\n    }\n\n\n    navigateModal(path, input: {} = {}, extras: any = {}) {\n\n\n        var auxId = RoutingService.auxCounter++;\n\n        var profile = {\n            id: auxId,\n            path: path,\n            input: input,\n            extras: extras\n        };\n\n        var isAux = this.isAux();\n        if (!isAux) {\n\n            //clear all reuse dialogs\n            this.clearCache();\n        }\n\n        this.saveAuxProfile(auxId, profile);\n\n\n        var state = extras.state || {};\n\n        var currentState = window.history.state;\n\n        //get the current aux depth, and keep adding 1\n        var auxDepth = currentState.auxDepth || 0;\n\n        //we record the auxDepth, so we can use back to history.go(-auxDepth) to clear the modal history\n        state.auxDepth = auxDepth + 1;\n        state.auxId = auxId;\n\n        extras.state = state;\n\n        //extras.queryParams = {\"ABC\": \"DEF\"};\n        extras.queryParamsHandling = 'merge';\n\n        console.log('navigateModal', path, extras);\n\n        this.router.navigate([{ outlets: { modal: path } }], extras);\n    }\n\n    navigateBottomPopup(path, input: {} = {}, extras: any = {}) {\n        const auxId = RoutingService.auxCounter++;\n\n        const profile = {\n            id: auxId,\n            path: path,\n            input: input,\n            extras: extras,\n            type: 'bottom'\n        };\n\n        const isAux = this.isAux();\n        if (!isAux) {\n\n            //clear all reuse dialogs\n            this.clearCache();\n        }\n\n        this.saveAuxProfile(auxId, profile);\n\n\n        const state = extras.state || {};\n\n        const currentState = window.history.state;\n\n        //get the current aux depth, and keep adding 1\n        const auxDepth = currentState.auxDepth || 0;\n\n        //we record the auxDepth, so we can use back to history.go(-auxDepth) to clear the modal history\n        state.auxDepth = auxDepth + 1;\n        state.auxId = auxId;\n\n        extras.state = state;\n\n        //extras.queryParams = {\"ABC\": \"DEF\"};\n        extras.queryParamsHandling = 'merge';\n\n        console.log('navigateModal', path, extras);\n\n        this.router.navigate([{ outlets: { bottom: path } }], extras);\n    }\n\n\n    navigateSideMenu() {\n\n        this.navigateModal('side/menu');\n    }\n\n    isHome(url: string): boolean {\n        if (url.indexOf('home/brand') >= 0 ||\n            url.indexOf('home/group') >= 0 ||\n            url.indexOf('home/court') >= 0 ||\n            url.indexOf('home/store') >= 0) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n\n    navigateByUrl(url: string, currentUrl: string = '', params = {}): void {\n        const isModal = url.startsWith('modal:');\n        const isExternal = url.startsWith('http://') || url.startsWith('https://');\n        const dynamicLink = url.startsWith('#');\n\n        if (dynamicLink) {\n            if (url === '#login') {\n                this.goLogin();\n            } else if (url === '#home') {\n                if (!this.isHome(currentUrl)) {\n                    console.log('go to home page');\n                    this.goHome(currentUrl);\n                }\n            } else if (url === '#crmHome') {\n                this.goCrmHome();\n            } else if (url === '#ordering') {\n                const brandMode = !!(this.getNavParams(currentUrl, 'brand') || this.getNavParams(currentUrl, 'brandId'));\n                const courtMode = !!(this.getNavParams(currentUrl, 'court') || this.getNavParams(currentUrl, 'courtId'));\n                const storeMode = !brandMode && !courtMode || !!(this.getNavParams(currentUrl, 'storeId'));\n                ;\n\n                this.orderNowHandle({\n                    brandId: this.isHome(currentUrl) ? this.getNavParams(currentUrl, 'brand') ?? this.getNavParams(currentUrl, 'brandId') ?? this.context['brandId'] : this.getNavParams(currentUrl, 'brandId'),\n                    storeMode,\n                    courtMode,\n                    storeId: this.getNavParams(currentUrl, 'store') ?? this.getNavParams(currentUrl, 'storeId'),\n                    mode: this.getNavParams(currentUrl, 'mode'),\n                    key: this.getNavParams(currentUrl, 'key'),\n                    spot: this.getNavParams(currentUrl, 'spot')\n                });\n            } else if (url === '#orderHistory') {\n                this.orderHistoryClicked({\n                    storeId: this.getNavParams(currentUrl, 'storeId') ?? this.context['storeId'],\n                    brandId: this.getNavParams(currentUrl, 'brandId') ?? this.context['brandId'],\n                    mode: this.getNavParams(currentUrl, 'mode'),\n                    key: this.getNavParams(currentUrl, 'key'),\n                    spot: this.getNavParams(currentUrl, 'spot'),\n                    reorderToggle: this.context?.['brand']?.['reorderToggle'] ?? false,\n                });\n            } else if (url === '#hotelRoomCheckout') {\n                const path = `directory/hotel-room-checkout`;\n                this.navigateModal(path);\n            }\n            return;\n        }\n\n        if (isExternal) {\n            this.platformService.openExternalLink(url);\n            return;\n        }\n\n        const urlparams = this.paramsToObject(url);\n        const finalUrl = url.replace(/\\?\\S+=\\S+/g, '');\n\n        const finalParams = {\n            ...urlparams,\n            ...params,\n            confirmedMode: null, confirmedStore: null\n        };\n\n        const mode = this.getNavParams(currentUrl, 'mode');\n        if (mode) {\n            finalParams['mode'] = mode;\n        }\n\n        if (isModal) {\n            this.navigateModal(finalUrl.slice(6), {}, { queryParams: finalParams });\n        } else {\n            this.navigate(finalUrl, { queryParams: finalParams });\n        }\n    }\n\n    goLogin(): void {\n        let path = '';\n        if (this.context?.brandId) {\n            path = `auth/login/brand/${this.context.brandId}`;\n        }\n        else {\n            path = `auth/login/group/${this.context.groupId}`;\n        }\n        this.navigateModal(path);\n    }\n\n    getCrmHome(): string {\n        if (this.context['brandId']) {\n            return `/crm/brand/${this.context.brandId}/home`;\n        }\n        return `/crm/groupId/${this.context.groupId}/home`;\n    }\n\n    goCrmHome(): void {\n        const path = this.getCrmHome();\n\n        this.navigate(path);\n    }\n\n    //clear any previous AUX states, this might not be necessary but as a safeguard to keep states cleared\n    private clearCache() {\n\n        var cache = RoutingService.auxCache;\n        for (var member in cache) {\n            delete cache[member];\n        }\n\n        //var cus = this.customRouteReuseStrategy as any;\n        //cus.clear();\n    }\n\n    // 清空大于某个路由层级的数据，保留小于等于当前路由层级的数据 (default current route auxId)\n    // e.g: unlockCat route-dialog flow: unlockDialog => variationsItemsDialog => comboDilog => modifierDialog\n    // if from comboDialog back to unlockDialog , so need clear cache-data about variationsItemsDialog and comboDilog\n    private clearCacheMoreThanAuxId(auxId = null) {\n        auxId = auxId ?? history.state.auxId;\n        var cache = RoutingService.auxCache;\n        for (var member in cache) {\n            if (member > auxId) {\n                delete cache[member];\n            }\n        }\n    }\n\n    navigateBackRootAndForward(path: string, options: any) {\n\n        var currentLength = window.history.length;\n\n        this.navigateBackAndForward(currentLength - this.rootIndexInHistory, path, options);\n    }\n\n    navigateBackAndForward(backSteps: number, path: string, options: any) {\n\n        console.log(\"going back\", backSteps);\n\n        history.go(-backSteps);\n\n        if (!path) return;\n\n        setTimeout(() => {\n            this.navigate(path, options);\n        }, 300);\n\n\n    }\n\n    navigateCloseAllModal(options: any = {}) {\n\n        console.log('navigateCloseAllModal');\n\n        if (this.isAux()) {\n\n            var auxDepth = history.state.auxDepth;\n\n            if (auxDepth > 0) {\n                console.log('need to clear histoy of', auxDepth);\n                history.go(-auxDepth);\n\n\n                this.clearCache();\n            } else {\n                console.log('MISSING auxDepth in history state!');\n\n                this.location.back();\n            }\n\n            // notice\n            this.context.next('routingService.navigateCloseAllModal', {closedAuxUrl: window.location.href});\n        } else {\n            console.log('Not AUX dialog');\n        }\n\n        if (options.forwardUrl) {\n            this.handleForward(options);\n        }\n\n        if (options.actionAfterClosed) {\n            setTimeout(() => {\n                // debugger;\n                options.actionAfterClosed();\n\n            }, 50);\n        }\n    }\n\n    navigateCloseModal(options: any = {}) {\n\n        console.log('navigateCloseModal');\n\n        if (this.isAux()) {\n\n            var auxDepth = history.state.auxDepth;\n\n            if (auxDepth > 0) {\n                console.log('need to clear histoy of', auxDepth);\n\n                history.go(-1);\n\n                if (auxDepth == 1) {\n                    this.clearCache();\n                }\n\n            } else {\n                console.log('MISSING auxDepth in history state!');\n                this.location.back();\n\n            }\n\n            //this.router.navigate([{ outlets: { modal: null } }], { replaceUrl: true });\n        } else {\n            console.log('Not AUX dialog');\n        }\n\n        if (options.forwardUrl) {\n            this.handleForward(options);\n        }\n\n    }\n\n    private handleForward(options) {\n        setTimeout(() => {\n            console.log(\"FORWARD TO\", options.forwardUrl, options.extras);\n            this.navigate(options.forwardUrl, options.extras || {});\n        }, 50);\n    }\n\n\n    /**\n     * @description: navigate model to which you want\n     * @param {*} auxDepth which model navigate to\n     * @return {*}\n     */\n    navigateCloseModalTo(auxDepth = 1, options: any = {}) {\n        if (this.isAux()) {\n            var auxDepthHistroy = history.state.auxDepth;\n            if (auxDepthHistroy > 0 && auxDepth > 0 && auxDepthHistroy > auxDepth) {\n                const go = auxDepthHistroy - auxDepth;\n                history.go(-go);\n                if (auxDepth == 1) {\n                    this.clearCacheMoreThanAuxId();\n                }\n            } else {\n                console.log('MISSING auxDepth in history state!');\n                this.location.back();\n            }\n        } else {\n            console.log(\"Not AUX dialog\");\n        }\n\n        if (options.forwardUrl) {\n            this.handleForward(options);\n        }\n    }\n\n    getCurrentRoute(): string {\n        return this.router?.url;\n    }\n\n    orderNowHandle(inputObj: {\n        brandId?: number,\n        mode?: string,\n        key?: string,\n        catId?: string,\n        spot?: string,\n        storeMode?: boolean,\n        ignoreMenuFirstFlow?: boolean,\n        storeId?: number,\n        isStoreHome?: boolean, // home url with storeId\n        miniapp?: boolean, // miniapp logic\n        replaceUrl?: boolean,\n        autoSelectSingleStore?: boolean,\n        courtMode?: boolean,\n        checkMenuFirstEvenConfirmed?: boolean\n    }): void {\n        let path;\n        const singleStore = this.context.singleStore;\n\n        if (this.settingManager == null) {\n            this.settingManager = this.ijt.get(SettingManager);\n        }\n\n        // room dining\n        const inRoomDiningNeedAuth = this.settingManager.get('verifiedByPmsForRoomNumber', false) && this.settingManager.get('pos.requireSpot', false);\n        console.log(inputObj);\n\n        if (inputObj.storeMode) { // store home: /home/store\n            const storeId = inputObj.storeId || this.context.storeId || this.context.defaultStoreId;\n            const mode = inputObj.mode; // mode from caller such as from request param\n            const authHotelRoom: any = localStorage.getItem('authHotelRoom');\n\n\n            const storeModes = this.getValidModeForStore(this.context.store?.modes);\n\n            if (mode) { // mode is defined, then redirect directly to menu page\n                if(inRoomDiningNeedAuth && mode === 'dinein'){ // show auth dialog for room dining\n                    if(!authHotelRoom) {\n                        path = 'directory/hotel-room-dining-auth';\n                        this.navigateModal(path, {noReplaceUrl: true}, {queryParams: {}, skipLocationChange: false});\n                        return;\n                    } else {\n                       const authHotelRoomObj = JSON.parse(authHotelRoom);\n                        inputObj.spot = authHotelRoomObj?.room;\n                    }\n                }\n\n                path = `order/store/${storeId}/mode/${mode}`;\n                this.navigate(path, {\n                    queryParams: {\n                        key: inputObj.key,\n                        spot: inputObj.spot,\n                        back: true,\n                        mode: null,\n                        storeId: null,\n                        catId: inputObj.catId,\n                        overrideMode: null,\n                        // it should pop up the selectTime dialog when popupTimeSelectModalAfterSelectStore true and it is form store Home\n                        // so use the existed flag('selectTime') to trigger the selectTime dialog\n                        selectTime: this.settingManager?.get('popupTimeSelectModalAfterSelectStore', false) ? true : null,\n                    }\n                });\n            } else if (this.isMenuFirstFlow() && !inputObj.ignoreMenuFirstFlow) {\n                // if no mode from caller (ex: no req param defined), then get from default store mode\n                let firstFlowMode = mode || this.context.defaultStoreMode;\n                // path = `order/store/${storeId}/mode/${firstFlowMode}`;\n                // this.router.navigate([path], {queryParams: {key: inputObj.key, spot: inputObj.spot, back: true}});\n\n                const qp = { confirmedMode: false, key: inputObj.key, spot: inputObj.spot, back: true, mode: null, storeId: null, catId: inputObj.catId, overrideMode: null };\n\n                if (storeModes.length == 1) {\n                    qp.confirmedMode = null;\n                }\n\n                // if the default mode not valid, fallback to the first available mode (for store home)\n                if (storeModes?.indexOf(firstFlowMode) < 0) {\n                    firstFlowMode = storeModes[0];\n                }\n\n                path = `order/store/${storeId}/mode/${firstFlowMode}`;\n                this.navigate(path, { queryParams: qp });\n            } else { // if no mode defined & not menu first flow, then show mode selector popup\n                if (storeModes.length == 1) { // if only has 1 valid mode then redirect to menu directly\n\n                    if(inRoomDiningNeedAuth && storeModes[0] === 'dinein'){ // show auth dialog for room dining\n                        if(!authHotelRoom){\n                            path = 'directory/hotel-room-dining-auth'\n                            this.navigateModal(path, {noReplaceUrl: true}, {queryParams: {}, skipLocationChange: false});\n                            return;\n                            } else {\n                                const authHotelRoomObj = JSON.parse(authHotelRoom);\n                                inputObj.spot = authHotelRoomObj?.room;\n                            }\n                    }\n\n                    path = `order/store/${storeId}/mode/${storeModes[0]}`;\n                    this.navigate(path, {\n                        queryParams: {\n                            key: inputObj.key,\n                            spot: inputObj.spot,\n                            back: true,\n                            mode: null,\n                            storeId: null,\n                            catId: inputObj.catId,\n                            // it should pop up the selectTime dialog when popupTimeSelectModalAfterSelectStore true and it is form store Home\n                            // so use the existed flag('selectTime') to trigger the selectTime dialog\n                            selectTime: this.settingManager?.get('popupTimeSelectModalAfterSelectStore', false) ? true : null,\n                        }\n                    });\n                    return;\n                }\n\n                path = `popup/store/${storeId}`;\n                this.navigateModal(path, {noReplaceUrl: true}, {queryParams: {}, skipLocationChange: false});\n            }\n        }\n        else if (inputObj.miniapp) {\n            if (singleStore || inputObj.storeId || inputObj.isStoreHome) {\n                path = `/order/store/${inputObj.storeId}/mode/${inputObj.mode}`;\n                const qp: any = {\n                    back: true,\n                    // storeId: null,\n                };\n                this.router.navigate([path], { queryParamsHandling: 'merge', queryParams: qp });\n            }\n            else if (this.isMenuFirstFlow() && inputObj.storeId) {\n                path = `/order/store/${inputObj.storeId}/mode/${inputObj.mode}`;\n                const qp: any = {\n                    back: true,\n                    storeId: null,\n                };\n                if (!inputObj.isStoreHome) {\n                    qp.brandId = inputObj.brandId;\n                    qp.confirmedStore = false;\n                }\n                this.router.navigate([path], { queryParams: qp });\n\n            } else {\n                const path = `directory/brand/${inputObj.brandId}`;\n                const qp: any = {\n                    back: true,\n                    mode: inputObj.mode,\n                    storeId: null,\n                };\n                this.navigateModal(path, { noReplaceUrl: true }, { queryParams: qp, skipLocationChange: false });\n            }\n        } else if (inputObj?.courtMode) {\n            const directoryService = this.lazyService.getService('DirectoryService');\n            if (this.context.court?.closed) {\n                this.navigate(`order/court/${this.context.courtId}/no-service`, {queryParams: {code: 'courtClosed'}});\n                return;\n            } else if (!directoryService?.getStoreClass()?.isOpeningHours(this.context.court, new Date().getTime())) {\n                this.navigate(`order/court/${this.context.courtId}/no-service`, {queryParams: {code: 'courtOpeninghours'}});\n                return;\n            }\n\n\n            path = `directory/court/${this.context.courtId}`;\n            this.navigateModal(path, {noReplaceUrl: true});\n        } else { // brand mode: /home/brand\n            let currentUrl = window.location.href;\n            const storeId = this.getQuery('storeId') || this.context.defaultStoreId;\n\n            const mode = inputObj.mode; // mode from caller such as from request param\n            const checkMenuFirst = inputObj.checkMenuFirstEvenConfirmed ? this.isMenuFirstFlow() : true;\n\n            if ((this.isMenuFirstFlow() && storeId && !inputObj.ignoreMenuFirstFlow) || (checkMenuFirst && !inputObj.ignoreMenuFirstFlow && this.getQuery('storeId') && mode)) { // if menu first flow, then redirect to store directly\n                // if no mode from caller (ex: no req param defined), then get from default store mode\n                const firstFlowMode = mode || this.context.defaultStoreMode;\n                // path = `/order/store/${storeId}/mode/${firstFlowMode}`;\n                // this.router.navigate([path], {queryParams: {brandId: inputObj.brandId, back: true}, skipLocationChange: false});\n\n\n                const qp = {\n                    confirmedMode: false,\n                    confirmedStore: false,\n                    brandId: inputObj.brandId,\n                    catId: inputObj.catId,\n                    storeId: null,\n                    mode: null,\n                    back: true,\n                    overrideMode: null\n                };\n\n                const brandModes = this.getValidModeForBrand(this.context.brand?.modes);\n                if (brandModes.length == 1 && brandModes[0] == firstFlowMode) {\n                    qp.confirmedMode = null;\n                }\n\n                if (mode) {\n                    qp.confirmedMode = null;\n                }\n\n                if (singleStore) { // store is confirmed if single store\n                    qp.confirmedStore = null;\n                }\n\n                if (mode == 'view') { // view mode then make all state as confirmed\n                    qp.confirmedMode = null;\n                    qp.confirmedStore = null;\n                }\n\n                if (this.getNavParams(currentUrl, 'storeId')) {\n                    qp.confirmedStore = null;\n                }\n\n                path = `/order/store/${storeId}/mode/${firstFlowMode}`;\n                this.navigate(path, {queryParams: qp, skipLocationChange: false, replaceUrl: inputObj?.replaceUrl ?? false});\n                //this.router.navigate([path], { queryParams: qp, skipLocationChange: false, replaceUrl: inputObj?.replaceUrl ?? false, });\n\n            } else { // show mode & store selector\n                path = `directory/brand/${inputObj.brandId}`;\n                const params = {\n                    brandId: inputObj.brandId,\n                    catId: inputObj.catId,\n                    mode\n                }\n                if (inputObj.autoSelectSingleStore) {\n                    params['autoSelectSingleStore'] = true;\n                }\n                this.navigateModal(path, { noReplaceUrl: true }, { queryParams: params, replaceUrl: inputObj?.replaceUrl ?? false });\n            }\n        }\n    }\n\n    orderHistoryClicked(inputObj: {\n        brandId?: number,\n        storeId?: number,\n        mode?: string,\n        key?: string,\n        spot?: string,\n        reorderToggle?: boolean,\n    }): void {\n        const page = inputObj.reorderToggle ? 'reorder-page' : 'order-history';\n        if (this.context.courtId) {\n            // this.router.navigate([`/order/court/${this.context.courtId}/order-history`],\n            //  { queryParams: { back: true, mode: inputObj.mode, } });\n            this.router.navigate([`/order/court/${this.context.courtId}/${page}`],\n             { queryParams: { back: true, mode: inputObj.mode, } });\n        }\n        else {\n            // const path = `/order/brand/${inputObj.brandId}/order-history`;\n            const path = `/order/brand/${inputObj.brandId}/${page}`;\n\n            let params = {};\n            params = {\n                mode: inputObj.mode,\n                spot: inputObj.spot,\n                key: inputObj.key,\n                back: true\n            };\n            if (inputObj.storeId) {\n                params['storeId'] = inputObj.storeId;\n            }\n\n            this.router.navigate([path], { queryParams: params });\n        }\n    }\n\n    private isMenuFirstFlow(): boolean {\n        // return false;\n        // get flag for menu first flow from device\n        // if (this.context?.config?.data?.menuBeforeMode == null) {\n        //     return true;\n        // }\n\n        // return this.context?.config?.data?.menuBeforeMode;\n\n        const orderModeSelection = this.context?.brand?.orderModeSelection;\n        if (!orderModeSelection || orderModeSelection == 'beforeMenu') {\n            return false;\n        }\n        return true;\n    }\n\n    private getValidModeForBrand(brandModes) {\n        return this.filterModes(brandModes, ['takeaway', 'dinein', 'delivery']);\n    }\n\n    private getValidModeForStore(storeModes) {\n        return this.filterModes(storeModes, ['takeaway', 'dinein']);\n    }\n\n    filterModes(modes: string[], valids: string[]) {\n\n        var result = [];\n\n        if (!modes) {\n            return result;\n        }\n\n        for (let m of modes) {\n            if (valids.indexOf(m) >= 0) {\n                result.push(m);\n            }\n        }\n\n        return result;\n\n    }\n\n    public paramsToObject(url = ''): any {\n        try {\n            const paramsString = url.match(/\\?\\S+=\\S+/g);\n\n            if (paramsString.length <= 0) {\n                return {};\n            }\n\n            const entries = new URLSearchParams(paramsString[0]?.slice(1)) as any;\n\n            const result = {}\n            for (const [key, value] of entries) { // each 'entry' is a [key, value] tupple\n                result[key] = value;\n            }\n            return result;\n        } catch (e) {\n            return {};\n        }\n    }\n\n    getNavParams(url: string = '', key: string = ''): any {\n        const queryParams = this.paramsToObject(url);\n        if (key in queryParams) {\n            return queryParams[key];\n        }\n\n        const splited = url.replace(/\\?\\S+=\\S+/g, '').replace(/\\(modal:/g, '/').split('/');\n        const keyIndex = splited.indexOf(key);\n\n        if (keyIndex < 0 || keyIndex >= splited.length) {\n            return null;\n        }\n\n        return splited[keyIndex + 1] ?? null;\n    }\n\n    getHome(currentUrl = ''): [string, any] {\n        const newParams = {};\n\n        let url = this.navigationMenuService.getHomePath(this.platformService.getChannel());\n\n        const mode = this.getNavParams(currentUrl, 'mode');\n        if (mode) {\n            newParams['mode'] = mode;\n        }\n\n        if (url === '#crmHome') {\n            const groupId = this.getNavParams(currentUrl, 'groupId') ?? this.getNavParams(currentUrl, 'group');\n            const storeId = this.getNavParams(currentUrl, 'storeId') ?? this.getNavParams(currentUrl, 'store');\n\n            newParams['storeId'] = storeId ?? null;\n            newParams['groupId'] = groupId ?? null;\n\n            return [this.getCrmHome(), newParams];\n        }\n\n        if (!url || url === '#home') {\n            const brandId = this.getNavParams(currentUrl, 'brandId') ?? this.getNavParams(currentUrl, 'brand');\n            const courtId = this.getNavParams(currentUrl, 'courtId') ?? this.getNavParams(currentUrl, 'court');\n            const groupId = this.getNavParams(currentUrl, 'groupId') ?? this.getNavParams(currentUrl, 'group');\n            const storeId = this.getNavParams(currentUrl, 'storeId') ?? this.getNavParams(currentUrl, 'store');\n\n            if (this.getNavParams(currentUrl, 'brand') && !this.getNavParams(currentUrl, 'brandId') && !this.getNavParams(currentUrl, 'storeId')) {\n                url = `home/brand/${brandId}`;\n            } else if (this.getNavParams(currentUrl, 'brandId')) {\n                url = `home/brand/${brandId}`;\n                newParams['storeId'] = storeId ?? this.context.storeId;\n                newParams['brandId'] = brandId ?? this.context.brandId;\n            } else if (groupId) {\n                url = `home/group/${groupId}`;\n                newParams['storeId'] = storeId ?? this.context.storeId;\n            } else if (courtId) {\n                url = `home/court/${courtId}`;\n                // newParams['storeId'] = this.context.storeId;\n            } else {\n                url = `home/store/${storeId ?? this.context.storeId}`;\n            }\n        }\n\n        const params = this.paramsToObject(url);\n        const finalUrl = url.replace(/\\?\\S+=\\S+/g, '');\n\n        const finalParams = {\n            ...params,\n            ...newParams,\n            back: null, confirmedMode: null, confirmedStore: null\n        }\n\n        return [finalUrl, finalParams];\n    }\n\n    goHome(currentUrl = ''): void {\n\n        // if (!homeUrl) {\n        //     homeUrl = this.routeGuardService.getHome();\n        // }\n\n        // if (homeUrl) {\n        //     //window.location.href = homeUrl;\n        //     if (!this.platformService.isAliApp()) {\n        //         const params = this.paramsToObject(homeUrl);\n        //         this.navigate(homeUrl.replace(/\\?\\S+=\\S+/g, ''), { queryParams: { back: null, ...params } });\n        //     } else {\n        //         window.location.replace(homeUrl);\n        //     }\n        // }\n\n        const [finalUrl, finalParams] = this.getHome(currentUrl);\n        this.navigate(finalUrl, { queryParams: finalParams });\n    }\n\n    dismissPreLoader() {\n\n        var w = window as any;\n\n        if (w.dismissPreLoader) {\n            w.dismissPreLoader();\n        }\n        // Please keep, when open byod with sdk on capactitor app, have splash and need to dismiss it first.\n        try {\n            SplashScreen.hide();\n        } catch (error) {\n\n        }\n    }\n\n\n    openBrowser(options: any) {\n\n        var url = options.url;\n        if (!url) return;\n\n        //this.navigate(url);\n        window.open(url, '_blank').focus();\n\n    }\n\n    mark() {\n\n        return history.length;\n\n\n    }\n\n    backTo(marker) {\n\n\n        var diff = history.length - marker;\n        console.log('history diff', diff);\n\n        if (diff < 0) {\n            return;\n        }\n\n        history.go(-diff);\n\n    }\n\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SentryService {\n\n    constructor() { }\n\n    private _Sentry: any = null;\n\n    private logError: boolean = false;\n\n    get Sentry() {\n        if(this._Sentry) {\n            return this._Sentry;\n        }\n        this._Sentry = (<any> window).Sentry;\n        return this._Sentry;\n    }\n\n    log(...args: any): void {\n        if(this.logError) {\n            console.log(...args);\n        }\n    }\n\n    track(eventName, event): void {\n        try {\n            this.Sentry?.addBreadcrumb({\n                type: 'user',\n                category: 'event',\n                message: eventName,\n                data: {...event},\n                level: \"info\",\n            });\n        } catch(e) {\n            this.log(e);\n        }\n    }\n\n    captureException(error): void {\n        try {\n            this.Sentry.captureException(error);\n        } catch (e) {\n            this.log(e);\n        }\n    }\n\n    setTag(key: string, value: string): void {\n        try {\n            this.Sentry.setTag(key, value);\n        } catch (e) {\n            this.log(e);\n        }\n    }\n\n    setMember(member: any): void {\n        try {\n            const sentryMember = { id: member.id }\n            if(member?.name) {\n                sentryMember['username'] = member?.name;\n            }\n            if(member?.email) {\n                sentryMember['email'] = member?.email;\n            }\n\n            this.Sentry.setUser(sentryMember);\n        } catch(e) {\n            this.log(e);\n        }\n\n    }\n\n    removeMember(): void {\n        try {\n            this.Sentry.setUser(null);\n        } catch(e) {\n            this.log(e);\n        }\n    }\n\n    setContext(key: string, context: any): void {\n        try {\n            this.Sentry.setContext(key, context);\n        } catch(e) {\n            this.log(e);\n        }\n    }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, first } from 'rxjs';\nimport { CommonService } from './common.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { merge } from 'lodash-es';\n\n//Peter: include specific class from framework instead of whole folder\n//Should not include framework class in pure folder. Should remove in long term.\nimport { StorageService } from '../../framework/services/storage.service';\n\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class SubscribeService {\n\n\n    FIRST_LOAD_EMBEDDED_CONTEXT = 'firstLoadEmbeddedContext';\n    SDK_MEMBER_CONTEXT = 'sdkMemberContext';\n\n    isLoadMemberContext = false;\n\n    constructor(injector: Injector, private storageService: StorageService) {\n        this.init();\n        this.setTranslation(injector.get(TranslateService));\n    }\n\n    getQuery(name: string) {\n\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        return urlParams.get(name);\n    }\n\n    private init() {\n\n        if (!window['aigens']) {\n            window['aigens'] = {};\n        }\n\n        var aigens = window['aigens'];\n\n        if (aigens && aigens.context) {\n            Object.assign(this, aigens.context);\n        }\n\n        let userLang;\n        let urlLocale = this.getQuery(\"locale\");\n\n        const languages = window['aigens']?.context?.languages;\n\n        if (!languages || languages?.includes(CommonService.getLocal('locale'))) {\n            userLang = CommonService.getLocal('locale');\n        }\n\n        var lang = urlLocale || userLang || window['aigens']?.context?.language || 'en';\n\n        this['userLang'] = lang;\n        CommonService.setLocal('locale', lang); // override locale on local storage\n        this.next('language', lang);\n        aigens.context = this;\n\n\n        this.storageService.getStorage(this.getMemberKey())\n            .then((value) => {\n                const member = value?.member;\n\n                if (member) {\n                    this.next('member', member);\n                    this.next('sessionId', value?.session);\n                }\n                this.next('isLoadMemberContext', true); // remark the memberContext loaded\n                console.log('=== ', value);\n\n\n            }).catch((reason) => {\n            console.log('ERROR', reason);\n        });\n\n\n        // var member = CommonService.getLocal('member');\n        // if (member) {\n        //     this.next('member', member);\n        // }\n\n    }\n\n    update(): void {\n        var aigens = window['aigens'];\n\n        if (aigens && aigens.context) {\n            Object.assign(this, aigens.context);\n        }\n    }\n\n    getObservable(name: string, initValue = null): BehaviorSubject<any> {\n\n        var name2 = name + '$';\n\n        var bs = this[name2];\n        if (!bs) {\n\n            bs = new BehaviorSubject(initValue);\n            bs.name = name;\n            this[name2] = bs;\n\n            //console.log('making bs', name, initValue, bs);\n        }\n\n        return bs;\n    }\n\n    get(name: string): any {\n        return this[name];\n    }\n\n    next(name: string, value: any) {\n\n        console.log('next', name, value);\n\n        this[name] = value;\n        this.getObservable(name).next(value);\n\n\n    }\n\n    bind(listener: any, fields: string[]) {\n\n        for (let f of fields) {\n\n            var cb = function (value) {\n                //console.log(\"bind callback!\", listener, f, value, this);\n                listener[f] = value;\n\n            };\n\n            this.getObservable(f).subscribe(cb);\n        }\n\n    }\n\n\n    /**\n     * Merge overwrite translation here to get the latest translation update in home page (home module)\n     *\n     * @param t\n     * @private\n     */\n    private setTranslation(t: TranslateService): void {\n        t.onLangChange.pipe(first()).subscribe((res) => {\n            this.mergeTranslation(t);\n        });\n    }\n\n    public mergeTranslation(t: TranslateService): void {\n        const overwrites = this['config']?.data?.translations;\n\n        if(overwrites){\n            for (const lang of Object.keys(overwrites)) {\n                const x = t.translations[lang];\n                merge(x, overwrites[lang]);\n            }\n        }\n    }\n\n    logout() {\n        this.storageService.setStorage(this.getMemberKey(), null);\n    }\n\n\n    getMemberKey() {\n        if (!window['aigens']) {\n            window['aigens'] = {};\n        }\n\n        var aigens = window['aigens'];\n        let contextId = 'type=member';\n\n        if (aigens && aigens.context) {\n\n            const context = aigens.context;\n            const crm = context.crm;\n\n            if (crm) {\n                contextId += '&crm=' + crm.type;\n                if (crm.source) {\n                    contextId += '&source=' + crm.source;\n                }\n            }\n        }\n\n        return contextId;\n    }\n}\n","import { SubscribeService } from '@aigens/core/src/app/pure/services/subscribe.service';\nimport { Injectable, Injector } from '@angular/core';\n\nconst tabs = {\n\n    home: {\n        i18n: \"app.tabs.home\",\n        route: [\"/app/home/brand/@brandId\", { queryParams: {} }],\n        icon: \"nav-bar-home-outline\",\n        matchName: 'home'\n    },\n    // {\n    //     i18n: \"tabs.home\",\n    //     route: [\"/app/crm/brand/@brandId/home\", { queryParams: {} }],\n    //     icon: \"home\",\n    //     iconSrc: \"mat\",\n    //     matchName: 'home'\n    // },\n    membership: {\n        i18n: \"app.tabs.membership\",\n        route: [\"/app/membership/brand/@brandId/\", { queryParams: {} }],\n        icon: \"nav-bar-member-outline\",\n        matchName: 'membership'\n    },\n    ordering: {\n        i18n: \"app.tabs.ordering\",\n        route: [\"/app/ordering/brand/@brandId\", { queryParams: {} }],\n        icon: \"nav-bar-ordering-outline\",\n        matchName: 'ordering'\n    },\n    rewards: {\n        i18n: \"app.tabs.reward\",\n        route: [\"/app/rewards/brand/@brandId\", { queryParams: {} }],\n        icon: \"nav-bar-reward-outline\",\n        matchName: 'rewards'\n    },\n    stamps: {\n        i18n: \"app.tabs.stamps\",\n        route: [\"/app/stamps/brand/@brandId/\", { queryParams: {} }],\n        icon: \"side-menu-stamps-outline\",\n        matchName: 'stamps'\n    },\n    stores: {\n        i18n: \"app.tabs.stores\",\n        route: [\"/app/stores/brand/@brandId/\", { queryParams: {} }],\n        icon: \"nav-bar-store-list-outline\",\n        matchName: 'stores'\n    },\n    reorder: {\n        i18n: \"app.tabs.order-history\",\n        route: [\"/app/reorder/brand/@brandId\", { queryParams: {} }],\n        icon: \"nav-bar-order-history-outline\",\n        matchName: 'reorder'\n    },\n    inbox: {\n        i18n: \"app.tabs.inbox\",\n        route: [\"/app/inbox/brand/@brandId\", { queryParams: {} }],\n        icon: \"side-menu-inbox-outline\",\n        matchName: 'inbox'\n    },\n    news: {\n        i18n: \"app.tabs.news\",\n        route: [\"/app/news/brand/@brandId\", { queryParams: {} }],\n        icon: \"side-menu-news-outline\",\n        matchName: 'news'\n    },\n    settings: {\n        i18n: \"app.tabs.settings\",\n        route: [\"/app/settings/brand/@brandId\", { queryParams: {} }],\n        icon: \"side-menu-settings-outline\",\n        matchName: 'settings'\n    },\n    customerSurvey: {\n        i18n: \"app.tabs.customer-survey\",\n        route: [\"@externalLink\", { queryParams: {} }],\n        external: 'surveyApp',\n        icon: \"side-menu-customer-survey-outline\",\n        matchName: 'inbox'\n    },\n    careers: {\n        i18n: \"app.tabs.careers\",\n        route: [\"@externalLink\", { queryParams: {} }],\n        external: 'recruitmentForm',\n        icon: \"side-menu-careers-outline\",\n        matchName: 'careers'\n    },\n    directory: {\n        i18n: \"app.tabs.stores\",\n        route: [\"/app/directory/brand/@brandId\", { queryParams: {} }],\n        icon: \"nav-bar-store-list-outline\",\n        matchName: 'directory'\n    }\n\n};\n@Injectable({\n    providedIn: 'root'\n})\nexport class TabbarService {\n\n    selectedTabs = ['home', 'membership', 'ordering', 'stores', 'reorder'];\n\n    selectedMenu = ['home', 'inbox', 'news', 'ordering', 'rewards', 'stamps', 'membership', 'reorder', 'settings'];\n\n    constructor(injector: Injector, private context: SubscribeService) {\n    }\n\n    getTabsByArray(tabs: any[]): any[] {\n        return this.patchTabs(this.selectedTabs.map(tab => tabs[tab]));\n    }\n\n    getTabs(): any[] {\n        return this.patchTabs(this.selectedTabs.map(tab => tabs[tab]));\n    }\n\n    getMenus(): any[] {\n        return this.patchTabs(this.selectedMenu.map(tab => tabs[tab]));\n    }\n\n    isRoot(path: string): boolean {\n        return this.selectedTabs.some((tab) => {\n            return path.indexOf(tabs[tab]?.matchName) >= 0;\n        });\n    }\n\n    patchTabs(tabs): any[] {\n        for (let t of tabs) {\n            let link = t.route[0] as string;\n            if (t.external !== undefined) {\n                link = link.replace('@externalLink', this.context?.['brand']['links'][t.external]['url'])\n            }\n            link = link.replace('@brandId', '' + this.context?.['brandId']);\n            t.route[0] = link;\n        }\n        return tabs;\n    }\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class TimeService {\n\n    private offset: number = 0;\n\n    constructor() { }\n\n    public getRawTime(): number {\n        return new Date().getTime();\n    }\n\n    public getTime(): number {\n        return this.getRawTime() + this.offset;\n    }\n\n    public getTimeObject(): Date {\n        return new Date(this.getTime());\n    }\n\n    public setServerVerifiedTime(serverTime: number): void {\n        const localTime = this.getRawTime();\n        const delta = serverTime - localTime;\n\n        // If offset less than 1 minutes, don't set offset\n        if(Math.abs(delta) < 60000) {\n            this.offset = 0;\n            return;\n        }\n\n        // Round to 30s\n        this.offset = Math.round(delta / 30000) * 30000;\n        console.log('Adjust time with offset: ' + this.offset);\n\n        // If time difference are too big, prompt an error\n        // if(Math.abs(this.offset) >= 900000) {\n        //     throw {name: 'time-difference-too-large', layout: 'toast'}\n        // }\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { DeviceModule } from './device/device.module';\n\nconst routes: Routes = [\n\n    {\n        path: '',\n        redirectTo: '/device/setup',\n        pathMatch: 'full'\n    },\n    {\n        path: 'device',\n        loadChildren: () => DeviceModule\n    },\n    //debuging\n    {\n        path: 'test',\n        loadChildren: () => import('../../../test/src/app/test/test.module').then(m => m.TestModule),\n    }\n];\n\n@NgModule({\n    imports: [RouterModule.forRoot(routes)],\n    exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Capacitor } from '@capacitor/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ConfigService } from '../../../core/src/app/framework';\nconst fromEntries = require('fromentries');\n// import { AppTrackingTransparency } from 'capacitor-plugin-app-tracking-transparency';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n\n    init = {\n\n        \"profile\": {\n            \"country\": \"HK\",\n            \"production\": false,\n            \"applePay\": \"https://us-central1-aigensstoretest.cloudfunctions.net/applePaySession\",\n            \"groupId\": 500,\n            \"api\": \"https://aigensstoretest.appspot.com\",\n            \"locale\": \"en\"\n        },\n        \"context\": {\n\n        }\n    };\n\n    constructor(private injector: Injector, private t: TranslateService, private router: Router, private configService: ConfigService) {\n\n        if (!Object['fromEntries']) {\n            Object['fromEntries'] = fromEntries;\n        }\n\n\n        window['aigens'] = this.init;\n\n\n        this.showTrackingPopup();\n\n\n        this.initTranslation();\n\n    }\n\n    initTranslation() {\n        const locale = this.configService.getLocale() || 'en';\n        this.t.setDefaultLang(locale);\n        this.t.use(locale);\n        this.configService.setLocale(locale);\n    }\n\n    showTrackingPopup() {\n\n        // if (Capacitor.isNativePlatform() && Capacitor.getPlatform() == 'ios') {\n        //     setTimeout(() => {\n        //         AppTrackingTransparency.requestPermission().then(r => {\n        //         })\n        //     }, 500);\n        // }\n    }\n\n}\n","<router-outlet></router-outlet>","import { APP_BASE_HREF } from '@angular/common';\nimport { APP_INITIALIZER, ErrorHandler, NgModule } from '@angular/core';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { Router, RouteReuseStrategy } from '@angular/router';\n\nimport { TranslateLoader, TranslateModule } from '@ngx-translate/core';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { HttpClient, HttpClientModule } from '@angular/common/http';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\n\n//do like this to avoid importing entire framework\nimport { CustomRouteReuseStrategy } from '@aigens/core/src/app/pure/base/reuse-strategy';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { MaterialCssVarsModule } from 'angular-material-css-vars';\n// import * as Sentry from \"@sentry/angular\";\n\nexport function HttpLoaderFactory(http: HttpClient) {\n    return new TranslateHttpLoader(http, './assets/i18n/', '.json');\n}\n\n@NgModule({\n    declarations: [\n        AppComponent\n    ],\n    imports: [\n        BrowserModule,\n        AppRoutingModule,\n        BrowserAnimationsModule,\n        HttpClientModule,\n        TranslateModule.forRoot({\n            defaultLanguage: 'en',\n            loader: {\n                provide: TranslateLoader,\n                useFactory: HttpLoaderFactory,\n                deps: [HttpClient]\n            }\n        }),\n        MaterialCssVarsModule.forRoot({\n            // all optional\n            isAutoContrast: true,\n            darkThemeClass: 'isDarkTheme',\n            lightThemeClass: 'isLightTheme',\n\n        }),\n    ],\n    providers: [\n\n\n        {\n            provide: APP_BASE_HREF,\n            useValue: '/'\n        },\n\n\n        {\n            provide: RouteReuseStrategy,\n            useClass: CustomRouteReuseStrategy,\n        },\n        // {\n        //     provide: ErrorHandler,\n        //     useValue: Sentry.createErrorHandler({\n        //         showDialog: false,\n        //     }),\n        // },\n        // {\n        //     provide: Sentry.TraceService,\n        //     deps: [Router],\n        // },\n        // {\n        //     provide: APP_INITIALIZER,\n        //     useFactory: () => () => { },\n        //     deps: [Sentry.TraceService],\n        //     multi: true,\n        // },\n    ],\n    bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-ProgressDialogComponent',\n  templateUrl: './ProgressDialogComponent.component.html',\n  styleUrls: ['./ProgressDialogComponent.component.scss']\n})\nexport class ProgressDialogComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","<mat-spinner diameter=\"30\"></mat-spinner>","import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\n\n@Component({\n  selector: 'app-alert-dialog',\n  templateUrl: './alert-dialog.component.html',\n  styleUrls: ['./alert-dialog.component.scss']\n})\nexport class AlertDialogComponent implements OnInit {\n  message: string;\n    title: string;\n    ok: string;\n\n    constructor(\n      public dialogRef: MatDialogRef<AlertDialogComponent>,\n      @Inject(MAT_DIALOG_DATA) public input: any) { }\n\n    ngOnInit(): void {\n\n        console.log(\"m\", this.input.message, this.input.title);\n    }\n\n    onOkClick(): void {\n      this.dialogRef.close();\n    }\n}\n","<h2 matDialogTitle data-testid=\"alertDialogTitle\">{{input.title}}</h2>\n<mat-dialog-content>\n    <p data-testid=\"alertDialogMessage\" class=\"alert-msg\">{{input.message}}</p>\n</mat-dialog-content>\n\n\n<mat-dialog-actions align=\"end\">\n    <button mat-button matDialogClose=\"cancel\" color=\"primary\" *ngIf=\"input.showCancel\" data-testid=\"alert-cancel-button\">Cancel</button>\n    <button mat-button matDialogClose=\"confirm\" color=\"primary\" class=\"confirm\" data-testid=\"alert-confirm-button\">OK</button>\n</mat-dialog-actions>\n","import { Component, OnInit, Input, Inject } from '@angular/core';\nimport { MAT_DIALOG_DATA } from '@angular/material/dialog';\n\n@Component({\n    selector: 'app-confirm-dialog',\n    templateUrl: './confirm-dialog.component.html',\n    styleUrls: ['./confirm-dialog.component.scss']\n})\nexport class ConfirmDialogComponent implements OnInit {\n\n    message: string;\n    title: string;\n    cancel: string;\n    ok: string;\n    cancelButtononRightSide: string;\n\n    constructor(@Inject(MAT_DIALOG_DATA) public input: any) { }\n\n    ngOnInit(): void {\n\n        this.message = this.input.message || \"\";\n        this.title = this.input.title || \"\";\n        this.cancel = this.input.cancel || \"Cancel\";\n        this.ok = this.input.ok || \"Ok\";\n        this.cancelButtononRightSide = this.input?.cancelButtononRightSide;\n\n        console.log(\"m\", this.message, this.title, this.cancel, this.ok);\n    }\n\n    cancelClicked(){\n        if(this.input.callback){\n            this.input.callback(null);\n        }\n    }\n\n    okClicked(){\n\n        if(this.input.callback){\n            this.input.callback(\"OK\");\n        }\n    }\n\n}\n","<div class=\"confirm-dialog\">\n    <h2 matDialogTitle>{{title}}</h2>\n    <mat-dialog-content>\n        <p data-testid=\"confirm-dialog-message\">{{message}}</p>\n    </mat-dialog-content>\n\n\n    <mat-dialog-actions align=\"end\">\n        <button class=\"cancel-button\" [ngClass]=\"{'cancelButtononRightSide': cancelButtononRightSide}\" mat-button matDialogClose=\"cancel\" color=\"dark\" (click)=\"cancelClicked()\" data-testid=\"confirm-dialog-cancel-button\">{{cancel}}</button>\n        <button class=\"ok-button\" mat-button matDialogClose=\"confirm\" color=\"primary\" (click)=\"okClicked()\" data-testid=\"confirm-dialog-confirm-button\">{{ok}}</button>\n    </mat-dialog-actions>\n</div>\n\n\n","import { PageParams } from '@aigens/core/src/app/pure/base/page-params';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSelectModule } from '@angular/material/select';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { RouterModule, Routes } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FrameworkModule, LocationService } from '../../../../core/src/app/framework';\nimport { NativeLocationService } from '../../../../native/src/app/native/services/native-location.service';\nimport { UiModule } from '../../../../ui/src/app/ui/ui.module';\nimport { UxModule } from '../../../../ux/src/app/ux/ux.module';\nimport { AlertDialogComponent } from './components/alert-dialog/alert-dialog.component';\nimport { ConfirmDialogComponent } from './components/confirm-dialog/confirm-dialog.component';\nimport { ProgressDialogComponent } from './components/ProgressDialogComponent/ProgressDialogComponent.component';\nimport { SetupPageComponent } from './pages/setup-page/setup-page.component';\nimport { TestPageComponent } from './pages/test-page/test-page.component';\nimport { RootComponent } from './root/root.component';\nimport { MomentModule } from 'ngx-moment';\nimport { LogoutPageComponent } from './pages/logout-page/logout-page.component';\nimport { NativeStorageService } from '../../../../native/src/app/native/services/native-storage.service';\nimport { PlatformService } from '../../../../core/src/app/pure/services/platform.service';\nimport { NativePlatformService } from '../../../../native/src/app/native/services/native-platform.service';\n\nconst routes: Routes = [\n\n    {\n        path: '',\n        component: RootComponent,\n        children: [\n\n            {\n                path: 'setup',\n                component: SetupPageComponent,\n                data: {\n                    reuse: false,\n                    auth: false,\n                    entry: true,\n                    checkpoint: true\n                }\n            },\n            {\n                path: 'logout',\n                component: LogoutPageComponent,\n                data: {\n                    reuse: false,\n                    auth: false,\n                    entry: true,\n                    checkpoint: true\n                }\n            }\n        ]\n    },\n    {\n        path: 'test',\n        component: RootComponent,\n        children: [\n\n            {\n                path: '',\n                component: TestPageComponent,\n                data: {\n                    reuse: false,\n                    auth: false,\n                    entry: true,\n                    checkpoint: false\n                }\n            }\n        ]\n    }\n];\n\n@NgModule({\n    declarations: [\n        RootComponent,\n        SetupPageComponent,\n        LogoutPageComponent,\n        TestPageComponent,\n        ProgressDialogComponent,\n        AlertDialogComponent,\n        ConfirmDialogComponent,\n    ],\n    imports: [\n        CommonModule,\n        FormsModule,\n        RouterModule.forChild(routes),\n        TranslateModule,\n        UiModule,\n        UxModule,\n\n\n        MatButtonModule,\n        //MatCheckboxModule,\n        //MatToolbarModule,\n        //MatChipsModule,\n        //MatOptionModule,\n        //MatGridListModule,\n        //MatProgressBarModule,\n        //MatSliderModule,\n        //MatSlideToggleModule,\n        //MatMenuModule,\n        MatDialogModule,\n        MatSnackBarModule,\n        MatSelectModule,\n        //MatExpansionModule,\n        MatInputModule,\n        //MatSidenavModule,\n        //MatCardModule,\n        MatIconModule,\n        //MatRadioModule,\n        MatProgressSpinnerModule,\n        MomentModule,\n        //MatTabsModule,\n        //MatListModule,\n        //MatButtonToggleModule,\n        FrameworkModule\n\n    ],\n    providers: [\n\n        PageParams,\n        {\n            provide: LocationService,\n            useFactory: NativeLocationService.locationServiceFactory,\n        },\n        {\n            provide: PlatformService,\n            useClass: NativePlatformService,\n        },\n        NativeStorageService\n    ]\n})\nexport class DeviceModule { }\n","import { animate, style, transition, trigger } from '@angular/animations';\nimport { Component, Injector, OnInit } from '@angular/core';\nimport { BasePage, StorageService } from 'aigens-framework';\nimport { NativeStorageService } from '../../../../../../native/src/app/native/services/native-storage.service';\n\n@Component({\n    selector: 'app-logout-page',\n    templateUrl: './logout-page.component.html',\n    styleUrls: ['./logout-page.component.scss'],\n    animations: [\n        trigger('catInOut', [\n            transition(':enter', [\n                style({ opacity: 0, transform: 'translateX(50%)' }),\n                animate('300ms ease-out', style({ opacity: 1, transform: 'translateX(0)' })),\n            ]),\n            //   transition(':leave', [\n            //     animate('300ms ease-in-out', style({ opacity: 0, transform: 'translateX(-50%)' }))\n            //   ])\n        ]),\n\n\n\n\n    ]\n})\nexport class LogoutPageComponent extends BasePage implements OnInit {\n\n    showContinue = false;\n    constructor(private injector: Injector, private storageService: StorageService, private nativeStorageService: NativeStorageService) {\n\n        super(injector);\n\n        this.clearStation();\n    }\n\n\n    ngOnInit(): void {\n        super.ngOnInit();\n        setTimeout(() => {\n            this.toSetupPage();\n        }, 100);\n\n        setTimeout(() => {\n            this.showContinue = true;\n        }, 600);\n\n    }\n\n    toSetupPage() {\n        NativeStorageService.fromLogout = true;\n        this.routingService.navigate(\"/device/setup\", {\n            queryParams: {}\n        });\n    }\n\n    continueClicked() {\n        this.clearStation();\n        this.toSetupPage();\n    }\n\n    clearStation() {\n        console.log(\"clearStation\");\n\n        this.storageService.setLocal(\"lastStation\", null);\n        this.nativeStorageService.setStorage(\"lastStation\", null);\n\n        this.sentryService.track(\"Clear Station\", {});\n    }\n}\n","<div class=\"main-container\">\n    <div class=\"bg-top\">\n        <img src=\"../../../../assets/images/bg02.svg\">\n    </div>\n    <div class=\"bg-bottom\">\n        <img src=\"../../../../assets/images/bg01.svg\">\n    </div>\n    <main class=\"logout-content\">\n        <button class=\"continue-btn\" *ngIf=\"showContinue\" (click)=\"continueClicked()\">{{ 'logout.continue' | translate }}</button>\n    </main>\n    <footer>\n        <!-- <img src=\"../../../../assets/images/aigens.svg\"> -->\n        <img src=\"../../../../assets/images/Aigens logn_3.svg\">\n    </footer>\n</div>\n","import { animate, style, transition, trigger } from '@angular/animations';\nimport { Component, Injector, OnInit, isDevMode } from '@angular/core';\nimport { Toast } from '@capacitor/toast';\nimport { BasePage } from 'aigens-framework';\nimport { NativeAppService } from '../../../../../../merchant/src/app/native/services/native.app.service';\nimport { NativeCameraService } from '../../../../../../native/src/app/native/services/native-camera.service';\nimport { NativeNotificationService } from '../../../../../../native/src/app/native/services/native-notification.service';\nimport { NativeStorageService } from '../../../../../../native/src/app/native/services/native-storage.service';\nimport { Device } from '@capacitor/device';\nimport { Camera } from '@capacitor/camera';\nimport { SelectByKeyboardService } from '../../../../../../core/src/app/framework/directives/select-by-keyboard';\nimport { merge } from 'lodash-es';\nimport { Adyen } from '@aigens/aigens-sdk-adyen';\nimport { SunmiPrinter } from '@aigens/aigens-sdk-sunmi-printer';\n\n// const { VirtualKeyboardJs } = require('@aigens/electron-virtual-keyboard')\n// import { VirtualKeyboardJs } from '@aigens/electron-virtual-keyboard';\n\nimport VirtualKeyboardJs from '@aigens/virtual-keyboard';\n\n\n\n@Component({\n    selector: 'app-setup-page',\n    templateUrl: './setup-page.component.html',\n    styleUrls: ['./setup-page.component.scss'],\n    animations: [\n        trigger('catInOut', [\n            transition(':enter', [\n                style({ opacity: 0, transform: 'translateX(50%)' }),\n                animate('300ms ease-out', style({ opacity: 1, transform: 'translateX(0)' })),\n            ]),\n            //   transition(':leave', [\n            //     animate('300ms ease-in-out', style({ opacity: 0, transform: 'translateX(-50%)' }))\n            //   ])\n        ]),\n\n    ]\n})\nexport class SetupPageComponent extends BasePage implements OnInit {\n\n    currentUrl: string;\n    installCode: string;\n\n    station: any;\n    autoLoginTime: number;\n    remainingSeconds: number;\n\n    scanning: boolean = false;\n    busy: boolean = false;\n\n    testUrl: string;// = \"https://test.order.place/display/store/500/signage/500/screen/500-0?stationId=818120013&installCode=JBX2GLY\";\n\n    LAST_STATION_KEY = \"lastStation\";\n    appInfo;\n    deviceId;\n    activateMode: ActivateMode = ActivateMode.manual;\n    countDown = 3;\n    fromLogout = false;\n    showLanguage;\n\n    intervalId: any;\n\n    virtualKeyboardJs: VirtualKeyboardJs;\n    constructor(private injector: Injector,\n        //private storageService: StorageService,\n        private cameraService: NativeCameraService, private nativeStorageService: NativeStorageService, public nativeAppService: NativeAppService, public nativeNotificationService: NativeNotificationService) {\n\n        super(injector);\n        // this.logoutClicked();\n\n        this.getDeviceId();\n\n        this.virtualKeyboardJs = new VirtualKeyboardJs();\n    }\n\n    async getDeviceId() {\n        if (this.deviceId) {\n            return this.deviceId;\n        }\n        const r = await Device.getId()\n        const d = r as any;\n        this.deviceId = d?.identifier || d?.uuid;\n        return this.deviceId;\n    }\n\n    protected getUIRefreshInterval(): number {\n        return 1000;\n    }\n\n    protected onRefreshUI(): void {\n\n        if (this.autoLoginTime) {\n\n            var now = new Date().getTime();\n            var diff = this.autoLoginTime - now;\n\n            if (diff < 0) {\n                //go login\n\n                setTimeout(() => {\n                    this.autoLoginTime = null;\n                }, 2000);\n\n                this.remainingSeconds = null;\n\n                this.goClicked();\n            } else {\n\n                this.remainingSeconds = Math.ceil(diff / 1000);\n\n            }\n\n        }\n\n    }\n\n    setAlert(alert) {\n        SelectByKeyboardService.setCurrentAlert(alert);\n    }\n\n    async init() {\n\n        /* Peter: commented out, don't use any local storage to test if native storage works\n        this.station = this.storageService.getLocal(this.LAST_STATION_KEY);\n        if (this.station) {\n            this.nativeStorageService.setStorage(this.LAST_STATION_KEY, this.station);\n        }else {\n            this.station = await this.nativeStorageService.getStorage(this.LAST_STATION_KEY);\n        }\n        */\n        this.getNormalConfig();\n\n        try {\n            this.station = await this.nativeStorageService.getStorage(this.LAST_STATION_KEY);\n            this.appInfo = await this.nativeAppService.getAppInfo();\n        } catch (error) {\n\n        }\n        console.log(\"station:\", this.station);\n\n        if (!this.station) {\n            this.getStations();\n        } else {\n            this.getStationById();\n            this.setData(this.station);\n        }\n\n        this.showLanguage = this.t.currentLang == 'en' ? 'ZH' : 'EN';\n\n        if (this.virtualKeyboardJs.isElectron()) {\n            this.virtualKeyboardJs.setInput(\".installcode-input\", \".installcode-kb-container\", (key, input) => {\n                console.log('setInput:', key, input);\n            }, {\n                show: false,\n                autoPosition: false\n            });\n        }\n\n    }\n\n    changeLanguage() {\n        const locale = this.t.currentLang == 'en' ? 'zh' : 'en';\n        this.showLanguage = locale == 'en' ? 'ZH' : 'EN';\n        this.t.setDefaultLang(locale);\n        this.t.use(locale);\n        this.configService.setLocale(locale);\n\n        this.mergeTranslation();\n    }\n\n    setActivateMode(aigensDevice) {\n\n        const isForceActivateMode = aigensDevice?.isForceActivateMode || false;\n\n\n        let activateMode: any = this.station?.activateMode || aigensDevice?.activateMode || this.activateMode;\n\n        // test\n        // const loginBehavior: any = ActivateMode.CountDownLogin;\n\n        const isfrom = NativeStorageService.fromLogout;\n        if (isfrom && !isForceActivateMode) {\n            activateMode = ActivateMode.manual;\n        }\n\n        NativeStorageService.fromLogout = false;\n\n        switch (activateMode) {\n            case ActivateMode.auto:\n                this.goClicked();\n                break;\n            case ActivateMode.countdown:\n                const autoCountDown = aigensDevice?.autoCountDown || 3000;\n                this.autoLoginTime = new Date().getTime() + autoCountDown;\n                break;\n            case ActivateMode.manual:\n                this.autoLoginTime = null;\n                break;\n        }\n\n\n    }\n\n    getStationById() {\n        const id = this.station?.stationId;\n        const apiKey = this.station?.apiKey;\n        if (!id || !apiKey) return;\n        const host = isDevMode() ? \"https://aigensstoretest.appspot.com\" : \"https://auth2.aigens.com\";\n        const url = `${host}/api/v1/store/station/${id}.json`;\n        const headers = {\n            \"Authorization\": \"Bearer \" + apiKey\n        };\n        this.dataService.getRawWithHeaders(url, {}, false, headers).subscribe({\n            next: rsp => {\n                // console.log(\"rsp\", rsp);\n                const activateMode = rsp?.data?.activateMode;\n                if (activateMode) {\n                    this.station.activateMode = activateMode;\n                    this.nativeStorageService.setStorage(this.LAST_STATION_KEY, this.station);\n                }\n\n            },\n            error: err => {\n                console.log(\"err\", err);\n            }\n        });\n\n    }\n\n\n    // for temp\n    async getNormalConfig() {\n        const mod = isDevMode() ? 'uat' : 'prd';\n\n        const key = `aigens-device-config-${mod}`;\n        this.nativeStorageService.getStorage(key).then(rsp => {\n            if (rsp) window['aigensDeviceNormal'] = rsp;\n            this.insertStyle();\n        })\n\n        // hardcode first\n        const url = `https://aigensstoretest.aigens.com/api/v1/store/config.json?type=byod&storeId=5704131641606144&t=${new Date().getTime()}`;\n        this.dataService.getRaw(url, {}).subscribe(rsp => {\n            const aigensDevice = rsp?.data?.data?.[mod];\n            window['aigensDeviceNormal'] = aigensDevice;\n            this.nativeStorageService.setStorage(key, aigensDevice);\n            this.insertStyle();\n        }, err => {\n            console.log(\"err:\", err);\n        });\n    }\n\n    insertStyle() {\n        this.mergeTranslation(window['aigensDeviceNormal']);\n        var styleContent = window['aigensDeviceNormal']?.cssStyle;\n        if (!styleContent) return;\n        const id = \"device-style-id-normal\";\n        var style = document.getElementById(id);\n        if (style) {\n            style.innerText = styleContent;\n            return;\n        }\n        style = document.createElement(\"style\");\n        style.innerText = styleContent;\n        style.setAttribute('id', id);\n        document.head.appendChild(style);\n\n    }\n\n\n    async getConfig(storeId) {\n        if (!storeId) return;\n        const mod = isDevMode() ? 'uat' : 'prd';\n        const key = `aigens-device-config-${mod}-${storeId}`;\n\n        let isCalled = false;\n        const hasLoading = !(await this.nativeStorageService.getStorage(key));\n\n        this.nativeStorageService.getStorage(key).then(rsp => {\n            if (rsp) {\n                window['aigensDevice'] = rsp;\n                this.applyConfig(rsp);\n                if (!isCalled) this.setActivateMode(rsp);\n                isCalled = true;\n            }\n        })\n\n        const host = isDevMode() ? \"https://aigensstoretest.appspot.com\" : \"https://auth2.aigens.com\"\n        const url = `${host}/api/v1/store/config.json?type=app&storeId=${storeId}&t=${new Date().getTime()}`;\n\n        if (hasLoading) this.dialogService.superloading(true);\n        this.dataService.getRaw(url, {}).subscribe(rsp => {\n            const aigensDevice = rsp?.data?.data?.device;\n            window['aigensDevice'] = aigensDevice;\n            this.nativeStorageService.setStorage(key, aigensDevice);\n            this.applyConfig(aigensDevice);\n            if (!isCalled) this.setActivateMode(aigensDevice);\n            isCalled = true;\n            if (hasLoading) this.dialogService.superloading(false);\n        }, err => {\n            console.log(\"err:\", err);\n            if (hasLoading) this.dialogService.superloading(false);\n        });\n    }\n\n    private mergeTranslation(aigensDevice?) {\n\n        if (!aigensDevice) aigensDevice = window['aigensDevice'];\n\n        var lang = this.t.currentLang;\n        var currentTrans = this.t.translations?.[lang];\n\n        var newTrans = aigensDevice?.translations?.[lang];\n        if (newTrans) {\n            merge(currentTrans, newTrans);\n        }\n\n    }\n\n    private applyConfig(aigensDevice) {\n        const styleContent = aigensDevice?.cssStyle;\n        if (styleContent) {\n            const id = \"device-style-id-9527\";\n            var style = document.getElementById(id);\n            if (style) {\n                style.innerText = styleContent;\n            } else {\n                style = document.createElement(\"style\");\n                style.innerText = styleContent;\n                style.setAttribute('id', id);\n                document.head.appendChild(style);\n            }\n\n        }\n\n        this.mergeTranslation(aigensDevice);\n\n    }\n\n    private async processPermissions() {\n        const r = await Camera.checkPermissions();\n        if (r.camera == 'granted') return;\n        Camera.requestPermissions({\n            permissions: ['camera']\n        })\n    }\n\n\n    ngOnInit(): void {\n\n        super.ngOnInit();\n\n        this.currentUrl = window.location.href;\n\n        this.init();\n\n        this.processPermissions();\n\n    }\n\n\n    getApiHost(code: string) {\n\n        var isPrd = true;\n\n        if (code.startsWith(\"TEST\")) {\n            isPrd = false;\n        }\n\n        var host = \"https://auth2.aigens.com\";\n\n        if (!isPrd) {\n            host = \"https://aigensstoretest.appspot.com\";\n        }\n\n        return host;\n\n    }\n\n\n    testQR() {\n        var qrContent = \"https://test.order.place/display/store/500/signage/500/screen/500-0?stationId=818120013&installCode=JBX2GLY\";\n        this.parseUrl(qrContent);\n    }\n\n    async doTest() {\n\n        console.log(\"Test Clicked\");\n\n\n        await Toast.show({\n            text: 'Hello!',\n        });\n\n    }\n\n    back() {\n        //this.location.back();\n    }\n\n    retryToCall() {\n        let count = 0;\n        this.intervalId = setInterval(() => {\n            count += 2;\n            if (navigator.onLine) {\n                clearInterval(this.intervalId);\n                this.openWebUrl();\n                return;\n            }\n            if (count === 20) {\n                clearInterval(this.intervalId);\n                this.dialogService.superloading(false);\n                const alert = this.dialogService.showConfirm(\n                    \"\", this.t.instant('global.network-error'),\n                    {\n                        okText: 'Retry',\n                        cancelText: 'Cancel',\n                        callback: (res) => {\n                            if (res === 'OK') {\n                                this.goClicked();\n                            }\n                        }\n                    }\n                )\n                this.setAlert(alert);\n            }\n        }, 2000)\n\n    }\n\n    goClicked() {\n\n        if (!navigator.onLine) {\n            this.dialogService.superloading(true);\n            console.log('offline error')\n            this.retryToCall();\n\n            return;\n        }\n\n        this.openWebUrl();\n    }\n\n    openWebUrl() {\n        this.dialogService.superloading(false);\n\n        var url = this.station.webUrl;\n\n        var apiKey = this.station.apiKey;\n\n        if (apiKey) {\n            var sep = url.indexOf('?') > 0 ? '&' : '?';\n            url += sep + 'apiKey=' + apiKey;\n        }\n\n        // console.log('URL', url);\n        // DEBUG on localhost\n        // window.location.href = url.replace(/https:\\/\\/merchanttest.order.place/gi, 'http://192.168.100.43:4200');\n\n        const deviceLogoutLink = `deviceLogoutLink=${encodeURIComponent(`${window.origin}/device/logout`)}`\n\n        var sign = url.indexOf('?') > 0 ? '&' : '?';\n        url += sign + deviceLogoutLink;\n\n        // url += `&t=${new Date().getTime()}&nocache=true`\n        url += `&t=${new Date().getTime()}`\n        console.log(\"goClicked url:\", url);\n        window.location.href = url;\n\n\n        // this.subscribeGlobalTopic();\n\n    }\n\n    testClicked() {\n\n        //this.routingService.navigate(\"/device/test\");\n        //var url = \"/device/test\";\n        var url = \"/test/app/store/500\";\n        this.routingService.navigate(url);\n    }\n\n    async setupClicked() {\n\n        console.log(\"install code\", this.installCode);\n\n        if (!this.installCode || this.installCode.length <= 4) {\n            const alert = this.dialogService.showAlert(\"\", this.t.instant('setup.check-your-code'));\n            this.setAlert(alert);\n            return;\n        }\n\n        if (this.installCode.indexOf(\"http\") == 0) {\n\n            this.station = {\n                webUrl: this.installCode\n            }\n            this.goClicked()\n            return;\n        }\n\n        if (this.busy) return;\n\n        var url = this.getApiHost(this.installCode) + \"/api/v1/store/station/install.json\";\n\n        var deviceId = await this.getDeviceId();\n        var params = {\n            code: this.installCode,\n            deviceId: deviceId,\n            t: new Date().getTime()\n        };\n\n        this.dialogService.superloading(true);\n        this.busy = true;\n\n        this.dataService.get(url, params).subscribe(install => {\n            this.dialogService.superloading(false);\n            console.log(\"install\", install);\n            this.busy = false;\n            this.setData(install);\n\n        }, err => {\n            this.busy = false;\n            this.dialogService.superloading(false);\n            this.dialogService.dismissPreLoader();\n            const alert = this.dialogService.showError(err);\n            this.setAlert(alert);\n        });\n    }\n\n    async getStations() {\n        this.dialogService.superloading(true);\n        let err;\n\n        try {\n            const res = await this.callInstallStation();\n            this.dialogService.superloading(false);\n            this.dialogService.dismissPreLoader();\n            this.setData(res);\n            return;\n        } catch (error) {\n            console.log(\"prd error:\", error);\n            err = error;\n            // this.dialogService.showError(error);\n        }\n\n        this.dialogService.superloading(false);\n        this.dialogService.dismissPreLoader();\n\n    }\n\n    async callInstallStation() {\n        const host = isDevMode() ? \"https://aigensstoretest.appspot.com\" : \"https://auth2.aigens.com\";\n        var url = host + \"/api/v1/store/station/install.json\";\n        var deviceId = await this.getDeviceId();\n        var params = {\n            deviceId: deviceId,\n            t: new Date().getTime()\n        };\n        return new Promise((resolve, reject) => {\n            this.dataService.get(url, params).subscribe(install => {\n                resolve(install);\n            }, err => {\n                reject(err);\n            });\n        });\n    }\n\n    scanClicked() {\n\n        if (this.testUrl) {\n            this.parseUrl(this.testUrl);\n        } else {\n            this.startScan();\n        }\n\n    }\n\n\n    async startScan() {\n\n        const r = await Camera.checkPermissions();\n        if (r.camera !== 'granted') {\n            const alert = this.dialogService.showAlert(\"\", this.t.instant('setup.camera-permissions'), rsp => {\n                this.platformService.openSettingsPage();\n            });\n            this.setAlert(alert);\n\n            return;\n        }\n\n        this.scanning = true;\n        this.cameraService.startScan((result) => {\n\n\n            this.stopScan();\n            console.log(\"startScan Result\", result);\n\n            this.parseUrl(result.content);\n\n        });\n\n    }\n\n    cancelClicked() {\n\n        this.autoLoginTime = null;\n        this.remainingSeconds = null;\n\n    }\n\n    stopScan() {\n\n        this.scanning = false;\n\n        this.cameraService.stopScan();\n\n\n    }\n\n    parseUrl(testUrl: string) {\n\n        const queryString = testUrl;\n        const urlParams = new URLSearchParams(queryString);\n        const installCode = urlParams.get('installCode');\n\n        console.log(\"installCode\", installCode);\n\n        if (installCode && installCode.length > 2) {\n            this.installCode = installCode;\n        } else {\n            const alert = this.dialogService.showAlert(\"\", this.t.instant('setup.check-your-qrcode'));\n            this.setAlert(alert);\n        }\n    }\n\n    logoutClicked() {\n\n        this.station = null;\n        this.autoLoginTime = null;\n        this.remainingSeconds = null;\n\n        //this.storageService.setLocal(this.LAST_STATION_KEY, null);\n        this.nativeStorageService.setStorage(this.LAST_STATION_KEY, null);\n    }\n\n    setData(install) {\n\n        if (!install) return;\n\n        //this.storageService.setLocal(this.LAST_STATION_KEY, install);\n        this.nativeStorageService.setStorage(this.LAST_STATION_KEY, install);\n        this.station = install;\n\n        this.getConfig(install?.storeId);\n\n    }\n\n\n    testToLogout() {\n        this.routingService.navigate(\"/device/logout\");\n    }\n\n    timestampToFormattedDate = (timestamp) => {\n        const date = new Date(timestamp);\n        const year = date.getFullYear();\n        const month = String(date.getMonth() + 1).padStart(2, '0');\n        const day = String(date.getDate()).padStart(2, '0');\n        const hours = String(date.getHours()).padStart(2, '0');\n        const minutes = String(date.getMinutes()).padStart(2, '0');\n        const seconds = String(date.getSeconds()).padStart(2, '0');\n\n        return `${year}-${month}-${day}`;\n    }\n\n    msg;\n    adyenPay() {\n\n        const url = \"https://apitest.aigens.com/api/v2/merchant/terminal/intent.json\";\n        const sid = \"ai:6f831bd8-750c-43cb-a83a-b7db83f95ffe\";\n        const params = {\n            \"storeId\": 504,\n            \"stationId\": 504,\n            \"grandTotal\": 5.0,\n            \"id\": new Date().getTime() + \"fsefs-sfe-fse-fes-fs\"\n        }\n\n        this.dialogService.superloading(true);\n        this.dataService.postWithHeaders(url, params, {}, { sid }).subscribe(rsp => {\n\n            console.log(\"rsp:\", rsp);\n\n            this.dialogService.superloading(false);\n            const intent = rsp?.data?.intent;\n\n            Adyen.startPayment({\n                authenticationServiceObject: {\n                    url: \"https://apitest.aigens.com/api/v2/pay/terminal/connectiontoken.json\",\n                    sid,\n                    stationId: \"504\"\n                },\n                paymentObject: {\n                    // serviceId: \"86da8c8f-4\",\n                    // saleId: \"aigens-sale-id\",\n                    // transactionID: \"transactionID\",\n                    // currency: \"HKD\",\n                    // requestedAmount: \"5\",\n                    // timeStamp: `${this.timestampToFormattedDate(new Date().getTime())}T07:29:03.384Z`,\n                    nexoRequest: intent\n                }\n            }).then(rsp => {\n                this.msg = JSON.stringify(rsp);\n            }).catch(err => {\n                this.msg = err?.message || err;\n            })\n        }, err => {\n            this.dialogService.superloading(false);\n            this.dialogService.showError(err);\n        })\n\n\n\n    }\n\n    testprint() {\n\n\n        SunmiPrinter.EscAndApiPrint({\n            contents: [\n                {\n                    type: \"printBitmap\",\n                    bitmapUrl: {\n                        url: 'https://www.baidu.com/img/flexible/logo/pc/result.png',\n                    },\n                    bitmapStyle: {\n                        // algorithm?: 'DITHERING', 'BINARIZATION'\n                        // value?: number;\n                        // align?: \"DEFAULT\" | \"LEFT\" | \"CENTER\" | \"RIGHT\";\n                        align: \"CENTER\",\n                        width: 300,\n                        height: 300,\n                    },\n                }, {\n                    type: 'printEsc',\n                    text: 'fseffse',\n                }\n            ],\n            autoCut: true\n        })\n    }\n\n    async getinstallationId() {\n        const rsp = await Adyen.getInstallationId();\n        this.msg = `getInstallationId: ${rsp.installationId}`;\n    }\n}\n\nexport enum ActivateMode {\n    auto = \"auto\",\n    countdown = \"countdown\",\n    manual = \"manual\"\n}\n","<div class=\"main-container\" *ngIf=\"!scanning\">\n    <div class=\"bg-top\">\n        <img src=\"../../../../assets/images/bg02.svg\">\n    </div>\n    <div class=\"bg-bottom\">\n        <img src=\"../../../../assets/images/bg01.svg\">\n    </div>\n    <main [ngClass]=\"{'scan-page': scanning}\">\n        <div class=\"top\">\n            <div class=\"main\">\n                <div class=\"header-wrapper\">\n                    <img src=\"../../../../assets/images/icon_start.svg\">\n                    <div class=\"header-inner\">Universal\n                        <br/>\n                        Device\n                    </div>\n                    <button mat-flat-button class=\"language-ele\" (click)=\"changeLanguage()\" appSelectByKeyboard>{{showLanguage}}</button>\n                </div>\n\n                <div *ngIf=\"!station\" class=\"content-wrapper\" @catInOut>\n\n\n                    <div class=\"scan-inner\">\n                        <img src=\"../../../../assets/images/icon_scan.svg\">\n                        <p>\n                            {{'setup.scan-text' | translate }}\n                        </p>\n                    </div>\n                    <button mat-flat-button (click)=\"scanClicked()\" class=\"btn-public\" appSelectByKeyboard>\n                        {{'setup.scan-qr' | translate }}\n                    </button>\n\n                </div>\n\n                <div *ngIf=\"!station\" class=\"content-wrapper\" @catInOut>\n                    <mat-form-field class=\"input-field keyboard-form-field\" floatLabel=\"always\">\n                        <mat-label>{{'setup.installation-code' | translate }}</mat-label>\n\n                        <input class=\"installcode-input\" matInput [(ngModel)]=\"installCode\" appSelectByKeyboard/>\n                        <div class=\"installcode-kb-container\"></div>\n                    </mat-form-field>\n\n                    <div>\n                        <button mat-flat-button color=\"primary\" (click)=\"setupClicked()\" class=\"btn-public outline\" appSelectByKeyboard>\n                            {{'setup.install' | translate }}\n                        </button>\n\n                        <!-- <button mat-flat-button color=\"primary\" (click)=\"testClicked()\" class=\"btn-public outline\">\n                            Test\n                        </button> -->\n                    </div>\n                </div>\n                <div *ngIf=\"station\" class=\"content-wrapper\" @catInOut>\n                    <div class=\"store-info\">\n                        <p *ngIf=\"station.store\">{{'setup.store' | translate }}: {{ station?.store?.name }}</p>\n                        <p>{{'setup.type' | translate }}: {{ station?.type }}</p>\n                        <p *ngIf=\"station.number\">{{'setup.number' | translate }}: {{ station?.number }}</p>\n                    </div>\n                    <div @catInOut *ngIf=\"!autoLoginTime && station\" class=\"device-warpper\">\n                        <button mat-raised-button (click)=\"goClicked()\" class=\"btn-public\" appSelectByKeyboard>\n                            {{'setup.activate-device' | translate }}\n                        </button>\n\n                        <button mat-stroked-button (click)=\"logoutClicked()\" class=\"btn-public outline\" appSelectByKeyboard>\n                            {{'setup.remove-device' | translate }}\n                        </button>\n                    </div>\n\n\n                </div>\n\n                <div *ngIf=\"station && autoLoginTime && remainingSeconds\" class=\"content-wrapper auto-time count-down-wrapper\" @catInOut>\n\n\n                    <button mat-raised-button (click)=\"goClicked()\" class=\"btn-public\" appSelectByKeyboard>\n                        {{'setup.activate-device' | translate }}\n                    </button>\n\n                    <button mat-stroked-button (click)=\"cancelClicked()\" class=\"btn-public outline\" appSelectByKeyboard>\n                        {{'setup.cancel' | translate }}\n                    </button>\n                    <div class=\"countdown\" *ngIf=\"remainingSeconds\" @catInOut>\n                        {{'setup.auto-activate' | translate }} <span>{{ remainingSeconds }}s</span>\n                    </div>\n                </div>\n\n                <!-- <div class=\"test\">\n                    <button (click)=\"testprint()\">test print</button>\n                    <button (click)=\"adyenPay()\">test adyen pay</button>\n                    <button (click)=\"getinstallationId()\">getinstallationId</button>\n                    <textarea>{{msg}}</textarea>\n                </div> -->\n            </div>\n        </div>\n\n\n    </main>\n    <footer>\n        <img src=\"../../../../assets/images/Aigens logn_3.svg\">\n        <span class=\"version\" *ngIf=\"appInfo?.version\">V{{appInfo?.version}}</span>\n    </footer>\n</div>\n\n\n<div *ngIf=\"scanning\" class=\"scanner-wrapper\">\n    <div class=\"scanner-inner\"></div>\n    <button mat-raised-button color=\"primary\" (click)=\"stopScan()\" class=\"btn-public stop-btn\" appSelectByKeyboard>\n        {{'setup.stop-scan' | translate }}\n    </button>\n</div>\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { Capacitor } from '@capacitor/core';\nimport { BasePage } from 'aigens-framework';\nimport { LocationService } from '../../../../../../core/src/app/framework';\nimport { NativeCameraService } from '../../../../../../native/src/app/native/services/native-camera.service';\nimport { NativeLocationService } from '../../../../../../native/src/app/native/services/native-location.service';\n\n@Component({\n    selector: 'app-test-page',\n    templateUrl: './test-page.component.html',\n    styleUrls: ['./test-page.component.scss']\n})\nexport class TestPageComponent extends BasePage implements OnInit {\n\n    platform: string;\n    native: any;\n    scanning: boolean = false;\n\n    constructor(private injector: Injector, private locationService: LocationService, private nativeLocationService: NativeLocationService, \n        private cameraService: NativeCameraService) { \n\n        super(injector);\n    }\n\n    ngOnInit(): void {\n\n        this.platform = Capacitor.getPlatform();\n        this.native = Capacitor.isNativePlatform();\n    }\n\n    getLocation(){\n\n        this.locationService.getGps((result)=>{\n\n            var msg = JSON.stringify(result);\n\n            this.dialogService.showAlert(\"Result\", msg);\n\n        });\n\n    }\n\n    scanQR(){\n\n        this.scanning = true;\n\n        this.cameraService.startScan((result)=>{\n\n            var msg = JSON.stringify(result);\n\n            this.stopScan();\n            this.dialogService.showAlert(\"Result\", msg);\n\n\n        });\n\n    }\n\n    stopScan(){\n\n        this.scanning = false;\n\n        this.cameraService.stopScan();\n        \n\n    }\n\n    checkPermission(){\n\n        \n\n        this.cameraService.checkPermission((result)=>{\n\n            var msg = JSON.stringify(result);\n\n            this.dialogService.showAlert(\"Result\", msg);\n\n        });\n\n    }\n\n    getNativeLocation(){\n\n        this.nativeLocationService.getGps((result)=>{\n\n            var msg = JSON.stringify(result);\n\n            this.dialogService.showAlert(\"Result\", msg);\n\n        });\n\n    }\n\n}\n","<div *ngIf=\"!scanning\">\n    <div>\n        NATIVE TEST platform: {{platform}} native: {{native}}\n    </div>\n\n    <button mat-raised-button color=\"primary\" (click)=\"getLocation()\">Get Location</button>\n    <button mat-raised-button color=\"primary\" (click)=\"scanQR()\">Scan QR</button>\n    <button mat-raised-button color=\"primary\" (click)=\"checkPermission()\">Check Permission</button>\n</div>\n\n<div *ngIf=\"scanning\">\n    <button mat-raised-button color=\"primary\" (click)=\"stopScan()\">Stop Scan</button>\n</div>","import { Component, OnInit } from '@angular/core';\nimport { DialogService } from '@aigens/core/src/app/framework';\nimport { MatDialog } from '@angular/material/dialog';\nimport { ProgressDialogComponent } from '../components/ProgressDialogComponent/ProgressDialogComponent.component';\nimport { AlertDialogComponent } from '../components/alert-dialog/alert-dialog.component';\nimport { ConfirmDialogComponent } from '../components/confirm-dialog/confirm-dialog.component';\n@Component({\n    selector: 'app-root',\n    templateUrl: './root.component.html',\n    styleUrls: ['./root.component.scss']\n})\nexport class RootComponent implements OnInit {\n\n    constructor(private dialogService: DialogService, matDialog: MatDialog) {\n\n        this.dialogService.dismissPreLoader();\n\n        this.dialogService.setDialogController(matDialog);\n        this.dialogService.setSuperLoaderComponent(ProgressDialogComponent);\n        this.dialogService.setAlertComponent(AlertDialogComponent);\n        this.dialogService.setConfirmComponent(ConfirmDialogComponent);\n\n    }\n\n    ngOnInit(): void {\n    }\n\n}\n","<router-outlet></router-outlet>","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/plugins/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n// import * as Sentry from \"@sentry/angular\";\n// import { BrowserTracing } from \"@sentry/tracing\";\n\nif (environment.production) {\n  enableProdMode();\n}\n\n// Sentry.init({\n//     dsn: \"https://41e7316ba4e14f6dad692039314b134d@o1308624.ingest.sentry.io/6554369\",\n//     integrations: [\n//         new BrowserTracing({\n//             tracingOrigins: [\"localhost\", \"https:\\/\\/\\w*\\.order\\.place\"],\n//             routingInstrumentation: Sentry.routingInstrumentation,\n//         }),\n//     ],\n//     // Set tracesSampleRate to 1.0 to capture 100%\n//     // of transactions for performance monitoring.\n//     // We recommend adjusting this value in production\n//     tracesSampleRate: 1.0,\n// });\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","import { Injectable, NgZone } from '@angular/core';\n\nimport { App, AppInfo } from '@capacitor/app';\nimport { Capacitor } from '@capacitor/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NativeAppService {\n\n    private appLinkListeners: AppLinkListener[] = [];\n    private listenerIds: number[] = [];\n    static isFromLogoutPage = false;\n    constructor(private ngZone: NgZone) {\n        console.log(\"AppService interface service\");\n\n        App.addListener('appUrlOpen', (data: any) => {\n            this.ngZone.run(() => {\n                // data: {\"iosSourceApplication\":\"\",\"iosOpenInPlace\":\"\",\"url\":\"capacitor://localhost/brand/5163349922807808/payment/status/success?redirect=true\"}\n                console.log('App opened with URL: ', data, data.url);\n                if (!Capacitor.isNativePlatform()) return;\n                let url = data && data.url || \"\";\n                if (this.appLinkListeners.length > 0) {\n                    this.appLinkListeners.forEach(listener => {\n                        listener.onAppLinkChanged(url);\n                    })\n                }\n            });\n\n        });\n    }\n\n    public async getAppInfo() : Promise<AppInfo>{\n        try {\n            return await App.getInfo()\n        } catch (error) {\n            return null;\n        }\n    }\n\n    private genListenerId(): number {\n        let id = 1;\n        if (this.listenerIds.length > 0) {\n            id = this.listenerIds[this.listenerIds.length - 1] + 1;\n        }\n        this.listenerIds.push(id);\n        return id;\n    }\n\n    private freedListener(listeners: AppLinkListener[], listenerID: number) {\n        listeners.forEach((listener, index) => {\n            if (listener && listener.appListenerId == listenerID) {\n                listeners.splice(index, 1);\n            }\n        })\n    }\n\n    public setAppLinkListener(listener: AppLinkListener): number {\n        let listenerId_ = this.genListenerId();\n        listener.appListenerId = listenerId_;\n        this.appLinkListeners.push(listener);\n        return listenerId_;\n    }\n\n    public unsubscribe(listenerId: number) {\n        if (!listenerId) return;\n        if (this.listenerIds.indexOf(listenerId) < 0) {\n            console.warn(\"not include listenerId\");\n            return;\n        }\n\n        let i = this.listenerIds.indexOf(listenerId);\n        this.listenerIds.splice(i, 1);\n\n        this.freedListener(this.appLinkListeners, listenerId);\n\n    }\n\n\n}\nexport interface AppLinkListener {\n    onAppLinkChanged(link: string);\n    appListenerId?: number;\n}\n","import { Scan } from '@aigens/aigens-sdk-scan';\nimport { CameraService } from '@aigens/core/src/app/framework/services/camera.service';\nimport { Injectable } from '@angular/core';\nimport { BarcodeScanner, SupportedFormat } from '@capacitor-community/barcode-scanner';\nimport { Capacitor } from '@capacitor/core';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NativeCameraService {\n\n    havePermission: boolean = false;\n\n    constructor() {\n\n    }\n\n    public static cameraServiceFactory() {\n\n        var native = Capacitor.isNativePlatform();\n\n        if (native) {\n            return new NativeCameraService();\n        }\n\n        return new NativeCameraService();\n\n    }\n\n    isAvailable(): boolean {\n        return true;\n    }\n\n    async checkPermission(callback: Function) {\n\n        // check or request permission\n        await BarcodeScanner.checkPermission({ force: true }).then((result) => {\n\n            console.log(\"checkPermission Result\", result);\n\n            if (result.granted) {\n                console.log(\"GRANTED\");\n                this.havePermission = true;\n            }\n\n            callback(result);\n        });\n\n    }\n\n    scan(callback: Function, options = {}){\n\n        Scan.scan(options).then((res)=>{\n\n            callback(res);\n        });\n\n    }\n\n    startScan(callback: Function, rejectPermissionCallback?): void {\n\n        if(this.havePermission){\n            this.scanRaw(callback);\n        }else{\n\n\n            this.checkPermission((permissionResult)=>{\n\n                console.log(permissionResult);\n\n                if(this.havePermission){\n                    this.scanRaw(callback);\n                }else{\n                    rejectPermissionCallback && rejectPermissionCallback();\n                }\n\n            });\n\n        }\n\n    }\n\n    stopScan(): void {\n        BarcodeScanner.showBackground();\n        BarcodeScanner.stopScan();\n    }\n\n    private async scanRaw(callback: Function) {\n\n        console.log(\"Scanning\");\n\n\n        BarcodeScanner.hideBackground(); // make background of WebView transparent\n\n        await BarcodeScanner.startScan({ targetedFormats: [SupportedFormat.QR_CODE] }).then((result) => {\n\n            console.log(\"Result\", result);\n\n            // if the result has content\n            if (result.hasContent) {\n                console.log(result.content); // log the raw scanned content\n\n                BarcodeScanner.stopScan();\n\n                callback(result);\n            }\n        });\n\n\n\n\n    }\n\n\n\n}\n","import { Injectable } from '@angular/core';\nimport { Capacitor } from '@capacitor/core';\nimport { Geolocation } from '@capacitor/geolocation';\nimport { LocationService } from '../../../../../core/src/app/framework';\nimport { CommonService } from '../../../../../core/src/app/pure/services/common.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NativeLocationService extends LocationService{\n\n\n    constructor() {\n        super();\n    }\n\n    public static locationServiceFactory(){\n\n        var native = Capacitor.isNativePlatform();\n\n        if(native){\n            return new NativeLocationService();\n        }\n\n        return new LocationService();\n\n    }\n\n    getGps(callback: Function): void {\n\n        Geolocation.getCurrentPosition().then((result)=>{\n\n            if(!result) {\n                callback(null);\n                return;\n            }\n\n            var coords = result.coords;\n\n            if(coords.latitude){\n\n                var gps = {\n                    latitude: this.round(coords.latitude, 4),\n                    longitude: this.round(coords.longitude, 4)\n                };\n\n                CommonService.setLocal(\"lastGps\", gps);\n                callback(gps);\n            }else{\n                callback(null);\n            }\n\n\n        }).catch(() => {\n            callback(null);\n        })\n\n    }\n\n    requestPermissions() {\n        Geolocation.requestPermissions().then(rsp => {\n            console.log(\"requestPermissions rsp :\", rsp);\n        }, err => {\n            console.log(\"requestPermissions error :\", err);\n\n        })\n    }\n\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport {\n    // Plugins,\n    // PushNotification,\n    // PushNotificationToken,\n    // PushNotificationActionPerformed,\n    Capacitor\n} from '@capacitor/core';\n\nimport {\n    PushNotifications,\n    PermissionStatus,\n    Token,\n    ActionPerformed,\n    PushNotificationSchema\n} from \"@capacitor/push-notifications\";\nimport { FCM } from '@capacitor-community/fcm';\nimport { ConfigService, Context, DataService } from '../../../../../core/src/app/framework';\nimport { PlatformService } from '../../../../../core/src/app/pure/services/platform.service';\n\n// const { PushNotifications, AigensSdk } = Plugins;\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NativeNotificationService {\n\n    tokenCb: (token: any) => void;\n    notificationCb: (notification: any) => void;\n    actionCb: (notification: any) => void;\n    openNotificationCb: (notification: any) => void;\n    openActionCb: (notification: any) => void;\n\n    doneSetup: boolean = false;\n\n    lastMessageId: string;\n\n    appInfo;\n    constructor(private ngZone: NgZone, private context: Context, private dataService: DataService, private configService: ConfigService, private platformService: PlatformService) {\n\n        console.log(\"NativeNotificationService constructor\");\n\n        this.getAppInfo();\n    }\n    private async getAppInfo() {\n\n        const info = await this.platformService.getAppInfo();\n        console.log(\"getAppInfo:\", info);\n\n        this.appInfo = info;\n    }\n\n    openNotification(openNotificationCb: (notification: any) => void, openActionCb: (notification: any) => void) {\n        this.openNotification = openNotificationCb;\n        this.openActionCb = openActionCb;\n    }\n\n    register(tokenCb: (token: any) => void, notificationCb: (notification: any) => void, actionCb: (notification: any) => void) {\n\n        this.tokenCb = tokenCb;\n        this.notificationCb = notificationCb;\n        this.actionCb = actionCb;\n\n        if (!this.doneSetup) {\n            this.setup();\n        } else {\n            PushNotifications.register();\n        }\n\n    }\n\n    subscribeTopic(topic: string) {\n        if (!topic) return\n        FCM.subscribeTo({ topic: topic })\n            .then((r) => {\n                console.log(`subscribed to topic ` + topic);\n            })\n            .catch((err) => console.log(err));\n\n    }\n\n    public subscribeGlobalTopic(brandId) {\n        if (!brandId) return;\n\n        var topic = \"B\" + brandId;\n        if (!this.configService.isPrd()) {\n            topic = topic + \"-test\";\n        }\n        console.log(\"try subscribe topic\", topic);\n        this.subscribeTopic(topic);\n    }\n\n    public hasPermission(callback: (granted: boolean) => void) {\n        if (!Capacitor.isNativePlatform()) {\n            callback && callback(false);\n            return;\n        }\n        // if (Capacitor.getPlatform() == 'android') {\n        //     var message = {\n        //         method: \"checkNotificationPermissions\",\n        //         service: \"TempService\",\n        //         params: {\n\n        //         }\n        //     }\n        //     AigensSdk.invoke(message).then((result) => {\n        //         console.log(\"SDK Result\", result);\n        //         let granted = result && result.granted || false;\n        //         callback && callback(granted);\n        //     });\n        //     return;\n        // }\n        PushNotifications.requestPermissions().then((result: PermissionStatus) => {\n\n            callback && callback(result?.receive == \"granted\");\n        });\n    }\n\n    private async setup() {\n\n        console.log(\"notification setup called\");\n\n\n        // Request permission to use push notifications\n        // iOS will prompt user and return if they granted permission or not\n        // Android will just grant without prompting\n        let permStatus = await PushNotifications.checkPermissions();\n\n        if (permStatus.receive === 'prompt') {\n            permStatus = await PushNotifications.requestPermissions();\n        }\n\n        if (permStatus.receive !== 'granted') {\n            console.warn('User denied permissions!');\n            return\n        }\n\n        this.doneSetup = true;\n        await PushNotifications.register();\n\n\n        // PushNotifications.requestPermissions().then((result: PermissionStatus) => {\n        //     if (result?.receive == \"granted\") {\n        //         // Register with Apple / Google to receive push via APNS/FCM\n        //         this.doneSetup = true;\n        //         PushNotifications.register();\n        //     } else {\n        //         // Show some error\n        //     }\n        // });\n\n        // Get FCM token instead the APN one returned by Capacitor\n        /**\n        * Get fcm token to eventually use from a serve\n        *\n        * Recommended to use this instead of\n        * @usage\n        * ```typescript\n        * PushNotifications.addListener(\"registration\", (token) => {\n        *   console.log(token.data);\n        * });\n        * ```\n        * because the native capacitor method, for apple, returns the APN's token\n        */\n        if (Capacitor.getPlatform() === 'ios') {\n            FCM.getToken()\n                .then((r) => {\n                    if (this.tokenCb) {\n                        this.ngZone.run(() => {\n                            this.tokenCb(r.token);\n                        });\n                    }\n                })\n                .catch((err) => console.log(err));\n        } else if (Capacitor.getPlatform() === 'android') {\n            // On success, we should be able to receive notifications\n            PushNotifications.addListener('registration',\n                (token: Token) => {\n                    console.log('Push registration success, token: ' + token.value);\n                    if (this.tokenCb) {\n                        this.ngZone.run(() => {\n                            this.tokenCb(token.value);\n                        });\n                    }\n                }\n            );\n        }\n\n\n\n\n        // Some issue with our setup and push will not work\n        PushNotifications.addListener('registrationError',\n            (error: any) => {\n                console.log('Error on registration: ' + JSON.stringify(error));\n                //alert('Error on registration: ' + JSON.stringify(error));\n\n            }\n        );\n\n        // Show us the notification payload if the app is open on our device\n        PushNotifications.addListener('pushNotificationReceived',\n            (notification: PushNotificationSchema) => {\n                console.log('Push received: ' + JSON.stringify(notification));\n                //alert('Push received: ' + JSON.stringify(notification));\n\n                // if (this.lastMessageId === notification.id) {\n                //     return;\n                // }\n\n                // this.lastMessageId = notification.id ;\n\n                if (this.notificationCb) {\n                    this.ngZone.run(() => {\n                        this.notificationCb(notification);\n                        this.openNotificationCb?.(notification);\n                    });\n                }\n            }\n        );\n\n        // Method called when tapping on a notification\n        PushNotifications.addListener('pushNotificationActionPerformed',\n            (notificationAction: ActionPerformed) => {\n                console.log('Push action performed: ' + JSON.stringify(notificationAction));\n                //alert('Push action performed: ' + JSON.stringify(notification));\n                if (this.actionCb) {\n                    this.ngZone.run(() => {\n                        this.actionCb(notificationAction.notification);\n                        this.openActionCb?.(notificationAction.notification);\n                    });\n                }\n            }\n        );\n\n\n    }\n\n    async registerPushToken(token: string,) {\n        if (!Capacitor.isNativePlatform()) return;\n\n        if (!this.appInfo) {\n            const info = await this.platformService.getAppInfo();\n            this.appInfo = info;\n        }\n\n        const appId = this.appInfo?.id;\n        if (!this.context?.brandId || !this.context?.member || !appId) {\n            console.log(\"missing something\");\n            return;\n        }\n\n        const url = '/api/v1/crm/pushregister.json';\n\n        const params = {\n            brandId: this.context.brandId,\n            token: token,\n            app: appId\n        };\n\n        this.dataService.postWithParams(url, params).subscribe(\n            data => {\n                console.log(\"Reged push to server\", data);\n                if (data) {\n                    this.configService.setLocal(\"lastRegToken\", token);\n\n                }\n            },\n            err => {\n                console.log(\"registerPushToken err:\", err);\n\n            }\n        );\n\n    }\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { App } from '@capacitor/app';\nimport { Browser } from '@capacitor/browser';\nimport { Capacitor } from '@capacitor/core';\nimport { Device } from '@capacitor/device';\nimport { AndroidSettings, IOSSettings, NativeSettings } from 'capacitor-native-settings';\nimport { PlatformService } from '../../../../../core/src/app/pure/services/platform.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NativePlatformService extends PlatformService {\n\n\n    appInfo: any;\n\n    constructor(injector: Injector) {\n\n        super(injector);\n\n\n        console.log(\"NativePlatformService constructor2\");\n\n        this.init();\n\n\n        /*\n        App.addListener('appStateChange', ({ isActive }) => {\n            console.log('App state changed. Is active?', isActive);\n        });\n\n        App.addListener('appUrlOpen', data => {\n            console.log('App opened with URL:', data);\n        });\n\n        App.addListener('appRestoredResult', data => {\n            console.log('Restored state:', data);\n        });\n        */\n\n    }\n\n    private init() {\n\n        if (this.isNative()) {\n\n            console.log(\"getting native app info!\");\n\n            App.getInfo().then(appInfo => {\n                this.appInfo = appInfo;\n                console.log(\"info\", appInfo);\n\n            });\n        }\n\n    }\n\n    isNative() {\n        var native = Capacitor.isNativePlatform();\n        return native;\n    }\n\n    getVersion(){\n        return this.appInfo?.version ?? '';\n    }\n\n    getAppInfo(): Promise<any> {\n\n\n        if(this.appInfo){\n            return Promise.resolve(this.appInfo);\n        }else if(!this.isNative()){\n            return Promise.resolve({});\n        }else{\n            return App.getInfo();\n        }\n\n    }\n\n    getAppInfoInstant(){\n        return this.appInfo;\n    }\n\n    getNativePlatform() {\n        var platform = Capacitor.getPlatform();\n\n        return platform;\n    }\n\n    getNativeAppId() {\n        return this.appInfo?.id;\n    }\n\n    /**\n     * open phone's setting page\n     * @returns\n     */\n    async openSettingsPage(): Promise<any> {\n        const platform = (await Device.getInfo()).platform;\n        if(platform === 'ios') {\n            return NativeSettings.openIOS({\n                option: IOSSettings.App,\n              });\n        } else if(platform === 'android') {\n            return NativeSettings.openAndroid({\n                option: AndroidSettings.ApplicationDetails,\n            });\n        }\n    }\n\n    openExternalLink(url: string): void {\n        Browser.open({ url });\n    }\n\n}\n","import { Injectable, Injector } from '@angular/core';\n// import { Storage } from '@capacitor/storage';\nimport { Preferences } from '@capacitor/preferences';\nimport * as LZUTF8 from 'lzutf8';\nimport { StorageService } from '../../../../../core/src/app/framework/services/storage.service';\nimport { CommonService } from '../../../../../core/src/app/pure/services/common.service';\n\n@Injectable({\n    providedIn: 'root'\n})\nexport class NativeStorageService extends StorageService {\n\n\n    public static prohibitWritingToStorage = false;\n    public static fromLogout = false;\n    constructor(injector: Injector) {\n\n        console.log(\"NativeStorageService constructor\");\n\n        super(injector);\n\n\n    }\n\n\n    setStorage(key: string, object: any, compress: boolean = false): Promise<any> {\n\n        /**\n         * Sometimes we need to prohibit writing to storage\n         * * If get storage takes 3 seconds, get to order and then write into storage.\n         * * It takes 1 second to remove order, and there will be a problem. The order is deleted, but it still exists in storage, so we need to write an attribute to prohibit writing to storage.\n         * ** 假如get storage 需要 3秒, get 到 order 再写入 storage\n         * ** remove order 需要1秒, 就会出现一个问题. 订单被删除了, storage 中仍存在, 所以需要写一个属性去禁止写入 storage.\n         */\n        if (NativeStorageService.prohibitWritingToStorage) {\n            return Promise.resolve(null);\n        }\n\n        if(object == null){\n\n            return Preferences.remove({key: key});\n\n        }\n\n        if(compress){\n\n            return this.setStorageCompress(key, object);\n        }else{\n\n            return Preferences.set({key: key, value: CommonService.serialize(object)});\n        }\n    }\n\n\n    getStorageCompress(key: string): Promise<any>{\n        return this.getStorage(key, true);\n    }\n\n\n    setStorageCompress(key: string, object: object): Promise<any> {\n\n        var promise = new Promise((resolve, reject) => {\n\n            var str = JSON.stringify(object);\n            console.log(\"before compress\", str.length);\n\n            LZUTF8.compressAsync(str, { outputEncoding: \"StorageBinaryString\" }, function (result, error) {\n                if (error === undefined){\n                    console.log(\"after compress\", result.length);\n\n                    //localForage.setItem(key, result);\n                    Preferences.set({key: key, value: result});\n\n                    resolve(result);\n                }\n                else{\n                    console.log(\"Compression error\", error);\n                    reject(error.message);\n                }\n\n            });\n\n        });\n\n        return promise;\n    }\n\n    async removeItem(key) {\n        if (!key) return;\n        await Preferences.remove({key: key});\n    }\n\n    async getStorageKeys() {\n        const r = await Preferences.keys();\n        return r.keys || [];\n    }\n\n    getStorage(key: string, compress: boolean = false): Promise<any>{\n\n\n        var promise = new Promise((resolve, reject) => {\n\n\n            Preferences.get({key: key}).then(result =>{\n\n                var value = result.value;\n\n                if(value == null || value == 'undefined'){\n                    resolve(null);\n                }else if(!compress){\n\n                    resolve(CommonService.deserialize(value));\n                }else{\n\n                    console.log(\"compressed length\", value['length']);\n\n                    LZUTF8.decompressAsync(value, { inputEncoding: \"StorageBinaryString\" }, function (result, error) {\n                        if (error === undefined){\n                            console.log(\"decompressed length\", result.length);\n\n                            //var obj = JSON.parse(result);\n                            var obj = CommonService.deserialize(result)\n                            resolve(obj);\n                        }\n                        else{\n                            console.log(\"Decompression error\", error);\n                            resolve(null);\n                        }\n\n                    });\n                }\n\n            });\n\n\n        });\n\n        return promise;\n    }\n\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-empty',\n  templateUrl: './empty.component.html',\n  styleUrls: ['./empty.component.scss']\n})\nexport class EmptyComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","import { Component, ContentChild, Input, OnInit, TemplateRef } from '@angular/core';\n\n@Component({\n    selector: 'app-grid-list',\n    templateUrl: './grid-list.component.html',\n    styleUrls: ['./grid-list.component.scss']\n})\nexport class GridListComponent implements OnInit {\n\n    @ContentChild(TemplateRef) templateVariable: TemplateRef<any>;\n\n    @Input('contents') contents: any[] = [];\n    @Input('hideAfter') hideAfter: number = 1;\n    @Input('flexDirection') flexDirection: string = \"row\";\n\n\n    showAll: boolean = false;\n\n    constructor() { }\n\n    ngOnInit(): void {\n    }\n\n    toggle(){\n\n        this.showAll = !this.showAll;\n\n    }\n}\n","<div class=\"list w-full justify-center p-5 \" [ngStyle]=\"{ 'flex-direction': flexDirection }\">\n    <ng-container *ngFor=\"let content of contents; let i = index\">\n        <div class=\"item\" *ngIf=\"showAll || i < hideAfter\">\n            <ng-template\n                [ngTemplateOutlet]=\"templateVariable\"\n                [ngTemplateOutletContext]=\"{ content: content }\"\n            ></ng-template>\n        </div>\n    </ng-container>\n\n    <button class=\"btn\" (click)=\"toggle()\">\n        <app-icon\n            *ngIf=\"!showAll && hideAfter < contents?.length\"\n            name=\"more_horiz\"\n            source=\"mat\"\n        ></app-icon>\n        <app-icon *ngIf=\"showAll\" name=\"expand_less\" source=\"mat\"></app-icon>\n    </button>\n</div>\n\n<!--\n<div class=\"action\">\n    <span class=\"spacer\"></span>\n    <button (click)=\"toggle()\">\n        <app-icon name=\"more_horiz\" source=\"mat\"></app-icon>\n    </button>\n</div>\n-->\n","import { Component, HostBinding, Input, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-icon',\n    templateUrl: './icon.component.html',\n    styleUrls: ['./icon.component.scss']\n})\nexport class IconComponent implements OnInit {\n\n    @Input() size;\n    @Input() name;\n    @Input() var : string;\n    @Input() source = 'custom'; // can be custom or mat\n\n    @HostBinding('style.height')\n    height = '24px';\n\n    fontsize: string;\n    matClass: string;\n  \n    constructor() {\n       \n    }\n  \n    ngOnInit(): void {\n\n        if(this.size){\n            this.fontsize = this.size + \"px\";\n        }else{\n            this.fontsize = \"inherit\";\n        }\n\n        this.height = this.fontsize;\n\n        if(this.source == 'mat'){\n            this.matClass = \"material-icons\";\n\n            if(this.var){\n                this.matClass += \"-\" + this.var;\n            }\n        }\n\n        \n    }\n\n}\n","<ng-container *ngIf=\"name\" [ngSwitch]=\"source\">\n\n    <span *ngSwitchCase=\"'mat'\" class=\"{{matClass}}\" [ngStyle]=\"{ 'font-size': fontsize, 'line-height': '1em', 'width': '1em', 'height': '1em' }\">{{name}}</span>\n\n    <svg *ngSwitchDefault [ngStyle]=\"{ 'font-size': fontsize, height: '1em', width: '1em', fill:'currentColor', display: 'inline-block' }\">\n        <use [attr.href]=\"'assets/icons/sprites.svg#' + name\"></use>\n    </svg>\n</ng-container>\n\n\n\n","import { Component, Input, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-img',\n    templateUrl: './img.component.html',\n    styleUrls: ['./img.component.scss']\n})\nexport class ImgComponent implements OnInit {\n\n    @Input('src') src: string;\n    @Input('content') content: any;\n    @Input('imgName') imgName: string = 'default';\n    @Input('ratio') ratio: number = 1;\n    @Input('icon') icon: string = \"\";\n    @Input('animate') animate: boolean = false;\n    @Input('pw') pw: number = 500;\n    @Input('class') class: string = \"\";\n    @Input('fallback') fallback: string = \"\";\n    @Input('background') background: string = \"transparent\";\n    @Input('type') type: string = \"\";\n    @Input('constrain') constrain: 'cover' | 'contain' = 'cover';\n    @Input('hideEmpty') hideEmpty: boolean = false;\n    // @Input('locale') locale: string = null;\n    oldContent;\n\n    @Input()\n    set locale(_locale: string) {\n        if(_locale !== this.locale){\n            this._locale = _locale;\n            this.initData();\n        }\n    }\n\n    get locale(): string{\n        return this._locale;\n    }\n\n\n    loaded: boolean = false;\n    useAnimate: boolean = false;\n\n    //this control the ratio\n    paddingTop: string = \"100%\";\n\n    height: string = \"\";\n\n    startTime: number;\n    loadedTime: number;\n\n    _locale: string = null;\n\n\n    constructor() {\n\n        this.startTime = new Date().getTime();\n\n    }\n\n    ngOnInit(): void {\n\n        this.useAnimate = this.animate;\n        var ratio = (1 / this.ratio) * 100;\n        this.paddingTop = ratio + \"%\";\n\n        this.initData();\n    }\n\n    ngDoCheck(): void {\n        if(this.oldContent !== this.content){\n            this.initData();\n            this.oldContent = this.content;\n        }\n    }\n\n    initData(): void {\n        if(this.content){\n\n            //console.log(\"IMG CONTENT\", this.content);\n\n            var imgs =  this.content.images  || this.content[0]?.images;\n\n            if(imgs){\n                var img = imgs[this.imgName] || imgs['logo'];\n                if(img){\n                    this.src = this.getImgLocaleUrl(img);\n                }\n            }\n\n        }\n\n        if(this.src){\n            this.src = ImgComponent.patchUrl(this.src, this.pw);\n        }\n\n        if(this.src && this.type == 'background'){\n\n            this.background = 'no-repeat center url(' + this.src + ') ';\n            this.paddingTop = \"0px\";\n            this.height = \"100%\";\n        }\n\n    }\n\n    //https://lh3.googleusercontent.com/4U4a6TeGMNnCUk4hWhSMR90lPT7GZNkBLk-YmD2QRC-nRnRZGdug5vv8hwrF7ClO0wjTW4zDQo7jeTcyScLx3pmxaUsP\n    public static patchUrl(url: string, width: number): string{\n\n        var aigens = window['aigens'];\n\n        if (url) {\n\n            var isGoogle = url.indexOf(\"googleusercontent.com\") != -1 || url.indexOf(\"image.order.place\") != -1 || url.indexOf(\"image.aigens.com\") != -1 || url.indexOf(\"imagetest.aigens.com\") != -1;\n\n            //if url is google and not already enchanced\n            if(isGoogle){\n\n                var eqIndex = url.lastIndexOf(\"=\");\n                if(eqIndex != -1){\n                    var x = url.substring(0, eqIndex);\n                    url = x;\n                }\n\n                var segs = [];\n\n                if (width > 0 && url.indexOf('=w') == -1) {\n                    segs.push('w' + width);\n                }\n\n                if (width == 0 && url.indexOf('=s') == -1) { // use original size if width is 0\n                    segs.push('s0');\n                }\n\n                var webp = aigens?.webp;\n                if(webp){\n                    segs.push(\"rw\");\n                }\n\n                if(segs.length > 0){\n                    url += \"=\" + segs.join(\"-\");\n                }\n            }\n\n            if(isGoogle && aigens?.network == 'cn'){\n\n                var imgHost = aigens.profile.imgHost2;\n                if(imgHost){\n\n                    var path = url.substring(url.lastIndexOf('/'));\n\n                    url = imgHost + path;\n                }\n            }\n\n        }\n\n        return url;\n    }\n\n    getImgLocaleUrl(img: any): string {\n        if(!this.locale) {\n            return img.url;\n        }\n\n        const urlName = 'url_' + this.locale;\n        if(urlName in img) {\n            return img[urlName];\n        }\n        return img.url;\n    }\n\n    onload(){\n\n        this.loadedTime = new Date().getTime();\n\n        var diff = this.loadedTime - this.startTime;\n\n        if(diff < 500){\n            this.useAnimate = false;\n        }\n\n        this.loaded = true;\n    }\n\n}\n","<div *ngIf=\"src || !hideEmpty\" class=\"wrapper\" [ngStyle]=\"{'padding-top': paddingTop, 'background': background, 'height': height}\">\n\n    <app-icon class=\"center\" *ngIf=\"!src && fallback == '' && icon\" [name]=\"icon\" source=\"mat\"></app-icon>\n\n    <div class=\"center w-full p-3 noimg-cat-name\" *ngIf=\"!src && fallback == 'name' && content\">{{content.name}}</div>\n    <div class=\"center\" *ngIf=\"!src && fallback == 'prefix' && content?.name\">{{content.name[0]}}</div>\n\n    <img *ngIf=\"src && type !='background'\" src=\"{{src}}\" class=\"{{class}}\" [ngClass]=\"{'fadeIn': useAnimate && loaded, 'loading': useAnimate && !loaded}\" (load)=\"onload()\" [ngStyle]=\"{'object-fit': constrain}\"/>\n\n</div>\n","import { Component, ContentChild, Input, OnInit, TemplateRef } from '@angular/core';\n\n@Component({\n  selector: 'app-row-list',\n  templateUrl: './row-list.component.html',\n  styleUrls: ['./row-list.component.scss']\n})\nexport class RowListComponent implements OnInit {\n\n    @ContentChild(TemplateRef) templateVariable: TemplateRef<any>;\n\n    @Input('contents') contents: any[] = [];\n    @Input('hideAfter') hideAfter: number = 1;\n    @Input('flexDirection') flexDirection: string = \"column\";\n\n\n    showAll: boolean = false;\n\n    constructor() { }\n\n    ngOnInit(): void {\n    }\n\n    toggle(){\n\n        this.showAll = !this.showAll;\n\n    }\n\n}\n","<div class=\"list w-full\" [ngStyle]=\"{ 'flex-direction': flexDirection }\">\n    <ng-container *ngFor=\"let content of contents; let i = index\">\n        <div class=\"item\" *ngIf=\"showAll || i < hideAfter\">\n            <ng-template\n                [ngTemplateOutlet]=\"templateVariable\"\n                [ngTemplateOutletContext]=\"{ content: content }\"\n            ></ng-template>\n        </div>\n    </ng-container>\n\n    <button class=\"btn\" (click)=\"toggle()\">\n        <app-icon\n            *ngIf=\"!showAll && hideAfter < contents?.length\"\n            name=\"more_horiz\"\n            source=\"mat\"\n        ></app-icon>\n        <app-icon *ngIf=\"showAll\" name=\"expand_less\" source=\"mat\"></app-icon>\n    </button>\n</div>\n","import { NavigationMenuItem, NavigationMenuService } from '@aigens/core/src/app/pure/services/navigation-menu.service';\nimport { Component, Input, OnInit, Output, EventEmitter, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\n\nexport interface Tab {\n    i18n: string;\n    route: any;\n    icon: string;\n    activeIcon?: string;\n    matchName: string;\n    url?: string;\n    iconSrc?: string;\n    external?: string;\n}\n@Component({\n    selector: 'app-tab-bar',\n    templateUrl: './tab-bar.component.html',\n    styleUrls: ['./tab-bar.component.scss'],\n})\nexport class TabBarComponent implements OnInit {\n    @Input() tabs: NavigationMenuItem[] = []; // tab contents\n    @Input() activeColor: any = 'var(--P)'; // the color of tab when active\n    @Input() defaultColor: any = '#c4c4c4';\n    @Input() backgroundColor: string = '#FFFFFF';\n    @Input() enableClickAnimation: boolean = false;\n    @Output() tabSelected = new EventEmitter<NavigationMenuItem>();\n\n    protected router: Router;\n    protected navigationMenuService: NavigationMenuService;\n\n    constructor(protected injector: Injector) {\n        this.router = injector.get(Router);\n        this.navigationMenuService = injector.get(NavigationMenuService);\n\n    }\n\n    ngOnInit(): void {\n    }\n\n    isTabActive(tab: NavigationMenuItem): boolean {\n        const url = this.router.url;\n        return this.navigationMenuService.hasRouteMatch(tab, url);\n    }\n\n    tabClicked(tab: NavigationMenuItem) {\n        this.tabSelected.emit(tab)\n    }\n\n    getIconName(tab: NavigationMenuItem): string {\n        if(!this.isTabActive(tab)) {\n            return tab.icon?.name;\n        }\n\n        if(tab.activeIcon?.name) {\n            return tab.activeIcon?.name;\n        }\n\n        return tab.icon?.name;\n    }\n}\n","<div class=\"tabbar\" [style.background]=\"backgroundColor\">\n    <div matRipple class=\"tab\" *ngFor=\"let tab of tabs\" (click)=\"tabClicked(tab)\" [ngClass]=\"{'animated': enableClickAnimation, 'active': isTabActive(tab), 'bigBtn': tab?.displayType === 'bigBtn' }\"\n    [ngStyle]=\"{ color: isTabActive(tab) ? activeColor : defaultColor }\">\n        <div class=\"wrapper-tabbar-content\">\n            <app-icon [ngStyle]=\"{ color: isTabActive(tab) ? activeColor : defaultColor }\" [name]=\"getIconName(tab)\" size=\"22\" [source]=\"tab?.icon?.src ?? 'custom'\" class=\"icon-tab\">\n            </app-icon>\n            <h3 [ngStyle]=\"{ color: isTabActive(tab) ? activeColor : defaultColor }\" class=\"justify-center align-middle\">\n                {{ tab.title | translate }}\n            </h3>\n        </div>\n    </div>\n</div>\n<div class=\"tabbar-bottom\"></div>\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Pipe({\n    name: 'i18n',\n    pure: true\n})\nexport class LocaleStringPipe implements PipeTransform {\n\n    constructor(private translateService: TranslateService) {\n\n    }\n\n    transform(content, lang: string = null, field: string = \"name\") {\n\n        if(!content) return \"\";\n\n        if(typeof content == 'string'){\n            return this.translateService.instant(content);\n        }\n\n        //return value.name;\n        return this.lookup(content, lang, field);\n    }\n\n    private lookup(content, lang:string, field: string) {\n\n        var result = null;\n\n        //var lang = window['aigens']?.context?.userLang;\n        //console.log(\"i18n pipe\", content, field,  lang);\n\n        if (lang) {\n            result = content[field + \"_\" + lang];\n        }\n\n        if (!result) {\n            result = content[field];\n        }\n\n        return result;\n    }\n\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { RouterModule } from '@angular/router';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { GridListComponent } from './components/grid-list/grid-list.component';\nimport { IconComponent } from './components/icon/icon.component';\nimport { ImgComponent } from './components/img/img.component';\nimport { RowListComponent } from './components/row-list/row-list.component';\nimport { TabBarComponent } from './components/tab-bar/tab-bar.component';\nimport { LocaleStringPipe } from './pipes/locale-string';\nimport { EmptyComponent } from './components/empty/empty.component';\n\nconst MY_COMPONENTS = [\n    ImgComponent, IconComponent, GridListComponent, TabBarComponent, RowListComponent\n];\n\nconst MY_PIPES = [\n    LocaleStringPipe\n];\n\n@NgModule({\n    declarations: [\n        ...MY_COMPONENTS,\n        ...MY_PIPES,\n        EmptyComponent,\n    ],\n    imports: [\n        CommonModule,\n        TranslateModule,\n        RouterModule,\n\n    ],\n    exports: [\n        ...MY_COMPONENTS,\n        ...MY_PIPES,\n    ]\n})\nexport class UiModule { }\n","import { SubscribeService } from '../../../../../../core/src/app/pure/services/subscribe.service';\nimport { RoutingService } from '../../../../../../core/src/app/pure/services/routing.service';\nimport { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-favorite-items-button',\n  templateUrl: './favorite-items-button.component.html',\n  styleUrls: ['./favorite-items-button.component.scss']\n})\nexport class FavoriteItemsButtonComponent implements OnInit {\n\n    context: any;\n\n    constructor(private routingService: RoutingService, private ss: SubscribeService) {\n        this.context = ss;\n   }\n\n  ngOnInit(): void {\n  }\n\n  favoriteClicked() {\n    this.routingService.navigate(`/order/store/${this.context.storeId}/favorite-item`, {});\n\n}\n\n}\n","<button class=\"favorite-items-btn mat-focus-indicator mat-button mat-button-base\" (click)=\"favoriteClicked()\" >\n    <app-icon name=\"favorite_border\" source=\"mat\" [size]=\"20\"></app-icon>\n</button>\n","import { PageParams } from '@aigens/core/src/app/pure/base/page-params';\nimport { PlatformService } from '@aigens/core/src/app/pure/services/platform.service';\nimport { RoutingService } from '@aigens/core/src/app/pure/services/routing.service';\nimport { Component, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { LazyService } from '../../../../../../core/src/app/pure/services/lazy.service';\n\n@Component({\n    selector: 'app-footer',\n    templateUrl: './footer.component.html',\n    styleUrls: ['./footer.component.scss'],\n})\nexport class FooterComponent implements OnInit {\n    @Input() showPaymentIcons = false;\n\n    context: any;\n\n    brand: any;\n\n    agreements: any[];\n\n    payments: string[] = [];\n\n    navParams: PageParams;\n\n    constructor(private routingService: RoutingService, private lazyService: LazyService, private platformService: PlatformService, private route: ActivatedRoute) {\n        this.context = window['aigens'].context;\n\n        console.log('FooterComponent construct');\n    }\n\n    ngOnInit(): void {\n        this.navParams = new PageParams();\n        this.navParams.route = this.route;\n\n        if (this.context.agreements) {\n            this.agreements = this.agreementSorting('home', null, this.navParams.get('mode') ?? null);\n        }\n\n        const paymentIcons = this.context?.config?.data?.paymentIcons;\n        if (typeof paymentIcons === 'object') {\n            Object.keys(paymentIcons).forEach((x) => {\n                if (paymentIcons[x] === true && this.getPaymentIcon(x) !== '') {\n                    this.payments.push(x);\n                }\n            });\n        }\n        if (Array.isArray(paymentIcons)) {\n            paymentIcons?.forEach((x) => {\n                if (this.getPaymentIcon(x) !== '') {\n                    this.payments.push(x);\n                }\n            });\n        }\n    }\n\n    getPaymentIconWithPath(paymentMethod: string): string {\n        const paymentIcon = this.getPaymentIcon(paymentMethod);\n        if (paymentIcon === '') {\n            return '';\n        }\n        return `assets/icons/svg/${paymentIcon}.svg`;\n    }\n\n    getPaymentIcon(paymentMethod: string): string {\n        switch (paymentMethod) {\n        case 'creditcard':\n            return 'ios-payment-ccard';\n        case 'googlepay':\n        case 'google':\n            return 'ios-payment-gpay';\n        case 'applepay':\n            return 'ios-payment-apple';\n        case 'gopay':\n            return 'ios-payment-gopay';\n        case 'ewallet':\n            return 'ios-payment-ewallet';\n        case 'qris':\n            return 'ios-payment-qris';\n        case 'virtualaccount':\n            return 'ios-payment-virtualaccount';\n        case 'alipay':\n            return 'ios-payment-alipay';\n        case 'alipayHK':\n            return 'ios-payment-alipay-hk';\n        case 'alipayCN':\n            return 'ios-payment-alipay-cn';\n        case 'cash':\n            return 'ios-payment-cashpay';\n        case 'gcash':\n            return 'ios-payment-gcash-new';\n        case 'paymaya':\n            return 'ios-payment-paymaya';\n        case 'master':\n            return 'ios-payment-mastercard';\n        case 'visa':\n            return 'ios-payment-visa';\n        case 'JCB':\n            return 'ios-payment-JCB';\n        case 'chargetoroom':\n            return 'ios-payment-chargetoroom';\n        case 'payme':\n            return 'ios-payment-payme';\n        case 'wechat':\n            return 'ios-payment-wechat';\n        case 'octopus':\n            return 'ios-payment-octopus';\n        case 'unionpay':\n            return 'ios-payment-unionpay';\n        default:\n            return '';\n        }\n    }\n\n    agreementSorting(trigger: string, feature?: string, mode = '') {\n        if (feature == 'active') {\n            return this.context?.agreements?.filter((item) => this.isAgreementValid(item, trigger, mode) && !item.passive);\n        }\n        if (feature == 'passive') {\n            return this.context?.agreements?.filter((item) => this.isAgreementValid(item, trigger, mode) && item.passive);\n        }\n\n        return this.context?.agreements?.filter((item) => this.isAgreementValid(item, trigger, mode));\n    }\n\n    isAgreementValid(agreementItem: any, trigger: string, mode = ''): boolean {\n        if (!agreementItem.enabled) {\n            return false;\n        }\n\n        if (agreementItem?.trigger?.indexOf(trigger) < 0) {\n            return false;\n        }\n\n        const channel = this.platformService.getMenuChannel();\n        if (agreementItem.channels?.length > 0 && agreementItem.channels?.indexOf(channel) < 0) {\n            return false;\n        }\n\n        if (mode && agreementItem.modes?.length > 0 && agreementItem.modes?.indexOf(mode) < 0) {\n            return false;\n        }\n\n        const storeId = this.routingService.getQuery('storeId') || this.context.storeId;\n        if (agreementItem.storeIds && storeId && agreementItem.storeIds.indexOf(storeId) < 0){\n            return false;\n        }\n\n        return true;\n    }\n\n    // (click) = \"agreementClicked([agreement])\"\n    agreementClicked(agreement: any[]): void {\n        // Peter: Pass in a event emitter or find other way to do it for now\n\n        // this.agreementService.showAgreement(agreement, \"home\")\n        const agreementService = this.lazyService.getService('AgreementService');\n        if (!agreementService) return;\n\n        console.log('agg clicked', agreement);\n\n        agreementService.showAgreement(agreement, 'home');\n    }\n\n    getDeviceConfig(key: string): any {\n        return this.context?.config?.data?.[key] ?? null;\n    }\n}\n","<div class=\"block w-full\">\n    <div class=\"footer-width\" *ngIf=\"(payments && payments.length > 0) && showPaymentIcons\">\n        <div class=\"flex justify-around w-full\">\n            <div *ngFor=\"let icons of payments\">\n                <app-img [src]=\"this.getPaymentIconWithPath(icons)\" constrain=\"contain\"></app-img>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"footer-width\">\n        <div class=\"justify-start flex\">\n            <ng-container *ngFor=\"let agreement of agreements; let i = index\">\n                <div class=\"footer-shortcuts\" (click)=\"agreementClicked([agreement])\">\n                    <h3>{{agreement | i18n: context.userLang: 'title'}}</h3>\n                </div>\n                <div *ngIf=\"i < agreements.length - 1\" class=\"mx-2 -mt-0.5\"> |</div>\n            </ng-container>\n        </div>\n\n        <div class=\"flex items-center\">\n            <h4>Powered by</h4>\n            <img class=\"img-aigens\" src=\"assets/images/aigens_logo.svg\" />\n            <ng-container *ngIf=\"getDeviceConfig('displayEpointLogo')\">\n                <img class=\"img-aigens ml-2 py-0.5\" src=\"assets/images/pos/epoint-footer.svg\" />\n            </ng-container>\n        </div>\n    </div>\n</div>\n","import { Component, EventEmitter, Injector, OnInit, Output } from '@angular/core';\nimport { CommonService } from '../../../../../../core/src/app/pure/services/common.service';\nimport { SubscribeService } from '@aigens/core/src/app/pure/services/subscribe.service';\n\n@Component({\n    selector: 'app-language-select',\n    templateUrl: './language-select.component.html',\n    styleUrls: ['./language-select.component.scss']\n})\nexport class LanguageSelectComponent implements OnInit {\n\n    showDropdown: boolean = false;\n    context: any;\n\n    @Output() changed: EventEmitter<any> = new EventEmitter<any>();\n\n    constructor(private injector: Injector, private subscribeService: SubscribeService) {\n\n        this.context = window['aigens'].context;\n\n\n        if (!this.context.userLang) {\n            this.languageClicked(this.context.language);\n        }\n\n    }\n\n    get languages() {\n        // sometimes languages in brand lever is different from store level\n        return this.context?.languages || this.context?.store?.languages || [];\n    }\n\n    ngOnInit(): void {\n        setTimeout(() => {\n            this.context.userLang = this.getLocale();\n        }, 500);\n\n    }\n\n    selectClicked() {\n\n        this.showDropdown = !this.showDropdown;\n\n    }\n\n    dismissClicked() {\n        this.showDropdown = false;\n    }\n\n    languageClicked(lang) {\n\n        this.showDropdown = false;\n\n        /*\n        var oldLang = this.t.currentLang;\n        if(oldLang == lang){\n            console.log(\"same lang\");\n            return;\n        }\n        */\n\n        this.context.userLang = lang;\n\n        this.subscribeService.next(\"language\", lang)\n        this.subscribeService.next(\"userLang\", lang)\n\n        if (this.changed) {\n            this.changed.emit(lang);\n        }\n\n    }\n\n\n    getLocale(){\n        return CommonService.getLocal(\"locale\");\n    }\n\n    setLocale(lang: string){\n        return CommonService.setLocal(\"locale\", lang);\n    }\n\n\n}\n","<div *ngIf=\"showDropdown\" class=\"overlay z-40\" (click)=\"dismissClicked()\">\n\n</div>\n\n<button class=\"lang-btn mat-focus-indicator mat-button mat-button-base p-0\" (click)=\"selectClicked()\">\n    <app-icon name=\"language\" source=\"mat\" [size]=\"20\"></app-icon>\n    <span class=\"mobile:hidden current-lang\">{{'lang.' + context.userLang | translate}}</span>\n    <app-icon class=\"mobile:hidden lang-arrow\" name=\"expand_more\" source=\"mat\" [size]=\"15\"></app-icon>\n</button>\n\n<div *ngIf=\"showDropdown\"\n    class=\"desfj380df absolute right-0 top-7 z-50 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none\"\n    role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"menu-button\" tabindex=\"-1\">\n    <div class=\"py-1\" role=\"none\">\n\n        <a class=\"text-gray-700 block px-4 py-2 text-sm cursor-pointer\" role=\"menuitem\" tabindex=\"-1\"\n            *ngFor=\"let lang of languages\" (click)=\"languageClicked(lang)\" id=\"menu-item-0\">{{'lang.' + lang |\n            translate}}</a>\n\n\n    </div>\n</div>\n","import { PlatformService } from '@aigens/core/src/app/pure/services/platform.service';\nimport { RoutingService } from '@aigens/core/src/app/pure/services/routing.service';\nimport { Location } from '@angular/common';\nimport { Component, DoCheck, EventEmitter, Injector, Input, OnChanges, OnInit, Output, SimpleChanges } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { firstValueFrom } from 'rxjs';\nimport { SettingManager } from '@aigens/core/src/app/pure/managers/setting-manager';\nimport { LazyService } from '@aigens/core/src/app/pure/services/lazy.service';\n\n\n@Component({\n    selector: 'app-nav-bar',\n    templateUrl: './nav-bar.component.html',\n    styleUrls: ['./nav-bar.component.scss']\n})\nexport class NavBarComponent implements OnInit, OnChanges, DoCheck  {\n\n    @Input() title: string = '';\n    @Input() menu: boolean = false;\n    @Input() home: boolean = false;\n    @Input() homeUrl: string;\n    @Input() back: boolean = false;\n    @Input() language: boolean = false;\n    @Input() user: boolean = false;\n    @Input() fullWidth: boolean = false;\n    @Input() fullBackgroundWidth: boolean = false;\n    @Input() hasSignedIn: boolean = false;\n    @Input() menuPath: string = 'side/menu';\n    @Input() refresh: boolean = false;\n    @Input() logo: boolean = true;\n    @Input() favorite: boolean = false;\n\n    // for sdk: after paied to orderDetailPage\n    @Input() forceShowExit: boolean = false;\n    @Input() embedded: boolean = false;\n    @Input() homePage = false; // flag to state this navbar is used in home page or not\n    @Input() search: boolean = false;\n    @Output() refreshClick = new EventEmitter();\n\n    @Input() login = true;\n\n    sdk: boolean = true;\n    showExit: boolean = false;\n\n    context: any;\n\n    oldMemberId = null;\n    oldMemberGuest = null;\n\n    constructor(private injector: Injector, private router: Router, private location: Location, private lazyService: LazyService,\n                private routingService: RoutingService, private route: ActivatedRoute, private platformService: PlatformService , public settingManager: SettingManager ) {\n        this.context = window['aigens'].context;\n        this.embedded = this.platformService.isEmbedded();\n        this.sdk = this.platformService.isSDK();\n\n    }\n\n    ngOnInit(): void {\n        this.injectRouteData();\n\n    }\n\n    ngDoCheck(): void {\n        if(this.context.member?.id !== this.oldMemberId && this.context.member?.guest !== this.oldMemberGuest){\n            this.oldMemberGuest = this.context.member?.guest;\n            this.oldMemberId = this.context.member?.id\n        }\n\n        var canBack = this.routingService.canBack();\n\n        // console.log(\"canBack\", canBack);\n        // console.log('forceShowExit', this.forceShowExit);\n\n        // is sdk or pass forceShowExit = true & missing the backicon\n        this.showExit = (this.sdk && !canBack) || (this.forceShowExit && !this.back);\n        // console.log('forceShowExit', this.forceShowExit);\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.injectRouteData();\n    }\n\n    get languages(): any[] {\n        return this.context?.languages ?? this.context?.store?.languages ?? [];\n    }\n\n    async injectRouteData(): Promise<any> {\n\n        const routeData = (await firstValueFrom(this.route.data))?.navbarConfig ?? {};\n\n        const injectableFields = ['menu', 'home', 'back', 'language', 'user', 'menuPath'];\n\n        for(let index in injectableFields) {\n            const field = injectableFields[index];\n            if(field in routeData) {\n                this[field] = routeData[field];\n            }\n        }\n\n    }\n\n    canLogin(){\n\n        if(!this.user) return false;\n\n        if(this.courtHasFeature('login')) {\n            return true;\n        }\n\n        if (this.context?.brand?.features?.indexOf('login') < 0) {\n            return false;\n        }\n\n        if(!this?.context?.crm) {\n            return false;\n        }\n\n        if(this.context?.crm?.['disabled']) {\n            return false;\n        }\n\n        return true;\n    }\n\n    courtHasFeature(feature: string): boolean {\n        if (!this.context?.court) {\n            return false;\n        }\n        return this.context?.court?.features?.indexOf(feature) >= 0;\n    }\n\n    menuClicked() {\n        var extras = {\n            //    skipLocationChange: true\n        };\n\n\n        const auxInput: any = {};\n        if (this.homePage) {\n            auxInput.homePage = true;\n        }\n\n        const params = {\n            ...this.route.snapshot.queryParams,\n            ...this.route.snapshot.params,\n        }\n\n        this.routingService.navigateModal(this.menuPath, auxInput, {queryParams: params});\n        // this.router.navigate([{outlets: {modal: 'side/menu'}}], {queryParams: this.route.snapshot.queryParams});\n    }\n\n    backClicked() {\n\n\n        this.location.back();\n    }\n\n    homeClicked(){\n        console.log(\"going home natively\", this.homeUrl);\n\n        if (this.homeUrl) {\n            if (this.settingManager.get('keepModeWhenRedirectToHome', false) && this.homeUrl.includes(`mode`)) {\n                this.routingService.navigateByUrl(this.homeUrl, window.location.href, {back: null,clearOrder: null});\n            } else {\n                let mode = null;\n                let canKeepModes = ['web', 'catering', 'byod'];\n                canKeepModes.forEach((m)=> {\n                    if (this.homeUrl.includes(`mode=${m}`)) {\n                        mode = m;\n                    }\n                } )\n                this.routingService.navigateByUrl(this.homeUrl, window.location.href, {back: null,clearOrder: null, mode});\n\n            }\n           \n        } else {\n            this.routingService.goHome(window.location.href);\n        }\n    }\n\n    refreshClicked():void{\n        this.refreshClick.emit(true);\n    }\n\n    closeClicked(){\n        console.log(\"closing\");\n\n        var service = this.lazyService.getService(\"RoutingService\") as any;\n        service?.finish();\n    }\n\n    checkFavorite() {\n         return this.favorite && this.settingManager.get('menu.showFav', false) && this.oldMemberGuest === false;\n    }\n\n}\n","<div class=\"mat-toolbar header mat-toolbar-single-row justify-center\"\n    [ngClass]=\"{ 'full-width': fullWidth, 'embedded': embedded}\">\n\n    <div class=\"flex items-center justify-between w-full\">\n\n        <div left class=\"flex items-center left-box\">\n            <button *ngIf=\"!back && menu && !sdk\" class=\"menu-btn mat-focus-indicator mat-icon-button mat-button-base\"\n                (click)=\"menuClicked()\" data-testid=\"hamburger-menu-button\">\n                <app-icon name=\"menu\" source=\"mat\" [size]=\"24\"></app-icon>\n            </button>\n\n            <!-- change the condition from 'back && !sdk' to 'back' -->\n            <button *ngIf=\"back\" class=\"menu-btn mat-focus-indicator mat-icon-button mat-button-base\"\n                (click)=\"backClicked()\">\n                <app-icon name=\"arrow_back_ios\" source=\"mat\" [size]=\"24\"></app-icon>\n            </button>\n\n            <button *ngIf=\"sdk && !back\" class=\"menu-btn mat-focus-indicator mat-icon-button mat-button-base sdk-back\"\n                (click)=\"closeClicked()\">\n                <app-icon name=\"arrow_back\" source=\"mat\" [size]=\"24\"></app-icon>\n            </button>\n\n            <button *ngIf=\"home && homeUrl && !sdk\" class=\"menu-btn mat-focus-indicator mat-icon-button mat-button-base\"\n                (click)=\"homeClicked()\">\n                <app-icon name=\"home\" source=\"mat\" [size]=\"24\"></app-icon>\n            </button>\n\n\n            <app-img *ngIf=\"logo && (context?.brand || context?.court)\" class=\"brand-logo-desktop\" [content]=\"context?.brand || context?.court\" constrain=\"contain\" [hideEmpty]=\"true\"></app-img>\n\n            <span *ngIf=\"title\" class=\"title-brand\">{{title}}</span>\n\n            <ng-content select=\"[left]\"></ng-content>\n\n        </div>\n\n\n        <div center>\n            <span class=\"spacer\"></span>\n\n        </div>\n\n\n        <div right class=\"flex items-center right-box\">\n\n            <ng-content select=\"[right]\"></ng-content>\n\n            <app-search-button *ngIf=\"search && !embedded\" class=\"ml-4 mobile:ml-2\"></app-search-button>\n\n            <app-favorite-items-button *ngIf=\"checkFavorite()\" class=\"ml-4 mobile:ml-2\"></app-favorite-items-button>\n\n\n            <app-language-select *ngIf=\"language && languages.length > 1\" class=\"ml-4 mobile:ml-2\">\n            </app-language-select>\n            <!-- <app-user-button class=\"flex\" *ngIf=\"canLogin() && !embedded \"></app-user-button> -->\n\n            <app-user-button class=\"flex\" *ngIf=\"canLogin() && !embedded && !sdk && login\" class=\"ml-4 mobile:ml-2\"></app-user-button>\n\n            <app-refresh-button *ngIf=\"refresh\" class=\"ml-4 mobile:ml-2\" (click)=\"refreshClicked()\"></app-refresh-button>\n\n\n        </div>\n\n\n    </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n    selector: 'app-refresh-button',\n    templateUrl: './refresh-button.component.html',\n    styleUrls: ['./refresh-button.component.scss'],\n})\nexport class RefreshButtonComponent implements OnInit {\n    constructor() {}\n\n    ngOnInit(): void {}\n\n}\n","<button class=\"refresh-btn\">\n    <app-icon name=\"refresh\" source=\"mat\" [size]=\"22\"></app-icon>\n</button>\n","import { Component, OnInit } from '@angular/core';\nimport { RoutingService } from '@aigens/core/src/app/pure/services/routing.service';\n\n@Component({\n  selector: 'app-search-button',\n  templateUrl: './search-button.component.html',\n  styleUrls: ['./search-button.component.scss']\n})\nexport class SearchButtonComponent implements OnInit {\n\n  constructor(private routingService: RoutingService) { }\n\n  ngOnInit(): void {\n  }\n\n    searchClicked() {\n        this.routingService.navigateModal('order/dialog/search-item', {}, {});\n\n    }\n}\n","<button class=\"search-btn mat-focus-indicator mat-button mat-button-base\" (click)=\"searchClicked()\">\n    <app-icon name=\"search\" source=\"mat\" [size]=\"20\"></app-icon>\n    <span class=\"mobile:hidden text-search\">{{'buttons.search' | translate}}</span>\n</button>\n","import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { Location } from '@angular/common';\nimport { RoutingService } from '@aigens/core/src/app/pure/services/routing.service';\n\n@Component({\n    selector: 'app-sub-bar',\n    templateUrl: './sub-bar.component.html',\n    styleUrls: ['./sub-bar.component.scss']\n})\nexport class SubBarComponent implements OnInit {\n\n    @Input() title: string = '';\n    @Input() dialog: boolean = true;\n    @Input() back: boolean = true;\n    @Input() close: boolean = true;\n    @Input() closeBackBehaviour: boolean = false;\n\n    @Output() backed: EventEmitter<any> = new EventEmitter();\n\n    @Output() closed: EventEmitter<any> = new EventEmitter();\n\n    @Input() customCloseLogic = false;\n\n    constructor(private location: Location, private routingService: RoutingService) {\n    }\n\n    ngOnInit(): void {\n\n\n    }\n\n    backClicked() {\n\n        if (this.backed.observers.length > 0) {\n            this.backed.emit({});\n        } else {\n            this.routingService.navigateCloseModal();\n        }\n\n\n    }\n\n    closeClicked() {\n        if (!this.customCloseLogic) {\n            this.routingService.navigateCloseAllModal();\n        }\n        this.closed.emit();\n\n    }\n}\n","<div class=\"mat-toolbar header mat-toolbar-single-row justify-center\">\n\n    <div class=\"flex items-center justify-between w-full\">\n\n        <div left class=\"div-button flex items-center\">\n\n            <button *ngIf=\"back\" class=\"back-btn mat-focus-indicator mat-icon-button mat-button-base\"\n                (click)=\"backClicked()\" data-testid=\"item-detail-back-button\">\n                <app-icon name=\"arrow_back_ios\" source=\"mat\" [size]=\"18\"></app-icon>\n            </button>\n\n            <ng-content select=\"[left]\"></ng-content>\n\n        </div>\n\n        <div center>\n            <span *ngIf=\"title\" class=\"sb-title font-bold\">{{title}}</span>\n        </div>\n\n        <div right class=\"div-button flex items-center\">\n\n            <ng-content select=\"[right]\"></ng-content>\n\n            <button *ngIf=\"close\" class=\"close-btn mat-focus-indicator mat-icon-button mat-button-base\"\n                (click)=\"closeBackBehaviour ? backClicked() : closeClicked()\">\n                <app-icon name=\"close\" source=\"mat\" [size]=\"24\"></app-icon>\n            </button>\n\n        </div>\n\n    </div>\n\n</div>","import { ChangeDetectorRef, Component, ContentChild, Input, OnInit, TemplateRef } from '@angular/core';\n\n// import Swiper core and required modules\n/*\nimport SwiperCore, {\n    Autoplay, Navigation,\n    Pagination\n} from 'swiper/core';\n*/\n\n\n// install Swiper modules\n//SwiperCore.use([Navigation, Pagination, Autoplay]);\n\n@Component({\n    selector: 'app-swiper',\n    templateUrl: './swiper.component.html',\n    styleUrls: ['./swiper.component.scss']\n})\nexport class SwiperComponent implements OnInit {\n\n    @ContentChild(TemplateRef) templateVariable: TemplateRef<any>;\n\n    //@Input('gap') gap: any = 10;\n    @Input('contents') contents: any[] = [];\n    @Input('config') config: any = {};\n\n    @Input('autoplay') autoplay: boolean | any = false;\n    @Input('loop') loop: boolean = true;\n\n    gap: any = 10;\n\n    /*\n    config: any = {\n        slidesPerView: 'auto',\n        spaceBetween: 20,\n        breakpoints: {\n            // when window width is >= 320px\n            320: {\n                slidesPerView: 2.5,\n                spaceBetween: 10\n            },\n            640: {\n                slidesPerView: 3,\n                spaceBetween: 20\n            },\n            960: {\n                slidesPerView: 3.5,\n                spaceBetween: 20\n            },\n            1440: {\n                slidesPerView: 4,\n                spaceBetween: 20\n            }\n        }\n    };\n    */\n\n    //@ViewChild('leftNav', {read: ElementRef, static:false}) leftNav: ElementRef;\n    //@ViewChild('rightNav', {read: ElementRef, static:false}) rightNav: ElementRef;\n\n    showLeft: boolean = false;\n    showRight: boolean = true;\n\n    constructor(private ref: ChangeDetectorRef) { }\n\n    ngOnInit(): void {\n        \n        console.log(\"config\", this.config);\n\n        this.gap = this.config?.spaceBetween || 10;\n    }\n\n    onSlideChange(event) {\n\n        this.showLeft = !event.isBeginning;\n        this.showRight = !event.isEnd;\n\n        //console.log(\"EVENT\", event);\n\n        this.ref.detectChanges();\n    }\n\n}\n","<!--\n\n<button #leftNav [ngStyle]=\"{'visibility': showLeft ? 'visible' : 'hidden'}\" >\n    <app-icon class=\"swiper-left\" name=\"chevron_left\" size=\"20\" source=\"mat\"></app-icon>\n</button>\n\n<swiper [config]=\"config\" [slidesPerView]=\"'auto'\" [spaceBetween]=\"20\" (slideChange)=\"onSlideChange($event)\" [navigation]=\"{\n      prevEl: leftNav,\n      nextEl: rightNav\n    }\"  [autoHeight]=\"true\" [autoplay]=\"autoplay\" [loop]=\"loop\">\n\n    <ng-template swiperSlide *ngFor=\"let content of contents\">\n        <ng-template [ngTemplateOutlet]=\"templateVariable\" [ngTemplateOutletContext]=\"{content: content}\"></ng-template>\n    </ng-template>\n\n</swiper>\n<button #rightNav [ngStyle]=\"{'visibility': showRight ? 'visible' : 'hidden'}\" >\n    <app-icon class=\"swiper-right\" name=\"chevron_right\" size=\"20\" source=\"mat\"></app-icon>\n</button>\n-->\n\n<!--\n    <div class=\"list\" [ngStyle]=\"{'gap': gap + 'px'}\">\n-->\n\n<div class=\"list\">\n \n    <ng-container *ngFor=\"let content of contents; let i = index;\" >\n        <div class=\"item\" [ngStyle]=\"{'margin-right': gap + 'px'}\">\n            <ng-template [ngTemplateOutlet]=\"templateVariable\" [ngTemplateOutletContext]=\"{content: content}\"></ng-template>\n\n        </div>\n    </ng-container>\n\n    <!--\n    <button class=\"btn\" (click)=\"toggle()\">\n        <app-icon *ngIf=\"!showAll && hideAfter < contents?.length\" name=\"more_horiz\" source=\"mat\"></app-icon>\n        <app-icon *ngIf=\"showAll\" name=\"expand_less\" source=\"mat\"></app-icon>\n    </button>\n    -->\n</div>\n","import { RoutingService } from '@aigens/core/src/app/pure/services/routing.service';\nimport { SubscribeService } from '@aigens/core/src/app/pure/services/subscribe.service';\nimport { Component, Injector, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TranslateService } from '@ngx-translate/core';\nimport { SettingManager } from '@aigens/core/src/app/pure/managers/setting-manager';\nimport { LazyService } from '@aigens/core/src/app/pure/services/lazy.service';\nimport { PlatformService } from '@aigens/core/src/app/pure/services/platform.service';\nimport { NavigationMenuService } from '@aigens/core/src/app/pure/services/navigation-menu.service';\nimport { PageParams } from '@aigens/core/src/app/pure/base/page-params';\n\n\n//import { CartService } from '@aigens/byod/src/app/byod/services/cart.service';\n\n\n\n@Component({\n    selector: 'app-user-button',\n    templateUrl: './user-button.component.html',\n    styleUrls: ['./user-button.component.scss']\n})\nexport class UserButtonComponent implements OnInit {\n\n    context: any;\n    showDropdown: boolean = false;\n\n    isBKH5 : boolean = false;\n\n    showCrmHome: boolean = true;\n\n    navParams: PageParams;\n\n\n    constructor(private injector: Injector, public t: TranslateService,\n        private router: Router, private routingService: RoutingService, private lazyService: LazyService, public settingManager: SettingManager, private ss: SubscribeService, private route: ActivatedRoute,\n        //private cartService: CartService\n        private platformService: PlatformService,\n        private navigationMenuService : NavigationMenuService\n    ) {\n\n        this.context = ss;\n\n        this.navParams = new PageParams();\n        this.navParams.route = this.route;\n\n        this.navParams.querys = this.route.snapshot.queryParams;\n        this.navParams.params = this.route.snapshot.params;\n\n        this.navParams.input = this.routingService.getAuxInput();\n        /*\n        if(!this.context.member){\n            this.context.member = this.getLocal(\"member\");\n        }\n        */\n    }\n\n    ngOnInit(): void {\n        //bksg h5 flow need to judge;\n        if(!this.platformService.isAliApp() && this.context.brandId==800001){\n            this.isBKH5 = true;\n        }\n\n        this.showCrmHome = !this.settingManager.get('hideNavCrmHome', false);\n    }\n\n\n    isLoggedIn() {\n\n        var member = this.context.member;\n\n        if (member && !member.guest) {\n            return true;\n        }\n\n        return false;\n\n    }\n\n    loginClicked() {\n\n        this.goLogin();\n    }\n\n    logoutClicked() {\n\n        if ((this.settingManager.get('mandatoryLogin', false) === true) && window.location.href.includes(\"/order/\")) {\n            let title = this.t.instant('ux.nav-bar.logout')\n            let message = this.t.instant('ux.nav-bar.logout-message')\n\n            var dialogService = this.lazyService.getService(\"DialogService\");\n            dialogService.showConfirm(title, message).subscribe((data) => {\n\n                if (\"confirm\" == data) {\n                    this.processLogout();\n                } else {\n                    return;\n                }\n            });\n        } else {\n            this.processLogout();\n        }\n    }\n\n\n    processLogout() {\n        this.ss.next('member', null);\n        this.ss.next('membership', null);\n        this.ss.next('sessionId', null);\n\n        this.ss.logout();\n\n        localStorage.setItem('member', null);\n        localStorage.setItem('session', null);\n\n        this.routingService.goHome(window.location.href);\n    }\n\n    goLogin() {\n\n        console.log('go login', this);\n        let path = '';\n        if (this.context?.group) {\n            path = `auth/login/group/${this.context.groupId}`;\n        } else {\n            path = `auth/login/brand/${this.context.brandId}`;\n        }\n        this.routingService.navigateModal(path);\n\n    }\n\n\n    accountClicked() {\n\n        //handle the redirect of member profile button\n        var module = \"standard\";\n        var miniConfig = window['aigens']?.miniapp;\n        if (miniConfig?.module === \"miniapp\") {\n            module = miniConfig.module;\n            if (this.context.groupId && this.context.brandId) {\n                var path = `miniapp/crm/brand/${this.context.brandId}/membership`;\n                this.router.navigate([path], { queryParamsHandling: 'merge' });\n            }\n\n\n        }\n        else {\n            const params = {};\n\n            const routeStoreId = this.route?.snapshot?.paramMap?.get('storeId')\n\n            const tempConfirmedStore = this.navParams.get('confirmedStore') == null || this.navParams.get('confirmedStore') === 'true';\n            const tempConfirmedMode = this.navParams.get('confirmedMode') == null || this.navParams.get('confirmedMode') === 'true';\n\n            //Peter: commented out this due to deps violation\n            /*\n            if ((this.context?.storeId || routeStoreId) && this.orderContext.confirmedStore) {\n                params['storeId'] = routeStoreId ?? this.context?.storeId;\n            }\n            const mode = this.route?.snapshot?.paramMap?.get('mode') ?? null;\n            if (mode && this.orderContext.confirmedMode) {\n                params['mode'] = mode;\n            }*/\n\n            //Peter: changed to this, might not work.\n            if ((this.context?.storeId || routeStoreId) && tempConfirmedStore) {\n                params['storeId'] = routeStoreId ?? this.context?.storeId;\n            }\n            const mode = this.route?.snapshot?.paramMap?.get('mode') ?? null;\n            if (mode && tempConfirmedMode) {\n                params['mode'] = mode;\n            }\n\n            params['back'] = null;\n\n            const brandId = this.context.brandId ?? this.context?.crm?.brandId;\n\n            if (this.navigationMenuService.getNavParams(window.location.href, 'brand')){ // check if the user go into the crm from brand home\n                const path = `/crm/brand/${this.context.brandId}/home`;\n\n                params['brandId'] = this.navigationMenuService.getNavParams(window.location.href, 'brand');\n\n                this.router.navigate([path], { queryParams: params, queryParamsHandling: 'merge' });\n            }\n            else if (this.context.groupId && !brandId) {\n                const path = `/crm/group/${this.context.groupId}/home`;\n                this.router.navigate([path], { queryParams: params, queryParamsHandling: 'merge' });\n            }\n            else if (this.context.groupId && brandId && !this.context?.storeId) {\n                const path = `/crm/brand/${brandId}/home`;\n                params['brandId'] = brandId;\n                if(this.context.courtId){\n                    params['courtId'] = this.context?.courtId;\n                }\n                this.router.navigate([path], { queryParams: params, queryParamsHandling: 'merge' });\n            }\n            else if (this.context.groupId && brandId && this.context?.storeId) {\n                const path = `/crm/brand/${brandId}/home`;\n                if(this.context.courtId){\n                    params['courtId'] = this.context?.courtId;\n                }\n                this.router.navigate([path], { queryParams: params, queryParamsHandling: 'merge' });\n            }\n        }\n\n        this.dismissClicked();\n\n    }\n\n    selectClicked() {\n\n        this.showDropdown = !this.showDropdown;\n\n    }\n\n    dismissClicked() {\n        this.showDropdown = false;\n    }\n\n\n    getFristString(str: string) {\n        return str?.slice(0, 1);\n    }\n\n    goProfile() {\n        this.showDropdown = false;\n        let brandId = this.context.brandId;\n        let path = `/miniapp/account-info/brand/${brandId}`;\n        this.routingService.navigate(path, { queryParams: {} });\n    }\n\n}\n","<button *ngIf=\"!isLoggedIn()\" class=\"btn-login-register mobile:hidden tablet:hidden\" (click)=\"loginClicked()\" data-testid=\"login-or-signUp-button\">\n    <h4>{{'ux.nav-bar.login-register' | translate}}</h4>\n</button>\n\n<button *ngIf=\"!isLoggedIn()\" class=\"btn-login-register desktop:hidden\" (click)=\"loginClicked()\" data-testid=\"login-or-signUp-button\">\n    <app-icon name=\"login\" [size]=\"20\" class=\"flex items-center\"></app-icon>\n</button>\n\n<ng-container *ngIf=\"context.member\">\n\n        <div *ngIf=\"showDropdown\" class=\"overlay z-40\" (click)=\"dismissClicked()\">\n        </div>\n\n        <button *ngIf=\"isLoggedIn()\" class=\"btn-after-login mat-focus-indicatior mat-button mat-button-base desktop:ml-0\" (click)=\"selectClicked()\" data-testid=\"memberBtn\">\n            <h4>{{getFristString(context.member?.name)}}</h4>\n        </button>\n\n        <div *ngIf=\"showDropdown && isLoggedIn()\"\n            class=\"234dsfds user-button desfj380df absolute right-0 top-7 z-50 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none \"\n            role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"menu-button\" tabindex=\"-1\">\n            <div role=\"none\">\n\n                <!-- <h5 class=\"info-header\" role=\"menuitem\" tabindex=\"-1\">Member Info</h5> -->\n                <!-- <div> divider</div> -->\n\n                <div class=\"info-box\" role=\"menuitem\" tabindex=\"-1\">\n                    <h4>{{'ux.nav-bar.member-name' | translate}}</h4>\n                    <h2 class=\"\">{{context.member?.name}}</h2>\n                </div>\n                <!-- <div> divider</div> -->\n                <div *ngIf=\"!isBKH5\">\n                    <button *ngIf=\"showCrmHome\" class=\"mp-btn block cursor-pointer\" role=\"menuitem\" tabindex=\"-1\" (click)=\"accountClicked()\">\n                        {{'ux.nav-bar.home' | translate}}\n                    </button>\n                    <button class=\"logout-btn block cursor-pointer\" role=\"menuitem\" tabindex=\"-1\" (click)=\"logoutClicked()\">\n                        {{'ux.nav-bar.logout' | translate}}\n                    </button>\n                </div>\n\n                <div *ngIf=\"isBKH5\">\n                    <button class=\"mp-btn block cursor-pointer\" role=\"menuitem\" tabindex=\"-1\" (click)=\"goProfile()\">\n                        {{'miniapp.component.welcome-info.login-dropdown' | translate}}\n                    </button>\n                    <button class=\"logout-btn block cursor-pointer\" role=\"menuitem\" tabindex=\"-1\" (click)=\"logoutClicked()\">\n                        {{'miniapp.component.welcome-info.logout' | translate}}\n                    </button>\n                </div>\n            </div>\n        </div>\n</ng-container>\n","import { Component, ElementRef, EventEmitter, HostBinding, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { PlatformService } from '../../../../../../core/src/app/pure/services/platform.service';\n\n@Component({\n    selector: 'app-container-layout',\n    templateUrl: './container-layout.component.html',\n    styleUrls: ['./container-layout.component.scss']\n})\nexport class ContainerLayoutComponent implements OnInit {\n\n    @ViewChild('navContainer') navContainer: ElementRef;\n    @ViewChild('colContainer') colContainer: ElementRef;\n    @ViewChild('headerContainer') headerContainer: ElementRef;\n\n    @Input() loading: boolean = false;\n    @Input() empty: boolean = false;\n    @Input() over: boolean = false;\n\n    @Input() showNav: boolean = true;\n\n    @Input() layout: string = \"default\";\n    @Input() subLayout: string = \"default\";\n\n    @Input() stickyTop: number;\n\n    navHeight: number = 64;\n    headerHeight: number = 0;\n\n    //this set the parent tag with class=layout-default\n    @HostBinding('class')\n    get layoutClass(){\n        return \"ml-\" + this.layout + \" sl-\" + this.subLayout;\n    }\n\n    @Output() scrollOnCenter = new EventEmitter<any>();\n\n    private count = 0;\n    private timer;\n\n    // DO NOT CHANGE THIS CLASS: DISCUSS WITH PETER\n    // DO NOT CHANGE THIS CLASS: DISCUSS WITH PETER\n\n    constructor(private route: ActivatedRoute, public platformService: PlatformService) {\n\n        this.checkConfig();\n\n\n    }\n\n    ngOnInit(): void {\n\n    }\n\n    ngAfterViewInit() {\n\n        /*\n        setTimeout(()=>{\n            this.calNavHeight();\n        }, 1000);\n        */\n\n       this.timer = setInterval(()=>{\n            this.calNavHeight();\n        }, 1000);\n    }\n\n\n    private getOffset(container, field){\n\n        if(!container) return null;\n\n        var el = container.nativeElement;\n\n        if(el){\n            var offsets = el.getBoundingClientRect();\n            var height = offsets[field];\n\n            return height;\n        }\n\n        return null;\n\n    }\n\n    private calNavHeight(){\n\n        if(this.count >= 10){\n            if(this.timer) clearInterval(this.timer);\n            return;\n        }\n\n        var navHeight = this.getOffset(this.navContainer, \"height\");\n\n        if(navHeight > 10 && this.navHeight != navHeight){\n            this.navHeight = navHeight;\n            console.log(\"auto navHeight\", this.navHeight);\n        }\n\n        var headerHeight = this.getOffset(this.headerContainer, \"height\");\n        if(headerHeight > 10 && this.headerHeight != headerHeight){\n            this.headerHeight = headerHeight;\n            console.log(\"auto headerHeight\", this.headerHeight);\n        }\n        /*\n        var el = this.navContainer.nativeElement;\n\n        if(el){\n            var offsets = el.getBoundingClientRect();\n            // these are relative to the viewport, i.e. the window\n            //var top = offsets.top;\n            //var left = offsets.left;\n            var height = offsets.height;\n\n            if(height > 10 && this.navHeight != height){\n                this.navHeight = height;\n                console.log(\"auto navHeight\", this.navHeight);\n            }\n        }\n\n\n\n        var el2 = this.colContainer.nativeElement;\n\n        if(el2){\n            var offsets2 = el2.getBoundingClientRect();\n            // these are relative to the viewport, i.e. the window\n            //var top = offsets.top;\n            //var left = offsets.left;\n            //console.log(\"offsets2\", offsets2);\n\n            var top2 = offsets2.top;\n            if(top2 > 10 && this.colTop != top2){\n                this.colTop = top2;\n                console.log(\"auto colTop\", this.colTop);\n            }\n        }\n        */\n\n\n\n        this.count++;\n\n        //console.log(\"calNav\", this.count);\n        //console.log(\"nav bar offsets\", offsets);\n\n\n    }\n\n    onScroll($event: Event): void {\n        this.scrollOnCenter.emit($event);\n    }\n\n\n    checkConfig(){\n\n\n        var data = this.route.snapshot.data;\n\n        if(data.navbar === false){\n            console.log(\"route config hide nav\", this.route.snapshot.data);\n            this.showNav = false;\n        }\n\n    }\n}\n","<!-- DO NOT CHANGE THIS: DISCUSS WITH PETER -->\n\n\n<div class=\"cont\" [ngClass]=\"platformService.platformClasses\">\n\n    <div #navContainer class=\"nav\">\n\n        <ng-content *ngIf=\"showNav\" select=\"[nav]\"></ng-content>\n        <ng-content *ngIf=\"!loading && !empty\" select=\"[notice]\"></ng-content>\n\n        <div class=\"nav2\">\n            <ng-content *ngIf=\"!loading && !empty && !over\" select=\"[nav2]\"></ng-content>\n        </div>\n    </div>\n\n    <div class=\"empty\" *ngIf=\"empty\">\n        <ng-content select=\"[empty]\"></ng-content>\n    </div>\n\n    <div class=\"loading\" *ngIf=\"loading\">\n        <ng-content select=\"[loading]\"></ng-content>\n    </div>\n\n    <div #headerContainer class=\"header\" *ngIf=\"!loading && !empty && !over\">\n        <ng-content select=\"[header]\"></ng-content>\n    </div>\n\n    <div #colContainer class=\"columns\" *ngIf=\"!loading && !empty\">\n\n        <div class=\"left\" [ngStyle]=\"{'top.px': stickyTop || navHeight}\">\n            <ng-content select=\"[left]\"></ng-content>\n        </div>\n\n        <div class=\"middle\">\n            <div class=\"center\" (scroll)=\"onScroll($event)\">\n                <ng-content select=\"[center]\"></ng-content>\n            </div>\n\n\n        </div>\n\n        <div class=\"right\" [ngStyle]=\"{'top.px': stickyTop || navHeight}\">\n            <ng-content select=\"[right]\"></ng-content>\n        </div>\n\n        <div class=\"over\" *ngIf=\"!loading && !empty && over\">\n            <ng-content select=\"[over]\"></ng-content>\n        </div>\n\n    </div>\n\n    <div class=\"action desktop:hidden\">\n        <ng-content select=\"[action]\"></ng-content>\n    </div>\n\n    <div class=\"footer hidden desktop:block\" *ngIf=\"!loading && !empty\">\n        <ng-content select=\"[footer]\"></ng-content>\n    </div>\n\n    <div class=\"status hidden mobile:block\" *ngIf=\"!loading && !empty\">\n        <ng-content select=\"[status]\"></ng-content>\n    </div>\n\n\n\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { UiModule } from '../../../../ui/src/app/ui/ui.module';\nimport { FooterComponent } from './components/footer/footer.component';\nimport { LanguageSelectComponent } from './components/language-select/language-select.component';\nimport { NavBarComponent } from './components/nav-bar/nav-bar.component';\nimport { SubBarComponent } from './components/sub-bar/sub-bar.component';\n//import { SwiperModule } from 'swiper/angular';\nimport { SwiperComponent } from './components/swiper/swiper.component';\nimport { UserButtonComponent } from './components/user-button/user-button.component';\nimport { ContainerLayoutComponent } from './layouts/container-layout/container-layout.component';\nimport { SearchButtonComponent } from './components/search-button/search-button.component';\nimport { FavoriteItemsButtonComponent } from './components/favorite-items-button/favorite-items-button.component';\nimport { RefreshButtonComponent } from './components/refresh-button/refresh-button.component';\n\nconst MY_COMPONENTS = [\n    NavBarComponent, LanguageSelectComponent, ContainerLayoutComponent, SwiperComponent, UserButtonComponent, SubBarComponent , FooterComponent, FavoriteItemsButtonComponent\n];\n\nconst MY_PIPES = [\n];\n\n//PLEASE DO NOT INCLUDE MATERIAL DEPENDENCY\n@NgModule({\n    declarations: [\n        ...MY_COMPONENTS,\n        ...MY_PIPES,\n        SearchButtonComponent,\n        RefreshButtonComponent\n    ],\n    imports: [\n        CommonModule,\n        TranslateModule,\n        UiModule,\n        //SwiperModule\n    ],\n    exports: [\n        ...MY_COMPONENTS,\n        ...MY_PIPES\n    ]\n})\nexport class UxModule { }\n","var map = {\n\t\"./locale\": 86333,\n\t\"./locale.js\": 86333\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 11748;","/* (ignored) */","/* (ignored) */"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[200,201,202]}